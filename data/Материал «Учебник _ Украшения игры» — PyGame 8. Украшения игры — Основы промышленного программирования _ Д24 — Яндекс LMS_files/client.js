(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[818],{17238:(e,t,s)=>{var n={"./correct.png":17596,"./correct@2x.png":37260,"./correct@3x.png":50231,"./correct@4x.png":98474,"./incorrect.png":49387,"./incorrect@2x.png":28917,"./incorrect@3x.png":63466,"./incorrect@4x.png":29015,"./skipped.png":19466,"./skipped@2x.png":11674,"./skipped@3x.png":58629,"./skipped@4x.png":26076};function r(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=17238},61172:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var n=s(96540),r=s(80545),a=s(4400),i=s(21840),o=s(96802);const l=e=>{let{lang:t}=e;const{brand:s}=(0,i.lk)(),l=a.Ru.text({id:s===o.m.YANGO?"yango-lyceum":"lyceum",keyset:"organizations"});return n.createElement(r.m,{defaultTitle:l,titleTemplate:"%s — ".concat(l)},n.createElement("html",{lang:t}),n.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}))};l.displayName="BaseHelmet"},57046:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var n=s(96540),r=s(44473),a=s(4400),i=s(12215),o=s.n(i);const l=e=>{class t extends n.Component{constructor(e){super(e),this.state={updateKey:1,selectedLanguage:this.props.data.lang.selected,availableLanguages:this.props.data.lang.available,expectedTreeState:"mounted"},this.onLanguageChange=e=>{(0,r.V3)(e),a.Ig.set(e),(e=>{o().set("language",e,{expires:31536e6})})(e),this.setState((t=>Object.assign({},t,{updateKey:t.updateKey+1,selectedLanguage:e,expectedTreeState:"unmounted"}))),setTimeout((()=>{this.setState((e=>Object.assign({},e,{expectedTreeState:"mounted"})))}),0)},(0,r.V3)(e.data.lang.selected),a.Ig.set(e.data.lang.selected),(0,a.vM)(e.translation)}render(){return n.createElement(e,Object.assign({},this.props,{i18n:Object.assign({},this.state,{onLanguageChange:this.onLanguageChange})}))}}return t.displayName="WithTranslationComponent",t}},15992:(e,t,s)=>{"use strict";s.d(t,{N:()=>_});var n=s(96540),r=s(16683),a=s(24180),i=s(80243),o=s(42306),l=s(96802),c=s(41915),u=s(55838),d=s(782),m=s(22983),p=s(98889),h=s(89093),E=s(21840),g=s(52722),y=s(94183),f=s(85867),S=s(5820),b=s(16982),v=s(93695),N=s(61172),I=s(11743),T=s(57046),k=s(17779);const C=(0,i.Ay)({resolved:{},chunkName:()=>"hrdsApp",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!s.m[t]},importAsync:()=>Promise.all([s.e(718),s.e(383)]).then(s.bind(s,61800)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return s(t)},resolve:()=>61800}),w=Object.keys(v.uy).map((e=>(0,o.match)(v.uy[e].template))),A="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,O=e=>{const{pathname:t}=(0,a.zy)(),s=w.some((e=>Boolean(e(t))));return A((()=>{const e=document.getElementById("lmsLegoStyle"),t=document.documentElement,n=document.body;if(!e)return void console.warn("Lego styles are not presented");const{classList:r}=t,{classList:a}=n;e.disabled=s,r.toggle("lms-hrds",s);const i=s?window.__hrdsTheme:window.__legoTheme,o=s?window.__legoTheme:window.__hrdsTheme;a.remove(...o.split(" ")),a.add(...i.split(" "))}),[t]),s?n.createElement(C,null):n.createElement(k.I,e)};class R extends n.Component{constructor(e){super(e),this.store=(0,y.U)(this.props.state)}componentDidMount(){(0,f.B)(this.props.state);try{var e,t,s;null==(e=window)||null==(t=e.Ya)||null==(s=t.Rum)||s.sendHeroElement()}catch(e){console.error(e)}}render(){const{data:e,i18n:t}=this.props,s=(0,S.n)(e.currentUrl)?l.m.YANGO:l.m.YANDEX,{isPathUnknown:a}=e,i={language:t.selectedLanguage,availableLanguages:t.availableLanguages,tld:e.tld,isTestPassport:e.isTestPassport,hostname:e.hostname,onChangeLanguage:t.onLanguageChange,brand:s};return n.createElement(E.GL,{settings:i},n.createElement(I.U.Provider,{value:e.yandexChats},n.createElement(d.rE,{avatarOptions:{host:e.avatarHost}},n.createElement(p.Cj,{fileLimits:e.fileLimits},n.createElement(h.b,{id:e.lyceumBotId},n.createElement(m.yb,{options:e.contest},n.createElement(r.Kq,{store:this.store},"mounted"===t.expectedTreeState&&n.createElement(c.A,{renderFallback:g.ft},n.createElement(u.A,e.metrika),n.createElement(b.A,{lang:e.faviconLang}),n.createElement(N.f,{lang:e.lang.selected}),n.createElement(O,{isPathUnknown:a,data:e,i18n:t,brand:s})))))))))}}R.displayName="DesktopBundle";const _=(0,T.C)(R)},73184:(e,t,s)=>{"use strict";s(7452);var n=s(96540),r=s(40961),a=s(54625),i=s(80545),o=s(80243),l=s(16854),c=s(15992);const u=window.STATIC_DATA;delete window.STATIC_DATA;const d=window.INITIAL_STATE;delete window.INITIAL_STATE;const m=d.users&&d.users.user?d.users.user.uid.toString():"";u.errorLogging.enabled&&l.W.init(m),(0,o.ai)((()=>{(0,r.hydrate)(n.createElement(i.v,null,n.createElement(a.Kd,null,n.createElement(c.N,{data:u,state:d}))),document.getElementById("root"))}))},17779:(e,t,s)=>{"use strict";s.d(t,{I:()=>MA});var n=s(306),r=s.n(n),a=s(96540),i=s(24180),o=s(16683),l=s(4400);const c=" ",u=(0,a.forwardRef)(((e,t)=>a.createElement("a",Object.assign({ref:t,rel:"noopener noreferrer",target:"_blank"},e))));var d=s(74291);class m extends d.Cf{}var p=s(93695);let h=function(e){return e.Active="active",e.Archived="archived",e.Draft="draft",e.Deleted="deleted",e}({}),E=function(e){return e.Student="student",e.Teacher="teacher",e.Methodist="methodist",e}({}),g=function(e){return e.Schedule="schedule",e.Conditional="conditional",e}({});function y(e,t){return!(!e||!t)&&e.groups.includes(t)}var f=s(5802),S=s(83573),b=s(96802);class v extends a.Component{constructor(){super(...arguments),this.linkClickHandler=()=>{(0,f.n_)("ButtonHelp",{uid:this.props.userUid})},this.renderHelpLink=e=>{var t;const{courseMap:s,type:n}=this.props,r=Number(e.match.params.courseId),i=Number(e.match.params.groupId),o=null==(t=s[r])?void 0:t.find((e=>e.groups.includes(i)));if(!y(o,i))return null;const{role:c}=o;let d;switch(c){case E.Student:d=l.Ru.text({id:n===b.m.YANGO?"yango-student-help-url":"student-help-url",keyset:"common"});break;case E.Teacher:case E.Methodist:d=l.Ru.text({id:n===b.m.YANGO?"yango-teacher-help-url":"teacher-help-url",keyset:"common"});break;default:throw new m("Role not supported",{role:c})}return a.createElement(u,{onClick:this.linkClickHandler,className:this.props.linkClassName,href:(0,S.r)(d)},l.Ru.text({id:"help"}))}}render(){return a.createElement(i.qh,{path:p.oi.courseDetails.template,render:this.renderHelpLink})}}v.displayName="Help";const N=v,I=(0,i.y)((0,o.Ng)((function(e){const{courses:{courseMap:t}}=e;return{courseMap:t}}))(N));var T=s(34946);const k=r().with("footer"),C=(new Date).getUTCFullYear(),w=C>2018?"2018 – ".concat(C):"2018";class A extends a.Component{constructor(){super(...arguments),this.renderCopyright=e=>a.createElement("div",{className:k("copyright")},"© ",w,c,c,a.createElement(u,{className:k("yandex-link"),href:l.Ru.text({id:e===b.m.YANGO?"link-yango-url":"link-yandex-url"})},l.Ru.text({id:e===b.m.YANGO?"link-yango-text":"link-yandex-text"})))}render(){const{withHelpLink:e=!1,userUid:t,type:s}=this.props;return a.createElement("footer",{className:k()},a.createElement("div",{className:k("controls")},e&&a.createElement(I,{userUid:t,linkClassName:k("help-link"),type:s})),a.createElement("div",{className:k("legal")},a.createElement("div",null,l.Ru.markdown({id:s===b.m.YANGO?"yango-legal-notice-line":"legal-notice-line",keyset:"common"})),this.renderCopyright(s)))}}A.displayName="Footer";const O=(0,o.Ng)((function(e){return{userUid:(0,T.yZ)(e)}}))(A);var R=s(7217),_=s(82960),L=s(54625);(0,s(94183).U)();const M=()=>(0,o.wA)(),P=o.d4;var x=s(5882),D=s(54938);const F={courseSchedule:new x.s("/courses/:courseId/groups/:groupId/schedule")},z=((0,D.k)(F),[{exact:!0,key:"course-details",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.oi.courseDetails.build({courseId:e,groupId:t})},{exact:!0,key:"course-tasks",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.at.courseTasks.build({courseId:e,groupId:t})},{exact:!0,key:"course-schedule",passTypes:[g.Schedule],buildUrl:(e,t)=>F.courseSchedule.build({courseId:e,groupId:t})},{exact:!0,key:"course-p2p",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.at.courseReviews.build({courseId:e,groupId:t})},{exact:!0,key:"course-progress",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.at.courseProgress.build({courseId:e,groupId:t})}]),j=[{exact:!0,key:"course-details",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.oi.courseDetails.build({courseId:e,groupId:t})},{exact:!0,key:"course-solutions",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.ZZ.courseSolutions.build({courseId:e,groupId:t})},{exact:!0,key:"course-reviews",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.ZZ.courseReviews.build({courseId:e,groupId:t})},{exact:!0,key:"course-schedule",passTypes:[g.Schedule],buildUrl:(e,t)=>F.courseSchedule.build({courseId:e,groupId:t})},{key:"course-progress",passTypes:[g.Schedule,g.Conditional],buildUrl:(e,t)=>p.ZZ.courseProgress.build({courseId:e,groupId:t})}];var U=s(1081);const H=e=>e.courses.courseMap,Q=(0,U.Mz)([H,e=>e.courses.allIds],((e,t)=>t.reduce(((t,s)=>[...t,...e[s]]),[])));function V(e,t,s){var n;return null==(n=e.courses.courseMap[t])?void 0:n.find((e=>e.groups.includes(s)))}function G(e){const t=Q(e);return t.some((e=>e&&e.role===E.Methodist))?E.Methodist:t.some((e=>e&&e.role===E.Teacher))?E.Teacher:E.Student}function B(e){return e.courses.years}function W(e,t){const s=P((s=>V(s,e,t)));if(!s)throw new d.dH("No course data",{courseId:e});return s}function J(e){return e.courseDetails.courseDetails}function K(e){return e.courseDetails.fetchStatus}function Z(e){return e.courseDetails.fetchError}function Y(e){return e.courseDetails.courseBanners}function q(e){return e.courseDetails.courseLogo}var $=s(91992);const X=["className","courseId","groupId","theme","onNavItemClick"],ee=r().with("course-nav"),te=e=>{const{className:t,courseId:s,groupId:n,theme:r="dark",onNavItemClick:i}=e,o=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,X),c=W(s,n),u=P(J),d=null==u?void 0:u.showTasks,m=(0,a.useMemo)((()=>function(e,t){let s,{enableP2p:n=!0,showTasks:r=!0,showProgress:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t){case E.Student:s=z,n||(s=s.filter((e=>"course-p2p"!==e.key))),r||(s=s.filter((e=>"course-tasks"!==e.key))),a||(s=s.filter((e=>"course-progress"!==e.key)));break;case E.Teacher:case E.Methodist:s=j,n||(s=s.filter((e=>"course-reviews"!==e.key)));break;default:s=[]}return s.filter((t=>t.passTypes.includes(e)))}(c.passType,c.role,{enableP2p:0!==c.reviewsType,showTasks:d,showProgress:c.isAcademicRecordAvailableForStudents})),[c.passType,d,c.reviewsType,c.role,c.isAcademicRecordAvailableForStudents]);return a.createElement("nav",Object.assign({},o,{className:(0,$.j)(ee("",{theme:r}),t)}),a.createElement("ul",{className:ee("items")},s===(null==u?void 0:u.id)&&u?m.map((e=>a.createElement("li",{key:e.key},a.createElement(L.k2,{exact:e.exact,activeClassName:ee("link",{active:!0}),className:ee("link"),to:e.buildUrl(s.toString(),n.toString()),onClick:i},l.Ru.text({id:e.key,keyset:"courses"}))))):a.createElement("li",{style:{height:"48px"}})))};te.displayName="CourseNav";const se=te;var ne=s(4392);const re=function(){const e=[];for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];for(const t of s)"string"==typeof t?e.push(t):t&&Object.keys(t).forEach((s=>{s&&t[s]&&e.push(s)}));return e.join(" ")},ae=["direction","type","size","className"],ie=e=>{const{direction:t,type:s,size:n,className:r}=e,i=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,ae);return a.createElement("span",Object.assign({"aria-hidden":!0,className:re(r,"icon","icon_type_".concat(s),"icon_size_".concat(n),t&&"icon_direction_".concat(t))},i))};ie.displayName="Icon";const oe=e=>{const{count:t}=e;return a.createElement("span",{title:String(t),"aria-hidden":!0,className:(0,$.j)("ticker",t?"ticker_state_normal":"ticker_state_empty")},a.createElement("span",{"data-lego":"react",className:"ticker__count"},a.createElement("div",{"data-lego":"react",className:"ticker__text a11y-hidden"},"Notifications"),a.createElement("span",{"data-lego":"react",title:String(t),className:"ticker__value ticker__plain"},t)))};let le;async function ce(e){return await(le||(le=new Promise((e=>{window.yandexChatWidgetCallback=()=>{e()};const t=document.getElementsByTagName("script")[0],s=document.createElement("script");s.async=!0,s.src="https://chat.s3.yandex.net/widget_ya.js",t.parentNode&&t.parentNode.insertBefore(s,t)}))),le),function(e){return new window.Ya.ChatWidget(Object.assign({serviceId:20,iframeUrlParams:{flags:"recommended_chats=0;disableNavigation=1;notification_suggest=0;onboarding=0"}},e))}(e)}oe.displayName="Ticker";var ue=s(11743);const de=r().with("header"),me=e=>{let{uid:t}=e;const s=(0,a.useRef)(null),[n,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(0),l=(0,a.useCallback)((()=>{n&&(n.showChat(),(0,f.n_)("ButtonBell",{uid:t}))}),[n,t]),{notificationBotGUID:c}=(0,a.useContext)(ue.U);return(0,ne.A)((async()=>{const e=await ce({mountNode:document.body,popupTargetNode:s.current?s.current:void 0,guid:c,theme:"hidden"});r(e),e.addListener("chatHide",(()=>{const e=document.querySelector(".ya-chat-popup");e&&(e.style.cssText="")})),e.addListener("unreadCounterChange",(e=>{o(e.value)}))})),a.createElement("div",{className:de("notifications",{mode:"chat"})},a.createElement("button",{type:"button",className:de("notification-button",{active:Boolean(i)}),onClick:l,ref:s},a.createElement(ie,{size:"l",type:"signal-outline"}),a.createElement(oe,{count:i})))};me.displayName="ChatNotifications";var pe=s(10987),he=s(82156),Ee=s(41915),ge=s(38890),ye=s(2267);const fe=e=>a.createElement(ye.Ay,Object.assign({followCursor:!0,animation:"fade",animateFill:!1,delay:0,theme:"dark",size:"small",placement:"bottom",trigger:"focus mouseenter"},e),e.children);fe.displayName="Tooltip";const Se=r().with("notification-center"),be=e=>{let{theme:t,unreadCount:s,hideAllNotifications:n}=e;return a.createElement("header",{className:Se("header")},a.createElement("h5",{className:Se("title",{theme:t})},l.Ru.text({id:"notifications-title",keyset:"notifications"})),a.createElement(fe,{content:l.Ru.text({id:"hide-all-notifications-hint",keyset:"notifications"})},a.createElement("span",null,a.createElement(ge.$,{className:Se("hide-all-button",{visible:Boolean(s)}),size:"s",theme:"clear",view:"lyceum",tabIndex:1,icon:e=>a.createElement(ie,{className:e,size:"l",type:"remove-all"}),"aria-label":l.Ru.text({id:"hide-all-notifications-hint",keyset:"notifications"}),onClick:n}))))};be.displayName="NotificationCenterHeader";var ve=s(49790),Ne=s(44473);const Ie=r().with("notification"),Te={dark:"remove-white",light:"remove"},ke=e=>{const{children:t,theme:s,url:n,addedTime:r,title:i,hideNotification:o,onLinkClick:c}=e,u=a.createElement("time",{className:Ie("time")},Ne.Ay.fromISO(r).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))),d=a.createElement(fe,{content:l.Ru.text({id:"hide-notification-hint",keyset:"notifications"})},a.createElement("span",null,a.createElement(ge.$,{tabIndex:1,className:Ie("hide-button"),size:"s",theme:"clear",view:"lyceum",icon:e=>a.createElement(ie,{className:e,size:"xs",type:Te[s]}),onClick:e=>{e.preventDefault(),e.stopPropagation(),o()},"aria-label":l.Ru.text({id:"hide-notification-hint",keyset:"notifications"})})));return n?a.createElement("div",{className:Ie({theme:s})},a.createElement(L.N_,{className:Ie("type_link"),to:n,onClick:()=>{o(),c&&c()}},i),t,u,d):a.createElement("div",{className:Ie({theme:s})},t,u,d)};ke.displayName="NotificationWrapper";let Ce=function(e){return e.Male="male",e.Female="female",e.Unspecified="unspecified",e}({});const we=["changedBy","newScore","oldScore"],Ae=r().with("notification"),Oe=e=>{const{changedBy:{gender:t,firstName:s,lastName:n},newScore:r}=e,i=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,we),o=l.Ru.text({id:"bonus-score-changed",keyset:"notifications"}),c=a.createElement("h2",{className:Ae("title"),title:o},o);return a.createElement(ke,Object.assign({},i,{title:c}),a.createElement("div",{className:Ae("body")},a.createElement(ie,{className:Ae("icon"),type:"present",size:"m"}),a.createElement("span",null,l.Ru.text({id:t&&t!==Ce.Unspecified?"".concat(t,"-teacher-has-set-score"):"teacher-has-set-score",keyset:"notifications",params:{teacher:"".concat(s," ").concat(n),score:l.Ru.text({id:"N-bonus-score",keyset:"notifications",params:{n:r,count:r}})}}))))};Oe.displayName="BonusScoreChanged";const Re=["teacher","solutionUrl"],_e=r().with("notification"),Le=e=>{const{teacher:t,solutionUrl:s}=e,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Re),r=a.createElement("h2",{className:_e("title")},a.createElement(ie,{className:_e("icon"),type:"clock",size:"xs",style:{height:"18px"}}),t.displayName);return a.createElement(ke,Object.assign({},n,{url:s,title:r}),a.createElement("div",{className:_e("body")},l.Ru.text({id:"solution-manual-check-time-expired-message",keyset:"notifications"})))};Le.displayName="SolutionManualCheckTimeExpired";const Me=["lessonId","type","title","course","group"],Pe=r().with("notification"),xe=e=>{const{lessonId:t,type:s,title:n,course:r,group:i}=e,o=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Me),c=p.oi.lessonDetails.build({courseId:r.toString(),groupId:i.toString(),lessonId:t.toString()}),u=a.createElement("h2",{className:Pe("title")},l.Ru.text({id:"".concat(s,"-lesson-opened"),keyset:"notifications"}));return a.createElement(ke,Object.assign({},o,{url:c,title:u}),a.createElement("div",{className:Pe("body",{type:"padded"})},n))};xe.displayName="LessonOpened";const De=r().with("indicator");let Fe=function(e){return e.DarkGreen="dark-green",e.DarkGrey="dark-grey",e.Green="green",e.Grey="grey",e.Red="red",e.White="white",e.Yellow="yellow",e}({}),ze=function(e){return e.Red="red",e}({}),je=function(e){return e.XS="xs",e.S="s",e.M="m",e.L="l",e}({});class Ue extends a.PureComponent{render(){const{cls:e,title:t,withDot:s,withTick:n,size:r,color:i,semiTransparent:o,dotColor:l,ariaLabel:c}=this.props;return a.createElement("div",{"aria-label":c,title:t,className:(0,$.j)(e,De({color:i,size:r,"semi-transparent_yes":o,"with-dot_yes":s,"dot-color":l}))},n&&a.createElement(ie,{size:"l"===r?"m":r,type:"grey"===i?"tick-green":"tick-white"}))}}Ue.displayName="Indicator";const He=Ue;let Qe=function(e){return e.InProgress="in-progress",e.Finished="finished",e}({});const Ve={large:je.L,small:je.XS},Ge={[Qe.Finished]:{color:Fe.Grey,withTick:!0},[Qe.InProgress]:{color:Fe.White}};class Be extends a.Component{render(){const{size:e,type:t}=this.props,s=Object.assign({size:Ve[e]},Ge[t]);return a.createElement(He,s)}}Be.displayName="LessonProgressIndicator";const We=Be,Je=r().with("superscript-icon");class Ke extends a.PureComponent{render(){return a.createElement("span",{className:Je("container")},a.createElement("span",{className:(0,$.j)(Je(),this.props.cls),title:this.props.children,"aria-hidden":"true"},this.props.children),a.createElement("span",{className:Je("label")},this.props.ariaLabel))}}Ke.displayName="SuperscriptIcon";const Ze=Ke;var Ye=s(64237),qe=s(74115);class $e extends a.PureComponent{render(){const{role:e=E.Student,score:t,scoreMax:s,sentAfterDeadline:n,hasActivityAfterDeadline:r,solutionStatus:i,ariaLabel:o}=this.props,c={[Ye.gt.Accepted]:{color:Fe.Green,withTick:!0},[Ye.gt.PartialAccepted]:{color:Fe.Green,withTick:!0},[Ye.gt.AcceptedAfterDeadline]:{color:Fe.Green,withTick:!0},[Ye.gt.New]:{color:Fe.Grey},[Ye.gt.Draft]:{color:Fe.DarkGrey},[Ye.gt.Review]:{color:e===E.Student?Fe.DarkGrey:Fe.Yellow},[Ye.gt.Uploaded]:{color:Fe.DarkGrey},[Ye.gt.AssignedToP2p]:{color:Fe.DarkGrey},[Ye.gt.OnClarifying]:{color:e===E.Student?Fe.DarkGrey:Fe.Yellow},[Ye.gt.AutoReview]:{color:Fe.DarkGrey},[Ye.gt.Rework]:{color:Fe.Red},[Ye.gt.Wrong]:{color:Fe.Red},[Ye.gt.NotSolved]:{color:Fe.Red},[Ye.gt.SamplesPassed]:{color:Fe.Yellow},[qe.ql.Max]:{color:Fe.DarkGreen,withTick:!0}},u={ariaLabel:o,withDot:r,title:r?l.Ru.text({id:"has-activity-after-deadline",keyset:"solutions"}):void 0,dotColor:r?ze.Red:void 0},d={semiTransparent:Boolean(n)};return i?i===Ye.gt.Accepted&&t===s?a.createElement(He,Object.assign({},c[qe.ql.Max],d,u,{size:je.XS})):a.createElement(He,Object.assign({},c[i],d,u,{size:je.XS})):a.createElement(He,Object.assign({},c[qe.ql.New],d,u,{size:je.XS}))}}$e.displayName="TaskProgressIndicator";const Xe=$e,et=r().with("task-preview");class tt extends a.Component{render(){const{taskTitle:e,isTaskManuallyChecked:t,isTaskP2PChecked:s,scoreMax:n,score:r,solutionStatus:i,role:o=E.Student,lesson:c}=this.props;return a.createElement("div",{className:et()},a.createElement("div",{className:et("progress-indicator")},a.createElement(Xe,{role:o,score:r,scoreMax:n,solutionStatus:i})),a.createElement("div",{className:et("data")},a.createElement("span",{className:et("task-name")},e,t&&a.createElement(Ze,{cls:et("task-check-info"),ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),s&&a.createElement(Ze,{cls:et("task-check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"}))),c&&a.createElement("div",{className:et("lesson")},a.createElement(We,{size:"small",type:c.status}),a.createElement("span",{className:et("lesson-name")},c.title))))}}tt.displayName="TaskPreview";const st=tt,nt=["verdict","taskSolution"],rt=r().with("notification"),at=e=>{const{verdict:t,taskSolution:s}=e,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,nt),{title:r,course:i,group:o,id:c,lesson:u,scoreMax:d,shortTitle:m}=s.task;let h,g;u&&(g=p.at.taskDetails.build({courseId:i.toString(),groupId:o.toString(),lessonId:u.id.toString(),taskId:c.toString()}),h={title:u.title,status:u.isAccepted?Qe.Finished:Qe.InProgress});const y=l.Ru.text({id:"solution-checked",keyset:"notifications"}),f=l.Ru.text({id:t,keyset:"contest-verdicts"}),S="".concat(y,": ").concat(s.score,"/").concat(d,", ").concat(f),b=a.createElement("h2",{className:rt("title"),title:S},S);return a.createElement(ke,Object.assign({},n,{url:g,title:b}),a.createElement("div",{className:rt("body",{type:"task"})},a.createElement(st,{role:E.Student,lesson:h||null,scoreMax:d,solutionStatus:s.status.type,taskTitle:r||m})))};at.displayName="SubmissionChecked";const it=["author","taskSolution","courseMap","data"],ot=r().with("notification"),lt=e=>{var t;const{author:s,taskSolution:n,courseMap:r,data:i}=e,o=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,it),{course:l,lesson:c,group:u,id:d}=n.task,h=null==(t=r[l])?void 0:t.find((e=>e.groups.includes(u)));let g,y,f;if(h&&c){f={title:c.title,status:c.isAccepted?Qe.Finished:Qe.InProgress};const e={courseId:l.toString(),groupId:u.toString(),lessonId:c.id.toString(),taskId:d.toString()};switch(y=h.role,y){case E.Student:g=p.at.taskDetails.build(e);break;case E.Teacher:case E.Methodist:g=p.ZZ.taskSolutions.build(Object.assign({},e,{solutionId:n.id.toString()}));break;default:throw new m("Role not supported",{role:y})}}const S="".concat(s.displayName,": ").concat(i),b=a.createElement("h2",{className:ot("title"),title:S,dangerouslySetInnerHTML:{__html:S}});return a.createElement(ke,Object.assign({},o,{url:g,title:b}),a.createElement("div",{className:ot("body")},a.createElement(st,{role:y,lesson:f||null,scoreMax:n.task.scoreMax,solutionStatus:n.status.type,taskTitle:n.task.title})))};lt.displayName="TaskSolutionCommented";const ct=["task","score","status"],ut=r().with("notification"),dt=e=>{const{task:t,score:s,status:n}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,ct),{course:i,lesson:o,group:c,id:u,scoreMax:d,title:m}=t;let h,g;o&&(g=p.at.taskDetails.build({courseId:i.toString(),groupId:c.toString(),lessonId:o.id.toString(),taskId:u.toString()}),h={title:o.title,status:o.isAccepted?Qe.Finished:Qe.InProgress});const y=a.createElement("h2",{className:ut("title")},l.Ru.text({id:"solution-checked",keyset:"notifications"}),": ",s,"/",d);return a.createElement(ke,Object.assign({},r,{url:g,title:y}),a.createElement("div",{className:ut("body")},a.createElement(st,{role:E.Student,lesson:h||null,scoreMax:d,solutionStatus:n.type,taskTitle:m})))};dt.displayName="TaskSolutionReviewed";var mt=s(30872);let pt=function(e){return e.SubmissionChecked="submission-checked",e.TaskSolutionCommented="task-solution-commented",e.TaskSolutionReviewed="task-solution-reviewed",e.LessonOpened="lesson-opened",e.BonusScoreChanged="bonus-score-changed",e.SolutionManualCheckTimeExpired="task-solution-manual-check-time-expired",e.NewSubmissionInAcceptedSolution="new-submission-in-accepted-solution",e}({});const ht=["userDisplayName","url","taskTitle","submissionTime"],Et=r().with("notification"),gt=e=>{const{userDisplayName:t,url:s,taskTitle:n}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,ht),i=a.createElement("h2",{className:Et("title")},t,": ",l.Ru.text({id:"new-submission-in-accepted-solution-message",keyset:"notifications"}));return a.createElement(ke,Object.assign({},r,{url:s,title:i}),a.createElement("div",{className:Et("body")},n))};var yt;gt.displayName="NewSubmissionInAcceptedSolution";let ft=(yt=class extends a.PureComponent{render(){const{theme:e,courseMap:t,onNotificationClick:s,notification:{addedTime:n,objectData:r,type:i}}=this.props,o={theme:e,addedTime:n,onLinkClick:s,hideNotification:this.hideNotification};switch(i){case pt.LessonOpened:return a.createElement(xe,Object.assign({},o,r));case pt.TaskSolutionCommented:return a.createElement(lt,Object.assign({},o,r,{courseMap:t}));case pt.TaskSolutionReviewed:return a.createElement(dt,Object.assign({},o,r));case pt.SubmissionChecked:return a.createElement(at,Object.assign({},o,r));case pt.BonusScoreChanged:return a.createElement(Oe,Object.assign({},o,r));case pt.SolutionManualCheckTimeExpired:return a.createElement(Le,Object.assign({},o,r));case pt.NewSubmissionInAcceptedSolution:return a.createElement(gt,Object.assign({},o,r));default:return console.error(new d.gs("Notification type not supported",{type:i})),null}}hideNotification(){this.props.hide(this.props.notification.id)}},St=yt.prototype,bt="hideNotification",vt=[R.Q2],Nt=Object.getOwnPropertyDescriptor(yt.prototype,"hideNotification"),It=yt.prototype,Tt={},Object.keys(Nt).forEach((function(e){Tt[e]=Nt[e]})),Tt.enumerable=!!Tt.enumerable,Tt.configurable=!!Tt.configurable,("value"in Tt||Tt.initializer)&&(Tt.writable=!0),Tt=vt.slice().reverse().reduce((function(e,t){return t(St,bt,e)||e}),Tt),It&&void 0!==Tt.initializer&&(Tt.value=Tt.initializer?Tt.initializer.call(It):void 0,Tt.initializer=void 0),void 0===Tt.initializer&&Object.defineProperty(St,bt,Tt),yt);var St,bt,vt,Nt,It,Tt;ft.displayName="NotificationComponent";const kt=(0,o.Ng)((function(e){return{courseMap:H(e)}}),(function(e){return(0,_.zH)({hide:mt._b},e)}))(ft),Ct=r().with("notification-center"),wt=e=>{let{theme:t,notifications:s,onNotificationClick:n}=e;const r=P(T.yZ),i=(0,a.useCallback)((()=>{(0,f.n_)("ButtonBellChats",{uid:r}),n&&n()}),[n,r]);return a.createElement("ul",{className:Ct("list")},a.createElement(ve.TransitionGroup,{component:null},s.map((e=>a.createElement(ve.CSSTransition,{key:e.id,timeout:500,classNames:"fade"},a.createElement("li",{className:Ct("item",{theme:t})},a.createElement(kt,{theme:t,notification:e,onNotificationClick:i})))))))};wt.displayName="NotificationCenterList";var At=s(36261),Ot=s(44046);const Rt=r().with("notification-center");class _t extends a.Component{constructor(){super(...arguments),this.containerRef=(0,a.createRef)(),this.renderMain=()=>{const{unreadCount:e,fetchError:t,notifications:s,fetchStatus:n,theme:r,onNotificationClick:i}=this.props;if(!e)return this.renderEmptyListMessage();if(s.length)return a.createElement(wt,{notifications:s,theme:r,onNotificationClick:i});if(n===Ot.L.PENDING)return this.renderCenteredSpin();if(n===Ot.L.FAIL){const{id:e,keyset:s}=(0,l.T$)(t);return this.renderCenteredMessage(l.Ru.text({id:e,keyset:s}))}return null},this.shouldLoadMore=()=>{const{fetchStatus:e,notifications:t,unreadCount:s}=this.props;return e!==Ot.L.PENDING&&t.length<s},this.handleScroll=()=>{if(!this.shouldLoadMore())return;const e=this.containerRef.current;e&&(e.clientHeight+e.scrollTop<e.scrollHeight-250||this.props.fetchNotifications())},this.renderEmptyListMessage=()=>{const e=l.Ru.text({id:"notifications-empty-message",keyset:"notifications"});return this.renderCenteredMessage(e)},this.renderErrorMessage=()=>{const e=l.Ru.text({id:"internal-error",keyset:"errors"});return this.renderCenteredMessage(e)},this.renderCenteredMessage=e=>a.createElement("div",{className:Rt("message-wrapper")},a.createElement("p",{className:Rt("message")},e)),this.renderCenteredSpin=()=>a.createElement(he.t,{view:"default",progress:!0,size:"l",position:"center"})}componentDidMount(){this.props.unreadCount&&this.props.fetchNotifications()}componentDidUpdate(e,t,s){const n=this.containerRef.current;if(!n)return;if(null!==s)return void(n.scrollTop=n.scrollHeight-s);const r=n.scrollHeight-n.clientHeight;r&&r<=250&&this.shouldLoadMore()&&this.props.fetchNotifications()}getSnapshotBeforeUpdate(e){if(e.notifications.length>=this.props.notifications.length)return null;const[t]=e.notifications,[s]=this.props.notifications;if(!t||t.id===s.id)return null;const n=this.containerRef.current;return n?n.scrollHeight-n.scrollTop:null}render(){const{unreadCount:e,theme:t,hideNotifications:s}=this.props;return a.createElement("section",{className:Rt({theme:t})},a.createElement(be,{theme:t,unreadCount:e,hideAllNotifications:s}),a.createElement(Ee.A,{renderFallback:this.renderErrorMessage},a.createElement("main",{className:Rt("main"),ref:this.containerRef,onScroll:this.handleScroll},this.renderMain())))}}_t.displayName="NotificationCenter";const Lt=(0,o.Ng)((function(e){return{notifications:(0,At.AX)(e),unreadCount:(0,At.mb)(e),fetchStatus:(0,At.hE)(e),fetchError:(0,At.NP)(e)}}),(function(e){return(0,_.zH)({fetchNotifications:mt.bb,hideNotifications:mt.aG},e)}))(_t),Mt=r().with("header");class Pt extends a.Component{constructor(){super(...arguments),this.state={isPopupVisible:!1},this.notificationButton=a.createRef(),this.popupDirections=["bottom-end"],this.scopeRef=a.createRef(),this.handleDocumentFocusOut=e=>{const{isPopupVisible:t}=this.state;t&&this.scopeRef.current&&e.relatedTarget instanceof Node&&!this.scopeRef.current.contains(e.relatedTarget)&&this.togglePopup()},this.togglePopup=()=>{(0,f.n_)("ButtonBell",{uid:this.props.uid}),this.setState((e=>({isPopupVisible:!e.isPopupVisible})))}}componentDidMount(){const e=this.scopeRef.current;null==e||e.addEventListener("focusout",this.handleDocumentFocusOut,!1)}componentWillUnmount(){const e=this.scopeRef.current;null==e||e.removeEventListener("focusout",this.handleDocumentFocusOut,!1)}render(){const{notificationCount:e}=this.props,{isPopupVisible:t}=this.state;return a.createElement("div",{className:Mt("notifications",{mode:"system"}),ref:this.scopeRef},a.createElement("button",{ref:this.notificationButton,type:"button",className:Mt("notification-button",{active:Boolean(e)||t}),onClick:this.togglePopup,"aria-live":"polite","aria-expanded":t,"aria-label":l.Ru.text({id:"N-notifications",keyset:"notifications",params:{n:e,count:e}})},a.createElement(ie,{size:"l",type:"signal-outline"}),a.createElement(oe,{count:e})),a.createElement(pe.zD,{target:"anchor",anchor:this.notificationButton,direction:this.popupDirections,theme:"normal",mainOffset:4,scope:this.scopeRef,visible:t,onClose:this.togglePopup},a.createElement(Lt,{theme:"light",onNotificationClick:this.togglePopup})))}}Pt.displayName="SystemNotifications";const xt="true"===function(){const e=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage";try{e=window[t];const s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(t){return"undefined"==typeof window||t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}();return"undefined"!=typeof window&&e?window.localStorage.getItem("enableChats"):"false"}(),Dt=e=>{let{uid:t}=e;const s=P(At.mb);return xt?a.createElement(me,{uid:t}):a.createElement(Pt,{uid:t,notificationCount:s})};var Ft=s(61547),zt=s(29159),jt=s(36349),Ut=s(28199),Ht=s(29046),Qt=s(44068),Vt=s(26363),Gt=s(96397),Bt=s(98245),Wt=s(81140),Jt=s(98846),Kt=s(39311);const Zt=["cls","children","view","readOnly"],Yt=(0,Ut.compose)((0,Ut.composeU)(Ht.x,Qt.r),(0,Ut.composeU)(Vt.U,Gt.N,Bt.L),Wt.w,Jt.R)(Kt.a),qt=e=>{const{cls:t,children:s,view:n="lyceum",readOnly:r=!1}=e,i=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Zt);return a.createElement(Yt,Object.assign({className:t,readOnly:r,view:n},i),s)};qt.displayName="Textinput";var $t=s(78301);const Xt={root:"y2932c--root",button:"y2932c--button",modal:"y2932c--modal",input:"y2932c--input",inputButton:"y2932c--input-button",content:"y2932c--content",errorMessage:"y2932c--error-message",emptyMessage:"y2932c--empty-message",resultsTabs:"y2932c--results-tabs",disabledTab:"y2932c--disabled-tab",currentTab:"y2932c--current-tab",results:"y2932c--results",result:"y2932c--result",resultTitle:"y2932c--result-title",resultDescription:"y2932c--result-description",footer:"y2932c--footer"},es=(0,a.memo)((e=>a.createElement(L.N_,{className:Xt.result,to:e.url},a.createElement($t.D,{level:5,className:Xt.resultTitle,dangerouslySetInnerHTML:{__html:e.title}}),e.description&&a.createElement("p",{className:Xt.resultDescription,dangerouslySetInnerHTML:{__html:"".concat(e.description,"...")}})))),ts=e=>{let{query:t,error:s,isDisabled:n,isOpened:r,isLoaded:i,isLoading:o,isFailed:c,results:u,updateQuery:d,handleSpecialKey:m,toggleModal:p,sendSearchRequest:h,inputRef:E,innerRef:g}=e;return a.createElement("div",{className:Xt.root},a.createElement("button",{className:Xt.button,type:"button",onClick:p,"aria-label":l.Ru.text({id:"search-modal-heading",keyset:"common"})},a.createElement(ie,{size:"l",type:"search"})),a.createElement(jt.a,{innerRef:g,theme:"normal",visible:r,onClose:p},a.createElement("div",{className:Xt.modal},a.createElement($t.D,{level:3},l.Ru.text({id:"search-modal-heading",keyset:"common"})),a.createElement(qt,{value:t,controlRef:E,className:Xt.input,onChange:d,onKeyDown:m,placeholder:l.Ru.text({id:"search-input-placeholder",keyset:"common"}),size:"m",iconRight:a.createElement("button",{disabled:n,className:[Xt.button,Xt.inputButton].join(" "),onClick:h,type:"button","aria-label":l.Ru.text({id:"search-modal-heading",keyset:"common"}),children:"↵"})}),i&&u.length>0&&a.createElement("hr",null),a.createElement("div",{role:"status",className:Xt.content},o&&a.createElement(he.t,{view:"default",progress:!0,size:"l"}),c&&a.createElement("p",{className:Xt.errorMessage},s),i&&(0===u.length?a.createElement("p",{className:Xt.emptyMessage},l.Ru.text({id:"search-results-empty",keyset:"common"})):a.createElement(a.Fragment,null,a.createElement("ul",{className:Xt.results},u.map(((e,t)=>a.createElement("li",{key:"l-".concat(t.toString())},a.createElement("button",{tabIndex:-1,onClick:p},a.createElement(es,e))))))))),i&&u.length>0&&a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement("div",{className:Xt.footer},a.createElement("p",null,l.Ru.text({id:"search-results-size",keyset:"common"})," ",u.length))))))};ts.displayName="SearchView";const ss=()=>{const e=(0,a.useRef)(null),t=(0,a.useRef)(null),{query:s,error:n,isDisabled:r,isOpened:o,isLoaded:c,isLoading:u,isFailed:d,results:m,updateQuery:h,handleSpecialKey:E,toggleModal:g,sendSearchRequest:y}=function(e){const{params:t}=(0,i.W5)(p.oi.courseDetails.template),[s,n]=(0,a.useState)("initial"),[r,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[h,E]=(0,a.useState)([]);(0,a.useEffect)((()=>{let t;var s;return r?null==(s=e.current)||s.focus():t=setTimeout((()=>{u(""),n("initial"),E([])}),500),()=>clearTimeout(t)}),[e,r]);const g=(0,a.useCallback)((()=>{o((e=>!e))}),[]),y=(0,a.useCallback)((e=>{"loading"!==s&&u(e.target.value)}),[s]),f=(0,a.useCallback)((async()=>{if(c.length>=3)try{n("loading");const e=await(0,zt.Ay)(Ft.g.apiCourseSearch.build(t,{query:c}));E(e.map((e=>Object.assign({},e,{title:"".concat(l.Ru.text({id:"search-result-type-".concat(e.instance),keyset:"common"}),": ").concat(e.title)})))),n("loaded")}catch(e){console.error(e),n("failed"),m(l.Ru.text({id:"search-failed",keyset:"errors"}))}}),[t,c]),S=(0,a.useCallback)((e=>{"Enter"===e.key&&f()}),[f]);return(0,a.useMemo)((()=>({query:c,error:d,results:h,isOpened:r,isDisabled:c.length<3||"loading"===s,isLoading:"loading"===s,isInitial:"initial"===s,isFailed:"failed"===s,isLoaded:"loaded"===s,toggleModal:g,updateQuery:y,handleSpecialKey:S,sendSearchRequest:f,setError:m,setOpen:o})),[c,s,r,h,d,g,y,f,S])}(e);return(0,a.useEffect)((()=>{var e,s;!t.current||null!=(e=t.current.querySelector(".Modal-Table"))&&e.getAttribute("role")||null==(s=t.current.querySelector(".Modal-Table"))||s.setAttribute("role","none")}),[t.current,o]),a.createElement(ts,{isOpened:o,query:s,error:n,isDisabled:r,isLoaded:c,isLoading:u,isFailed:d,results:m,updateQuery:h,handleSpecialKey:E,toggleModal:g,sendSearchRequest:y,inputRef:e,innerRef:t})};ss.displayName="Search";const ns=r().with("login-link"),rs=e=>{let{passportHost:t,currentUrl:s}=e;const n="".concat(t,"/auth?retpath=").concat(encodeURIComponent(s));return a.createElement("a",{className:ns(),href:n},l.Ru.text({id:"login",keyset:"common"}))};rs.displayName="LoginLink";var as=s(21840);const is=s.p+"assets/e792798223d04a23a8b010cde8fb2704.svg",os=s.p+"assets/f0e74252ce8eca81248a9f21ec0dce34.svg",ls=r().with("logo"),cs={width:205,height:52},us={ru:is,en:os},ds=e=>{const t=(e=>{let{logo:t,logoHeight:s,logoWidth:n}=e;const r=(0,as.lk)(),a=l.Ru.text({id:r.brand===b.m.YANGO?"yango_logo":"logo"}),i=t||a,o={external:{logo:i,size:{height:null!=s?s:cs.height,width:null!=n?n:cs.width}},default:{logo:us[r.language],size:cs}};return i?o.external:o.default})(e);return a.createElement("div",{className:ls(),style:Object.assign({},t.size,{backgroundImage:"url(".concat(t.logo)})},e.children)};ds.displayName="LogoImage";const ms=r().with("logo"),ps=e=>{let{type:t,logo:s,logoWidth:n,logoHeight:r}=e;const i={className:ms("link",{type:"service"}),title:l.Ru.text({id:t===b.m.YANGO?"yango":"lyceum"})};return a.createElement(ds,{logo:s,logoWidth:n,logoHeight:r},a.createElement(u,Object.assign({},i,{href:"/",target:"_self"})))};ps.displayName="Logo";var hs=s(68121),Es=s(44982),gs=s(58472),ys=s(41700),fs=s(6934),Ss=s(73788);const bs=["children"],vs=["theme","children","cls"];function Ns(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}const Is=(0,Ut.compose)(hs.r,Ss.B,fs.I,Es.J,gs.v)(ys.z),Ts=a.memo((e=>{let{children:t}=e,s=Ns(e,bs);const[n,r]=(0,a.useState)(!1),i=(0,a.useMemo)((()=>n?void 0:{margin:"-9999px 0 0 -999px"}),[n]);return(0,a.useEffect)((()=>{s.visible&&(r(!0),document.dispatchEvent(new Event("documentchange")))}),[s.visible]),a.createElement(Is,Object.assign({theme:"normal"},s),a.createElement("div",{style:i},t))})),ks=r().with("old-popup");class Cs extends a.PureComponent{render(){const e=this.props,{theme:t="normal",children:s,cls:n}=e,r=Ns(e,vs);return a.createElement(pe.zD,Object.assign({className:(0,$.j)(n,ks()),theme:t},r),s)}}Cs.displayName="OldPopup";const ws=Cs,As=["children","className","activeClassName","view","wide","wideOnMobile","back","exact"],Os=r().with("nav-tab"),Rs=e=>{const{children:t,className:s,activeClassName:n,view:r="button",wide:i=!1,wideOnMobile:o=!1,back:l=!1,exact:c=!1}=e,u=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,As);return a.createElement(L.k2,Object.assign({},u,{exact:c,activeClassName:(0,$.j)(Os({active:!0}),n),className:(0,$.j)(Os({back:l,"wide-on-mobile":o,wide:i,view:r}),s)}),l&&a.createElement(ie,{className:Os("arrow-icon"),type:"arrow-short",size:"s",direction:"left"}),a.createElement("span",{className:Os("inner")},t))};Rs.displayName="NavTab";var _s=s(52722),Ls=s(89490),Ms=s(79405);const Ps=r().with("main-nav"),xs=(e,t)=>p.oi.courseDetails.build({courseId:e.toString(),groupId:t.toString()}),Ds=(0,a.forwardRef)(((e,t)=>{let{open:s,onNavItemClick:n,labelledBy:r}=e;const i=(0,a.useRef)(null),o=P(T.wz),[c,m]=(0,a.useState)(!0),[g,y]=(0,a.useState)(null),[f,S]=(0,a.useState)({}),[b,v]=(0,a.useState)([]),N=M();(0,a.useEffect)((()=>{const e=setTimeout((()=>{const e=document.querySelector(".".concat(Ps("active-element")));if(e&&null!=i&&i.current)try{i.current.scrollTo({top:e.offsetTop-i.current.clientHeight/2+e.clientHeight/2})}catch(t){e.scrollIntoView(!1),i.current&&(i.current.scrollTop+=i.current.clientHeight/2)}}),0);return()=>clearTimeout(e)}),[s,b]),(0,a.useEffect)((()=>{const e=null!=o&&o.isSuperuser?[h.Active,h.Archived,h.Draft]:h.Active;s&&c&&!b.length&&fetch(Ft.g.apiMyCourses.build({},{status:e})).then((e=>e.json())).then((e=>{N((0,Ms.h7)(e)),v(Object.values(e.courses.courseMap).flatMap((e=>e))),S(e.groups.groupMap)})).finally((()=>m(!1))).catch((e=>{e instanceof d.LG&&y(e),console.error(e)}))}),[N,s,c,b,null==o?void 0:o.isSuperuser]);const I=(0,a.useCallback)((e=>{const t=f[e.groups[0]].status!==Ls.a.Enrolled&&!(null!=o&&o.isSuperuser);return a.createElement(L.k2,{className:Ps("course-link",{disabled:t}),activeClassName:(0,$.j)(Ps("course-link",{active:!0}),Ps("active-element")),to:xs(e.id,e.groups[0]),onClick:n},e.title)}),[f,n,null==o?void 0:o.isSuperuser]),k=(0,a.useCallback)((e=>a.createElement(a.Fragment,null,e.title,a.createElement("ul",{className:Ps("group-list")},e.groups.map((t=>a.createElement("li",{key:t,className:Ps("group-item")},a.createElement(Rs,{view:"button",activeClassName:Ps("active-element"),to:xs(e.id,t),onClick:n},f[t].name))))))),[f,n]);return g?a.createElement("nav",{className:Ps("menu")},a.createElement("div",{className:Ps("error")},a.createElement(_s.Wt,{errorCode:g.code}))):a.createElement("nav",Object.assign({className:Ps("menu",{hidden:!s}),ref:t},r&&{"aria-labelledby":r}),a.createElement("header",{className:Ps("header")},a.createElement(u,{className:Ps("courses-link"),href:p.oi.courses.build()},l.Ru.text({id:"courses",keyset:"courses"}),a.createElement(ie,{size:"m",type:"new-window"}))),c?a.createElement("div",{className:Ps("spinner")},a.createElement(he.t,{view:"default",progress:!0,position:"center",size:"l"})):a.createElement("ul",{ref:i,className:Ps("course-list")},b.map((e=>a.createElement("li",{key:"".concat(e.id,"-").concat(e.role),className:Ps("course-item")},e.role===E.Student?I(e):k(e))))))})),Fs=()=>{const[e,t]=(0,a.useState)(!1),s=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useCallback)((()=>{t(!1)}),[]),i=(0,a.useCallback)((()=>{var e;null==(e=s.current)||e.focus()}),[]),o=(0,a.useCallback)((e=>{t(!1),e instanceof KeyboardEvent&&i()}),[r,i]),l=(0,a.useCallback)((t=>{e&&n.current&&t.relatedTarget instanceof Node&&!n.current.contains(t.relatedTarget)&&o(t)}),[e,n,o]);return(0,a.useEffect)((()=>{const e=n.current,t="focusout";return null==e||e.addEventListener(t,l,!1),()=>{null==e||e.removeEventListener(t,l,!1)}}),[l]),{buttonRef:s,scopeRef:n,isVisible:e,setVisible:t,close:r,focus:i,onClose:o}},zs=r().with("main-nav"),js=["bottom-start"],Us=e=>{let{currentCourse:t,currentGroup:s}=e;const{buttonRef:n,scopeRef:r,setVisible:i,onClose:o,isVisible:c}=Fs(),u=(0,a.useCallback)((e=>a.createElement(ie,{className:(0,$.j)(zs("icon"),e),type:"arrow-dropdown",size:"xs"})),[]);return a.createElement("div",{className:zs(),ref:r},a.createElement("div",{className:zs("current-course")},a.createElement("span",{className:zs("course-name"),title:t.title},t.title),t.role!==E.Student&&a.createElement("span",{className:zs("group-name"),title:s.name},s.name)),a.createElement(ge.$,{className:zs("button",{active:c}),innerRef:n,size:"xs",theme:"normal","aria-expanded":c?"true":"false",onClick:()=>i((e=>!e)),id:"course-navigation-menu",icon:u,"aria-label":l.Ru.text({id:"navigation-menu-button",keyset:"courses"})}),a.createElement(ws,{target:"anchor",anchor:n,direction:js,theme:"normal",mainOffset:12,scope:r,visible:c,onClose:o},a.createElement(Ds,{open:c,onNavItemClick:()=>i(!1),labelledBy:"course-navigation-menu"})))};Us.displayName="MainNav";var Hs,Qs=s(86663);const Vs=r().with("question-form");let Gs=(Hs=class extends a.Component{constructor(){super(...arguments),this.state={iframeHeight:0}}componentDidMount(){window.addEventListener("message",this.receiveFormMessage)}componentWillUnmount(){window.removeEventListener("message",this.receiveFormMessage)}render(){const{iframeHeight:e}=this.state,{isMobile:t,formUrl:s,formName:n}=this.props;return a.createElement("div",{className:Vs({mobile:t})},a.createElement("iframe",{title:l.Ru.text({id:"question-form",keyset:"common"}),frameBorder:0,name:n,src:Qs.stringifyUrl({url:s,query:{iframe:"1","media-type":t?"mobile":void 0}},{sort:!1}),style:{height:e}}),!e&&a.createElement("div",{className:Vs("spinner")},a.createElement(he.t,{view:"default",progress:!0,position:"center",size:"l"})))}receiveFormMessage(e){try{const t=JSON.parse(e.data),s=t["iframe-height"];s&&t.name===this.props.formName&&this.setState({iframeHeight:s})}catch(e){}}},function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}(Hs.prototype,"receiveFormMessage",[R.Q2],Object.getOwnPropertyDescriptor(Hs.prototype,"receiveFormMessage"),Hs.prototype),Hs);Gs.displayName="QuestionForm";const Bs=Gs;var Ws;function Js(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}let Ks=(Ws=class e extends a.Component{constructor(){super(...arguments),this.state={isModalVisible:!1,formKey:0}}static shouldOpenModal(){return document.documentElement.clientWidth>=768}static getFormUrl(e,t){switch(e){case E.Student:return l.Ru.text({id:t===b.m.YANGO?"yango-student-help-url":"question-form.non-staff-url"});case E.Teacher:case E.Methodist:return l.Ru.text({id:t===b.m.YANGO?"yango-teacher-help-url":"question-form.staff-url"});default:throw new m("Role not supported",{role:e})}}componentDidUpdate(e,t){!t.isModalVisible&&this.state.isModalVisible&&this.setState({formKey:t.formKey+1})}handleLinkClick(t,s){(0,f.n_)("ButtonAskQuestion",{uid:this.props.userUid}),e.shouldOpenModal()&&!s&&(t.preventDefault(),this.setState({isModalVisible:!0}))}closeModal(){this.setState({isModalVisible:!1})}renderQuestionLink(t){var s;let{match:{params:n}}=t;const{courseMap:r,linkClassName:i,isMobile:o=!1,type:c}=this.props,{isModalVisible:d,formKey:m}=this.state,p=Number(n.courseId),h=Number(n.groupId),E=null==(s=r[p])?void 0:s.find((e=>e.groups.includes(h)));if(!y(E,h))return null;const{role:g}=E,f=(0,S.r)(e.getFormUrl(g,c));return a.createElement(a.Fragment,null,a.createElement(u,{className:i,href:f,onClick:e=>this.handleLinkClick(e,f.startsWith("mailto:"))},l.Ru.text({id:"question"})),a.createElement(jt.a,{theme:"normal",visible:d,onClose:this.closeModal},a.createElement(Bs,{key:m,formUrl:f,formName:"ya-form-".concat(f,"-").concat(m),isMobile:o})))}render(){return a.createElement(i.qh,{path:p.oi.courseDetails.template,render:this.renderQuestionLink})}},Js(Ws.prototype,"handleLinkClick",[R.Q2],Object.getOwnPropertyDescriptor(Ws.prototype,"handleLinkClick"),Ws.prototype),Js(Ws.prototype,"closeModal",[R.Q2],Object.getOwnPropertyDescriptor(Ws.prototype,"closeModal"),Ws.prototype),Js(Ws.prototype,"renderQuestionLink",[R.Q2],Object.getOwnPropertyDescriptor(Ws.prototype,"renderQuestionLink"),Ws.prototype),Ws);Ks.displayName="Question";const Zs=Ks,Ys=(0,i.y)((0,o.Ng)((function(e){const{courses:{courseMap:t}}=e;return{courseMap:t}}))(Zs)),qs=["title","okText","cancelText","content","okButtonTheme","cancelButtonTheme","onOkClick","onCancelClick","onCloseClick","isDangerous","okLoading"],$s=r().with("modal-dialog"),Xs=e=>{let{title:t,okText:s,cancelText:n,content:r,okButtonTheme:i,cancelButtonTheme:o,onOkClick:c,onCancelClick:u,onCloseClick:d,isDangerous:m,okLoading:p}=e;return a.createElement("div",Object.assign({"aria-modal":"true"},t?{"aria-labelledby":"dialog_title","aria-describedby":"dialog_desc"}:{"aria-labelledby":"dialog_desc"},{tabIndex:-1,role:"dialog",className:$s()}),a.createElement("div",{className:$s("header")},a.createElement(ge.$,Object.assign({className:$s("close"),icon:e=>a.createElement(ie,{className:e,size:"l",type:"close"}),theme:"clear",size:"l",view:"lyceum",onClick:d},!u&&{autoFocus:!0},{"aria-label":l.Ru.text({keyset:"common",id:"dialog-close"})})),t&&a.createElement($t.D,{level:1,className:$s("heading"),id:"dialog_title"},t)),a.createElement("section",{id:"dialog_desc",className:$s("content")},r),a.createElement("div",{className:$s("footer")},m&&a.createElement(ge.$,{className:$s("action"),theme:"reject",size:"m",view:"lyceum",onClick:c},s),u&&a.createElement(ge.$,{className:$s("action"),theme:null!=o?o:"pseudo",size:"m",view:"lyceum",onClick:u},n),!m&&a.createElement(ge.$,{className:$s("action"),progress:p,theme:null!=i?i:"action",size:"m",view:"lyceum",onClick:c},s)))};Xs.displayName="ModalContent";const en=e=>{const{title:t,okText:s,cancelText:n,content:r,okButtonTheme:i,cancelButtonTheme:o,onOkClick:l,onCancelClick:c,onCloseClick:u,isDangerous:d,okLoading:m}=e,p=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,qs);return a.createElement(jt.a,Object.assign({},p,{theme:"normal",hasAnimation:!1,zIndex:21001}),p.visible&&a.createElement(Xs,{title:t,okText:s,cancelText:n,content:r,okButtonTheme:i,cancelButtonTheme:o,onOkClick:l,onCancelClick:c,onCloseClick:u,isDangerous:d,okLoading:m}))};en.displayName="ModalDialog";const tn=en,sn=r().with("test-timer");class nn extends a.Component{constructor(e){super(e),this.state={remainingTime:this.getRemainingTime(),isForceFinishModalOpened:!1,isFinishModalOpened:!1},this.timeout=0,this.actions=void 0,this.tick=()=>{const{oneSecondMs:e,allowableTimeError:t}=nn,{remainingTime:s}=this.state,n=s,r=this.getRemainingTime();if(n<r||n.minus(r)>t)this.syncTime();else{if(r.milliseconds<=0)return clearTimeout(this.timeout),this.setState({remainingTime:Ne.dw.fromMillis(0)}),this.doActions(),void this.toggleFinishModal();this.setState({remainingTime:this.getRemainingTime()}),this.timeout=setTimeout(this.tick,e),this.doActions()}},this.syncTime=()=>{const{onTimeOutOfSync:e}=this.props;clearTimeout(this.timeout),e()},this.doActions=()=>{const e=this.state.remainingTime.minus({seconds:1});this.actions.filter((t=>this.isInTimeRange(e,t.time)&&!t.done)).forEach((e=>{e.doAction(),e.done=!0}))},this.onFinish=()=>{const{onFinish:e}=this.props;this.toggleFinishModal(),e()},this.onForceFinish=()=>{const{onForceFinish:e}=this.props;this.toggleForceFinishModal(),e()},this.toggleForceFinishModal=()=>{this.setState((e=>({isForceFinishModalOpened:!e.isForceFinishModalOpened})))},this.toggleFinishModal=()=>{this.setState((e=>({isFinishModalOpened:!e.isFinishModalOpened})))},this.timeout=setTimeout(this.tick,nn.oneSecondMs),this.actions=e.actions?e.actions.map((e=>Object.assign({},e,{done:!1}))):[]}componentDidUpdate(e){e.timer!==this.props.timer&&(clearTimeout(this.timeout),this.setState({remainingTime:this.getRemainingTime()}),this.timeout=setTimeout(this.tick,nn.oneSecondMs))}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{timer:e,courseId:t,groupId:s,theme:n="dark"}=this.props,{lesson:r}=e,{remainingTime:i,isForceFinishModalOpened:o,isFinishModalOpened:c}=this.state,u=p.oi.lessonDetails.build({courseId:t,groupId:s,lessonId:r.id.toString()});return a.createElement("section",{className:sn("",{theme:n})},a.createElement(L.N_,{className:sn("link"),to:u},a.createElement("h5",{className:sn("title")},l.Ru.text({id:"go-to-test",keyset:"lessons"}))),a.createElement("time",{className:sn("time")},i.toFormat("hh:mm:ss")),a.createElement(ge.$,{className:sn("button"),theme:"action",size:"s",view:"lyceum",onClick:this.toggleForceFinishModal},l.Ru.text({id:"stop-test",keyset:"lessons"})),a.createElement(tn,{visible:o,title:l.Ru.text({id:"force-finish-test-dialog-title",keyset:"lessons"}),okText:l.Ru.text({id:"force-finish-test-dialog-ok",keyset:"lessons"}),cancelText:l.Ru.text({id:"force-finish-test-dialog-cancel",keyset:"lessons"}),content:l.Ru.text({id:"force-finish-test-dialog-content",keyset:"lessons"}),onOkClick:this.onForceFinish,onCancelClick:this.toggleForceFinishModal,onCloseClick:this.toggleForceFinishModal}),a.createElement(tn,{visible:c,title:l.Ru.text({id:"finish-test-dialog-title",keyset:"lessons"}),okText:l.Ru.text({id:"finish-test-dialog-ok",keyset:"lessons"}),content:l.Ru.text({id:"finish-test-dialog-content",keyset:"lessons"}),onOkClick:this.onFinish,onCloseClick:this.toggleFinishModal}))}getRemainingTime(){const{deadline:e,delta:t}=this.props.timer;return e.diffNow().minus(t)}isInTimeRange(e,t){const{actionTimeRange:s}=nn;return e<t&&e>t.minus(s)}}nn.oneSecondMs=1e3,nn.allowableTimeError=Ne.dw.fromObject({seconds:3}),nn.actionTimeRange=Ne.dw.fromObject({seconds:5}),nn.displayName="TestTimer";const rn=nn;var an=s(45581),on=s(33868);function ln(e){return e.lessons.timer.timer}var cn=s(97697);class un extends a.Component{constructor(){super(...arguments),this.fetchTimer=()=>{const{courseId:e}=this.props.match.params;this.props.fetchTimer({courseId:Number(e)})},this.onForceFinish=()=>{const{timer:e,match:t}=this.props,{groupId:s}=t.params;e&&this.props.finishTest({groupId:Number(s),lessonId:e.lesson.id})},this.onFinish=()=>{this.props.updateProblemDetails(),this.props.clearTimer(),this.props.setFinishedFlagToTask()}}componentDidMount(){this.fetchTimer()}componentDidUpdate(e){e.match.params.courseId!==this.props.match.params.courseId&&(this.props.clearTimer(),this.fetchTimer())}componentWillUnmount(){this.props.clearTimer()}render(){const{timer:e,actions:t,match:s,theme:n}=this.props,{courseId:r,groupId:i}=s.params;return e?a.createElement(rn,{timer:e,actions:t,courseId:r,groupId:i,theme:n,onTimeOutOfSync:this.fetchTimer,onForceFinish:this.onForceFinish,onFinish:this.onFinish}):null}}un.displayName="TestTimerContainer";const dn=(0,i.y)((0,o.Ng)((function(e){return{timer:ln(e)}}),(function(e){return(0,_.zH)({updateProblemDetails:cn.tH,fetchTimer:on.kL,clearTimer:on.$_,setFinishedFlagToTask:cn.LQ,finishTest:an.K.request},e)}))(un));var mn=s(16818),pn=s(782);const hn=r().with("user-menu"),En="lyceum.profileLmsUrl",gn=e=>{let{uid:t,yandexuid:s,name:n,avatar:r,retpath:i,profileLmsPath:o,hasPlus:c,isChild:u}=e;const d=P(G),m=(0,a.useMemo)((()=>({avatarId:r,plus:c,child:u})),[r,c,u]),{language:p,tld:h,isTestPassport:g,hostname:y,brand:f}=(0,as.lk)(),S=d===E.Student?l.Ru.text({id:"student_header_help_link"}):l.Ru.text({id:"teacher_header_help_link"}),v=(0,a.useMemo)((()=>Object.assign({},o?{[En]:"https://".concat(y).concat(o)}:{},f===b.m.YANGO?{origin:"lms_yango"}:{supportUrl:S})),[f,S,y,o]);return t&&s?a.createElement("div",{className:hn()},a.createElement(mn.User,Object.assign({retpath:i,className:hn("profile"),afterAvatar:a.createElement("span",{className:hn("name")},n),avatarSize:42,queryParams:v,userData:m},g&&{env:"test"},f===b.m.YANGO&&{host:"yango.".concat(h)},{lang:p,project:"lyceum",ariaLabel:l.Ru.text({keyset:"profile",id:"profile-header-label",params:{name:n}}),tld:h}))):null};gn.displayName="UserMenu";const yn=(0,i.y)((0,pn.ad)(gn));var fn=s(33315),Sn=s(19077);const bn={profile:new x.s("/profile/:userId?")},vn=((0,D.k)(bn),(0,a.createContext)({run:()=>{},hasHints:!1})),Nn=()=>{const{run:e,hasHints:t}=(0,a.useContext)(vn),s=P(T.yZ),{pathname:n}=(0,i.zy)(),r=(0,a.useCallback)((()=>{(0,f.n_)("wizardRun",{uid:s,path:n}),e()}),[n,e,s]);return t?a.createElement(ge.$,{className:"header__help",icon:()=>a.createElement(ie,{size:"l",type:"question"}),onClick:r,"aria-label":"help"}):null};Nn.displayName="HeaderHelp";const In=Nn;var Tn=s(12666),kn=s(24410);const Cn=e=>{let{dependencies:t=[],text:s,ariaLive:n}=e;const[r,i]=(0,a.useState)(0);return(0,a.useEffect)((()=>{i((e=>e+1))}),t),a.createElement("span",{"aria-live":n,role:"status","aria-atomic":!0,key:r,className:"yb1e57--screen-reader-announce"},s)};Cn.displayName="ScreenReaderAnnounce";const wn=["children","size","iconTheme","visible","onClose","sidebarType"],An=r().with("sideblock"),On=(0,Ut.compose)(Tn.v,Ss.B,fs.I)(kn.F),Rn={large:"close-thin",small:"close"},_n={dark:"-white",light:""},Ln=e=>{let{children:t,size:s="large",iconTheme:n="light",visible:r,onClose:i,sidebarType:o}=e,c=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,wn);const u=(0,a.useRef)(null),[d,m]=(0,a.useState)(!0),p=o?'"'.concat(o,'"'):"";return(0,a.useEffect)((()=>{r&&u.current&&(u.current.focus(),m(!1))}),[r]),a.createElement("div",{role:"status","aria-live":"assertive"},a.createElement(On,Object.assign({keepMounted:!1,visible:r,theme:"normal",onOutsideClick:i,onEscapeKeyDown:i},c),a.createElement("div",{ref:u,tabIndex:0,className:An({size:s})},a.createElement(ge.$,{"aria-label":l.Ru.text({id:"dialog-close",keyset:"common"}),className:An("cross"),size:"l",theme:"clear",view:"lyceum",icon:e=>a.createElement(ie,{className:e,size:"l",type:"".concat(Rn[s]).concat(_n[n])}),onClick:i}),t)),!d&&a.createElement(Cn,{text:r?l.Ru.text({id:"sidebar-open",keyset:"common",params:{type:p}}):l.Ru.text({id:"sidebar-close",keyset:"common",params:{type:p}}),ariaLive:"assertive",dependencies:[r]}))};Ln.displayName="Sideblock";const Mn=r().with("sidemenu"),Pn=l.Ru.text({id:"menu",keyset:"common"}),xn=(0,a.createContext)({onNavItemClick:()=>{}});class Dn extends a.Component{constructor(){super(...arguments),this.state={isMenuVisible:!1},this.openMenu=()=>{this.setState({isMenuVisible:!0})},this.closeMenu=()=>{this.setState({isMenuVisible:!1})}}render(){const{children:e}=this.props,{isMenuVisible:t}=this.state;return a.createElement("div",{className:Mn()},a.createElement("button",{type:"button",className:Mn("toggle"),onClick:this.openMenu,"aria-label":Pn},a.createElement(ie,{size:"l",type:"menu"})),a.createElement(Ln,{side:"left",size:"small",iconTheme:"dark",sidebarType:Pn,visible:t,onClose:this.closeMenu,className:Mn("sideblock"),hasBlockingBackground:!0},a.createElement(xn.Provider,{value:{onNavItemClick:this.closeMenu}},e({onNavItemClick:this.closeMenu}))))}}Dn.displayName="Sidemenu";const Fn=Dn;var zn=s(55515);const jn=["bottom-start"],Un=e=>{let{className:t}=e;const{buttonRef:s,scopeRef:n,setVisible:r,onClose:i,isVisible:o}=Fs(),[c,u]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{var e;o||(u(!1),null==(e=s.current)||e.focus())}),[s.current,o]),a.createElement(as.Ov.Consumer,null,(e=>{let{availableLanguages:d,onChangeLanguage:m,language:p}=e;return d.length<2?null:a.createElement("div",{ref:n,className:t},a.createElement(ge.$,{className:"y14470--trigger",iconRight:e=>a.createElement(zn.Icon,{direction:o?"top":"bottom",glyph:"type-arrow",className:"".concat(e," ").concat("y14470--triggerIcon")}),view:"lyceum",innerRef:s,"aria-live":"polite","aria-label":l.Ru.text({id:"language-selector",useLanguage:p}),"aria-expanded":o,onClick:()=>r((e=>!e))},l.Ru.text({id:"language-name",useLanguage:p})),a.createElement(ws,{target:"anchor",anchor:s,direction:jn,theme:"normal",mainOffset:4,scope:n,visible:o,onClose:i},a.createElement("div",{className:"y14470--block"},d.map((e=>a.createElement(ge.$,{className:"".concat("y14470--blockButton"," ").concat(e!==p||c?"":"y14470--active"),view:"lyceum",key:e,iconLeft:t=>e===p?a.createElement(zn.Icon,{glyph:"type-check",className:"".concat(t," ").concat("y14470--tickIcon")}):a.createElement("span",null),onMouseLeave:()=>u(!0),onClick:()=>m(e),checked:e===p},l.Ru.text({id:"language-name",useLanguage:e})))))))}))};var Hn;function Qn(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Un.displayName="LanguageSelector";const Vn=r().with("header");let Gn=(Hn=class e extends a.Component{constructor(){super(...arguments),this.timerActions=[this.getTimeLeftAction(5),this.getTimeLeftAction(2)]}getTimeLeftAction(e){const{addNotificationPopup:t}=this.props;return{time:Ne.dw.fromObject({minutes:e}),doAction:()=>{t({type:Sn.V.INFO,i18n:{id:"NUMBER-minutes-left",keyset:"lessons",params:{count:e,number:e}}})}}}static renderCourseElement(e){return a.createElement(i.qh,{path:p.oi.courseDetails.template,render:e})}renderMainNav(e){var t;const{courseMap:s,groupMap:n}=this.props,r=Number(e.match.params.courseId),i=Number(e.match.params.groupId),o=null==(t=s[r])?void 0:t.find((e=>e.groups.includes(i)));return y(o,i)?a.createElement("div",{className:Vn("main-nav")},a.createElement(Us,{currentCourse:o,currentGroup:n[i]})):null}renderCourseNav(e){var t;let{match:{params:s}}=e;const{courseMap:n}=this.props,{courseId:r,groupId:i}=s;return y(null==(t=n[Number(r)])?void 0:t.find((e=>e.groups.includes(Number(i)))),Number(i))?a.createElement("div",{className:Vn("course-nav")},a.createElement(Fn,null,(e=>{let{onNavItemClick:t}=e;return a.createElement(se,{courseId:Number(r),groupId:Number(i),onNavItemClick:t})})),a.createElement("div",{className:Vn("menu-wrapper")},a.createElement(se,{courseId:Number(r),groupId:Number(i)}))):null}renderTimer(e){var t;const{courseMap:s}=this.props,n=Number(e.match.params.courseId),r=Number(e.match.params.groupId),i=null==(t=s[n])?void 0:t.find((e=>e.groups.includes(r)));if(!y(i,r))return null;const{role:o}=i;return o===E.Student&&a.createElement("div",{className:Vn("test-timer")},a.createElement(dn,{actions:this.timerActions}))}render(){const{user:t,passportHost:s,yandexuid:n,currentUrl:r,courseLogo:o,type:l}=this.props,c=o?{logoHeight:o.logoHeightCustom,logoWidth:o.logoWidthCustom,logo:o.logo}:{};return a.createElement("header",{className:Vn()},a.createElement("div",{className:Vn("top")},a.createElement("div",{className:Vn("left")},a.createElement(ps,Object.assign({},c,{type:l}))),a.createElement("div",{className:Vn("right")},a.createElement(Un,{className:Vn("language-selector")}),t?a.createElement(a.Fragment,null,a.createElement("nav",{className:Vn("user-nav")},a.createElement("div",{className:Vn("user-links")},a.createElement(Ys,{userUid:t.uid,linkClassName:Vn("link"),type:l})),a.createElement(In,null),a.createElement(i.qh,{path:p.oi.courseDetails.template},a.createElement(ss,null)),a.createElement(Dt,{uid:t.uid}),a.createElement(yn,{uid:t.uid.toString(),yandexuid:n.toString(),name:t.displayName,avatar:t.avatar,isChild:t.isChild,hasPlus:t.hasPlus,retpath:r,profileLmsPath:t?bn.profile.build({userId:t.id.toString()}):void 0}))):a.createElement(rs,{currentUrl:r,passportHost:s}))),a.createElement("div",{className:Vn("course-block")},e.renderCourseElement(this.renderMainNav)),a.createElement("div",{className:Vn("bottom")},e.renderCourseElement(this.renderCourseNav),e.renderCourseElement(this.renderTimer)))}},Qn(Hn.prototype,"renderMainNav",[R.Q2],Object.getOwnPropertyDescriptor(Hn.prototype,"renderMainNav"),Hn.prototype),Qn(Hn.prototype,"renderCourseNav",[R.Q2],Object.getOwnPropertyDescriptor(Hn.prototype,"renderCourseNav"),Hn.prototype),Qn(Hn.prototype,"renderTimer",[R.Q2],Object.getOwnPropertyDescriptor(Hn.prototype,"renderTimer"),Hn.prototype),Hn);Gn.displayName="Header";const Bn=(0,i.y)((0,o.Ng)((function(e){const{courses:{courseMap:t},groups:{groupMap:s}}=e;return{courseMap:t,groupMap:s,courseList:Q(e),courseLogo:q(e),user:(0,T.wz)(e)}}),(function(e){return(0,_.zH)({addNotificationPopup:fn.z},e)}))(Gn));var Wn=s(95054);const Jn=r().with("notifications"),Kn={[Sn.V.SUCCESS]:"tick-green",[Sn.V.ERROR]:"cross-red"};class Zn extends a.Component{constructor(){super(...arguments),this.transitionTimeout=300,this.removeNotification=e=>()=>this.props.removeNotification(e)}render(){const{notifications:e}=this.props;return a.createElement(a.Fragment,null,a.createElement("div",{className:Jn()},a.createElement(ve.TransitionGroup,{component:null},e.map((e=>a.createElement(ve.CSSTransition,{key:e.id,classNames:Jn("item"),timeout:this.transitionTimeout},a.createElement("div",{className:Jn("item",{type:e.type})},e.type!==Sn.V.INFO&&a.createElement("div",{className:Jn("icon-wrapper")},a.createElement(ie,{size:"m",type:Kn[e.type]})),e.i18n?l.Ru.text(e.i18n):e.text,a.createElement(ge.$,{className:Jn("remove-button"),size:"m",theme:"clear",view:"lyceum",icon:e=>a.createElement(ie,{className:e,size:"m",type:"close-thin"}),onClick:this.removeNotification(e.id),"aria-label":l.Ru.text({keyset:"common",id:"dialog-close"})}))))))),a.createElement("div",{role:"status","aria-live":"assertive"},e.map((e=>{const t=e.i18n?l.Ru.text(e.i18n):e.text;return t&&a.createElement(Cn,{text:t,ariaLive:"assertive"})}))))}}Zn.displayName="Notifications";const Yn=Zn,qn=(0,o.Ng)((function(e){return{notifications:(0,Wn.T)(e)}}),(function(e){return{removeNotification:t=>e((0,fn.w)(t))}}))(Yn),$n=(0,a.createContext)(E.Student);class Xn extends a.Component{render(){const{children:e,role:t}=this.props;return a.createElement($n.Provider,{value:t},e)}}function er(e){return class extends a.Component{render(){return a.createElement($n.Consumer,null,(t=>a.createElement(e,Object.assign({role:t},this.props))))}}}Xn.displayName="UserCourseRoleProvider";var tr=s(80545),sr=s(67752);class nr extends a.Component{static renderDefaultSpin(){return a.createElement(he.t,{view:"default",progress:!0,size:"l",position:"center"})}static renderErrorPage(e){return e?e instanceof d.LG?a.createElement(_s.eG,{statusCode:e.statusCode,errorCode:e.code}):a.createElement(_s.AI,null):null}render(){const{children:e,renderPending:t,renderSuccess:s,renderError:n,fetchError:r,fetchStatus:a}=this.props;return a&&a!==Ot.L.PENDING?a===Ot.L.FAIL?n?n(l.Ru.text((0,l.T$)(r))):nr.renderErrorPage(r):a===Ot.L.SUCCESS?e||(s?s():null):null:t?t():nr.renderDefaultSpin()}}nr.displayName="FetchHandler";const rr=nr,ar={activation:new x.s("/api/invites/:inviteKey")},ir={get:new x.s("/api/invites/parent/:userId/"),activation:new x.s("/api/invites/parent/:inviteKey/activate")},or={get:new x.s("/api/invites/group/:groupId/"),activation:new x.s("/api/invites/group/:inviteKey/activate")};var lr,cr,ur,dr,mr,pr,hr,Er,gr,yr,fr,Sr,br,vr,Nr,Ir,Tr,kr,Cr,wr,Ar,Or,Rr,_r,Lr,Mr,Pr,xr,Dr,Fr,zr,jr,Ur,Hr,Qr,Vr,Gr,Br;function Wr(){return Wr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Wr.apply(null,arguments)}const Jr=e=>a.createElement("svg",Wr({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"},e),lr||(lr=a.createElement("style",null,"\n    .st0,.st1,.st2,.st3,.st4{fill:#fff;stroke:#13110c;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st1,.st2,.st3,.st4{fill:#ffd33c;stroke:#000}.st2,.st3,.st4{fill:none;stroke:#13110c}.st3,.st4{fill:#ffd33c}.st4{fill:none;stroke:#000}.st5{fill:#ffd33c}.st6{fill:#13110c}.st7{fill:#fff;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\n  ")),cr||(cr=a.createElement("path",{className:"st0",d:"M214.2 269.3c-15.7-2-44.4-8.8-44.4-8.8s-5.2 1.5-10.8 2.5v150h99.5l-4.7-108.4c-16.2-8-29.9-20.3-39.6-35.3zM159 95v154.1c5.5 2.3 10.8 4.7 10.8 4.7s18.3-3.7 33.7-7c-3.3-9.8-5-20.3-5-31.2v-2.9c9 0 16.4-7.3 16.4-16.4 0-6.9-4.2-12.7-10.2-15.2 14-37.8 50.5-64.7 93.3-64.7 4.5 0 8.9.3 13.2.9V95H159z"})),ur||(ur=a.createElement("path",{className:"st1",d:"M264.8 230.4c-.1.4-.3.9-.4 1.3.1-.4.3-.8.4-1.3zM253.5 250.2zM259.8 241.4l-.1.1.1-.1zM254.7 248.7s0 .1 0 0c0 .1 0 0 0 0zM252.3 251.6c0 .1 0 .1 0 0 0 .1 0 .1 0 0zM251 253.1c-8.4 9.2-19.4 16.8-30 16.8-1.7 0-4.1-.2-6.8-.6 9.7 15 23.4 27.3 39.6 35.3l-1.8-41.9c-.7-1.7-1-5.1-1-9.6zM297.8 116.4c-42.8 0-79.2 26.9-93.3 64.7 6 2.4 10.2 8.3 10.2 15.2 0 9-7.3 16.3-16.4 16.4v2.9c0 10.9 1.8 21.4 5 31.2 10.6-2.3 19.8-4.4 20.4-5 3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9l46.3-.2v-59.7c-4.3-.5-8.7-.9-13.2-.9zM263.7 233.7c-.1.3-.2.5-.3.8 0-.2.2-.5.3-.8zM263 235.2c-.1.3-.2.5-.3.8.1-.3.2-.5.3-.8zM264.2 232.2l-.3.9.3-.9zM262.3 236.7c-.1.2-.2.5-.3.7.1-.2.2-.4.3-.7zM260.7 239.8c-.1.2-.2.3-.3.5.1-.2.2-.3.3-.5zM261.6 238.2l-.3.6c0-.1.2-.3.3-.6z"})),dr||(dr=a.createElement("path",{className:"st0",d:"M347 116h95v89h-95z"})),mr||(mr=a.createElement("path",{className:"st2",d:"M355 132h79v34h-79z"})),pr||(pr=a.createElement("path",{className:"st3",d:"M355 172.8h20V196h-20zM385 172.8h20V196h-20zM414 172.8h20V196h-20z"})),hr||(hr=a.createElement("path",{className:"st4",d:"M355 124h79M364.8 413H456M274.9 413h74.4M117.8 413h140.7M54 413h22.6"})),Er||(Er=a.createElement("path",{className:"st5",d:"M254.2 315c-7.7-5.7-17.2-9.1-27.6-9.1-25.5 0-46.1 20.6-46.1 46s20.6 46 46.1 46c11.8 0 22.5-4.4 30.7-11.6l-3.1-71.3z"})),gr||(gr=a.createElement("path",{d:"M254.7 314.1c-20.1-14.5-48.6-11.4-64.5 7.9-14.3 17.3-14.1 43 .4 60.2 15.8 18.7 44.4 22 64.1 7.3 1.7-1.3 3.2-2.1 3.5-4.1.3-1.8-.2-4-.2-5.8-.3-7.4-.6-14.7-1-22.1-.6-14.2-1.2-28.4-1.8-42.5-.1-1.3-2.1-1.3-2 0 1 22.5 1.9 44.9 2.9 67.4 0 1 .4 2.6.2 3.5-.3 1-3.2 2.4-4.4 3.2-3 2-6.2 3.7-9.5 4.9-11.7 4.3-25 3.6-36.1-2.1-20.9-10.7-30.4-36.5-20.9-58.1 11.6-26.5 45.2-34.7 68.4-18 1 .8 2-.9.9-1.7z"})),yr||(yr=a.createElement("path",{className:"st2",d:"M149 273c-5.5 0-10-4.5-10-10.1v-17.8c0-5.6 4.5-10.1 10-10.1M235.2 323c0 2.8-2.3 5.1-5.1 5.1s-5.1-2.3-5.1-5.1 2.3-5.1 5.1-5.1 5.1 2.3 5.1 5.1zM226.7 382.8c0 1.6-1.3 2.9-3 2.9-1.6 0-3-1.3-3-2.9s1.3-2.9 3-2.9c1.6 0 3 1.3 3 2.9zM224.2 344c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9 7.1.1 12.9 5.8 12.9 12.9zM254.8 354.6c0 4.3-3.5 7.8-7.7 7.8-4.3 0-7.7-3.5-7.7-7.8s3.5-7.8 7.7-7.8 7.7 3.5 7.7 7.8zM184.1 369.6c4.2-2.7 12.9 5.7 8.2 12.1"})),fr||(fr=a.createElement("path",{className:"st5",d:"M283.7 107.1c0 3-2.4 5.5-5.5 5.5-3 0-5.5-2.4-5.5-5.5 0-3 2.4-5.5 5.5-5.5 3 0 5.5 2.5 5.5 5.5z"})),Sr||(Sr=a.createElement("path",{d:"M282.7 107.1c-.3 5.7-8.9 5.8-8.9 0s8.6-5.7 8.9 0c.1 1.3 2.1 1.3 2 0-.2-3.5-2.8-6.5-6.5-6.5-3.5 0-6.5 2.9-6.5 6.5 0 3.4 2.8 6.3 6.2 6.4 3.8.2 6.6-2.8 6.8-6.4.1-1.3-1.9-1.3-2 0z"})),br||(br=a.createElement("path",{className:"st6",d:"M196.7 119.9c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4zM187.8 131.8l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM188.6 127.7l-7.5-5.2c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l7.4 5.2c.2-.7.6-1.3 1.2-1.7zM199.5 135.3l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.2-1.4z"})),vr||(vr=a.createElement("path",{className:"st1",d:"M304.5 279H347v-47h-35.2c-4.1 19.4-8.2 37.3-9.7 40.7l2.4 6.3z"})),Nr||(Nr=a.createElement("path",{className:"st6",d:"M177.2 302.6l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM186.1 290.7c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4z"})),Ir||(Ir=a.createElement("g",null,a.createElement("path",{className:"st6",d:"M188.8 306.1l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.4-.5.3-1.1-.2-1.4zM177.9 298.5l-7.5-5.2c-.5-.3-1.1-.2-1.4.3s-.2 1.1.3 1.4l7.4 5.2c.2-.7.7-1.3 1.2-1.7z"}))),Tr||(Tr=a.createElement("g",null,a.createElement("path",{className:"st6",d:"M239.7 165.8l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM246.6 157.1c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),a.createElement("g",null,a.createElement("path",{className:"st6",d:"M240.5 161.8l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM248.2 167.2l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.6.2-1.2-.3-1.5z"})))),kr||(kr=a.createElement("g",null,a.createElement("path",{className:"st6",d:"M175.2 397.1l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM182.1 388.4c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),a.createElement("g",null,a.createElement("path",{className:"st6",d:"M176 393.1l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM183.7 398.4l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.3-1.5z"})))),Cr||(Cr=a.createElement("g",null,a.createElement("path",{className:"st6",d:"M178.1 233.5l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.2-1.1-.6-1.6-1.1zM185 224.7c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),a.createElement("g",null,a.createElement("path",{className:"st6",d:"M178.9 229.4l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.3 1.2-1.7zM186.7 234.8l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.2-.6.1-1.2-.3-1.5z"})))),wr||(wr=a.createElement("path",{className:"st0",d:"M112.6 286.1l16.9 12.7-29.1 25.5zM54.3 322.5l12.8-16.9 25.4 29.1z"})),Ar||(Ar=a.createElement("path",{className:"st2",d:"M100.7 324.3L94 336.2V356"})),Or||(Or=a.createElement("path",{className:"st0",d:"M92.5 298.8l-17.3-25.5 17.8-5.2z"})),Rr||(Rr=a.createElement("g",null,a.createElement("path",{className:"st7",d:"M308.6 246.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM309 244.9c.1-.2.1-.5.2-.7-.1.2-.2.5-.2.7zM308.3 248.1c0-.1.1-.3.1-.4-.1.1-.1.3-.1.4zM309.4 243.1c.1-.2.1-.5.2-.7-.1.3-.2.5-.2.7zM306.9 254c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM306.6 255.5c0-.2.1-.4.1-.5 0 .2-.1.4-.1.5zM309.8 241.4c.1-.3.1-.5.2-.8-.1.3-.2.5-.2.8zM307.6 251.2v-.2.2zM307.9 249.8c0-.2.1-.3.1-.5 0 .2-.1.3-.1.5zM310.1 239.7c.1-.3.1-.6.2-.8-.1.2-.1.5-.2.8zM302 272.7c.1-.1.1-.2.2-.4-.1.2-.1.3-.2.4zM302.3 272.2c0-.1.1-.2.1-.3-.1.1-.1.2-.1.3zM304.5 279l-2.5-6.3 5 12.7c5.2-1.5 14.3-4.2 21.1-6.5h-23.6zM310.5 237.8c.1-.2.1-.5.2-.7-.1.2-.1.4-.2.7zM310.9 236c.1-.3.1-.5.2-.8-.1.3-.1.5-.2.8zM311.3 234.1c.1-.3.1-.5.2-.8-.1.3-.1.6-.2.8zM311.8 232h20c-3.9-23.5-8.5-48.6-9.3-52.8v.4c-1.5 7.7-6.2 31.2-10.8 52.8 0-.2 0-.3.1-.4zM303.3 268.8c0-.2.1-.3.1-.5 0 .2 0 .4-.1.5zM303.1 269.7c0-.1.1-.3.1-.4 0 .1-.1.2-.1.4zM303.6 267.9c0-.2.1-.3.1-.5 0 .2-.1.4-.1.5zM302.4 271.7c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM303.8 267c0-.2.1-.3.1-.5 0 .1 0 .3-.1.5zM302.9 270.4c0-.1.1-.3.1-.4-.1.2-.1.3-.1.4zM302.7 271.1c0-.1.1-.2.1-.4-.1.2-.1.3-.1.4zM306.3 257c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM304.1 265.9c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM305.9 258.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM305.3 261.2c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM305.6 259.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.4 264.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.7 263.7c.1-.2.1-.4.2-.6-.1.2-.2.4-.2.6zM305 262.5c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6z"}))),_r||(_r=a.createElement("path",{className:"st0",d:"M92.5 298.8l1.2 37.4"})),Lr||(Lr=a.createElement("path",{className:"st7",d:"M320.2 254.5c0 2.8-2.3 5-5 5s-5-2.3-5-5c0-2.8 2.3-5 5-5s5 2.2 5 5zM295.4 167.4c-.2-.2-.5-.4-.6-.9-.4-1.4-.6-1.9-.6-1.9s-.4-1.1.5-1.5c.8-.4 1-.6 1-.6s.9-.8 1-1.8c0-1 .2-5.2.3-6.2 0-1-1.4-.9-1.4-.9s-1.5.6-2.7 1c-1.2.4-1.4-.7-1.4-.7l-1.2-4.8s-.1-1-2-1.5c-1.8-.4-8.6-1.9-8.6-1.9h-.4l-6.5 13.1s-.8 1.6.8 2c1.6.4 2.6.7 2.6.7s.7.2.7.9-.2 3-.4 5.4c-.1 2.4 3.1 2.9 3.1 2.9s1.8.1 2.8.1c1 0 1.1 1.1 1.1 1.1l.7 5h12.2l-1-9.2v-.3z"})),Mr||(Mr=a.createElement("path",{d:"M282.6 153.6c-.3.3-.3.8 0 1.1.3.3.8.3 1.1 0 .3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10})),Pr||(Pr=a.createElement("path",{className:"st7",d:"M252.8 442h-11.1s-1.7 3.2 0 3.8c1.7.6 19.1 7.2 21.9 8 2.8.8 5.4-1.1 5.4-1.1l-1-10.7h-15.2zM355.6 430h-11.8s-1.8 3.2 0 3.8c1.8.6 20.5 7.2 23.4 8 3 .8 5.8-1.1 5.8-1.1l-1.1-10.7h-16.3z"})),xr||(xr=a.createElement("g",null,a.createElement("path",{className:"st7",d:"M346.4 369.4c-5-11.8-11-11.8-11-11.8L302 272.7c-.1.1-.1.2-.1.3-3.3 5.9-44.5-2.7-49.6-9.6-.1-.2-.3-.4-.4-.7l7.8 179.3h8.6s8.4-36.4 13-58c4.6-21.5-4.1-29.6-4.1-29.6l6.7-34.5L361.3 430h10.6s-20.5-48.8-25.5-60.6z"}))),Dr||(Dr=a.createElement("path",{className:"st0",d:"M283.8 319.9l-6.7 34.5s8.7 8.1 4.1 29.6c-1.8 8.4-4.1 19.1-6.4 29h36.4v-54l-27.4-39.1z"})),Fr||(Fr=a.createElement("path",{className:"st7",d:"M289.5 293.4l-5.7 26.7"})),zr||(zr=a.createElement("path",{className:"st1",d:"M296.4 167.6l3.3-.4s2.2-1.7 2.4-4.3c.1-1.3.8-23.3.2-24.9-.5-1.6-2.4-1.8-2.4-1.8s-22.2-.7-24.1-.8c-3.4-.2-5.7.1-5.9 1.7-.2 1.6 1.1 4.7 2.5 7.2.9 1.6 7.1 1.4 7.1 1.4s6.8 1.4 8.6 1.9c1.8.4 2 1.5 2 1.5l1.2 4.8s.2 1.2 1.4.7c1.2-.4 2.7-1 2.7-1s1.4-.1 1.4.9-.2 5.2-.3 6.2c0 1-1 1.8-1 1.8s-.2.2-1 .6c-.8.4-.5 1.5-.5 1.5s.2.5.6 1.9c.6 1.4 1.8 1.1 1.8 1.1z"})),jr||(jr=a.createElement("path",{className:"st0",d:"M214.8 196.3c0 9-7.3 16.4-16.4 16.4-9.1 0-16.4-7.3-16.4-16.4 0-9 7.3-16.4 16.4-16.4 9 .1 16.4 7.4 16.4 16.4z"})),Ur||(Ur=a.createElement("path",{className:"st7",d:"M264.8 177.2s5.2 34.3 0 53.2c-1.8 6.5-6.9 15.2-13.8 22.7 0 5.3.4 9.1 1.3 10.3 5 6.9 46.2 15.5 49.6 9.6 3-5.3 17.7-78.7 20.6-93.5.3-1.3-.8-2.6-2.1-2.6l-55.6.3z"})),Hr||(Hr=a.createElement("path",{className:"st7",d:"M169.8 260.4v-6.6s52.7-10.6 54-12c3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9s5.2 34.3 0 53.2c-4 14.6-24.6 39.5-43.8 39.4-11.6 0-51.2-9.4-51.2-9.4z"})),Qr||(Qr=a.createElement("g",null,a.createElement("path",{className:"st0",d:"M159 249.1V95h-10v150.5c2.5.6 6.3 2.1 10 3.6zM149 263.8V413h10V262.9c-3.6.7-7.4 1.2-10 .9z"}))),Vr||(Vr=a.createElement("g",null,a.createElement("path",{d:"M169.8 253.8s-20.7-9.6-23.3-8.6c-2.6 1-3.8 14.9 0 17.9 3.8 2.9 23.3-2.6 23.3-2.6v-6.7z",fill:"#fff"}),a.createElement("path",{d:"M170.3 253c-5.7-2.6-11.5-5.2-17.4-7.3-1.7-.6-5-2.2-6.9-1.3-2.1 1-2.5 4.7-2.7 6.6-.7 6-.4 13.7 7 13.9 6.6.2 13.5-1.7 19.8-3.5.4-.1.7-.5.7-1v-6.6c0-1.3-2-1.3-2 0v3.8c0 .6-.2 1.4 0 2 .3 1.1-.2.5.7-.1-1.5 1-4.3 1.1-6 1.5-3.6.8-7.4 1.6-11.1 1.8-4.6.3-6.6-.9-7.2-5.6-.3-2.3-.8-9.4 1.5-10.8 1.6-1 6.1 1.4 7.7 2 5 1.9 10 4.1 14.9 6.3 1.1.5 2.1-1.2 1-1.7z"}))),Gr||(Gr=a.createElement("path",{className:"st7",d:"M311 284.3v11.2l-4-10z"})),Br||(Br=a.createElement("path",{className:"st0",d:"M68.7 357l8.9 70h36.8l8.9-70z"}))),Kr=(s.p,(0,$.cn)("invite-activation")),Zr={fetchError:null,fetchStatus:null};let Yr=function(e){return e.DEFAULT_INVITE="default",e.GROUP_INVITE="group",e}({});const qr=(0,i.y)((e=>{let{match:t,inviteType:s}=e;const{brand:n}=(0,as.lk)(),{inviteKey:r}=t.params,[i,o]=(0,a.useState)(Zr);let c="";switch(s){case Yr.DEFAULT_INVITE:c=ar.activation.build({inviteKey:r});break;case Yr.GROUP_INVITE:c=or.activation.build({inviteKey:r});break;default:c=ar.activation.build({inviteKey:r})}(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,zt.Ay)(c);o({response:e,fetchError:null,fetchStatus:Ot.L.SUCCESS})}catch(e){o({fetchError:e,fetchStatus:Ot.L.FAIL})}})()}),[r,c]);const{response:u,fetchError:d,fetchStatus:m}=i;let h,E,g;const y=l.Ru.text({id:"invite-activation",keyset:"page-titles"});if("default"===s&&u&&function(e){return 1===e.organizations.length&&1===e.organizations[0].courses.length&&1===e.organizations[0].courses[0].groups.length}(u)){const{organizations:e}=u,[t]=e,[s]=t.courses,[n]=s.groups;h=p.oi.courseDetails.build({courseId:s.id.toString(),groupId:n.id.toString()}),E=l.Ru.text({id:"welcome-to-organization",keyset:"invites",params:{organization:t.name}}),g=l.Ru.text({id:"invite-course-group",keyset:"invites",params:{course:s.title,group:n.name}})}else h=p.oi.root.build(),E=l.Ru.text({id:n===b.m.YANGO?"yango-welcome-to-lyceum":"welcome-to-lyceum",keyset:"invites"});const f=(0,a.useCallback)((e=>{e.preventDefault(),window.location.assign(h)}),[h]),S=(0,a.useCallback)((()=>a.createElement("div",{className:Kr("progress")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}),a.createElement("span",{className:Kr("progress-text")},l.Ru.text({id:"profile-activation",keyset:"invites"})))),[]),v=(0,a.useCallback)((()=>a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement("article",{className:Kr()},a.createElement("section",{className:Kr("greeting")},a.createElement(Jr,{className:Kr("greeting-image"),width:500,height:500}),a.createElement($t.D,{smaller:!0,className:Kr("greeting-heading"),level:1},E),g&&a.createElement("p",{className:Kr("invite-info")},g),a.createElement(ge.$,{className:Kr("guide-button"),type:"link",url:h,size:"l",view:"lyceum",theme:"action",onClick:f},l.Ru.text({id:"start-learning",keyset:"invites"}))))))),[h,f,E,g]);return a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,y),a.createElement("meta",{name:"title",content:y})),a.createElement(nr,{fetchError:d,fetchStatus:m,renderPending:S,renderSuccess:v}))}));function $r(e){return class extends a.Component{render(){return a.createElement(Ee.A,{renderFallback:_s.ft},a.createElement(e,this.props))}}}var Xr=s(94021),ea=s(82704);const ta=r().with("group-list");class sa extends a.Component{render(){const{courseId:e,groups:t,disabled:s}=this.props;return a.createElement("ul",{className:ta()},t.map((t=>a.createElement("li",{key:t.id,className:ta("item",{disabled:s}),title:t.name},a.createElement(L.N_,{className:ta("link",{disabled:s}),to:p.oi.courseDetails.build({courseId:e,groupId:t.id.toString()})},a.createElement("span",{className:ta("link-text")},t.name))))))}}sa.displayName="GroupList";const na=sa,ra=r().with("course-card-header"),aa=e=>{let{title:t,isBetaCourse:s,link:n,partnerTitle:r,partnerLogo:i}=e;const o=n?a.createElement(L.N_,{className:ra("link"),to:n},t):t;return a.createElement("div",{className:ra("container")},a.createElement("div",{className:ra("title"),title:t},o),a.createElement("div",{className:ra("partners")},s&&a.createElement("span",null,a.createElement(ie,{size:"l",type:"beta"}),a.createElement(Cn,{text:l.Ru.text({id:"beta-course",keyset:"courses"})})),r&&i&&a.createElement(fe,{content:r},a.createElement("div",null,a.createElement("div",{className:ra("logo"),style:{backgroundImage:'url("'.concat(i,'")')}}),a.createElement(Cn,{text:l.Ru.text({id:"partner-course",keyset:"courses",params:{name:r}})})))))};aa.displayName="CourseCardHeader";const ia=r().with("course-card");function oa(e){let{course:t,groupMap:s,canCreateGroups:n,disabled:r}=e;const i=M(),[o,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),m=(0,a.useCallback)((async()=>{if(confirm(l.Ru.text({id:"create-group-confirm",keyset:"courses"})))try{c(!0);const{data:e}=await(0,zt.Ay)(Ft.g.apiCourseCreateGroup.build({courseId:t.id}),{method:"POST"});window.location.assign(p.oi.courseDetails.build({courseId:t.id.toString(),groupId:e.groupId.toString()}))}catch(e){c(!1),i((0,fn.z)({i18n:{id:e.code||"error",keyset:"api-errors"},type:Sn.V.ERROR}))}}),[i,t.id]),g=t.accessibilityStatus===h.Deleted,y=r||g;if(t.role===E.Student){const[e]=t.groups,n=s[e].status,r=n!==Ls.a.Enrolled,i=y||r;return a.createElement(L.N_,{className:ia({type:"link",disabled:i,[n||""]:!0}),to:p.oi.courseDetails.build({courseId:t.id.toString(),groupId:e.toString()})},a.createElement(aa,t),r&&a.createElement("p",{className:ia("status-message",{[n||""]:!0})},l.Ru.text({id:"status-".concat(n),keyset:"students"})))}const f=t.groups.map((e=>s[e]));return a.createElement("div",{className:ia(),"aria-disabled":y},a.createElement(aa,t),a.createElement("div",{className:ia("groups-wrapper")},f.length>4?a.createElement(Xr.ms,{className:ia("dropdown"),content:a.createElement("ul",{className:ia("group-list")},f.map((e=>a.createElement("li",{key:e.id,className:ia("group"),title:e.name},a.createElement(L.N_,{className:ia("link",{disabled:y}),to:p.oi.courseDetails.build({courseId:t.id.toString(),groupId:e.id.toString()})},a.createElement("span",{className:ia("link-text")},e.name)))))),onVisibleChange:e=>d(e),trigger:"click",view:"default"},a.createElement(ea.$,{iconRight:e=>a.createElement(zn.Icon,{direction:u?"top":"bottom",glyph:"type-arrow",className:e}),className:ia("button"),size:"m",theme:"normal"},a.createElement("span",{className:ia("placeholder")},l.Ru.text({id:"group-selection"})))):a.createElement(na,{courseId:t.id.toString(),groups:f,disabled:y})),n&&a.createElement("button",{type:"button",className:ia("create-group-button"),disabled:o,onClick:m,title:l.Ru.text({id:"create-group",keyset:"courses"}),"aria-label":l.Ru.text({id:"create-group",keyset:"courses"})},o?a.createElement(he.t,{view:"default",progress:!0,size:"xxs"}):a.createElement("span",null,"+")))}oa.displayName="CourseCard";const la=oa;var ca=s(26407);const ua={useCourse:W,useCoursesQueryParams:()=>{const{search:e}=(0,i.zy)();return(0,a.useMemo)((()=>{var t;const s=Qs.parse(e);return{courseStatus:null!=(t=s.courseStatus)?t:h.Active,year:s.year}}),[e])}};var da,ma=s(20009);function pa(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const ha=a.createContext({fetchProfile:null,fetchCourses:null});let Ea=(pa((da=class extends a.PureComponent{constructor(){super(...arguments),this.state={profile:null,coursesSummary:null,placement:{city:null,venue:null},fetchStatus:null,fetchError:null}}componentDidMount(){this.fetchProfile()}componentDidUpdate(e){e.userId!==this.props.userId&&this.fetchProfile()}fetchProfile(){const{userId:e,withParents:t,withChildren:n,status:r,year:a}=this.props,i={status:r,year:a},o={withChildren:n,withParents:t};this.setState({profile:null,coursesSummary:null,fetchStatus:Ot.L.PENDING,fetchError:null},(async()=>{const t=e?ma.X.foreignProfile.build({userId:e},Object.assign({},o,i)):ma.X.profile.build({},Object.assign({},o,i));try{const e=await(0,zt.Ay)(t);this.setState({profile:e.profile,coursesSummary:e.coursesSummary,placement:e.placement,fetchStatus:Ot.L.SUCCESS})}catch(e){if(e instanceof d.LG)return this.setState({fetchError:e,fetchStatus:Ot.L.FAIL});s.g.console.log(e)}}))}async fetchCourses(e){var t,s;const{userId:n}=this.props,r={status:null!=(t=e.status)?t:this.props.status,year:null!=(s=e.year)?s:this.props.year},a=n?ma.X.foreignProfileCourses.build({userId:n},r):ma.X.profileCourses.build({},r);try{const e=await(0,zt.Ay)(a);this.setState((t=>Object.assign({},t,{coursesSummary:e,fetchStatus:Ot.L.SUCCESS})))}catch(e){this.setState({fetchError:e,fetchStatus:Ot.L.FAIL})}}render(){return a.createElement(ha.Provider,{value:{fetchProfile:this.fetchProfile,fetchCourses:this.fetchCourses}},this.props.children(Object.assign({},this.state,{refreshProfile:this.fetchProfile})))}}).prototype,"fetchProfile",[R.Q2],Object.getOwnPropertyDescriptor(da.prototype,"fetchProfile"),da.prototype),pa(da.prototype,"fetchCourses",[R.Q2],Object.getOwnPropertyDescriptor(da.prototype,"fetchCourses"),da.prototype),da);Ea.displayName="ProfileProvider";const ga=Ea,ya=["year"],fa=r().with("courses-tabs"),Sa=[h.Active,h.Archived],ba=[...Sa,h.Draft],va=e=>{var t,s;let{isExtended:n,years:r,fetchCourses:o,className:c}=e;const u=P(T.wz),d=(0,i.W6)(),{pathname:m,search:p}=(0,i.zy)(),E=Qs.parse(p),g=ua.useCoursesQueryParams(),y=n?ba:Sa,f=null!=(t=null==r?void 0:r[g.courseStatus])?t:[],S=null==u?void 0:u.isSuperuser,b=g.courseStatus===h.Archived&&Boolean(f.length),{fetchCourses:v}=(0,a.useContext)(ha),N=null!=o?o:v;return a.createElement("div",{className:re(fa("root"),c)},y.map((e=>e!==h.Draft||S?a.createElement(ge.$,{key:e,className:fa("button"),size:"l",theme:"normal",view:"lyceum",checked:g.courseStatus===e,onClick:()=>{const t=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(E,ya),s=Qs.stringify(Object.assign({},e===h.Archived?E:t,{courseStatus:e}));d.replace({pathname:m,search:s}),null==N||N({status:e})}},a.createElement("span",null,l.Ru.text({keyset:"courses",id:"courses-".concat(e)}))):null)),b&&a.createElement("div",{className:fa("right-layout")},a.createElement(ca.l,{value:null!=(s=g.year)?s:f[0],theme:"normal",size:"s",onChange:e=>{const t=e.target.value,s=Qs.stringify(Object.assign({},E,{year:t}));d.replace({pathname:m,search:s}),null==N||N({year:Array.isArray(t)?t[0]:t,status:g.courseStatus})},options:f.map((e=>({value:e,content:e})))})))};va.displayName="CoursesTabs";var Na=s(91378);const Ia=r().with("courses"),Ta=e=>{let{courseList:t,groupMap:s,status:n}=e;const r=M();t=(0,a.useMemo)((()=>t.filter((e=>n===h.Archived?[h.Archived,h.Deleted].includes(e.accessibilityStatus):e.accessibilityStatus===n))),[t,n]);const i=P(T.wz),o=l.Ru.text({id:"courses",keyset:"page-titles"}),[c,u]=(0,a.useState)({}),[d,m,p]=(0,a.useMemo)((()=>[t.filter((e=>{let{role:t}=e;return t===E.Student})),t.filter((e=>{let{role:t}=e;return t===E.Teacher})),t.filter((e=>{let{role:t}=e;return t===E.Methodist}))]),[t]),g=(0,a.useCallback)((async()=>{try{const e=await(0,zt.Ay)("api/proxy/fault/stats/");u(e)}catch(e){console.error(e)}}),[]);(0,a.useEffect)((()=>{g()}),[g]);const y=Boolean(null==i?void 0:i.isSuperuser),f=n===h.Archived&&!y,S=a.createElement(a.Fragment,null,d.length>0&&a.createElement(a.Fragment,null,a.createElement("h3",{className:Ia("role-heading")},l.Ru.text({id:"role-student",keyset:"profile"})),a.createElement("ul",{className:Ia("list")},d.map((e=>a.createElement("li",{key:"".concat(e.id,"-").concat(e.role),className:Ia("list-item")},a.createElement(la,{course:e,groupMap:s,canCreateGroups:(null==i?void 0:i.canCreateGroups)&&e.groupsCreatedByTeacherLimit>0,disabled:f})))))),m.length>0&&a.createElement(a.Fragment,null,a.createElement("h3",{className:Ia("role-heading")},l.Ru.text({id:"role-teacher",keyset:"profile"})),a.createElement("ul",{className:Ia("list")},m.map((e=>a.createElement("li",{key:"".concat(e.id,"-").concat(e.role),className:Ia("list-item")},a.createElement(la,{course:e,groupMap:s,canCreateGroups:(null==i?void 0:i.canCreateGroups)&&e.groupsCreatedByTeacherLimit>0,disabled:f})))))),p.length>0&&a.createElement(a.Fragment,null,a.createElement("h5",{className:Ia("role-heading")},l.Ru.text({id:"role-methodist",keyset:"profile"})),a.createElement("ul",{className:Ia("list")},p.map((e=>a.createElement("li",{key:"".concat(e.id,"-").concat(e.role),className:Ia("list-item")},a.createElement(la,{course:e,groupMap:s,canCreateGroups:(null==i?void 0:i.canCreateGroups)&&e.groupsCreatedByTeacherLimit>0,disabled:f}))))))),b=a.createElement("p",{className:Ia("message")},l.Ru.text({keyset:"courses",id:"empty-".concat(n,"-courses")})),{adminUrl:v="",unresolvedCount:N=0,resolvingCount:I=0}=c,k=l.Ru.text({id:"fault-stats-banner",keyset:"common",params:{url:v,u:N,r:I}}),C=P(B);return a.createElement("article",{className:Ia()},a.createElement(tr.m,null,a.createElement("title",null,o),a.createElement("meta",{name:"title",content:o})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,Object.keys(c).length>0&&(N||I)?a.createElement("div",{className:Ia("banner")},a.createElement(Na.n,null,k)):null,a.createElement($t.D,{level:1,className:Ia("heading")},l.Ru.text({id:"courses",keyset:"courses"})),a.createElement(va,{isExtended:y,className:Ia("tabs"),years:C,fetchCourses:async e=>{r((0,Ms.yM)(e))}}),t.length?S:b)))};Ta.displayName="Courses";const ka=Ta,Ca=$r((0,o.Ng)((function(e){var t;const{groups:{groupMap:s}}=e;return{courseList:Q(e),status:null!=(t=e.courses.status)?t:h.Active,groupMap:s}}))(ka));function wa(){return a.createElement("iframe",{title:l.Ru.text({id:"calendar",keyset:"schedule"}),style:{border:"1px solid #eee"},src:"https://calendar.yandex.ru/embed/week?&layer_ids=22817079,22817879,22817906&tz_id=Europe/Moscow",width:"1200",height:"800",frameBorder:"0"})}wa.displayName="Calendar";var Aa=s(96285);const Oa=Boolean;function Ra(e){return!Oa(e)}var _a=s(1639);function La(e){const t="".concat(e.lastName," ").concat(e.firstName);return e.middleName?"".concat(t," ").concat(e.middleName):t}var Ma=s(60844),Pa=s.n(Ma),xa=s(11102);const Da=r().with("profile-info"),Fa=e=>{let{phone:t}=e;const s=P(_a.aK),n=P(_a.nC),{phone:r}=P(_a.v),i=P(_a.Be),o=M(),c=s?n:t,u=(0,a.useCallback)((e=>{const{value:t}=e.target,s=t.replace(/\s/g,"").replace(/_/g,"");o((0,xa.nP)(s)),r&&o((0,xa.i9)({phone:!1}))}),[o,r]);return a.createElement("div",{className:Da("item")},a.createElement("div",{className:Da("item-label")},l.Ru.text({id:"userInfo.phone",keyset:"profile"})),a.createElement("div",{className:Da("item-content",{field:"phone"})},s?a.createElement(Pa(),{mask:"+7 999 999 99 99",value:c,onChange:u},(e=>a.createElement("div",{className:Da("validation-wrapper",{error:r})},a.createElement(qt,Object.assign({},e,{disabled:i,id:"phone-number",cls:Da("input"),placeholder:l.Ru.text({id:"phonePlaceholder",keyset:"profile"}),size:"m",type:"text"}))))):a.createElement("a",{href:"tel:".concat(c),className:Da("item-content",{field:"phone"})},a.createElement("b",null,c)),r&&a.createElement("div",{className:Da("validation-error")},l.Ru.text({id:"validationLabel.phone",keyset:"profile"}))))};Fa.displayName="ProfileInfoFieldPhone";const za=Fa,ja=r().with("profile-info"),Ua=e=>{let{mail:t}=e;const s=P(_a.aK);return a.createElement("div",{className:ja("item")},a.createElement("div",{className:ja("item-label")},l.Ru.text({id:"userInfo.email",keyset:"profile"})),s?a.createElement(qt,{disabled:!0,id:"profile-mail",cls:ja("input"),size:"m",type:"text",value:t}):a.createElement("a",{href:"mailto:".concat(t),className:ja("item-content",{field:"email"})},a.createElement("b",null,t)))};Ua.displayName="ProfileInfoFieldMail";const Ha=Ua,Qa=r().with("profile-info"),Va=e=>{let{city:t}=e;return a.createElement("div",{className:Qa("item")},a.createElement("div",{className:Qa("item-label")},l.Ru.text({id:"userInfo.city",keyset:"profile"})),a.createElement("div",{className:Qa("item-content",{field:"city"})},t))};Va.displayName="ProfileInfoFieldCity";const Ga=Va,Ba=r().with("profile-info"),Wa=e=>{let{venueName:t}=e;const s=P(_a.aK),n=P(_a.Km),r=P(_a.MU),i=P(_a.fC),{venue:o}=P(_a.v),c=M(),u=(0,a.useCallback)((e=>{let[t]=e;const s=r.find((e=>{let{id:s}=e;return s===t}));s&&c((0,xa.MP)(s)),o&&c((0,xa.i9)({venue:!1}))}),[r,o,c]);return a.createElement("div",{className:Ba("item")},a.createElement("div",{className:Ba("item-label")},l.Ru.text({id:"userInfo.venue",keyset:"profile"})),a.createElement("div",{className:Ba("item-content",{field:"venue"})},s?a.createElement("div",{className:Ba("validation-wrapper",{error:o})},a.createElement(ca.l,{value:n?n.id:void 0,disabled:i,theme:"normal",size:"m",view:"classic",placeholder:l.Ru.text({id:"chooseVenuePlaceholder",keyset:"profile"}),onChange:u,options:r.map((e=>({value:e.id,content:e.name})))})):t,o&&a.createElement("div",{className:Ba("validation-error")},l.Ru.text({id:"validationLabel.venue",keyset:"profile"}))))};Wa.displayName="ProfileInfoFieldVenue";const Ja=Wa,Ka=r().with("profile-info"),Za=e=>{let{publicKey:t}=e;const s=P(_a.aK),n=P(_a.Jl),{publicKey:r}=P(_a.v),i=P(_a.Be),o=M(),c=s?n:t,u=(0,a.useCallback)((e=>{o((0,xa.Ro)(e.target.value)),r&&o((0,xa.i9)({publicKey:!1}))}),[o,r]);return s?a.createElement("div",{className:Ka("item")},a.createElement("div",{className:Ka("item-label")},l.Ru.text({id:"userInfo.publicKey",keyset:"profile"})),a.createElement("div",{className:Ka("item-content",{field:"publicKey"})},a.createElement("div",{className:Ka("validation-wrapper",{error:r})},a.createElement("textarea",{disabled:i,placeholder:"ssh-rsa....",rows:10,id:"public-key",className:Ka("input"),value:c,onChange:u})),r&&a.createElement("div",{className:Ka("validation-error")},l.Ru.text({id:"validationLabel.publicKey",keyset:"profile"})))):null};Za.displayName="ProfileInfoFieldPubclicKey";const Ya=Za,qa=r().with("profile-info"),$a=e=>{const{cls:t,profile:s,placement:n}=e,r=P(_a.aK),i=P(T.F6)===s.id,o=M(),{fetchProfile:u}=(0,a.useContext)(ha),d=P(_a.Be);if([s.email,s.phone,s.city,s.birthDate,s.school,s.schoolClass].every(Ra))return null;let m=null,p=null;s.birthDate&&(p=Aa.c9.fromISO(s.birthDate),m=Number(Aa.IX.fromDateTimes(p,Aa.c9.local()).toDuration().toFormat("yy")));const h=s.isEditable,E=l.Ru.text({id:"editDisabledLabel",keyset:"profile"});return a.createElement("section",{className:(0,$.j)(t,qa())},a.createElement("div",{className:qa("contacts")},s.email&&a.createElement(Ha,{mail:s.email}),n.city&&a.createElement(Ga,{city:n.city.name}),a.createElement(za,{phone:s.phone}),n.venue&&a.createElement(Ja,{venueName:n.venue.name}),s.birthDate&&a.createElement("div",{className:qa("item")},a.createElement("div",{className:qa("item-label")},l.Ru.text({id:"userInfo.birthday",keyset:"profile"})),a.createElement("div",{className:qa("item-content",{field:"birthday"})},a.createElement("time",{dateTime:s.birthDate,className:qa("contacts-item",{field:"birth-date"})},Aa.c9.fromISO(s.birthDate).toFormat("d MMMM yyyy"),c,"(".concat(l.Ru.text({id:"N-years",keyset:"profile",params:{count:m,n:m}}),")")))),i&&a.createElement(Ya,{publicKey:s.publicKey})),h&&!r&&a.createElement(fe,{enabled:!h,content:E},a.createElement("span",null,a.createElement(ge.$,{view:"lyceum",disabled:!h,size:"l",theme:"normal",onClick:()=>{o((0,xa.z)(s.phone,n.city,n.venue,La(s),s.publicKey))}},l.Ru.text({id:"editProfileButton",keyset:"profile"})))),h&&r&&a.createElement(ge.$,{view:"lyceum",size:"l",theme:"action",onClick:()=>{u&&o((0,xa.Lt)(u))},disabled:d},l.Ru.text({id:"saveProfileButton",keyset:"profile"})))};$a.displayName="ProfileInfo";const Xa=$a;var ei,ti,si,ni,ri,ai,ii,oi,li,ci=s(31334),ui=s(89093);function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},di.apply(null,arguments)}const mi=e=>a.createElement("svg",di({xmlns:"http://www.w3.org/2000/svg",id:"_100\\u0425100","data-name":"100\\u0425100",viewBox:"0 0 289.13 271.77",width:27,height:27},e),ei||(ei=a.createElement("defs",null,a.createElement("style",null,"\n      .cls-1 {\n        stroke-width: 9px;\n      }\n\n      .cls-1, .cls-2 {\n        stroke-miterlimit: 10;\n      }\n\n      .cls-1, .cls-2, .cls-3, .cls-4 {\n        fill: none;\n        stroke: #000;\n        stroke-linecap: round;\n      }\n\n      .cls-2, .cls-4 {\n        stroke-width: 6px;\n      }\n\n      .cls-3 {\n        stroke-width: 5px;\n      }\n\n      .cls-3, .cls-4 {\n        stroke-linejoin: round;\n      }\n    "))),ti||(ti=a.createElement("g",null,a.createElement("line",{className:"cls-1",x1:117.08,y1:123.96,x2:117.08,y2:144.62}),a.createElement("line",{className:"cls-1",x1:157.8,y1:123.96,x2:157.8,y2:144.62}),a.createElement("path",{className:"cls-2",d:"m148.61,157.24c-1.62,4.83-6.23,8.32-11.65,8.32s-9.94-3.42-11.61-8.18"}))),si||(si=a.createElement("g",null,a.createElement("line",{className:"cls-4",x1:137.7,y1:95.47,x2:137.7,y2:66.23}),a.createElement("circle",{cx:137.44,cy:55.68,r:10.47}))),ni||(ni=a.createElement("path",{className:"cls-4",d:"m41.19,123.6v-3.28c0-23.48,19.03-42.51,42.51-42.51h107.83c23.48,0,42.51,19.03,42.51,42.51v2.68"})),ri||(ri=a.createElement("path",{className:"cls-4",d:"m179.87,213.13h11.62c23.48,0,42.51-19.03,42.51-42.51"})),ai||(ai=a.createElement("circle",{className:"cls-4",cx:167.83,cy:216.23,r:10.85})),ii||(ii=a.createElement("path",{className:"cls-4",d:"m58.34,118.24c-15.87.07-28.72,12.96-28.72,28.85s12.85,28.78,28.72,28.85"})),oi||(oi=a.createElement("path",{className:"cls-3",d:"m216.85,118.24c15.87.07,28.72,12.96,28.72,28.85,0,15.89-12.85,28.78-28.72,28.85"})),li||(li=a.createElement("rect",{className:"cls-4",x:58.46,y:96.17,width:157.96,height:97.19,rx:29.45,ry:29.45})));var pi,hi,Ei,gi,yi,fi,Si,bi,vi;function Ni(){return Ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ni.apply(null,arguments)}s.p;const Ii=e=>a.createElement("svg",Ni({xmlns:"http://www.w3.org/2000/svg",id:"_100\\u0425100","data-name":"100\\u0425100",viewBox:"0 0 289.13 271.77",width:27,height:27},e),pi||(pi=a.createElement("defs",null,a.createElement("style",null,"\n      .cls-1 {\n        stroke-width: 9px;\n      }\n\n      .cls-1, .cls-2 {\n        stroke-miterlimit: 10;\n      }\n\n      .cls-1, .cls-2, .cls-3, .cls-4 {\n        fill: none;\n        stroke: #000;\n        stroke-linecap: round;\n      }\n\n      .cls-2, .cls-4 {\n        stroke-width: 6px;\n      }\n\n      .cls-3 {\n        stroke-width: 5px;\n      }\n\n      .cls-3, .cls-4 {\n        stroke-linejoin: round;\n      }\n    "))),hi||(hi=a.createElement("g",null,a.createElement("line",{className:"cls-1",x1:117.08,y1:123.96,x2:117.08,y2:144.62}),a.createElement("line",{className:"cls-1",x1:157.8,y1:123.96,x2:157.8,y2:144.62}),a.createElement("path",{className:"cls-2",d:"m148.61,157.24c-1.62,4.83-6.23,8.32-11.65,8.32s-9.94-3.42-11.61-8.18"}))),Ei||(Ei=a.createElement("g",null,a.createElement("line",{className:"cls-4",x1:137.7,y1:95.47,x2:137.7,y2:66.23}),a.createElement("circle",{cx:137.44,cy:55.68,r:10.47}))),gi||(gi=a.createElement("path",{className:"cls-4",d:"m41.19,123.6v-3.28c0-23.48,19.03-42.51,42.51-42.51h107.83c23.48,0,42.51,19.03,42.51,42.51v2.68"})),yi||(yi=a.createElement("path",{className:"cls-4",d:"m179.87,213.13h11.62c23.48,0,42.51-19.03,42.51-42.51"})),fi||(fi=a.createElement("circle",{className:"cls-4",cx:167.83,cy:216.23,r:10.85})),Si||(Si=a.createElement("path",{className:"cls-4",d:"m58.34,118.24c-15.87.07-28.72,12.96-28.72,28.85s12.85,28.78,28.72,28.85"})),bi||(bi=a.createElement("path",{className:"cls-3",d:"m216.85,118.24c15.87.07,28.72,12.96,28.72,28.85,0,15.89-12.85,28.78-28.72,28.85"})),vi||(vi=a.createElement("rect",{className:"cls-4",x:58.46,y:96.17,width:157.96,height:97.19,rx:29.45,ry:29.45})));var Ti,ki,Ci;function wi(){return wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},wi.apply(null,arguments)}s.p;const Ai=e=>a.createElement("svg",wi({width:27,height:27,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 27"},e),Ti||(Ti=a.createElement("circle",{cx:13.5,cy:13.5,r:12.5,fillRule:"evenodd",clipRule:"evenodd",opacity:.44})),ki||(ki=a.createElement("circle",{fill:"#fff",cx:13.5,cy:10.5,r:4.5})),Ci||(Ci=a.createElement("path",{fill:"#fff",d:"M20.99 22.21C19.86 19.17 16.93 17 13.5 17s-6.35 2.17-7.49 5.21C8.03 23.94 10.64 25 13.5 25s5.47-1.06 7.49-2.79z"})));var Oi,Ri,_i;function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Li.apply(null,arguments)}const Mi=e=>a.createElement("svg",Li({width:27,height:27,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 27",opacity:.44},e),Oi||(Oi=a.createElement("circle",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",cx:13.5,cy:13.5,r:12})),Ri||(Ri=a.createElement("path",{d:"M21.17 22.73C20.19 19.42 17.13 17 13.5 17s-6.69 2.42-7.67 5.73",fill:"none",stroke:"#000",strokeLinejoin:"round"})),_i||(_i=a.createElement("circle",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",cx:13.5,cy:10.5,r:4.5}))),Pi=(0,$.cn)("user-icon"),xi="0/0-0",Di={s:"small",m:"middle",l:"50",xl:"150"},Fi={s:"retina-small",m:"retina-middle",l:"retina-50",xl:"300"},zi=(0,a.forwardRef)(((e,t)=>{const{className:s,userId:n,avatarId:r=xi,size:i="m",alt:o,style:l,tabIndex:c,avatarReadable:u}=e,d=(0,$.j)(Pi({size:i}),s),m=u?{}:{"aria-hidden":!0};return a.createElement(ui.T.Consumer,null,(e=>{const s=r===xi;if(s||n===e){const e=t;let n;switch(i){case"s":case"m":n=s?Ai:mi;break;case"l":n=s?Mi:Ii;break;default:n=null}return a.createElement("span",{ref:e,tabIndex:c},n&&a.createElement(n,{className:d,style:l,"aria-label":o}))}const u=t;return a.createElement(pn.Tt.Consumer,null,(e=>{const t="".concat(e.host,"/get-yapic/").concat(r);return a.createElement("img",Object.assign({ref:u,className:d,style:l,alt:o,src:"".concat(t,"/islands-").concat(Di[i]),srcSet:"".concat(t,"/islands-").concat(Fi[i]),tabIndex:c},m,{loading:"lazy",decoding:"async"}))}))}))})),ji=["addonAfter","addonBefore","className","size","avatar","displayName","renderDisplayName","userId","avatarOutlineColor","withAvatarOutline","withStrikedName"],Ui=r().with("user"),Hi={tabIndex:-1,role:"none","aria-hidden":"true"},Qi=e=>{let{userId:t,node:s,className:n,isHidden:r}=e;const i=r?Hi:void 0;if(!t)return a.createElement("div",i,s);const o=bn.profile.build({userId:t.toString()});return a.createElement(ci.N,Object.assign({className:n,to:o},i),s)};Qi.displayName="wrapInProfileLink";const Vi=(0,a.forwardRef)(((e,t)=>{const{addonAfter:s,addonBefore:n,className:r,size:i="m",avatar:o,displayName:l,renderDisplayName:c,userId:u,avatarOutlineColor:d,withAvatarOutline:m,withStrikedName:p}=e,h=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,ji);return a.createElement("div",Object.assign({ref:t,className:(0,$.j)(r,Ui({size:i}))},h),Qi({userId:u,node:a.createElement(zi,{className:Ui("avatar",{outlined:m}),style:{borderColor:d},size:i,avatarId:o,userId:u,alt:l||"avatar"}),isHidden:!0}),a.createElement("div",{className:Ui("info")},n,c?c({className:Ui("name",{striked:p})}):Qi({userId:u,node:a.createElement("span",{className:Ui("name",{striked:p})},l)}),s))}));function Gi(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Bi(e){return e.items.map((e=>{let{dayOfWeek:t,startTime:s}=e;const n=Ne.Ay.fromISO(s).set({weekday:t});return Gi("".concat(n.toFormat("ccc")," ").concat(n.toLocaleString((0,Ne.km)("TimeSimple"))))})).join(", ")}const Wi={certificateCheck:new x.s("/certificate/check/")},Ji=((0,D.k)(Wi),r().with("student-profile-course-card")),Ki=e=>{let{enableLinks:t,teachersList:s}=e;if(!s||!s.length)return null;const n=s[0];return a.createElement("div",{className:Ji("teachers")},a.createElement(Vi,{key:n.id,className:Ji("teacher-item"),avatar:n.avatar,displayName:n.displayName,userId:t?n.id:void 0,addonAfter:a.createElement("p",{className:Ji("teacher-caption")},l.Ru.text({id:"role-teacher",keyset:"profile"}))}),s.length>1&&a.createElement("div",null,"+",s.length-1))};Ki.displayName="renderCourseTeachers";const Zi=e=>{const{certificateId:t,certificateNumber:s,eventsCount:n,group:r,schedulePlan:i,status:o,rating:c,visitedAttendancesCount:u,profile:d,enableLinks:m,id:h}=e,E=Boolean(n);return a.createElement("section",{className:Ji({status:o})},a.createElement(aa,Object.assign({},e,{link:m&&p.oi.courseDetails.build({courseId:h.toString(),groupId:r.id.toString()})})),o!==Ls.a.Enrolled&&a.createElement("p",{className:Ji("status",{type:o})},a.createElement("strong",{className:Ji("status-text")},l.Ru.text({id:"status-".concat(o),keyset:"students"}))),a.createElement("div",{className:Ji("info")},a.createElement("div",{className:Ji("main")},a.createElement("p",{className:Ji("group-name"),title:r.name},r.name),!t&&i&&a.createElement("p",{className:Ji("schedule")},Bi(i)),t&&s&&a.createElement(ci.N,{className:Ji("check-certificate-link"),behavior:"external",href:Wi.certificateCheck.build({},{certNumber:s,lastName:d.lastName})},a.createElement("span",{className:Ji("check-certificate-label")},l.Ru.text({id:"check-certificate",keyset:"certificates"})))),a.createElement("div",{className:Ji("summary")},a.createElement("p",{className:Ji("rating")},l.Ru.text({id:"rating-N",keyset:"profile",params:{n:0===c?0:c.toFixed(2)}})),t&&s?a.createElement("div",{className:Ji("certificate-number")},l.Ru.text({id:"certificate-number",keyset:"certificates",params:{number:(g=s,"".concat(g.substr(0,4)," ").concat(g.substr(4)))}})):E&&a.createElement("p",{className:Ji("visits")},l.Ru.element({id:"N/M-visits",keyset:"profile",params:{n:a.createElement("b",{className:Ji("count")},null!=u?u:0),m:n}})))),a.createElement("footer",{className:Ji("footer")},Ki(e)));var g};Zi.displayName="StudentProfileCourseCard";const Yi=(0,o.Ng)((function(e,t){const s=(null==t?void 0:t.accessibilityStatus)===h.Deleted,n=e.courses.courseMap[t.id]&&e.groups.groupMap[t.group.id];return{enableLinks:!t.disabled&&!s&&n}}))(Zi),qi=r().with("teacher-profile-course-card"),$i=e=>{const{id:t,group:s,schedulePlan:n,endedEvents:r,enableLinks:i}=e;return a.createElement("section",{className:qi()},a.createElement(aa,Object.assign({},e,{link:i&&p.ZZ.courseProgress.build({courseId:t.toString(),groupId:s.id.toString()})})),a.createElement("div",{className:qi("info")},a.createElement("div",{className:qi("main")},a.createElement("p",{className:qi("group-name"),title:s.name},s.name),n&&a.createElement("p",{className:qi("schedule")},Bi(n))),a.createElement("div",{className:qi("summary")},a.createElement("p",{className:qi("finished-lessons")},l.Ru.element({id:"finished-lessons-N",keyset:"profile",params:{n:a.createElement("b",null,r)}})))),a.createElement("footer",{className:qi("footer")},Xi(e)))};$i.displayName="TeacherProfileCourseCard";const Xi=e=>{let{enableLinks:t,bestStudent:s}=e;if(!s)return null;const n=a.createElement("p",{className:qi("best-student-caption")},l.Ru.element({id:"best-student-RATING",keyset:"profile",params:{rating:a.createElement("b",{className:qi("student-rating",{positive:!0})},0===s.rating?0:s.rating.toFixed(2))}}));return a.createElement(Vi,{className:qi("best-student"),avatar:s.avatar,displayName:s.displayName,userId:t?s.id:void 0,addonAfter:n})};Xi.displayName="renderBestStudent";const eo=(0,o.Ng)((function(e,t){const s=(null==t?void 0:t.accessibilityStatus)===h.Deleted,n=e.courses.courseMap[t.id]&&e.groups.groupMap[t.group.id];return{enableLinks:!t.disabled&&!s&&n}}))($i),to=r().with("user-info"),so=e=>{let{cls:t,user:s}=e;const n=a.createElement("a",{className:to("email"),href:"mailto:".concat(s.email),"aria-label":"емейл ".concat(s.email)},s.email);return a.createElement(Vi,{size:"l",className:(0,$.j)(t,to()),userId:s.id,avatar:s.avatar,displayName:s.displayName,addonAfter:n})};so.displayName="UserInfo";const no=so,ro=r().with("profile-info"),ao=e=>{const{relatives:t,type:s}=e;return t&&t.length?a.createElement("section",{className:ro("relatives")},a.createElement("div",{className:ro("item-label")},l.Ru.text({id:s,keyset:"profile"})),t.map((e=>a.createElement(no,{key:e.id,user:e})))):null};ao.displayName="ProfileRelatives";const io=ao,oo=r().with("user-tag"),lo=e=>{let{children:t,color:s}=e;return a.createElement("span",{className:oo(),style:{backgroundColor:s}},t)};lo.displayName="UserTag";const co=lo,uo=r().with("user-profile"),mo=e=>{let{profile:t}=e;const s=P(_a.aK),n=P(_a.rd),{name:r}=P(_a.v),i=M(),o=(0,a.useCallback)((e=>{const{value:t}=e.target;i((0,xa.R8)(t)),r&&i((0,xa.i9)({name:!1}))}),[i,r]);return a.createElement("section",{className:uo("user-section")},a.createElement(zi,{className:uo("avatar"),alt:t.displayName,avatarId:t.avatar,userId:t.id,size:"xl"}),a.createElement("div",{className:uo("name-and-tags")},s?a.createElement("div",{className:uo("validation-wrapper",{error:r})},a.createElement(qt,{id:"user-fullname-input",cls:uo("input"),size:"l",type:"text",value:n,onChange:o})):a.createElement($t.D,{level:1},La(t)),r&&a.createElement("div",{className:uo("validation-error")},l.Ru.text({id:"validationLabel.name",keyset:"profile"})),a.createElement("div",{className:uo("tags")},t.tags.map((e=>a.createElement(co,{key:e.id,color:e.color},e.name))))))};mo.displayName="ProfileUserSection";const po=mo,ho=function(e){const t=ua.useCoursesQueryParams();return a.createElement(ga,{withChildren:!0,withParents:!0,status:t.courseStatus,year:t.year,userId:e.userId},(t=>a.createElement(rr,{fetchError:t.fetchError,fetchStatus:t.fetchStatus,renderSuccess:e.render(t.profile,t.coursesSummary,t.placement)})))};ho.displayName="ProfileQuery";const Eo=r().with("foreign-profile");class go extends a.Component{constructor(){super(...arguments),this.renderPage=(e,t,s)=>()=>{if(!e||!s)return null;const n=l.Ru.text({id:"profile",keyset:"page-titles",params:{user:e.displayName}});return a.createElement("article",{className:Eo()},a.createElement(tr.m,null,a.createElement("title",null,n),a.createElement("meta",{name:"title",content:n})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement(po,{profile:e}),a.createElement(Xa,{cls:Eo("contacts-section"),profile:e,placement:s}),a.createElement("div",{className:Eo("relatives-section")},a.createElement(io,{relatives:e.children,type:"children"}),a.createElement(io,{relatives:e.parents,type:"parents"})),this.renderCourseSection(t,e))))}}renderCourseSection(e,t){if(!e)return null;const s=0!==e.student.length,n=0!==e.teacher.length;return a.createElement("section",{className:Eo("course-section")},a.createElement($t.D,{level:2},l.Ru.text({id:"courses",keyset:"courses"})),a.createElement(va,{className:Eo("tabs"),userId:t.uid,years:e.years}),!s&&!n&&a.createElement("p",null,l.Ru.text({id:"no-available-courses",keyset:"profile"})),n&&a.createElement(a.Fragment,null,a.createElement("h3",{className:Eo("course-sub-heading")},l.Ru.text({id:"role-teacher",keyset:"profile"})),this.renderCourseList(E.Teacher,e.teacher,t)),s&&a.createElement(a.Fragment,null,a.createElement("h3",{className:Eo("course-sub-heading")},l.Ru.text({id:"role-student",keyset:"profile"})),this.renderCourseList(E.Student,e.student,t)))}renderCourseList(e,t,s){return a.createElement("ul",{className:Eo("course-list")},t.map((t=>{const n="".concat(t.id,"-").concat(t.group.id);return a.createElement("li",{key:n,className:Eo("course-item")},(()=>{switch(e){case E.Student:return a.createElement(Yi,Object.assign({},t,{profile:s}));case E.Teacher:case E.Methodist:return a.createElement(eo,t);default:throw new m("Role not supported",{role:e})}})())})))}render(){const e=Number(this.props.match.params.userId);return a.createElement(ho,{userId:e,render:this.renderPage})}}go.displayName="ForeignProfilePage";const yo=$r((0,i.y)((0,o.Ng)((function(e){return{user:e.users.user}}))(go)));var fo=s(59399),So=s.n(fo);const bo=r().with("parent-invite"),vo=e=>{let{parentInvite:t}=e;const s=M(),n=(0,a.useCallback)((()=>{s((0,fn.z)({i18n:{id:"copy-link-success-message",keyset:"common"},type:Sn.V.SUCCESS}))}),[s]);return t&&t.url?a.createElement("div",{className:bo()},a.createElement("div",{className:bo("wrapper")},a.createElement("div",{className:bo("heading")},a.createElement("b",{className:bo("subtitle")},l.Ru.text({id:"parent-invite",keyset:"invites"})),a.createElement(qt,{view:"classic",disabled:!0,size:"l",className:bo("input"),defaultValue:t.url||""}),a.createElement(So(),{text:t.url||"",onCopy:n},a.createElement(ge.$,{className:bo("control-button"),theme:"action",view:"lyceum",size:"l"},l.Ru.text({id:"copy",keyset:"common"})))),a.createElement("p",{className:bo("description")},l.Ru.text({id:"parent-invite-description",keyset:"invites"})))):null},No=r().with("own-profile");class Io extends a.Component{constructor(){super(...arguments),this.renderPage=(e,t,s)=>()=>{if(!e||!s)return null;const n=l.Ru.text({id:"profile",keyset:"page-titles",params:{user:e.displayName}});return a.createElement("article",{className:No()},a.createElement(tr.m,null,a.createElement("title",null,n),a.createElement("meta",{name:"title",content:n})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement(po,{profile:e}),a.createElement(Xa,{cls:No("contacts-section"),profile:e,placement:s}),a.createElement(a.Fragment,null,a.createElement("div",{className:No("relatives-section")},a.createElement(io,{relatives:e.children,type:"children"}),a.createElement(io,{relatives:e.parents,type:"parents"})),a.createElement(vo,{parentInvite:e.invite})),this.renderCourseSection(t,e))))}}renderCourseSection(e,t){var s;const{student:n=[],teacher:r=[]}=e||{},i=Boolean(null==(s=this.props.user)?void 0:s.isSuperuser),o=n.length>0,c=r.length>0,u=this.props.status===h.Archived&&!i;return a.createElement("section",{className:No("course-section")},a.createElement($t.D,{level:2},l.Ru.text({id:"courses",keyset:"courses"})),a.createElement(va,{isExtended:i,className:No("tabs"),years:null==e?void 0:e.years}),!o&&!c&&a.createElement("p",null,l.Ru.text({id:"no-available-courses",keyset:"profile"})),c&&a.createElement(a.Fragment,null,o&&a.createElement("h3",{className:No("course-sub-heading")},l.Ru.text({id:"role-teacher",keyset:"profile"})),this.renderCourseList(E.Teacher,r,t,u)),o&&a.createElement(a.Fragment,null,c&&a.createElement("h3",{className:No("course-sub-heading")},l.Ru.text({id:"role-student",keyset:"profile"})),this.renderCourseList(E.Student,n,t,u)))}renderCourseList(e,t,s,n){return a.createElement("ul",{className:No("course-list")},t.map((t=>{const r="".concat(t.id,"-").concat(t.group.id);return a.createElement("li",{key:r,className:No("course-item")},a.createElement("div",{className:No("course-card")},(()=>{switch(e){case E.Student:return a.createElement(Yi,Object.assign({},t,{profile:s,disabled:n||t.status!==Ls.a.Enrolled}));case E.Teacher:case E.Methodist:return a.createElement(eo,Object.assign({},t,{disabled:n}));default:throw new m("Role not supported",{role:e})}})()))})))}render(){return a.createElement(ho,{render:this.renderPage})}}Io.displayName="OwnProfilePage";const To=Io,ko=$r((0,i.y)((0,o.Ng)((function(e){var t;return{user:e.users.user,status:null!=(t=e.courses.status)?t:h.Active}}))(To)));var Co=s(22589),wo=s(64305);const Ao=r().with("achievement"),Oo=()=>a.createElement("span",{className:Ao()},a.createElement(ie,{size:"l",type:"thumbs-up"}));Oo.displayName="Achievement";const Ro=Oo,_o=r().with("progress-bar");class Lo extends a.Component{render(){const{percentage:e,size:t="auto",theme:s="light"}=this.props,n={width:"".concat(e,"%")};return a.createElement("div",{className:_o({size:t,theme:s}),"aria-label":l.Ru.text({id:"lesson-progress-bar-label",keyset:"lessons"})},e?a.createElement("div",{className:_o("fill"),style:n}):null)}}Lo.displayName="ProgressBar";const Mo=Lo;let Po=function(e){return e.CreatedInLms="created-in-lms",e.CreatingInProvider="creating-in-provider",e.PreparingInvites="preparing-invites",e.ReadyToUse="ready-to-use",e.FinishingInProvider="finishing-in-provider",e.Finished="finished",e}({});var xo=s(76579);const Do=e=>{let{lessonTitle:t,closeModal:s,lessonId:n,groupId:r,setLoading:i}=e;const o=M(),c=a.createElement("span",{className:"y3ea7e--modalTitle"},l.Ru.text({id:"start-webinar-modal-content",keyset:"lessons"}),a.createElement("b",null," ",t),"?");return a.createElement(tn,{visible:!0,scope:"inplace",okText:l.Ru.text({id:"start-webinar",keyset:"lessons"}),cancelText:l.Ru.text({id:"no-go-back",keyset:"common"}),content:c,okButtonTheme:"approve",cancelButtonTheme:"clear",onOkClick:()=>{i(!0),o((0,xo.nK)(n,r)),s()},onCancelClick:s,onCloseClick:s})};Do.displayName="WebinarModal";const Fo=Do,zo=r().with("webinar-button"),jo=e=>{let{lessonId:t,webinar:s,role:n,groupId:r,lessonTitle:i}=e;const o=(null==s?void 0:s.status)===Po.ReadyToUse,c=(null==s?void 0:s.status)===Po.PreparingInvites,[u,d]=(0,a.useState)(c),[m,p]=(0,a.useState)(!1),h=M(),g=n===E.Teacher,y=(0,a.useMemo)((()=>o?{onClick:()=>{var e,t;return window.open(g?null==s||null==(e=s.moderatorInvite)?void 0:e.link:null==s||null==(t=s.userInvite)?void 0:t.link,"_blank")},children:l.Ru.text({id:"join-webinar",keyset:"lessons"})}:{onClick:()=>p(!0),children:l.Ru.text({id:"start-webinar",keyset:"lessons"})}),[o,g,s]);return(0,a.useEffect)((()=>{let e=null,n=null;return(null==s?void 0:s.status)===Po.PreparingInvites?(e=setInterval((()=>{h((0,xo.Ju)(t,r))}),3e3),n=setTimeout((()=>{e&&(clearInterval(e),d(!1),h((0,fn.z)({i18n:{id:"error",keyset:"api-errors"},type:Sn.V.ERROR})))}),12e4)):(e&&(d(!1),clearInterval(e),e=null),n&&(clearTimeout(n),n=null)),()=>{e&&(clearInterval(e),e=null),n&&(clearTimeout(n),n=null)}}),[null==s?void 0:s.status]),o||c||g&&!s?a.createElement(a.Fragment,null,a.createElement("div",{onClick:e=>e.preventDefault()},a.createElement(ge.$,Object.assign({progress:u,className:zo(),size:"l",theme:"approve",view:"lyceum"},y)),m&&a.createElement(Fo,{lessonId:t,groupId:r,lessonTitle:i,closeModal:()=>p(!1),setLoading:d}))):null},Uo=r().with("lesson-card");class Ho extends a.Component{constructor(e){super(e),this.isOverDeadline=!1,this.isNearDeadline=!1,this.daysBeforeDeadline=null,this.numTotal=void 0,this.renderLessonInfo=()=>{const{deadline:e,role:t}=this.props;let s;switch(t){case E.Student:break;case E.Teacher:case E.Methodist:s=this.renderTasksInfo();break;default:throw new m("Role not supported",{role:t})}return a.createElement("ul",{className:Uo("lesson-info")},s&&a.createElement("li",{className:Uo("info-item")},s),Boolean(e)&&a.createElement("li",{className:Uo("info-item")},this.renderDeadlineInfo()))},this.renderCaptions=()=>{const{numPassed:e,role:t}=this.props,{numTotal:s}=this,n=Uo("current-count",{"non-zero":Boolean(e)});let r;switch(t){case E.Student:r="N/M-tasks-passed";break;case E.Teacher:case E.Methodist:r="N/M-passes";break;default:throw new m("Role not supported",{role:t})}return a.createElement(a.Fragment,null,a.createElement("div",{className:Uo("brief-caption")},a.createElement("span",{className:n},e),c,"/",s),a.createElement("span",{className:Uo("full-caption")},l.Ru.element({id:r,params:{m:s,n:a.createElement("span",{className:n},e)}})))},this.renderTasksInfo=()=>{const e=this.props.numTasks;return e?l.Ru.element({id:"N-tasks",params:{count:e,n:a.createElement("b",{className:Uo("tasks-count")},e)}}):null},this.renderDeadlineInfo=()=>{const{deadline:e}=this.props,{isOverDeadline:t}=this;return e?a.createElement("span",{className:Uo("deadline")},t&&a.createElement(a.Fragment,null,a.createElement(ie,{className:Uo("deadline-icon"),size:"s",type:"deadline"}),c),l.Ru.text({id:"before-DATE",params:{date:Ne.Ay.fromISO(e).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))}}),this.renderDeadlineMessage()):null},this.renderDeadlineMessage=()=>{const{daysBeforeDeadline:e,isOverDeadline:t,isNearDeadline:s}=this;if(!s||null===e)return null;const n=t?l.Ru.text({id:"deadline-over"}):a.createElement("span",{className:Uo("warning")},e>0&&l.Ru.text({id:"N-days-left",params:{n:e,count:e}}));return a.createElement("span",{className:Uo("deadline-message")},c,"—",c,n)};const{deadline:t,numTasks:s,numStudents:n,role:r}=this.props;switch(r){case E.Student:this.numTotal=s;break;case E.Teacher:case E.Methodist:this.numTotal=n}const i=t?Ne.Ay.fromISO(t):null,o=i?i.diffNow("days").days:null;null!==o&&(this.isOverDeadline=o<0,this.isNearDeadline=o<7,this.daysBeforeDeadline=Math.ceil(o))}render(){const{isOverDeadline:e,numTotal:t}=this,{id:s,title:n,isHidden:r,numPassed:i,hasAchievement:o,narrow:c,hideScoreInformation:u,isWebinarEnabled:d,webinar:m,role:p,groupId:h}=this.props,g=t?Math.floor(i/t*100):0;return p!==E.Student||this.props.isAvailableByDate?a.createElement("div",{className:Uo({"hidden-lesson":r,narrow:c})},a.createElement("div",{className:Uo("lesson")},a.createElement("h4",{className:Uo("lesson-title")},n),this.renderLessonInfo(),p!==E.Methodist&&d&&a.createElement(jo,{lessonId:s,webinar:m,role:p,groupId:h,lessonTitle:n})),!u&&a.createElement("div",{className:Uo("progress")},a.createElement(Mo,{percentage:g,size:c?"small":"medium",theme:e?"dark":"light"}),a.createElement("span",{className:Uo("percentage",{"non-zero":Boolean(i)})},g," %"),this.renderCaptions()),a.createElement("ul",{className:Uo("indicator-list")},e&&a.createElement("li",{className:Uo("indicator-item")},a.createElement(We,{size:"large",type:Qe.Finished})),o&&a.createElement("li",{className:Uo("indicator-item")},a.createElement(Ro,null))),r&&a.createElement(fe,{content:l.Ru.text({id:"lesson-hidden"})},a.createElement("span",{className:Uo("visibility-indicator")},a.createElement(ie,{className:Uo("eye-icon"),size:"l",type:"eye-closed"})))):a.createElement("div",{className:Uo({narrow:c,"not-yet-available-lesson":!0})},a.createElement("div",{className:Uo("lesson")},a.createElement("h4",{className:Uo("lesson-title")},n,a.createElement(ie,{size:"l",type:"lock"})),a.createElement("p",{className:Uo("lesson-info")},l.Ru.text({id:"lesson-is-not-yet-available",keyset:"lessons",params:{date:Ne.Ay.fromISO(this.props.startDate).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))}}))))}}Ho.displayName="LessonCard";const Qo=Ho,Vo=r().with("link-list");class Go extends a.Component{render(){const{items:e,itemType:t,listType:s}=this.props;let n;switch(t){case"link":n=e=>a.createElement(L.N_,Object.assign({className:Vo("link")},e),e.children);break;case"navlink":n=e=>a.createElement(L.k2,Object.assign({exact:!0,activeClassName:Vo("link_active"),className:Vo("link")},e),e.children)}return a.createElement("ul",{className:Vo({type:s})},e.map((e=>a.createElement("li",{key:e.id,className:Vo("item")},e.url?a.createElement(n,{to:e.url},e.component):a.createElement("span",null,e.component)))))}}Go.displayName="LinkList";const Bo=Go;var Wo=s(74733),Jo=s.n(Wo),Ko=s(40736),Zo=s(84483);const Yo=r().with("lessons-module"),qo=e=>{let{lessons:t,renderLessonList:s,module:n,isOpenedByDefault:r,userId:i}=e;const[o,c]=(0,a.useState)(r),{id:u,title:d,description:m}=n,p=e=>{let{moduleId:t,userId:s}=e;return t===u&&i===s},h=(0,a.useCallback)((()=>{const e=!o;if(!r&&!Jo()(i)){var t;let s=(null==(t=Ko.I.get(Zo.Z.ModuleStates))?void 0:t.states)||[];const n=s.find(p);!n&&e?(s.push({moduleId:u,userId:i,opened:!0}),s=s.slice(-50)):n&&!e&&(s=s.filter((e=>!p(e))));try{Ko.I.set(Zo.Z.ModuleStates,{states:s})}catch(e){}}c((e=>!e))}),[u,o,r]),E=(0,a.useCallback)((()=>a.createElement("div",null,s())),[s]);return(0,a.useEffect)((()=>{var e;r||-1!==((null==(e=Ko.I.get(Zo.Z.ModuleStates))?void 0:e.states)||[]).findIndex(p)&&c(!0)}),[u,r]),a.createElement("section",{key:u,className:(0,$.j)(Yo(),o?Yo("opened"):"")},a.createElement("div",{className:Yo("heading")},a.createElement($t.D,{level:3},d),a.createElement(ge.$,{className:Yo("toggle-button"),checked:o,size:"xs",theme:"clear",view:"lyceum",icon:e=>a.createElement(ie,{className:(0,$.j)(e,Yo("arrow-icon")),direction:o?"top":"bottom",size:"m",type:"scroll"}),disabled:!t.length,onClick:h,"aria-label":l.Ru.text({keyset:"common",id:"show"})}),a.createElement("p",{className:Yo("description")},m)),a.createElement("div",{className:Yo("content")},o?E():null))};qo.displayName="LessonsModule";const $o=r().with("lessons-dashboard"),Xo=e=>{let{fetchError:t,fetchStatus:s,role:n,lessons:r,courseId:i,groupId:o}=e;const[c,u]=(0,a.useState)(null),[d,m]=(0,a.useState)([]),h=P(T.yZ),g=P(J),{groupLessonsByModules:y}=null!=g?g:{},f=(0,a.useCallback)((async()=>{const e="/api/proxy/courses/".concat(i,"/modules/?group_id=").concat(o);try{const t=await(0,zt.Ay)(e);m(t)}catch(e){u(e)}}),[i,o]),S=(0,a.useCallback)((()=>a.createElement("div",{className:$o("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))),[]),b=(0,a.useCallback)((e=>a.createElement("p",{className:$o("message",{error:!0})},e)),[]),v=(0,a.useCallback)((e=>{if(!e.length)return a.createElement("p",{className:$o("message")},l.Ru.text({id:"no-lessons-message-".concat(n),keyset:"lessons"}));const t=e.map((e=>({id:e.id,component:a.createElement(Qo,Object.assign({},e,{role:n,groupId:Number(o)})),url:n!==E.Student||e.isAvailableByDate?p.oi.lessonDetails.build({courseId:i,groupId:o,lessonId:e.id.toString()}):void 0})));return a.createElement(Bo,{items:t,itemType:"link",listType:"main"})}),[n,i,o]),N=(0,a.useCallback)((e=>{let t=!1;const s=e.reduce(((e,t)=>(e.push(Object.assign({},t,{lessons:r.filter((e=>e.moduleId===t.id)),isOpenedByDefault:!1})),e)),[]);return s.map(((r,a)=>{const i=a===e.length-1?[]:s[a+1].lessons;let o=Boolean(!i.length&&r.lessons.length&&n===E.Student);return o&&!t?t=!0:t&&(o=!1),Object.assign({},r,{isOpenedByDefault:o})}))}),[r,n]),I=(0,a.useCallback)((()=>{if(!d.length)return v(r);const e=N(d);return a.createElement("div",{className:$o("modules-wrapper")},e.map((e=>{const{lessons:t,id:s,isOpenedByDefault:n}=e;return a.createElement(qo,{key:s,userId:h,lessons:t,module:e,isOpenedByDefault:n,renderLessonList:()=>v(t)})})))}),[d,N,v,r]);return(0,a.useEffect)((()=>{y&&f()}),[]),a.createElement("div",{className:$o("content-wrapper")},a.createElement(rr,{fetchError:t||c,fetchStatus:s,renderPending:S,renderError:b,renderSuccess:I}))};Xo.displayName="LessonsDashboard";var el=s(58761),tl=s(35304);const sl=r().with("lessons-dashboard"),nl=e=>{let{fetchStatus:t,fetchError:s,courseId:n,groupId:r,role:i,lessons:o,clearLessonsAction:c,fetchStudentLessonsAction:u}=e;return(0,ne.A)((function(){t!==Ot.L.SUCCESS&&u({courseId:Number(n),groupId:Number(r)})})),(0,Co.A)((()=>(u({courseId:Number(n),groupId:Number(r)}),()=>{c()})),[n,r]),(0,wo.A)((()=>{c()})),a.createElement("section",{className:sl()},a.createElement($t.D,{level:2},l.Ru.text({id:"lessons"})),a.createElement(Xo,{fetchStatus:t,fetchError:s,courseId:n,groupId:r,role:i,lessons:o}))};nl.displayName="LessonsDashboardWrapper";const rl=(0,o.Ng)((function(e){return{lessons:(0,tl.L_)(e),fetchError:(0,tl.FW)(e),fetchStatus:(0,tl.Bn)(e)}}),(function(e){return(0,_.zH)({fetchStudentLessonsAction:el.Lu.request,clearLessonsAction:el.rc},e)}))(nl),al=r().with("aside-section");class il extends a.Component{render(){const{cls:e,title:t,body:s,tabName:n,tabUrl:r}=this.props;return a.createElement("section",{className:(0,$.j)(e,al())},a.createElement($t.D,{smallerOnDesktop:!0,level:2},t),a.createElement("div",{className:al("body")},s),r&&n&&a.createElement(Rs,{wideOnMobile:!0,to:r,view:"button"},n))}}il.displayName="AsideSection";const ol=il,ll={[Ye.gt.Accepted]:l.Ru.text({id:"task-status-pass"}),[Ye.gt.AcceptedAfterDeadline]:l.Ru.text({id:"task-status-pass"}),[Ye.gt.PartialAccepted]:l.Ru.text({id:"task-status-pass"}),[Ye.gt.NotSolved]:l.Ru.text({id:"problem-status-not-solved"}),[Ye.gt.New]:l.Ru.text({id:"problem-status-not-solved"}),[Ye.gt.SamplesPassed]:l.Ru.text({keyset:"solutions",id:"status-samples-passed"}),[Ye.gt.Wrong]:l.Ru.text({id:"task-status-wrong"}),[Ye.gt.Rework]:l.Ru.text({id:"task-status-redo"}),[Ye.gt.Uploaded]:l.Ru.text({id:"task-status-uploaded"}),[Ye.gt.AssignedToP2p]:l.Ru.text({id:"task-status-assigned-to-p2p"}),[Ye.gt.OnClarifying]:l.Ru.text({id:"task-status-on-clarifying"}),[Ye.gt.Draft]:l.Ru.text({id:"task-status-draft"}),[Ye.gt.Review]:l.Ru.text({id:"status-on-review",keyset:"solutions"}),[Ye.gt.AutoReview]:l.Ru.text({id:"status-on-auto-review",keyset:"solutions"})},cl=r().with("solution-status"),ul=cl("text"),dl=cl("score"),ml=cl("max-score");class pl extends a.Component{renderStatus(){const{scoreMax:e,score:t,type:s,waitingCount:n=1,hideScoreInformation:r}=this.props;switch(s){case Ye.gt.Accepted:case Ye.gt.PartialAccepted:case Ye.gt.NotSolved:case Ye.gt.Wrong:return a.createElement(a.Fragment,null,a.createElement("span",{className:ul},ll[s]),!r&&"number"==typeof t&&a.createElement(a.Fragment,null,a.createElement("span",{className:dl}," ",t," "),a.createElement("span",{className:ml},"/",e)));case Ye.gt.OnClarifying:case Ye.gt.AcceptedAfterDeadline:return a.createElement(a.Fragment,null,a.createElement(fe,{content:ll[s]},a.createElement("span",{className:ul},ll[s])),!r&&"number"==typeof t&&a.createElement(a.Fragment,null,a.createElement("span",{className:dl}," ",t," "),a.createElement("span",{className:ml},"/",e)));case Ye.gt.New:case Ye.gt.Rework:case Ye.gt.Uploaded:case Ye.gt.AssignedToP2p:case Ye.gt.Draft:case Ye.gt.SamplesPassed:return a.createElement("span",{className:ul},ll[s]);case Ye.gt.Review:case Ye.gt.AutoReview:return a.createElement("span",{className:ul},l.Ru.text({id:"task-status-waiting",params:{count:n}}),n>1&&a.createElement(a.Fragment,null," ",n));default:return null}}render(){const{type:e}=this.props;return a.createElement("div",{className:cl({type:e})},this.renderStatus())}}pl.displayName="SolutionStatus";const hl=pl,El=r().with("student-task");class gl extends a.Component{render(){const{solution:e,scoreMax:t,title:s,lesson:n,hasManualCheck:r,hasP2p:i,taskType:o}=this.props.task;return a.createElement("div",{className:El()},a.createElement(st,{isTaskManuallyChecked:r&&o===qe.wP.Other,isTaskP2PChecked:i,taskTitle:s,lesson:n,scoreMax:t,score:e?e.score:void 0,solutionStatus:e?e.status.type:void 0}),e&&e.status.type!==Ye.gt.New&&a.createElement("span",{className:El("status")},a.createElement(hl,{scoreMax:t,score:e.score,type:e.status.type,hideScoreInformation:n.hideScoreInformation||"material"===o})))}}gl.displayName="StudentTask";const yl=gl;class fl extends a.Component{render(){return a.createElement(ol,{title:l.Ru.text({id:"tasks"}),body:this.renderTasksList()})}renderTasksList(){const{courseId:e,groupId:t,tasks:s}=this.props,n=s.map((s=>({id:s.id,component:a.createElement(yl,{key:s.id,task:s}),url:s.lesson?p.at.taskDetails.build({courseId:e,groupId:t,lessonId:s.lesson.id.toString(),taskId:s.id.toString()}):""})));return a.createElement(Bo,{items:n,itemType:"link",listType:"aside"})}}fl.displayName="TasksDashboard";const Sl=fl;var bl,vl=s(73880);function Nl(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}let Il=(bl=class e extends a.Component{componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.courseId!==e.courseId&&this.fetchData()}fetchData(){const{courseId:e,groupId:t}=this.props;this.props.fetchStudentTasks({courseId:Number(e),groupId:Number(t),limit:6}),this.props.fetchStudentTasksUnsolved({courseId:Number(e),groupId:Number(t),limit:6})}renderError(e){return e}static renderNothing(){return null}renderTasksDashboard(){const{courseId:e,groupId:t,unsolvedTasks:s}=this.props;return s.length?a.createElement(Sl,{courseId:e,groupId:t,tasks:s}):null}render(){const{unsolvedTasksFetchError:t,unsolvedTasksFetchStatus:s}=this.props;return a.createElement(rr,{fetchError:t,fetchStatus:s,renderError:this.renderError,renderPending:e.renderNothing,renderSuccess:this.renderTasksDashboard})}},Nl(bl.prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(bl.prototype,"renderError"),bl.prototype),Nl(bl.prototype,"renderTasksDashboard",[R.Q2],Object.getOwnPropertyDescriptor(bl.prototype,"renderTasksDashboard"),bl.prototype),bl);Il.displayName="TasksDashboardContainer";const Tl=(0,o.Ng)((function(e){return{unsolvedTasks:(0,vl.wM)(e),unsolvedTasksFetchError:(0,vl.KK)(e),unsolvedTasksFetchStatus:(0,vl.CK)(e)}}),(function(e){return(0,_.zH)({fetchStudentTasks:cn.aY,fetchStudentTasksUnsolved:cn.M8},e)}))(Il);var kl=s(37285);function Cl(e,t,s){return s||(s=Object.keys(e)),s.some((s=>!Object.is(e[s],t[s])))}class wl extends a.PureComponent{componentDidMount(){this.fetchCourseDetails()}componentDidUpdate(e){(null===this.props.fetchStatus||Cl(this.props,e,["courseId","groupId"]))&&this.fetchCourseDetails()}render(){return this.props.children({fetchError:this.props.fetchError,fetchStatus:this.props.fetchStatus,courseDetails:this.props.courseDetails})}fetchCourseDetails(){const{courseId:e,groupId:t}=this.props;this.props.fetchCourseDetailsStart({courseId:Number(e),groupId:Number(t)})}}wl.displayName="CourseDetailsProvider";const Al=(0,o.Ng)((function(e){return{fetchError:Z(e),fetchStatus:K(e),courseDetails:J(e)}}),(function(e){return(0,_.zH)({fetchCourseDetailsStart:kl.Uz.request,clearCourseDetails:kl.NT},e)}))(wl),Ol=r().with("details"),Rl=e=>{let{className:t,summary:s,content:n}=e;return a.createElement("details",{className:(0,$.j)(Ol(),t)},a.createElement("summary",{className:Ol("summary")},s),n)};Rl.displayName="Details";const _l=r().with("html-content");class Ll extends a.Component{render(){const{content:e}=this.props;return e?a.createElement("div",{className:_l(),dangerouslySetInnerHTML:{__html:e}}):null}}Ll.displayName="HtmlContent";const Ml=Ll,Pl=r().with("teacher-info"),xl=e=>{let{cls:t,users:s}=e;return a.createElement("section",{className:(0,$.j)(t,Pl())},a.createElement($t.D,{level:2,className:Pl("heading")},l.Ru.text({id:"role-teacher",keyset:"profile"})),s.map((e=>a.createElement(no,{cls:Pl("content"),user:e,key:e.id}))))};xl.displayName="TeacherInfo";const Dl=xl,Fl=r().with("course-details"),zl=e=>{let{teachersList:t}=e;const[s,n]=(0,a.useState)(!1),r=s?t:t.slice(0,3);return a.createElement("div",{"data-testid":"teachers-list"},a.createElement("div",{"aria-live":"polite"},t&&a.createElement(Dl,{users:r})),(null==t?void 0:t.length)>3&&a.createElement(ge.$,{size:"m",theme:"action",view:"lyceum",className:Fl("button-teachers"),onClick:()=>n((e=>!e)),"aria-expanded":s,"aria-live":"polite"},s?l.Ru.text({id:"hide-teachers",keyset:"common"}):l.Ru.text({id:"all-teachers-show",keyset:"common"})))};zl.displayName="TeachersList";const jl=r().with("course-details");class Ul extends a.Component{constructor(){super(...arguments),this.renderPage=(e,t,s)=>()=>{if(!e)return null;const n=l.Ru.text({id:"course-details-student",keyset:"page-titles",params:{course:e.title}});return a.createElement("article",{className:jl()},a.createElement(tr.m,null,a.createElement("title",null,n),a.createElement("meta",{name:"title",content:n})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Top,null,a.createElement("div",{className:jl("top")},a.createElement("main",{className:jl("top-main")},a.createElement($t.D,{level:1},e.title),e.description&&a.createElement(Rl,{className:jl("description"),summary:l.Ru.text({id:"course-description",keyset:"courses"}),content:a.createElement(Ml,{content:e.description})})),a.createElement("aside",{className:jl("top-aside")},a.createElement(zl,{teachersList:e.teachersList})))),a.createElement(sr.A.Main,null,a.createElement(rl,{courseId:t,groupId:s,role:e.role})),!1!==e.showTasks&&a.createElement(sr.A.Aside,null,a.createElement(Tl,{courseId:t,groupId:s}))))}}render(){const{courseId:e,groupId:t}=this.props.match.params;return a.createElement(Al,{courseId:e,groupId:t},(s=>{let{fetchError:n,fetchStatus:r,courseDetails:i}=s;return a.createElement(rr,{fetchError:n,fetchStatus:r,renderSuccess:this.renderPage(i,e,t)})}))}}Ul.displayName="CourseDetails";const Hl=$r(Ul);var Ql=s(28957);function Vl(e){return e.materials.materials}function Gl(e){return e.materials.materialsFetchStatus}function Bl(e){return e.materials.materialsFetchError}function Wl(e){return e.materials.detailedMaterialInfo}function Jl(e){return e.materials.detailsFetchStatus}function Kl(e){return e.materials.detailsFetchError}let Zl=function(e){return e.Textbook="textbook",e.Guide="guide",e.Presentation="presentation",e.Solutions="solutions",e.Other="other",e.Teacherbook="teacherbook",e}({});const Yl=r().with("material-list");class ql extends a.PureComponent{constructor(){super(...arguments),this.renderBody=()=>{const{fetchError:e,fetchStatus:t}=this.props;return a.createElement("div",{className:Yl()},a.createElement(nr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderMaterialList,renderError:this.renderError}))},this.renderSpin=()=>a.createElement("div",{className:Yl("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"})),this.renderError=e=>a.createElement("div",{className:Yl("message",{error:!0})},e),this.renderMaterialList=()=>{const{materials:e}=this.props;return 0===e.length?a.createElement("div",{className:Yl("message")},l.Ru.text({id:"empty-material-list",keyset:"materials"})):a.createElement("ul",{className:Yl("list")},e.map((e=>a.createElement("li",{key:e.id,className:Yl("item")},this.renderMaterial(e)))))},this.renderMaterial=e=>{let{id:t,type:s,title:n,url:r}=e;const i=a.createElement(a.Fragment,null,a.createElement("div",{"aria-hidden":!0,className:Yl("icon",{type:s})}),a.createElement("div",{className:Yl("material-title")},n)),o=function(e){return e===Zl.Textbook||e===Zl.Teacherbook}(s);return o?a.createElement(L.N_,{className:Yl("material-link"),to:this.getMaterialUrl(t)},i):a.createElement(u,{className:Yl("material-link"),href:r||this.getDownloadUrl(t)},i)},this.getMaterialUrl=e=>{const{pathParams:t}=this.props;return p.oi.lessonMaterial.build(Object.assign({},t,{materialId:e.toString()}))},this.getDownloadUrl=e=>{const{lessonId:t}=this.props.pathParams;return Ft.g.downloadMaterial.build({materialId:e},{lessonId:Number(t)})}}render(){return a.createElement(ol,{body:this.renderBody(),title:l.Ru.text({id:"materials"})})}}ql.displayName="MaterialList";const $l=ql;class Xl extends a.Component{componentDidMount(){const{fetchStatus:e,pathParams:{lessonId:t,groupId:s},fetchTeacherMaterials:n,fetchStudentMaterials:r,role:a}=this.props;e!==Ot.L.SUCCESS&&(a===E.Student?r({lessonId:Number(t),groupId:Number(s)}):n({lessonId:Number(t),groupId:Number(s)}))}componentDidUpdate(e){const{pathParams:{lessonId:t,groupId:s},fetchTeacherMaterials:n,fetchStudentMaterials:r,role:a}=this.props;e.pathParams.lessonId!==t&&(a===E.Student?r({lessonId:Number(t),groupId:Number(s)}):n({lessonId:Number(t),groupId:Number(s)}))}componentWillUnmount(){this.props.clearMaterials()}render(){const{materials:e,fetchError:t,fetchStatus:s,pathParams:n}=this.props;return a.createElement($l,{fetchError:t,fetchStatus:s,materials:e,pathParams:n})}}Xl.displayName="MaterialListContainer";const ec=(0,o.Ng)((function(e){return{materials:Vl(e),fetchError:Bl(e),fetchStatus:Gl(e)}}),(function(e){return(0,_.zH)({clearMaterials:Ql.YZ,fetchTeacherMaterials:Ql.HQ,fetchStudentMaterials:Ql.oz},e)}))(Xl),tc=r().with("lesson-header");class sc extends a.Component{constructor(){super(...arguments),this.renderSpin=()=>a.createElement("div",{className:tc("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"})),this.renderError=e=>a.createElement("p",{className:tc("error")},e),this.renderLessonDetails=()=>{const{lesson:e,progress:t,testStart:s,visibilityButton:n}=this.props,{title:r,description:i,deadline:o,daysBeforeDeadline:l}=e;return a.createElement(a.Fragment,null,a.createElement($t.D,{level:1,className:tc("heading")},r),a.createElement("div",{className:tc("status-bar")},o&&this.renderDeadline(Ne.Ay.fromISO(o),l),n),this.renderDescription(i),t&&a.createElement("div",{className:tc("progress")},t),s&&a.createElement("div",{className:tc("test-start")},s))}}render(){const{detailsFetchError:e,detailsFetchStatus:t,lessonsUrl:s}=this.props;return a.createElement("header",{className:tc()},a.createElement(Rs,{back:!0,exact:!0,to:s},l.Ru.text({id:"lessons"})),a.createElement(rr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderLessonDetails,renderError:this.renderError}))}renderDescription(e){return e?a.createElement("div",{className:tc("description")},a.createElement(Ml,{content:e})):null}renderDeadline(e,t){return a.createElement("span",{className:tc("deadline")},l.Ru.text({id:"deadline",keyset:"lessons"}),c,a.createElement("span",{className:tc("deadline-time")},e.toLocaleString((0,Ne.km)("DateTimeFullWithoutYear"))),t&&t<=0?" (".concat(l.Ru.text({id:"deadline-in-past",keyset:"lessons"}),")"):null)}}sc.displayName="LessonHeader";const nc=sc,rc=r().with("student-lesson-progress");class ac extends a.Component{render(){const{daysBeforeDeadline:e,numTasks:t,numPassed:s}=this.props,n=t?Math.floor(s/t*100):0;return a.createElement("div",{className:rc()},a.createElement(Mo,{percentage:n,size:"large",theme:e&&e<=0?"dark":"light"}),a.createElement("span",{className:rc("percentage",{"non-zero":n>0})},n," %"),this.renderProgressCounts())}renderProgressCounts(){const{numTasks:e,numPassed:t,score:s,hideScoreInformation:n}=this.props;return a.createElement("div",{className:rc("counts")},null!==e&&a.createElement("span",{className:rc("tasks")},l.Ru.element({id:"N/M-tasks-passed",params:{m:e,n:t>0?a.createElement("span",{className:rc("tasks-current")},t,c):t}})),null!==s&&!n&&a.createElement("span",{className:rc("score")},l.Ru.element({id:"N-points",params:{count:s,n:a.createElement("span",{className:rc("score-count")},s)}})))}}ac.displayName="StudentLessonProgress";const ic=ac;function oc(e){return e.lessons.test.startingStatus}var lc=s(72420);const cc=r().with("test-start");class uc extends a.Component{constructor(){super(...arguments),this.state={isModalOpened:!1},this.startTest=()=>{this.togglePopup();const{courseId:e,lesson:t,groupId:s}=this.props;this.props.startTest({courseId:Number(e),lessonId:t.id,groupId:Number(s)})},this.togglePopup=()=>{this.setState((e=>({isModalOpened:!e.isModalOpened})))}}render(){const{lesson:e,fetchStatus:t}=this.props,{isModalOpened:s}=this.state;if(e.type!==lc.nv.Test||e.isTestStarted)return null;const n=e.manualVariantsAssignment&&!e.hasAssignedVariant;return a.createElement("div",{className:cc()},e.duration&&a.createElement("time",{className:cc("time")},Ne.dw.fromObject({minutes:e.duration}).toFormat("hh:mm:ss")),a.createElement(ge.$,{className:cc("button"),disabled:n||t===Ot.L.PENDING,theme:"action",size:"l",view:"lyceum",onClick:this.togglePopup},l.Ru.text({id:"start-test",keyset:"lessons"})),n&&a.createElement("p",{className:cc("error-message")},l.Ru.text({id:"no-variant-assigned",keyset:"lessons"})),a.createElement(tn,{visible:s,title:l.Ru.text({id:"start-test-dialog-title",keyset:"lessons"}),okText:l.Ru.text({id:"start-test-dialog-ok",keyset:"lessons"}),cancelText:l.Ru.text({id:"start-test-dialog-cancel",keyset:"lessons"}),content:l.Ru.text({id:"start-test-dialog-content",keyset:"lessons"}),onOkClick:this.startTest,onCancelClick:this.togglePopup,onCloseClick:this.togglePopup}))}}uc.displayName="TestStart";const dc=(0,o.Ng)((function(e){return{fetchStatus:oc(e)}}),(function(e){return(0,_.zH)({startTest:an.J.request},e)}))(uc);var mc=s(12291);function pc(e){return e.lessons.details.lessonDetails}function hc(e){return e.lessons.details.lessonDetailsFetchError}function Ec(e){return e.lessons.details.lessonDetailsFetchStatus}function gc(e){return e.lessons.details.visibilityFetchStatus}class yc extends a.Component{constructor(){super(...arguments),this.renderTestStart=()=>{const{course:e,lesson:t,groupId:s}=this.props;return t?a.createElement(dc,{groupId:s,courseId:e.id.toString(),lesson:t}):null}}componentDidMount(){this.props.detailsFetchStatus!==Ot.L.SUCCESS&&this.fetchData()}componentDidUpdate(e){e.course.id===this.props.course.id&&e.groupId===this.props.groupId&&e.lessonId===this.props.lessonId||this.fetchData()}componentWillUnmount(){this.props.clearLessonDetails()}render(){const{course:e,groupId:t,lesson:s,detailsFetchError:n,detailsFetchStatus:r}=this.props;let i;s&&(i=l.Ru.text({id:"lesson-details-student",keyset:"page-titles",params:{course:e.title,lesson:s.title}}));const o=p.oi.courseDetails.build({courseId:e.id.toString(),groupId:t});return a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,i),a.createElement("meta",{name:"title",content:i})),a.createElement(nc,{lesson:s,lessonsUrl:o,detailsFetchError:n,detailsFetchStatus:r,progress:s&&!s.hideScoreInformation?a.createElement(ic,s):null,testStart:this.renderTestStart()}))}fetchData(){const{course:e,groupId:t,lessonId:s}=this.props;this.props.fetchStudentLessonDetails({lessonId:Number(s),courseId:e.id,groupId:Number(t)})}}yc.displayName="LessonHeaderContainer";const fc=(0,o.Ng)((function(e){return{lesson:pc(e),detailsFetchError:hc(e),detailsFetchStatus:Ec(e)}}),(function(e){return(0,_.zH)({clearLessonDetails:mc.wT,fetchStudentLessonDetails:mc.Yt},e)}))(yc);var Sc=s(63763);const bc=r().with("task-tag"),vc=(0,a.forwardRef)(((e,t)=>{const{className:s,type:n=qe.cl.Another,size:r="m",tabIndex:i=-1,ariaLabel:o}=e;return a.createElement("span",{"aria-label":o,tabIndex:i,ref:t,className:(0,$.j)(bc({type:n,size:r}),s)})})),Nc=r().with("task-group-header"),Ic=e=>{let{type:t,deleteAriaHidden:s=!0}=e;const n=(0,a.useRef)(null);(0,a.useEffect)((()=>{var e;s&&n.current&&(null==(e=n.current.parentElement)||e.removeAttribute("aria-hidden"))}),[]);const r=l.Ru.text({id:t,keyset:"task-tags"});return a.createElement("header",{ref:n,className:Nc()},a.createElement(vc,{className:Nc("icon"),type:t,ariaLabel:r}),a.createElement($t.D,{level:3,className:Nc("heading")},r))};var Tc;function kc(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Ic.displayName="TaskGroupHeader";const Cc=r().with("student-task-list"),wc=e=>"problem"in e;let Ac=(Tc=class e extends a.Component{static renderSpin(){return a.createElement("div",{className:Cc("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))}static renderError(e){return a.createElement("p",{className:Cc("error")},e)}getLinkFromLessonElement(e){const{courseId:t,groupId:s,lessonId:n}=this.props;return wc(e)?p.at.lessonProblem.build({courseId:t,groupId:s,lessonId:n,problemLinkId:e.id}):p.at.taskDetails.build({courseId:t,groupId:s,lessonId:n,taskId:e.id.toString()})}renderTaskGroups(){const{taskGroups:e}=this.props;return e.length?a.createElement(Sc.n,{items:e.map((e=>{const t=e.tasks||e.problems||[];return{id:e.id.toString(),title:a.createElement(Ic,{type:e.type}),items:t.map((e=>({id:e.id.toString(),content:()=>this.renderItem(e)})))}})).filter(Boolean)}):l.Ru.text({id:"no-tasks-message",keyset:"tasks"})}renderItem(e){const{solution:t,scoreMax:s,lesson:n}=e,r=this.getLinkFromLessonElement(e),i="disabled"===e.status;return a.createElement(L.N_,{className:Cc("task",{disabled:i}),to:i?"#":r},a.createElement("div",{className:Cc("left")},a.createElement("span",{className:Cc("indicator")},a.createElement(Xe,{scoreMax:s,score:t&&t.score,solutionStatus:t&&t.status.type})),a.createElement($t.D,{level:4,className:Cc("task-heading")},e.title,!wc(e)&&e.hasManualCheck&&e.taskType===qe.wP.Other&&a.createElement(Ze,{ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),!wc(e)&&e.hasP2p&&a.createElement(Ze,{cls:Cc("task-check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"})))),t&&t.status.type!==Ye.gt.New&&a.createElement("div",{className:Cc("right")},a.createElement("span",{className:Cc("status")},a.createElement(hl,{scoreMax:e.scoreMax,score:t.score,type:t.status.type,hideScoreInformation:n.hideScoreInformation||"material"===e.taskType}))))}render(){const{fetchError:t,fetchStatus:s}=this.props;return a.createElement("div",{className:Cc()},a.createElement($t.D,{level:2,className:Cc("heading")},l.Ru.text({id:"student-tasks-title",keyset:"lessons"})),a.createElement(nr,{fetchError:t,fetchStatus:s,renderPending:e.renderSpin,renderSuccess:this.renderTaskGroups,renderError:e.renderError}))}},kc(Tc.prototype,"renderTaskGroups",[R.Q2],Object.getOwnPropertyDescriptor(Tc.prototype,"renderTaskGroups"),Tc.prototype),kc(Tc.prototype,"renderItem",[R.Q2],Object.getOwnPropertyDescriptor(Tc.prototype,"renderItem"),Tc.prototype),Tc);Ac.displayName="StudentTaskList";const Oc=Ac;class Rc extends a.Component{componentDidMount(){if(this.props.fetchStatus===Ot.L.SUCCESS)return;const{lesson:e}=this.props;e&&e.type===lc.nv.Normal&&this.fetchData()}componentDidUpdate(e){const{lesson:t}=this.props;e.courseId===this.props.courseId&&e.groupId===this.props.groupId&&e.lessonId===this.props.lessonId||this.fetchData(),null===e.lesson&&null!==t&&(t.type===lc.nv.Normal&&this.fetchData(),t.type===lc.nv.Test&&t.isTestStarted&&this.fetchData())}componentWillUnmount(){this.props.clearTaskGroups()}fetchData(){const{courseId:e,lessonId:t,groupId:s}=this.props;this.props.fetchTaskGroups({lessonId:Number(t),courseId:Number(e),groupId:Number(s)})}render(){const{fetchError:e,fetchStatus:t,courseId:s,groupId:n,lessonId:r,taskGroups:i}=this.props;return t&&a.createElement(Oc,{courseId:s,groupId:n,fetchError:e,fetchStatus:t,lessonId:r,taskGroups:i})}}Rc.displayName="StudentTaskListContainer";const _c=(0,o.Ng)((function(e){const t=(0,vl.wL)(e),s=(0,vl.Ku)(e);return{lesson:pc(e),taskGroups:(0,vl.uR)(e),fetchError:t,fetchStatus:s}}),(function(e){return(0,_.zH)({clearTaskGroups:cn.Ek,fetchTaskGroups:cn.d3},e)}))(Rc),Lc=r().with("lesson-details");class Mc extends a.Component{render(){const{course:e,groupId:t,lessonId:s}=this.props;return a.createElement("article",{className:Lc()},a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Top,null,a.createElement(fc,{course:e,groupId:t,lessonId:s})),a.createElement(sr.A.Main,null,a.createElement(_c,{courseId:e.id.toString(),groupId:t,lessonId:s})),a.createElement(sr.A.Aside,null,a.createElement(ec,{pathParams:{courseId:e.id.toString(),groupId:t,lessonId:s},role:E.Student})),a.createElement(sr.A.ActiveArea,null)))}}Mc.displayName="LessonDetails";const Pc=Mc,xc=$r((0,o.Ng)((function(e,t){const{params:s}=t.match;return{course:V(e,Number(s.courseId),Number(s.groupId)),groupId:s.groupId,lessonId:s.lessonId}}))(Pc));var Dc;function Fc(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const zc=r().with("lesson-material"),jc=(0,a.lazy)((()=>s.e(96).then(s.bind(s,81395)).then((e=>{let{Material:t}=e;return{default:t}}))));let Uc=(Dc=class extends a.Component{renderError(e){return a.createElement("p",{className:zc("error")},e)}renderMaterial(){const{lessonUrl:e,detailedMaterialInfo:t,lessonId:s,role:n,course:r,group:i}=this.props;if(!t)return null;const{detailedMaterial:{content:o,id:c,url:u,title:d},lesson:m}=t,p=l.Ru.text({id:"lesson-material-".concat(n),keyset:"page-titles",params:{material:d,lesson:m.title,course:r?r.title:"",group:i?i.name:""}});return a.createElement("div",{className:zc("wrapper")},a.createElement(tr.m,null,a.createElement("title",null,p),a.createElement("meta",{name:"title",content:p})),a.createElement(Rs,{back:!0,exact:!0,to:e},l.Ru.text({id:"lesson-TITLE",keyset:"tasks",params:{title:m.shortTitle}})),a.createElement("section",{className:zc("content")},o?a.createElement(a.Suspense,{fallback:a.createElement("p",{className:zc("message")},l.Ru.text({id:"loading-material",keyset:"materials"}))},a.createElement(jc,{htmlContent:o})):this.renderMaterialLink(c,s,u)))}renderMaterialLink(e,t,s){const n=Ft.g.downloadMaterial.build({materialId:e},{lessonId:Number(t)});return a.createElement(ge.$,{target:"_blank",rel:"noopener noreferrer",theme:"action",size:"m",view:"lyceum",type:"link",url:s||n},l.Ru.text({id:"download-material",keyset:"materials"}))}render(){const{fetchError:e,fetchStatus:t}=this.props;return a.createElement("div",{className:zc()},a.createElement(sr.A,{fixed:!0,type:"narrow"},a.createElement(sr.A.Main,null,a.createElement(nr,{fetchError:e,fetchStatus:t,renderSuccess:this.renderMaterial,renderError:this.renderError}))))}},Fc(Dc.prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(Dc.prototype,"renderError"),Dc.prototype),Fc(Dc.prototype,"renderMaterial",[R.Q2],Object.getOwnPropertyDescriptor(Dc.prototype,"renderMaterial"),Dc.prototype),Dc);Uc.displayName="LessonMaterial";const Hc=er(Uc);function Qc(e,t){return e.groups.groupMap[t]}class Vc extends a.Component{componentDidMount(){const{group:e,match:{params:t}}=this.props,{lessonId:s,materialId:n}=t;this.props.fetchMaterialDetails({groupId:e.id,lessonId:Number(s),materialId:Number(n)})}componentWillUnmount(){this.props.clearMaterialDetails()}render(){const{match:e,course:t,group:s,detailedMaterialInfo:n,fetchError:r,fetchStatus:i}=this.props,{params:{courseId:o,groupId:l,lessonId:c}}=e,u=p.oi.lessonDetails.build({courseId:o,groupId:l,lessonId:c});return a.createElement(Hc,{course:t,group:s,lessonId:c,lessonUrl:u,fetchError:r,fetchStatus:i,detailedMaterialInfo:n})}}Vc.displayName="StudentLessonMaterial";const Gc=$r((0,o.Ng)((function(e,t){const{match:{params:s}}=t,n=V(e,Number(s.courseId),Number(s.groupId)),[r]=n.groups;return{course:n,group:Qc(e,r.toString()),detailedMaterialInfo:Wl(e),fetchError:Kl(e),fetchStatus:Jl(e)}}),(function(e){return(0,_.zH)({fetchMaterialDetails:Ql.$m,clearMaterialDetails:Ql.Jh},e)}))(Vc));function Bc(e){const t=Number(e);return Number.isInteger(t)&&t>0}const Wc=(e,t)=>!Array.isArray(e)&&Bc(e)&&(!t||Number(e)<=t);let Jc=function(e){return e.Student="studentId",e.Task="taskId",e.Tag="taskTagId",e.Lesson="lessonId",e.Status="solutionStatusId",e.Plagiarism="plagiarismStatuses",e.ReviewStatus="reviewStatus",e.ReviewerId="reviewerId",e.TaskType="taskType",e}({});var Kc=s(89685);const Zc=/^-?\w+$/;function Yc(e){const t=e.order===Kc.j.DESCENDING?"-":"";return"".concat(t).concat(e.field)}function qc(e){return e?e.split(",").reduce(((e,t)=>Zc.test(t)?(t.startsWith("-")?e.push({field:t.substring(1),order:Kc.j.DESCENDING}):e.push({field:t,order:Kc.j.ASCENDING}),e):e),[]):[]}function $c(e,t){let s;const n=e.findIndex((e=>e.field===t.field));return-1!==n&&e[n].order===Kc.j.DESCENDING||(s=function(e){return Array.isArray(e)?e.map(Yc).toString():Yc(e)}(t)),s}var Xc=s(49022),eu=s(57082),tu=s(219),su=s(70947),nu=s(70631),ru=s(48822),au=s(31912),iu=s(48754),ou=s(43181);const lu=["cls","children","view"],cu=(0,Ut.compose)((0,Ut.composeU)(Xc.N,eu.L),(0,Ut.composeU)(tu.v,su.M),(0,Ut.composeU)(nu.s,ru.r,au.x),iu._)(ou.S),uu=e=>{const{cls:t,children:s,view:n="lyceum"}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,lu);return a.createElement(cu,Object.assign({className:t,label:s,view:n,theme:"normal"},r))};uu.displayName="Checkbox";var du=s(90571);function mu(e){return{type:du.Q.INITIALIZE_TABLE,payload:e}}function pu(e){return{type:du.Q.SET_PAGE_SIZE,payload:e}}function hu(e){return{type:du.Q.TOGGLE_COLUMN_VISIBILITY,payload:e}}function Eu(){return{type:du.Q.CLEAR_SETTINGS}}function gu(e){return e.tableSettings.settings}var yu=s(69124);const fu=[20,40,80],Su=[yu.V.Student,yu.V.Solution,yu.V.Task,yu.V.Teacher,yu.V.Tag,yu.V.Lesson,yu.V.Variant,yu.V.Status,yu.V.SubmissionsCount,yu.V.UpdatedAt].filter(Boolean),bu=[yu.V.Task,yu.V.Tag,yu.V.Lesson,yu.V.Status,yu.V.Deadline,yu.V.UpdatedAt],vu="gtcfjrhpdzWHVWrB97g+kg==",Nu=["bottom-end"],Iu=e=>{let{pageSizes:t,settings:s,scopeRef:n,isVisible:r,buttonRef:i,setVisible:o,onClose:c,handleSelectChange:u}=e;return a.createElement("div",{ref:n},a.createElement(ge.$,{className:"YBE3d36p0sdRRqz-h7fS2w==",iconRight:e=>a.createElement(zn.Icon,{direction:r?"top":"bottom",glyph:"type-arrow",className:"".concat(e," ").concat(vu)}),view:"lyceum",innerRef:i,"aria-label":l.Ru.text({id:"table-page-trigger",keyset:"tables"}),"aria-expanded":r,onClick:()=>o((e=>!e))},l.Ru.text({id:"table-page-SIZE",keyset:"tables",params:{size:s?s.pageSize:"--"}})),a.createElement(ws,{target:"anchor",anchor:i,direction:Nu,theme:"normal",mainOffset:0,scope:n,visible:r,onClose:c},a.createElement("div",{className:"Mn19bxlu1g96jCKDQvwd3A=="},t.map((e=>a.createElement(ge.$,{className:"LPYcxoim62AdiYGf51KbwQ==",view:"lyceum",key:e,iconLeft:t=>e===(null==s?void 0:s.pageSize)?a.createElement(zn.Icon,{glyph:"type-check",className:"".concat(t," ").concat(vu)}):a.createElement("span",null),checked:e===(null==s?void 0:s.pageSize),onClick:()=>u(e)},l.Ru.text({id:"table-page-SIZE",keyset:"tables",params:{size:e}})))))))};Iu.displayName="PageSizeView";const Tu=e=>{let{settings:t,setPageSize:s}=e;const{buttonRef:n,scopeRef:r,setVisible:i,onClose:o,isVisible:l}=Fs(),c=(0,a.useRef)(null);return(0,a.useEffect)((()=>()=>{null!==c.current&&clearTimeout(c.current)}),[]),a.createElement(Iu,{buttonRef:n,pageSizes:fu,settings:t,scopeRef:r,isVisible:l,setVisible:i,onClose:o,handleSelectChange:e=>{Array.isArray(e)&&([e]=e),s(Number(e)),i((e=>!e)),c.current=setTimeout((()=>{var e;null==(e=n.current)||e.focus()}),40)}})};var ku;Tu.displayName="PageSize";const Cu=r().with("table-settings");let wu=(function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}((ku=class extends a.Component{constructor(){super(...arguments),this.state={isPopupVisible:!1},this.settingsButtonRef=a.createRef()}render(){const{settings:e}=this.props,{isPopupVisible:t}=this.state;return a.createElement("div",{className:Cu()},a.createElement(Tu,{settings:e,setPageSize:this.props.setPageSize}),a.createElement(Xr.ms,{trigger:"click",view:"default",hasTail:!0,direction:"bottom-end",content:e&&this.renderAdvancedSettings(e)},a.createElement(ge.$,{className:Cu("button"),innerRef:this.settingsButtonRef,theme:"clear",size:"xs",view:"lyceum",checked:t,icon:e=>a.createElement(ie,{className:e,type:"settings",size:"l"}),"aria-label":l.Ru.text({id:"table-settings",keyset:"tables"}),onClick:this.togglePopup})))}renderAdvancedSettings(e){const{columnsSettings:t}=e,s=Object.keys(t);return a.createElement("section",{className:Cu("advanced-settings")},a.createElement("h4",{className:Cu("title")},l.Ru.text({id:"table-settings",keyset:"tables"})),a.createElement("ul",{className:Cu("list")},s.map((t=>a.createElement("li",{key:t,className:Cu("list-item")},this.renderColumnSettings(t,e))))))}renderColumnSettings(e,t){const{columnsSettings:s}=t,{hidden:n,alwaysVisible:r}=s[e];return a.createElement(uu,{size:"m",cls:Cu("checkbox"),checked:!n,disabled:r,onChange:this.handleCheckboxChange(e)},l.Ru.text({id:"column-".concat(e),keyset:"tables"}))}handleCheckboxChange(e){return()=>{this.props.toggleColumnVisibility(e)}}togglePopup(){this.setState((e=>({isPopupVisible:!e.isPopupVisible})))}}).prototype,"togglePopup",[R.Q2],Object.getOwnPropertyDescriptor(ku.prototype,"togglePopup"),ku.prototype),ku);wu.displayName="TableSettings";const Au=(0,o.Ng)((function(e){return{settings:gu(e)}}),(function(e){return(0,_.zH)({setPageSize:pu,toggleColumnVisibility:hu},e)}))(wu);var Ou=s(44421);const Ru=r().with("pagination"),_u=e=>{let{currentPage:t,totalPages:s,buildPageLink:n}=e;return a.createElement(Ou.d,{className:Ru(),currentPage:t,totalPages:s,startItemTitle:l.Ru.text({id:"pagination-home"}),nextItemTitle:l.Ru.text({id:"pagination-forward"}).toLowerCase(),renderItem:e=>{let{page:t,title:s,className:r,isCurrent:i}=e;return i?a.createElement("span",{"aria-current":!0,className:(0,$.j)(Ru("current-item"),r)},s):a.createElement(ci.N,{className:(0,$.j)(Ru("link"),r),to:n(t)},s)}})};_u.displayName="Pagination";var Lu=s(3032);function Mu(e){return e.filters.filters}function Pu(e){return e.filters.fetchStatus}function xu(e){return e.filters.fetchError}const Du=r().with("filters");class Fu extends a.Component{constructor(){super(...arguments),this.itemRef=(0,a.createRef)(),this.onClick=()=>{this.props.onClick(this.itemRef)}}render(){const{filterName:e,isActive:t}=this.props;return a.createElement("li",{ref:this.itemRef,className:Du("filter-menu-item",{active:t})},a.createElement(ge.$,{className:Du("filter-menu-item_button"),onClick:this.onClick},l.Ru.text({id:"name-".concat(e),keyset:"filters"})))}}Fu.displayName="FilterMenuItem";var zu=s(41811);function ju(e){return e.i18n?l.Ru.text(Object.assign({},e.i18n)):e.displayValue}const Uu=r().with("filters");class Hu extends a.Component{constructor(){super(...arguments),this.state={filterText:"",checkedValues:this.getInitialCheckedValues()},this.transformValues=(0,zu.A)((e=>e.map((e=>({id:e.id,displayValue:ju(e)}))))),this.onInputChange=e=>{const{value:t}=e.target;this.setState({filterText:t})},this.onApplyClick=()=>{const{checkedValues:e}=this.state;this.props.onFilterChange(this.props.filterName,Object.keys(e).filter((t=>e[t])))},this.onCheckedValuesChange=(e,t)=>{const s=t.currentTarget;this.setState((t=>({checkedValues:Object.assign({},t.checkedValues,{[e]:s.checked})})))},this.renderMessage=e=>a.createElement("p",{className:Uu("message")},e),this.renderValues=()=>{const{values:e}=this.props,{filterText:t,checkedValues:s}=this.state,n=this.transformValues(e),r=t.toLowerCase(),i=n.filter((e=>{let{displayValue:t}=e;return t&&t.toLowerCase().includes(r)}));if(!i.length){const e=l.Ru.text({id:"no-values",keyset:"filters"});return this.renderMessage(e)}return a.createElement("ul",{className:Uu("values-list")},i.map((e=>a.createElement("li",{className:Uu("filter-value"),key:e.id},a.createElement(uu,{size:"m",view:"lyceum",checked:Boolean(s[e.id]),id:"".concat(this.props.filterName,"_").concat(e.id),onChange:t=>this.onCheckedValuesChange(String(e.id),t)},e.displayValue)))))}}shouldComponentUpdate(e,t){const s=this.state.filterText!==t.filterText,n=this.state.checkedValues!==t.checkedValues,r=this.props.filterName!==e.filterName;return s||n||r}getInitialCheckedValues(){const{appliedValues:e}=this.props;return e.reduce(((e,t)=>(e[t]=!0,e)),{})}isButtonActive(){const{appliedValues:e}=this.props,{checkedValues:t}=this.state,s=Object.keys(t).filter((e=>t[e]));return s.length===e.length&&s.every((t=>e.includes(t)))}render(){const{filterText:e}=this.state;return a.createElement("div",{className:Uu("filter-values")},a.createElement("div",{className:Uu("search")},a.createElement(qt,{placeholder:l.Ru.text({id:"search",keyset:"filters"}),value:e,size:"m",onChange:this.onInputChange})),a.createElement("div",{className:Uu("values-list-wrapper")},this.renderValues()),a.createElement("div",{className:Uu("filter-controls")},a.createElement(ge.$,{size:"m",theme:"action",view:"lyceum",disabled:this.isButtonActive(),onClick:this.onApplyClick},l.Ru.text({id:"apply",keyset:"filters"}))))}}Hu.displayName="FilterValues";const Qu=r().with("filters"),Vu=e=>{let{filters:t,appliedFilters:s,onFilterChange:n}=e;const[r,i]=(0,a.useState)(),o=(0,a.useCallback)(((e,t)=>{n(e,t)}),[n]),l=(0,a.useCallback)((e=>{const t=s.find((t=>t.filterName===e));return t?t.values:[]}),[s]),c=(0,a.useCallback)((e=>()=>{i(e)}),[]);return t?a.createElement("div",{className:Qu("filter-menu")},a.createElement("ul",{className:Qu("filter-menu-list")},Object.keys(t).map((e=>a.createElement(Xr.ms,{key:e,trigger:"click",view:"default",direction:["right-start","left-start"],hasTail:!0,keepMounted:!1,content:a.createElement(Hu,{filterName:e,appliedValues:l(e),values:t[e]||[],onFilterChange:o})},a.createElement(Fu,{filterName:e,isActive:e===r,onClick:c(e)})))))):null};Vu.displayName="FilterMenu";const Gu=["fetchError","fetchStatus","filters"],Bu=r().with("filters"),Wu=e=>{let{fetchError:t,fetchStatus:s,filters:n}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Gu);return a.createElement(nr,{fetchError:t,fetchStatus:s,renderSuccess:()=>a.createElement(Vu,Object.assign({filters:n},r)),renderError:e=>a.createElement("p",{className:Bu("error")},e),renderPending:()=>a.createElement("div",{className:Bu("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))})};Wu.displayName="FilterMenuContainer";const Ju=(0,o.Ng)((function(e){return{filters:Mu(e),fetchError:xu(e),fetchStatus:Pu(e)}}))(Wu),Ku=r().with("filters"),Zu=["bottom"],Yu=e=>{let{appliedFilters:t,onFilterChange:s}=e;const{buttonRef:n,scopeRef:r,setVisible:i,onClose:o,isVisible:c}=Fs(),u=(0,a.useCallback)(((e,t)=>{i(!1),s(e,t)}),[s]);return a.createElement("div",{className:Ku("dropdown"),ref:r},a.createElement(ge.$,{className:Ku("add-button"),pin:"circle-circle",theme:"pseudo",size:"xs",view:"default",innerRef:n,icon:e=>a.createElement(ie,{className:e,type:"plus",size:"s"}),"aria-label":l.Ru.text({id:"filters",keyset:"filters"}),"aria-expanded":c,onClick:()=>i((e=>!e))}),a.createElement(ws,{target:"anchor",anchor:n,direction:Zu,theme:"normal",mainOffset:4,scope:r,visible:c,onClose:o},a.createElement(Ju,{appliedFilters:t,onFilterChange:u})))};Yu.displayName="AddFilterButton";const qu=["theme","children","onDelete"],$u=r().with("filters");class Xu extends a.Component{constructor(){super(...arguments),this.onCloserClick=()=>{this.props.onDelete()}}render(){const e=this.props,{theme:t,children:s}=e,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,qu);return a.createElement("span",Object.assign({},n,{className:$u("label",{theme:t})}),s,a.createElement(ge.$,{className:$u("label-closer"),size:"xs",theme:"clear",view:"lyceum",icon:e=>a.createElement(ie,{className:e,type:"remove",size:"xs"}),onClick:this.onCloserClick,"aria-label":l.Ru.text({keyset:"common",id:"dialog-close"})}))}}Xu.displayName="Label";const ed=r().with("filters");class td extends a.Component{constructor(){super(...arguments),this.onDelete=()=>{this.props.onDelete(this.props.filterName)}}render(){const{filterName:e,values:t,fetchStatus:s}=this.props,n=l.Ru.text({id:"name-".concat(e),keyset:"filters"}),r=" ".concat(l.Ru.text({id:"separator-or",keyset:"filters"})," "),i=s===Ot.L.SUCCESS?this.getFilterValues(r):"...",o="".concat(n,": ").concat(t.join(r));return a.createElement(Xu,{theme:"filter",title:o,onDelete:this.onDelete},n,": ",i)}getFilterValues(e){const[t,...s]=this.props.values;return[t,s.map((t=>a.createElement(a.Fragment,{key:t},a.createElement("span",{className:ed("value-separator")},e),t)))]}}td.displayName="AppliedFilter";class sd extends a.Component{render(){const{filterName:e,filterValues:t,fetchStatus:s,onDelete:n}=this.props;return a.createElement(td,{filterName:e,values:t,fetchStatus:s,onDelete:n})}}sd.displayName="AppliedFilterContainer";const nd=(0,o.Ng)((function(e,t){const{filterName:s,appliedFilterValues:n}=t,r=function(e,t){const{filters:s}=e.filters;return s?s[t]:void 0}(e,s),a=Pu(e);return r?{filterValues:r.filter((e=>n.includes(e.id.toString()))).map(ju),fetchStatus:a}:{filterValues:[],fetchStatus:a}}))(sd),rd=r().with("filters");class ad extends a.Component{constructor(){super(...arguments),this.onFilterChange=(e,t)=>{this.props.onFilterChange({[e]:t})},this.onDeleteFilter=e=>{this.props.onFilterChange({[e]:[]})},this.onDeleteFilters=()=>{const e=this.props.appliedFilters.reduce(((e,t)=>(e[t.filterName]=[],e)),{});this.props.onFilterChange(e)},this.renderComponentTitle=()=>a.createElement("h5",{className:rd("title")},a.createElement(ie,{className:rd("icon"),type:"filter",size:"m"}),l.Ru.text({id:"filters",keyset:"filters"})),this.renderControlsGroup=()=>a.createElement(a.Fragment,null,this.renderComponentTitle(),this.renderAddFilterButton()),this.renderAddFilterButton=()=>{const{appliedFilters:e}=this.props;return a.createElement(Yu,{appliedFilters:e,onFilterChange:this.onFilterChange})},this.renderFilterListItem=(e,t)=>{const s=0===t,n=t===this.props.appliedFilters.length-1;return 0===e.values.length?null:a.createElement("div",{key:e.filterName,className:rd("applied-filter")},s&&this.renderComponentTitle(),a.createElement(nd,{filterName:e.filterName,appliedFilterValues:e.values,onDelete:this.onDeleteFilter}),n&&this.renderAddFilterButton())}}render(){const{appliedFilters:e}=this.props,t=e.length>0;return a.createElement("section",{className:rd()},a.createElement("div",{className:rd("left")},t?e.map(this.renderFilterListItem):this.renderControlsGroup()),t&&a.createElement("div",{className:rd("right")},a.createElement(Xu,{theme:"clear",onDelete:this.onDeleteFilters},l.Ru.text({id:"clear",keyset:"filters"}))))}}ad.displayName="Filters";class id extends a.Component{componentDidMount(){const{courseId:e,groupId:t}=this.props;this.props.fetchFilters({courseId:e,groupId:t})}componentWillUnmount(){this.props.clearFilters()}render(){const{appliedFilters:e,onFilterChange:t}=this.props;return a.createElement(ad,{appliedFilters:e,onFilterChange:t})}}id.displayName="FiltersContainer";const od=(0,o.Ng)(null,(function(e){return(0,_.zH)({clearFilters:Lu.hi,fetchFilters:Lu.j_},e)}))(id),ld=e=>e.courseTasks.selectedTask,cd=e=>e.courseTasks.selectedSolution;var ud=s(3769);const dd=()=>({type:ud.Q.CLEAR_SELECTED}),md=r().with("with-shadows");const pd=r().with("sort-switch"),hd={[Kc.j.ASCENDING]:"top",[Kc.j.DESCENDING]:"bottom"};class Ed extends a.PureComponent{constructor(){super(...arguments),this.orders=[Kc.j.ASCENDING,Kc.j.DESCENDING],this.changeOrder=e=>{this.props.onOrderChange(e.target.value)}}render(){const{active:e}=this.props;return a.createElement("span",{className:pd({active:e})},this.orders.map((e=>this.renderArrow(e))))}renderArrow(e){const{active:t,activeOrder:s}=this.props,n=t&&s===e;return a.createElement("label",{key:e,className:pd("arrow",{active:n})},a.createElement("input",{checked:n,type:"radio",value:e,onChange:this.changeOrder}),a.createElement(ie,{direction:hd[e],size:"s",type:"arrow-sort"}))}}Ed.displayName="SortSwitch";const gd=Ed,yd=r().with("common-table");class fd extends a.Component{shouldComponentUpdate(e){const{items:t,settings:s}=this.props;return t!==e.items||s!==e.settings}componentDidUpdate(e){e.settings!==this.props.settings&&this.props.setShadows()}renderHeader(){if(!this.props.settings)return null;const{columns:e,settings:{columnsSettings:t}}=this.props;return a.createElement("thead",{className:yd("header")},a.createElement("tr",null,e.map((e=>{var s;return a.createElement("th",{key:e,className:yd("header-cell",{hidden:null==(s=t[e])?void 0:s.hidden})},a.createElement("div",{className:yd("header-cell-content")},l.Ru.text({id:"column-".concat(e),keyset:"tables"}),this.renderSortingButton(e)))}))))}renderBody(){if(!this.props.settings)return null;const{items:e,columns:t,columnRenderers:s,settings:{columnsSettings:n}}=this.props;return a.createElement("tbody",null,e.map(((e,r)=>a.createElement("tr",{key:e.id,className:e.modifier},t.map((t=>{var i;return a.createElement("td",{key:"".concat(e.id,"-").concat(t),className:yd("cell",{hidden:null==(i=n[t])?void 0:i.hidden})},s[t](e,r))}))))))}renderSortingButton(e){const{sortings:t}=this.props;if(!t||!t[e])return null;const{isActive:s,getOrder:n,onChange:r}=t[e];return a.createElement(gd,{active:s(),activeOrder:n(),onOrderChange:r})}render(){return a.createElement("table",{className:yd()},this.renderHeader(),this.renderBody())}}fd.displayName="CommonTable";const Sd=fd;function bd(e){return{settings:gu(e)}}class vd extends a.Component{shouldComponentUpdate(){return!1}render(){const e=(0,o.Ng)(bd)(Sd);return a.createElement(e,this.props)}}vd.displayName="ConnectedCommonTable";class Nd extends a.Component{shouldComponentUpdate(e){return this.props.items!==e.items}render(){const e=function(e){return class extends a.Component{constructor(){super(...arguments),this.state={hasLeftShadow:!1,hasRightShadow:!1},this.container=a.createRef(),this.setShadows=()=>{!function(e,t,s){if(!e.current)return;const{clientWidth:n,scrollWidth:r,scrollLeft:a}=e.current,i=n===r,o=0===a,l=n+a-r,c=Math.abs(l)<5;i?t():s(!o,!c)}(this.container,this.removeShadows,this.updateShadows)},this.removeShadows=()=>{this.setState({hasLeftShadow:!1,hasRightShadow:!1})},this.updateShadows=(e,t)=>{this.state.hasLeftShadow!==e&&this.setState({hasLeftShadow:e}),this.state.hasRightShadow!==t&&this.setState({hasRightShadow:t})}}componentDidMount(){window.addEventListener("resize",this.setShadows),this.setShadows()}componentWillUnmount(){window.removeEventListener("resize",this.setShadows)}render(){const{hasLeftShadow:t,hasRightShadow:s}=this.state;return a.createElement("div",{className:md()},a.createElement("div",{className:md("container",{"has-left-shadow":t,"has-right-shadow":s}),ref:this.container,onScroll:this.setShadows},a.createElement(e,Object.assign({},this.props,{setShadows:this.setShadows}))))}}}(vd);return a.createElement(e,this.props)}}Nd.displayName="ShadowedCommonTable";const Id=Nd,Td=["children","withFilterIcon","className"],kd=r().with("table-button");class Cd extends a.Component{render(){const e=this.props,{children:t,withFilterIcon:s=!1,className:n}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Td);return a.createElement(ci.N,Object.assign({theme:"pseudo",as:"a",className:(0,$.j)(kd(),n)},r),a.createElement("span",{className:kd("text")},t),s&&a.createElement(ie,{className:kd("filter-icon"),type:"filter",size:"xs"}))}}Cd.displayName="Button";const wd=Cd,Ad=r().with("external-table-link"),Od=Ad(),Rd=Ad("icon"),_d=e=>{let{href:t,ariaLabel:s}=e;return a.createElement(u,{"aria-label":s,className:Od,href:t},a.createElement(ie,{className:Rd,size:"m",type:"new-window"}))};_d.displayName="ExternalTableLink";const Ld=_d,Md=r().with("table-cell"),Pd=l.Ru.text({id:"show-description",keyset:"tasks"}),xd=Md("details"),Dd=Md("details-tooltip-wrapper"),Fd=Md("task-check-info"),zd=e=>{let{task:t,setTriggerIndex:s,index:n}=e;const{courseId:r,groupId:o}=(0,i.g)(),c=M(),{lesson:u}=t,d=(0,a.useMemo)((()=>null!=u&&u.id?((e,t,s,n)=>p.at.taskDetails.build({courseId:e.toString(),groupId:t.toString(),lessonId:s.toString(),taskId:n.toString()}))(Number(r),Number(o),u.id,t.id):""),[r,o,null==u?void 0:u.id,t.id]),m=(0,a.useCallback)((()=>{var e;c((e=t,{type:ud.Q.SET_SELECTED_TASK,payload:e})),s(n)}),[c,t]);return t&&u?a.createElement("span",{className:xd},a.createElement(Ld,{ariaLabel:l.Ru.text({id:"show-solution",keyset:"solutions"}),href:d}),a.createElement(fe,{key:t.id,content:Pd},a.createElement("span",{className:Dd},a.createElement(wd,{onClick:m},t.title,t.hasManualCheck&&t.taskType===qe.wP.Other&&a.createElement(Ze,{cls:Fd},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),t.hasP2p&&a.createElement(Ze,{cls:Md("task-check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"})))))):null};zd.displayName="TaskCellRenderer";const jd=zd,Ud=Md("tag"),Hd=l.Ru.text({id:"apply-filter",keyset:"filters"}),Qd=e=>{let{tag:t,onSetFilter:s}=e;const n=(0,a.useMemo)((()=>l.Ru.text({id:t?t.type:qe.cl.Another,keyset:"task-tags"})),[t]);return t?a.createElement(wd,{withFilterIcon:!0,className:Ud,title:Hd,onClick:s(Jc.Tag,t.id)},n):a.createElement("span",{className:Ud},n)},Vd=Md("tag"),Gd=l.Ru.text({id:"apply-filter",keyset:"filters"}),Bd=e=>{let{lesson:t,onSetFilter:s}=e;return t?a.createElement(wd,{withFilterIcon:!0,className:Vd,title:Gd,onClick:s(Jc.Lesson,t.id)},t.title):null};Bd.displayName="LessonCellRenderer";const Wd=Bd,Jd={id:Ye.s6[Ye.gt.New],type:Ye.gt.New},Kd=e=>{var t;let{task:s,status:n,score:r}=e;const i=n||Jd;return a.createElement(hl,{type:i.type,scoreMax:s?s.scoreMax:void 0,score:r,hideScoreInformation:(null==s||null==(t=s.lesson)?void 0:t.hideScoreInformation)||"material"===(null==s?void 0:s.taskType)})};Kd.displayName="StatusCellRenderer";const Zd=Kd,Yd=()=>a.createElement("span",{className:"empty-cell"},"-");Yd.displayName="EmptyCellRenderer";const qd=Yd,$d=e=>{let{deadline:t}=e;const s=(0,a.useMemo)((()=>t&&Ne.Ay.fromISO(t).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))),[t]);return t?a.createElement("span",null,s):a.createElement(qd,null)},Xd=Md("update-time"),em=e=>{let{updateTime:t}=e;const s=(0,a.useMemo)((()=>t&&Ne.Ay.fromISO(t).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))),[t]);return t?a.createElement("div",{className:Xd},a.createElement("time",null,s)):a.createElement(qd,null)},tm=(0,$.cn)("y3034e--message"),sm=e=>{let{children:t,className:s,type:n="normal",align:r="left"}=e;return a.createElement("p",{className:(0,$.j)(s,tm({type:n,align:r}))},t)};sm.displayName="Message";const nm=["status"],rm={[Ls.a.Enrolled]:"transparent",[Ls.a.Expelled]:"transparent",[Ls.a.Graduated]:"#ffc100"},am=(0,a.forwardRef)(((e,t)=>{const{status:s=Ls.a.Enrolled}=e,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,nm);return a.createElement(Vi,Object.assign({ref:t},n,{avatarOutlineColor:rm[s],withStrikedName:s===Ls.a.Expelled||s===Ls.a.ToBeExpelled,withAvatarOutline:s===Ls.a.Graduated}))}));var im=s(62206);function om(e){return e.codeEditor.code}function lm(e){return e.codeEditor.language}function cm(e){return e.codeEditor.isReadonly}const um=e=>{let{language:t,availableLanguages:s,onLanguageChange:n,className:r,size:i="s"}=e;const o=(0,a.useMemo)((()=>Object.entries(s).map((e=>{let[t,s]=e;return{value:t,content:"".concat(t," (").concat(Array.isArray(s)?s[0]:s,")")}}))),[s]);return a.createElement(ca.l,{value:t,theme:"normal",placeholder:l.Ru.text({id:"select-language-short",keyset:"common"}),size:i,className:r,onChange:e=>n(e.target.value),options:o})};var dm;um.displayName="LanguageSelect";let mm=(function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}((dm=class extends a.Component{triggerRerender(){this.forceUpdate()}render(){const{code:e,onCopy:t,className:s,btnTitle:n}=this.props;return a.createElement(So(),{text:e||"",onCopy:t,options:{format:"text/plain"}},a.createElement("div",{style:{display:"flex",padding:0,margin:0},onMouseOver:this.triggerRerender,onFocus:this.triggerRerender},a.createElement(ge.$,{title:n,className:s,icon:e=>a.createElement(ie,{className:e,size:"l",type:"editor-copy"})})))}}).prototype,"triggerRerender",[R.Q2],Object.getOwnPropertyDescriptor(dm.prototype,"triggerRerender"),dm.prototype),dm);mm.displayName="CopyToClipboardControl";const pm=mm,hm=r().with("code-editor"),Em=(0,a.lazy)((()=>Promise.all([s.e(715),s.e(854),s.e(198)]).then(s.bind(s,97307)))),gm=[".zip",".7z"];class ym extends a.Component{constructor(e){super(e),this.renderLoadingMessage=()=>this.renderCenteredMessage(l.Ru.text({id:"loading-code"})),this.renderErrorMessage=()=>{const e=l.Ru.text({id:"something-went-wrong",keyset:"errors"});return this.renderCenteredMessage(e)},this.renderCenteredMessage=e=>a.createElement("div",{className:hm("message-wrapper")},a.createElement("p",{className:hm("message")},e)),this.showCopySuccessMessage=()=>{this.props.addNotification({i18n:{id:"copy-success-message",keyset:"common"},type:Sn.V.SUCCESS})},this.handleCodeChange=e=>{const{onCodeChange:t,code:s,shouldSave:n,resetSelectedSolution:r}=this.props,{timeOffset:a}=this.state;if(t&&e!==s){var i;const s=null!=(i=Ko.I.get(Zo.Z.SavedSolutions))?i:{};t(e),n&&null!==a&&(Ko.I.set(Zo.Z.SavedSolutions,Object.assign({},s,{[this.props.match.params.solutionId]:{code:e,timestamp:new Date((new Date).getTime()+a).toISOString(),userTime:(new Date).toISOString()}})),null==r||r())}},this.handleLanguageChange=e=>{const{onLanguageChange:t}=this.props;t&&t(Array.isArray(e)?e[0]:e)},this.toggleLineWrap=()=>{this.setState((e=>Object.assign({},e,{lineWrap:!e.lineWrap})))},this.state={lineWrap:!1,timeOffset:null}}async componentDidMount(){const{role:e,isTestFinished:t,readonly:s}=this.props,n=e===E.Student,r=s||!n||Boolean(t);this.props.setEditorReadonlyState(r);const a=new Date,i=new Date((await(await fetch("/time")).json()).time).getTime()-a.getTime();this.setState((e=>Object.assign({},e,{timeOffset:i<5e3?0:i})))}componentWillUnmount(){this.props.setEditorReadonlyState(!0)}render(){const{lineWrap:e,timeOffset:t}=this.state,{className:s,downloadUrl:n,isReadonly:r,withLanguageSelect:i,availableLanguages:o,language:c,code:u}=this.props,d=u||"",m=l.Ru.text({id:"copy"}),p=o&&Object.fromEntries(Object.entries(o).filter((e=>{let[t]=e;return!gm.includes(t)}))),h=!r&&i&&p&&Object.values(p).length>0;return null===t?null:a.createElement("div",{className:(0,$.j)(hm(),s)},a.createElement("div",{className:hm("content")},a.createElement(Ee.A,{renderFallback:this.renderErrorMessage},a.createElement(a.Suspense,{fallback:this.renderLoadingMessage()},a.createElement("div",{className:hm("controls")},h&&a.createElement(um,{className:hm("language-select"),language:c,availableLanguages:p,onLanguageChange:this.handleLanguageChange,size:"m"}),a.createElement(ge.$,{className:hm("control-button"),icon:t=>a.createElement(ie,{className:t,size:"l",type:e?"multiline-text":"line-wrap"}),onClick:this.toggleLineWrap,"aria-label":l.Ru.text({id:e?"disable-line-wrap":"enable-line-wrap"})}),a.createElement(pm,{code:d,onCopy:this.showCopySuccessMessage,className:hm("control-button"),btnTitle:m}),n&&a.createElement(ge.$,{className:hm("control-button"),icon:e=>a.createElement(ie,{className:e,size:"l",type:"editor-download"}),title:l.Ru.text({id:"download"}),"aria-label":l.Ru.text({id:"download"}),target:"_blank",rel:"noopener noreferrer",type:"link",url:n})),a.createElement(Em,{language:c,onCodeChange:this.handleCodeChange,value:d,options:{readOnly:r,lineWrapping:e}})))))}}ym.displayName="CodeEditorBase";const fm=(0,o.Ng)((function(e){return{code:om(e),language:lm(e),isReadonly:cm(e),userUid:(0,T.yZ)(e)}}),(function(e){return(0,_.zH)({addNotification:fn.z,setEditorReadonlyState:im.n3},e)}))(er((0,i.y)(ym)));var Sm=s(66136);const bm=(e,t)=>e.files.sourceCodeMap[t];var vm=s(98889);const Nm=new Set(["application/xml","application/x-sql","application/vnd.sqlite3","application/json","application/node","application/javascript","application/x-python-code"]);function Im(e,t){return!(!t||t>(arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400))&&(e.startsWith("text")||Nm.has(e))}var Tm=s(74567);const km=r().with("source-code-viewer"),Cm=e=>{let{onClear:t,fileMetadata:s,fileLimits:n,availableLanguages:r,sourceCodeFetchResult:i,fetchSourceCode:o,readonly:c,savedSolution:u,isOldSubmission:d,solutionId:m}=e;const{id:p,name:h,size:g,mimeType:y,url:f,sourceCode:S}=s,b=/text\//.test(y)?(0,Tm.rT)(h):(0,Tm.od)(y),{isContestIntegrated:v}=P(vl.MX)||{},N=P(J),{displayableFileSize:I}=n,T=Jo()(null==u?void 0:u.code)&&!d||!Jo()(null==u?void 0:u.code)&&h.startsWith("draft"),k=M();let{sourceCode:C=null,fetchError:w=null,fetchStatus:A=null}=i;h.startsWith("draft")&&(C=S,w=null,A=Ot.L.SUCCESS);const O=P(vl.cS),R=(0,a.useMemo)((()=>Boolean(v&&r&&Object.keys(r).length>1)),[v,r]),_=(0,a.useCallback)((e=>{k((0,im.YH)(e))}),[k]),L=(0,a.useCallback)((e=>{k((0,im.YF)(e))}),[k]);(0,a.useEffect)((()=>L(b)),[b,L]),(0,a.useEffect)((()=>{Im(y,g)&&(A||o&&k(o({fileId:p.toString()})))}),[k,p,y,g,A,o]),(0,a.useEffect)((()=>{_(C)}),[_,C]);const x=(0,a.useCallback)((async()=>{const e=Ko.I.get(Zo.Z.SavedSolutions),s=(await(await fetch("/time")).json()).time;m&&Ko.I.set(Zo.Z.SavedSolutions,Object.assign({},e,{[m]:{code:"",timestamp:s,userTime:(new Date).toISOString()}})),null==t||t()}),[t,m]),D=(0,a.useCallback)((()=>a.createElement("div",{className:km("placeholder")},a.createElement(he.t,{view:"default",progress:!0,size:"s"}))),[]),F=(0,a.useCallback)((e=>a.createElement("div",{className:km("placeholder")},e)),[]);return Im(y,g,I)?i?a.createElement("div",{className:km()},a.createElement(nr,{fetchError:w,fetchStatus:A,renderPending:D,renderError:F},a.createElement(fm,{shouldSave:Boolean(T),readonly:c,downloadUrl:f,onCodeChange:_,withLanguageSelect:R,onLanguageChange:L,availableLanguages:r,isTestFinished:Boolean(O),resetSelectedSolution:t}))):a.createElement("div",{className:km()},D()):a.createElement("div",{className:km()},a.createElement("div",{className:km("placeholder")},l.Ru.text({id:"undisplayable-submission",keyset:"tasks"}),".",a.createElement("br",null),a.createElement("span",null,a.createElement(ci.N,{className:km("download-link"),href:f,behavior:"external"},l.Ru.text({id:"download-submission",keyset:"tasks"})),t&&(null==N?void 0:N.role)===E.Student&&a.createElement(a.Fragment,null,"  |  ",a.createElement(ci.N,{className:km("download-link"),href:"",onClick:x,behavior:"router"},l.Ru.text({id:"new-solution",keyset:"solutions"}))))))};Cm.displayName="SourceCodeViewerBase";const wm=(0,o.Ng)((function(e,t){return{sourceCodeFetchResult:bm(e,t.fileMetadata.id)||{}}}),(function(e){return(0,_.zH)({fetchSourceCode:Sm.R.request},e)}))((0,vm.To)(Cm)),Am=(0,o.Ng)((function(e,t){return{sourceCodeFetchResult:{sourceCode:t.fileMetadata.sourceCode,fetchError:null,fetchStatus:Ot.L.SUCCESS}}}))((0,vm.To)(Cm));class Om extends a.Component{constructor(){super(...arguments),this.keys={[E.Student]:Ye.fb,[E.Teacher]:Ye.Yx,[E.Methodist]:Ye.Yx}}render(){const{role:e,status:t}=this.props,s=this.keys[e];return t===Ye.gt.AcceptedAfterDeadline?a.createElement(fe,{content:l.Ru.text({id:s[Ye.gt.AcceptedAfterDeadline],keyset:"solutions"})},a.createElement("span",null,l.Ru.text({id:s[Ye.gt.Accepted],keyset:"solutions"}))):l.Ru.text({id:s[t],keyset:"solutions"})}}Om.displayName="SolutionStatusText";const Rm=er(Om);var _m=s(31330);const Lm=[Ye.gt.Accepted,Ye.gt.AcceptedAfterDeadline],Mm=[...Lm,Ye.gt.OnClarifying,Ye.gt.AssignedToP2p],Pm={root:"y4593c--root",button:"y4593c--button",modal:"y4593c--modal",bonusItem:"y4593c--bonus-item",firstRow:"y4593c--first-row",totalRow:"y4593c--total-row",gradesList:"y4593c--grades-list",accentText:"y4593c--accent-text",content:"y4593c--content",center:"y4593c--center",errorMessage:"y4593c--error-message"},xm=e=>{const{grades:t,bonuses:s,parameters:n,error:r,isHidden:o,isOpened:c,isLoaded:u,isLoading:d,isFailed:m,toggleModal:p}=function(e,t,s){var n;const{courseId:r,groupId:o}=(0,i.g)(),l=W(Number(r),Number(o)),[c,u]=(0,a.useState)("initial"),[d,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(""),g=null!=(n=P(T.wz))?n:{},[y,f]=(0,a.useState)([]),[S,b]=(0,a.useState)({}),v=(0,a.useMemo)((()=>null==s?void 0:s.map((e=>({name:e.groupDisplayName,rows:e.params.map((e=>({name:e.name,displayName:e.displayName,scoreMax:e.max})))})))),[s]),N=(0,a.useMemo)((()=>(0,_m.j)("show-p2p-grade-detalization-to-student-only-after-deadline")?null!=g&&g.isSuperuser?Mm:Lm:Mm),[g.isSuperuser]),I=(0,a.useCallback)((()=>m((e=>!e))),[]);return(0,a.useEffect)((()=>{var e;const t=null==(e=document.body)?void 0:e.style;if(t)return t.overflow=d?"hidden":"auto",()=>{t.overflow="auto"}}),[d]),(0,a.useEffect)((()=>{if(!d)return;const t=l.role===E.Student?"student":"teacher";u("loading"),(0,zt.Ay)("/api/proxy/".concat(t,"/solutions/").concat(e,"/reviews/")).then((e=>{let{reviews:t,bonuses:s,penalties:n}=e;f(t),b({bonuses:s,penalties:n}),u("loaded")})).catch((e=>{h(e),u("failed")}))}),[d,l.role,e]),(0,a.useMemo)((()=>({grades:y,bonuses:S,error:p,parameters:v&&(null==v?void 0:v.length)>0?v:void 0,isHidden:!N.includes(t),isOpened:d,isLoading:"loading"===c,isInitial:"initial"===c,isFailed:"failed"===c,isLoaded:"loaded"===c,toggleModal:I,setError:h,setOpen:m})),[t,N,y,S,c,d,p,v,I])}(e.solutionId,e.solutionStatus,e.formula),[h,g]=(0,a.useState)(!1);return(0,a.useEffect)((()=>(g(!0),()=>g(!1))),[]),o?null:a.createElement("div",{"data-component":xm.name,className:re(Pm.root,e.className)},a.createElement("button",{className:Pm.button,type:"button",onClick:p,"aria-label":l.Ru.text({keyset:"common",id:"hide"})},a.createElement(ie,{size:"l",type:"eye-open"})),h&&a.createElement(jt.a,{theme:"normal",visible:c,onClose:p},a.createElement("div",{className:Pm.modal},a.createElement($t.D,{level:3},l.Ru.text({id:"p2p-grade-modal-heading",keyset:"common"})),a.createElement("div",{className:re(Pm.content,{[Pm.center]:d})},d&&a.createElement(he.t,{view:"default",progress:!0,size:"l"}),m&&a.createElement("p",{className:Pm.errorMessage},r),u&&0===t.length&&l.Ru.text({id:"p2p-grade-modal-empty"}),u&&t.length>0&&(n?a.createElement("table",{className:Pm.gradesTable},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),t.map(((e,t)=>{var s;return a.createElement("th",{key:"th-".concat(e.id),align:"center"},(null==(s=e.reviewer)?void 0:s.displayName)||l.Ru.text({id:"p2p-reviewer-name-hidden",params:{count:t+1}}))})))),a.createElement("tbody",null,n.reduce(((e,s,n)=>[...e,a.createElement("tr",{key:"group-".concat(n)},a.createElement("td",{colSpan:t.length+1,className:Pm.accentText},s.name)),...s.rows.map((e=>a.createElement("tr",{key:"param-".concat(e.name)},a.createElement("td",null,e.displayName),t.map((t=>{var s;const n=null==(s=t.formulaParamValues)?void 0:s.find((t=>{let{name:s}=t;return s===e.name}));return a.createElement("td",{key:t.id,align:"center"},null==n?"-":null,"number"==typeof(null==n?void 0:n.value)?n.value:null,n&&null===n.value?l.Ru.text({id:"hidden-value"}):null,e.scoreMax&&a.createElement(a.Fragment,null,"/ ",e.scoreMax))})))))]),[]),a.createElement("tr",{className:re(Pm.accentText,Pm.totalRow)},a.createElement("td",null,l.Ru.text({id:"p2p-grade-total"})),t.map((e=>a.createElement("td",{key:"total-".concat(e.id),align:"center"},"number"==typeof e.score?e.score:l.Ru.text({id:"hidden-value"}),e.scoreMax&&a.createElement(a.Fragment,null,"/ ",e.scoreMax))))),s.bonuses?a.createElement("tr",{className:re(Pm.accentText,Pm.firstRow)},a.createElement("td",{className:Pm.bonusItem},l.Ru.text({id:"bonuses"})),a.createElement("td",{align:"center",className:Pm.bonusItem},s.bonuses)):null,s.penalties?a.createElement("tr",{className:re(Pm.accentText,{[Pm.firstRow]:!s.bonuses})},a.createElement("td",{className:Pm.bonusItem},l.Ru.text({id:"penalties"})),a.createElement("td",{align:"center",className:Pm.bonusItem},s.penalties)):null)):a.createElement("table",{className:Pm.gradesList},a.createElement("tbody",null,t.map(((e,t)=>{var s;return a.createElement("tr",{key:e.id},a.createElement("td",{className:Pm.gradeReviewerName},(null==(s=e.reviewer)?void 0:s.displayName)||l.Ru.text({id:"p2p-reviewer-name-hidden",params:{count:t+1}})),a.createElement("td",{align:"center",className:Pm.accentText},"number"==typeof e.score?e.score:l.Ru.text({id:"hidden-value"}),e.scoreMax&&a.createElement(a.Fragment,null," / ",e.scoreMax)))})),s.bonuses?a.createElement("tr",{className:re(Pm.accentText,Pm.firstRow)},a.createElement("td",{className:Pm.bonusItem},l.Ru.text({id:"bonuses"})),a.createElement("td",{align:"center",className:Pm.bonusItem},s.bonuses)):null,s.penalties?a.createElement("tr",{className:re(Pm.accentText,{[Pm.firstRow]:!s.bonuses})},a.createElement("td",{className:Pm.bonusItem},l.Ru.text({id:"penalties"})),a.createElement("td",{align:"center",className:Pm.bonusItem},s.penalties)):null)))))))};xm.displayName="SolutionStatusP2pGrade";const Dm=r().with("solution-status-viewer");class Fm extends a.Component{render(){const{solution:e,role:t}=this.props,{status:s,teacher:n,student:r,updateTime:i}=e,o=t===E.Student;return a.createElement("section",{className:Dm({status:s.type})},a.createElement("div",{className:Dm("info")},o?a.createElement("div",{style:{width:"36px"}}):a.createElement(Vi,Object.assign({size:"s"},this.isOnStudentSide()?{avatar:r.avatar,userId:r.id}:n&&{avatar:n.avatar,userId:n.id})),a.createElement($t.D,{role:"status","aria-live":"assertive",className:Dm("status-text"),level:4},a.createElement(Cn,{text:l.Ru.text({id:"status-changed",keyset:"tasks",params:{status:""}}),dependencies:[e.submissionsCount]}),a.createElement("span",{"data-testid":Dm("status-display-name")},a.createElement(Rm,{status:s.type})),this.hasScore()&&this.renderScore()),e.task.hasP2p&&a.createElement(xm,{className:Dm("p2p-grade"),solutionId:e.id,solutionStatus:e.status.type,formula:e.task.formulaParams})),this.hasDate()&&a.createElement("time",{className:Dm("updated-at")},Ne.Ay.fromISO(i).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))))}renderScore(){const{solution:e}=this.props,{task:t,score:s}=e;if("number"!=typeof s)return null;const n=l.Ru.text({id:"N-points",params:{count:t.scoreMax,n:"".concat(s,"/").concat(t.scoreMax)}});return a.createElement("span",{className:Dm("score-info"),title:n},l.Ru.element({id:"N-points",params:{count:t.scoreMax,n:a.createElement(a.Fragment,null,a.createElement("span",{className:Dm("score")},s),a.createElement("span",{className:Dm("max-score")},"/",t.scoreMax," "))}}))}isOnStudentSide(){const{status:e}=this.props.solution;return[Ye.gt.New,Ye.gt.Draft].includes(e.type)}hasDate(){const{status:e}=this.props.solution;return![Ye.gt.Review,Ye.gt.AutoReview].includes(e.type)}hasScore(){const{status:e,task:t}=this.props.solution,{hideScoreInformation:s}=t.lesson||{};return!s&&[Ye.gt.Accepted,Ye.gt.AcceptedAfterDeadline].includes(e.type)}}Fm.displayName="SolutionStatusViewer";const zm=Fm,jm=r().with("submission-header-viewer");class Um extends a.Component{render(){const{selectedFile:{addedTime:e,id:t,userTime:s},solution:n,runId:r,isDraft:i,role:o}=this.props,{status:c,isScoreMax:u}=n,d=c.type!==Ye.gt.Accepted||u?c.type:Ye.gt.PartialAccepted;return a.createElement("header",{className:jm({status:d})},a.createElement("div",{className:jm("info")},a.createElement($t.D,{className:jm("id"),level:4},i?r:l.Ru.text({id:"id",keyset:"tasks",params:{id:r||t}})),a.createElement("time",{className:jm("date")},Ne.Ay.fromISO(null!=s?s:e).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")))),a.createElement("div",{className:jm("solution-status")},a.createElement(zm,{solution:n,role:o})))}}Um.displayName="SubmissionHeaderViewer";const Hm=["className","children","view","readOnly","max","min","step","value","onChange","controlRef"],Qm=r().with("numeric-input"),Vm=(0,Ut.compose)((0,Ut.composeU)(Ht.x,Qt.r),(0,Ut.composeU)(Vt.U,Gt.N,Bt.L),Wt.w,Jt.R)(Kt.a),Gm=new RegExp("^[0-9]+([.,]?[0-9]*)$"),Bm=(e,t)=>parseFloat((e+t).toFixed(10)),Wm=e=>{const{className:t,children:s,view:n="lyceum",readOnly:r=!1,max:i,min:o,step:l,value:c,onChange:u,controlRef:d}=e,m=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Hm),p=null!=d?d:(0,a.createRef)(),h=(0,a.useCallback)((e=>{e.target.value=e.target.value.replace(",",".");const t=Number(e.target.value);var s;""===e.target.value&&(e.target.value=null!=(s=null==o?void 0:o.toString())?s:"0"),Gm.test(e.target.value)||(e.target.value=(null==c?void 0:c.toString())||(null==o?void 0:o.toString())||"0"),void 0!==i&&t>i?e.target.value=i.toString():void 0!==o&&t<o&&(e.target.value=o.toString()),e.target.value.length>1&&(e.target.value=e.target.value.replace(/^0+([0-9]+)/,"$1")),null==u||u(e)}),[i,o,u,c]),E=(0,a.useCallback)((()=>{p.current&&l&&(p.current.value=Bm(Number(p.current.value),Number(l)).toString(),h({target:p.current}))}),[l,h,p]),g=(0,a.useCallback)((()=>{p.current&&l&&(p.current.value=Bm(Number(p.current.value),-Number(l)).toString(),h({target:p.current}))}),[l,h,p]);return a.createElement("div",{className:Qm()},a.createElement(Vm,Object.assign({className:t,readOnly:r,view:n,controlRef:p,type:"text",inputMode:"decimal",value:c,onChange:h},m),s),l&&a.createElement("div",{className:Qm("step-btns")},a.createElement("button",{type:"button",onClick:E},"▲"),a.createElement("button",{type:"button",onClick:g},"▼")))};Wm.displayName="NumericInput";const Jm=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement);var Km,Zm=s(34038);function Ym(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const qm=r().with("scoring-block"),$m={large:"l",medium:"m"};let Xm=(Km=class extends a.PureComponent{constructor(){super(...arguments),this.state={value:(this.props.score||this.props.maxScore).toString()},this.scoreInput=a.createRef()}componentDidMount(){Jm&&window.requestAnimationFrame((()=>{this.scoreInput.current&&this.scoreInput.current.focus()}))}handleChange(e){const{value:t}=e.target,{precision:s}=this.props;if(void 0!==s){const[e,n]=t.split(/[.,]/);if(0===s)return void this.setState({value:e});if(n&&n.length>s)return void this.setState({value:"".concat(e,".").concat(n.substr(0,s))})}this.setState({value:t})}isValid(){const{score:e,maxScore:t}=this.props,{value:s}=this.state,n=Number(s);return n!==e&&Zm.R.test(s)&&n<=t}handleSubmit(e){this.isValid()&&(e.preventDefault(),this.props.onSetScore(Number(this.state.value)))}render(){const{maxScore:e,size:t,theme:s="action",precision:n,setScoreButtonText:r="OK"}=this.props,{value:i}=this.state,o=a.createElement(ge.$,{disabled:!this.isValid()||this.props.disabled,size:$m[t],view:"lyceum",type:"submit",theme:s},r);return a.createElement("form",{className:qm(),onSubmit:this.handleSubmit},a.createElement(Wm,{controlRef:this.scoreInput,className:qm("input",{size:t}),value:i,step:n?.1/n:1,min:0,max:e,onChange:this.handleChange,size:$m[t]}),a.createElement("span",{className:qm("max-score")},"/",e),o)}},Ym(Km.prototype,"handleChange",[R.Q2],Object.getOwnPropertyDescriptor(Km.prototype,"handleChange"),Km.prototype),Ym(Km.prototype,"handleSubmit",[R.Q2],Object.getOwnPropertyDescriptor(Km.prototype,"handleSubmit"),Km.prototype),Km);Xm.displayName="ScoringBlock";const ep=r().with("grading-block");class tp extends a.Component{render(){return a.createElement("div",{className:ep()},this.props.fetchStatus===Ot.L.PENDING?this.renderSpinner():this.renderBlock())}renderSpinner(){return a.createElement("div",{className:ep("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"m"}))}renderBlock(){return a.createElement(a.Fragment,null,a.createElement("span",{className:ep("scoring-block")},a.createElement(Xm,{size:"large",theme:"approve",maxScore:this.props.maxScore,setScoreButtonText:this.props.setAcceptedGradeText||l.Ru.text({id:"mark-ok",keyset:"tasks"}),onSetScore:this.props.setAcceptedGrade,disabled:this.props.disabled})),this.props.setReworkGrade&&a.createElement(ge.$,{className:ep("reject-button"),size:"l",theme:"reject",view:"lyceum",onClick:this.props.setReworkGrade,disabled:this.props.disabled},l.Ru.text({id:"mark-redo-brief",keyset:"tasks"})))}}tp.displayName="GradingBlock";const sp=tp;var np;function rp(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const ap=r().with("grading-popup");let ip=(rp((np=class extends a.Component{handleAccept(e){this.props.closePopup(),this.props.setAcceptedGrade(e)}handleRework(){this.props.closePopup(),this.props.setReworkGrade&&this.props.setReworkGrade()}handleRejudge(){var e,t;this.props.closePopup(),this.props.canRejudge&&(null==(e=(t=this.props).rejudge)||e.call(t))}render(){const{maxScore:e,score:t,canRejudge:s,disabled:n,setAcceptedGradeText:r}=this.props,i=Boolean(t)||0===t;return a.createElement("div",{className:ap()},a.createElement("span",{className:ap("caption")},l.Ru.text({id:"".concat(i?"change-score":"set-score"),keyset:"tasks"})),a.createElement(Xm,{size:"medium",theme:"approve",score:t,maxScore:e,setScoreButtonText:r||l.Ru.text({id:"mark-ok",keyset:"tasks"}),onSetScore:this.handleAccept}),a.createElement("div",{className:ap("control-block")},i&&this.props.setReworkGrade&&a.createElement("button",{type:"button",className:ap("button",{type:"redo"}),onClick:this.handleRework,disabled:n},l.Ru.text({id:"mark-redo-full",keyset:"tasks"})),s&&a.createElement("button",{disabled:n,type:"button",className:ap("button"),onClick:this.handleRejudge},l.Ru.text({id:"rejudge",keyset:"tasks"}))))}}).prototype,"handleAccept",[R.Q2],Object.getOwnPropertyDescriptor(np.prototype,"handleAccept"),np.prototype),rp(np.prototype,"handleRework",[R.Q2],Object.getOwnPropertyDescriptor(np.prototype,"handleRework"),np.prototype),rp(np.prototype,"handleRejudge",[R.Q2],Object.getOwnPropertyDescriptor(np.prototype,"handleRejudge"),np.prototype),np);ip.displayName="GradingPopup";var op=s(67378);const lp=["className","children","content"],cp=(0,$.cn)("tooltip-stateful"),up=e=>{let{className:t,children:s,content:n}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,lp);const[i,o]=(0,a.useState)(!1),l=(0,a.useRef)(null),c=()=>o(!0),u=()=>o(!1);return a.createElement("div",{onMouseOver:c,onMouseLeave:u,onFocus:c,onBlur:u,ref:l},s,a.createElement(op.m_,Object.assign({anchor:l,className:(0,$.j)(cp(),t),visible:i},r),n))};up.displayName="TooltipStateful";const dp=r().with("hint"),mp=e=>{const{children:t,text:s,className:n}=e;return a.createElement("div",{className:(0,$.j)(dp(),n)},a.createElement(up,{className:dp("text"),content:s,zIndex:21002},a.createElement("div",{className:dp("content")},t||a.createElement(ie,{type:"question",size:"m"}))))};mp.displayName="Hint";const pp=mp;var hp;function Ep(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const gp=r().with("formula-grading-block");let yp=(hp=class extends a.Component{constructor(){super(...arguments),this.state={formValid:!0}}handleAccept(){this.props.closePopup(),this.props.setAcceptedGrade(this.props.formulaParamValues)}handleRework(){this.props.closePopup(),this.props.setReworkGrade&&this.props.setReworkGrade()}checkFormValidByParam(e,t){const s=t.min<=Number(e)&&Number(e)<=t.max;this.state.formValid=this.state.formValid&&s}renderFormulaParams(e){return e.map((e=>{var t;const s=null!=(t=this.props.formulaParamValues[e.name])?t:e.default;return this.checkFormValidByParam(s,e),a.createElement("div",{className:gp("field"),key:e.name},a.createElement("div",{className:gp("field-label")},a.createElement("div",{className:gp("field-label__text")},e.displayName),e.hint&&a.createElement(pp,{className:gp("field-label__hint"),text:e.hint})),a.createElement(Wm,{className:gp("field-input"),size:"m",value:s.toString(),min:e.min,max:e.max,step:e.step,onChange:this.props.onChange,id:e.name}),a.createElement("span",{className:gp("field-input-max-score")},"/",e.max))}))}render(){const{formulaParamGroups:e,closePopup:t}=this.props;return this.state.formValid=!0,a.createElement("form",{className:gp()},a.createElement(ge.$,{className:gp("close"),icon:e=>a.createElement(ie,{className:e,size:"l",type:"close"}),theme:"clear",size:"l",view:"lyceum",onClick:t,"aria-label":l.Ru.text({keyset:"common",id:"close"})}),e.map((e=>a.createElement("div",{key:e.groupDisplayName,className:gp("field-group")},e.groupDisplayName&&a.createElement("h3",null,e.groupDisplayName),e.params&&this.renderFormulaParams(e.params)))),a.createElement("div",{className:gp("button-wrapper")},this.props.setReworkGrade&&a.createElement(ge.$,{className:gp("button"),theme:"reject",size:"l",view:"lyceum",onClick:this.handleRework,disabled:this.props.disabled},l.Ru.text({keyset:"tasks",id:"mark-redo-brief"})),a.createElement(ge.$,{className:gp("button"),theme:"approve",size:"l",view:"lyceum",onClick:this.handleAccept,disabled:this.props.disabled||!this.state.formValid},l.Ru.text({keyset:"tasks",id:"set-score"}))))}},Ep(hp.prototype,"handleAccept",[R.Q2],Object.getOwnPropertyDescriptor(hp.prototype,"handleAccept"),hp.prototype),Ep(hp.prototype,"handleRework",[R.Q2],Object.getOwnPropertyDescriptor(hp.prototype,"handleRework"),hp.prototype),Ep(hp.prototype,"checkFormValidByParam",[R.Q2],Object.getOwnPropertyDescriptor(hp.prototype,"checkFormValidByParam"),hp.prototype),hp);yp.displayName="FormulaGradingBlock";const fp=yp;var Sp;function bp(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const vp=r().with("solution-status-editor");let Np=(Sp=class extends a.Component{constructor(){super(...arguments),this.state={isPopupVisible:!1,formulaParamsDictionary:{}},this.rootRef=a.createRef(),this.editButtonRef=a.createRef(),this.popupDirections=["bottom","bottom-end"]}componentWillMount(){if(!this.props.solution.task.useFormula)return;const e={},{formulaParams:t}=this.props.solution.task,{formulaParamValues:s}=this.props.solution;t.forEach((t=>{let{params:s}=t;s.forEach((t=>{e[t.name]=t.default}))})),s.forEach((t=>{e[t.name]=t.value})),this.setState((t=>Object.assign({},t,{formulaParamsDictionary:e})))}render(){return a.createElement("section",{className:vp(),ref:this.rootRef},this.renderStatusEditor(),this.hasPopup()&&this.renderPopup())}gradeAsAcceptedByScore(e){this.props.gradeAsAccepted(e,null)}gradeAsAcceptedByParams(e){const t=[];for(const[s,n]of Object.entries(e))t.push({name:s,value:Number(n)});this.props.gradeAsAccepted(null,t)}renderStatusEditor(){const{gradingStatus:e,solution:t,gradeAsRework:s}=this.props;switch(t.status.type){case Ye.gt.Review:case Ye.gt.AutoReview:return t.task.useFormula?a.createElement("div",{className:vp("button-wrapper")},a.createElement(ge.$,{className:vp("button"),theme:"approve",size:"l",view:"lyceum",onClick:this.togglePopup},l.Ru.text({keyset:"tasks",id:"set-score"}))):a.createElement(sp,{fetchStatus:e,maxScore:t.task.scoreMax,setAcceptedGrade:this.gradeAsAcceptedByScore,setReworkGrade:s});case Ye.gt.Accepted:case Ye.gt.AcceptedAfterDeadline:case Ye.gt.Uploaded:case Ye.gt.AssignedToP2p:case Ye.gt.OnClarifying:return this.renderStatusDescription(!0);case Ye.gt.Rework:case Ye.gt.SamplesPassed:return this.renderStatusDescription();default:return null}}HandleInputChange(e){const{value:t,id:s}=e.target;this.setState((e=>Object.assign({},e,{formulaParamsDictionary:Object.assign({},e.formulaParamsDictionary,{[s]:t})})))}renderPopup(){const{isPopupVisible:e}=this.state,{solution:t,gradeAsRework:s,rejudge:n}=this.props,{status:r,score:i}=t,{useFormula:o,formulaParams:l}=t.task;return o?a.createElement(jt.a,{theme:"normal",visible:e,onClose:this.togglePopup,scope:this.rootRef||void 0},a.createElement(fp,{formulaParamGroups:l||[],formulaParamValues:this.state.formulaParamsDictionary||{},setAcceptedGrade:this.gradeAsAcceptedByParams,setReworkGrade:s,closePopup:this.togglePopup,onChange:this.HandleInputChange})):a.createElement(ws,{className:vp("popup"),theme:"normal",target:"anchor",direction:this.popupDirections,anchor:this.editButtonRef,visible:e,onClose:this.togglePopup,scope:"inplace"},a.createElement(ip,{canRejudge:this.canRejudge(),closePopup:this.togglePopup,maxScore:t.task.scoreMax,score:r.type===Ye.gt.Rework?void 0:i,setAcceptedGrade:this.gradeAsAcceptedByScore,setReworkGrade:s,rejudge:n}))}renderStatusDescription(e){const{solution:t,gradingStatus:s,rejudgeStatus:n}=this.props,{status:r,teacher:i,updateTime:o}=t,l=n===Ot.L.PENDING||s===Ot.L.PENDING;return a.createElement("div",{className:vp("description",{status:r.type})},a.createElement("div",{className:vp("info")},a.createElement(Vi,Object.assign({size:"s"},i&&{avatar:i.avatar,userId:i.id})),a.createElement("div",{className:vp("status-text")},a.createElement("h4",{className:vp("status-name")},a.createElement(Rm,{status:r.type})),a.createElement("span",{className:vp("score-info-wrapper")},e&&this.renderScore(),l?this.renderSpinner():this.renderEditButton()))),a.createElement("time",{className:vp("updated-at")},Ne.Ay.fromISO(o).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))))}renderScore(){const{solution:e}=this.props,{score:t,task:s}=e;if("number"!=typeof t)return null;const n=l.Ru.text({id:"N-points",params:{count:s.scoreMax,n:"".concat(t,"/").concat(s.scoreMax)}});return a.createElement("span",{className:vp("score-info"),title:n},l.Ru.element({id:"N-points",params:{count:s.scoreMax,n:a.createElement(a.Fragment,null,a.createElement("span",{className:vp("score")}," ",t," "),a.createElement("span",{className:vp("max-score")},"/",s.scoreMax))}}))}renderSpinner(){return a.createElement(he.t,{view:"default",progress:!0,size:"xs"})}renderEditButton(){const{isPopupVisible:e}=this.state;return this.canEdit()?a.createElement(ge.$,{innerRef:this.editButtonRef,theme:"clear",size:"xs",view:"lyceum",checked:e,icon:e=>a.createElement(ie,{className:e,size:"l",type:"edit"}),onClick:this.togglePopup,"aria-label":l.Ru.text({keyset:"common",id:"edit"})}):null}togglePopup(){this.setState((e=>({isPopupVisible:!e.isPopupVisible})))}hasPopup(){const{status:e}=this.props.solution,{useFormula:t}=this.props.solution.task;return![Ye.gt.Review,Ye.gt.AutoReview].includes(e.type)||t}canEdit(){const{role:e,solution:t}=this.props,{status:s}=this.props.solution;return s.type!==Ye.gt.SamplesPassed&&(e!==E.Teacher&&e!==E.Methodist||!t.task.hasP2p)}canRejudge(){const{isUserSuperuser:e,solution:t}=this.props;return e&&!t.task.hasManualCheck}},bp(Sp.prototype,"componentWillMount",[R.Q2],Object.getOwnPropertyDescriptor(Sp.prototype,"componentWillMount"),Sp.prototype),bp(Sp.prototype,"gradeAsAcceptedByScore",[R.Q2],Object.getOwnPropertyDescriptor(Sp.prototype,"gradeAsAcceptedByScore"),Sp.prototype),bp(Sp.prototype,"gradeAsAcceptedByParams",[R.Q2],Object.getOwnPropertyDescriptor(Sp.prototype,"gradeAsAcceptedByParams"),Sp.prototype),bp(Sp.prototype,"HandleInputChange",[R.Q2],Object.getOwnPropertyDescriptor(Sp.prototype,"HandleInputChange"),Sp.prototype),bp(Sp.prototype,"togglePopup",[R.Q2],Object.getOwnPropertyDescriptor(Sp.prototype,"togglePopup"),Sp.prototype),Sp);Np.displayName="SolutionStatusEditor";const Ip=Np;var Tp=s(91667);function kp(e){return e.solutions.grade.fetchStatus}var Cp,wp=s(27656);function Ap(e){return e.solutions.rejudge.fetchStatus}function Op(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}let Rp=(Op((Cp=class extends a.Component{render(){return a.createElement(Ip,{role:this.props.role,isUserSuperuser:this.props.isSuperuser,solution:this.props.solution,gradingStatus:this.props.gradingStatus,rejudgeStatus:this.props.rejudgeStatus,gradeAsAccepted:this.gradeAsAccepted,gradeAsRework:this.gradeAsRework,rejudge:this.rejudge})}gradeAsAccepted(e,t){const{solution:s,match:n}=this.props;this.props.gradeSolution({solutionId:s.id,status:Ye.gt.Accepted,groupId:Number(n.params.groupId),courseId:Number(n.params.courseId),score:e,formulaParamValues:t})}gradeAsRework(){const{solution:e,match:t}=this.props;this.props.gradeSolution({solutionId:e.id,status:Ye.gt.Rework,groupId:Number(t.params.groupId),courseId:Number(t.params.courseId),score:null,formulaParamValues:null})}rejudge(){const{solution:e}=this.props;this.props.rejudgeSolution({solutionId:e.id})}}).prototype,"gradeAsAccepted",[R.Q2],Object.getOwnPropertyDescriptor(Cp.prototype,"gradeAsAccepted"),Cp.prototype),Op(Cp.prototype,"gradeAsRework",[R.Q2],Object.getOwnPropertyDescriptor(Cp.prototype,"gradeAsRework"),Cp.prototype),Op(Cp.prototype,"rejudge",[R.Q2],Object.getOwnPropertyDescriptor(Cp.prototype,"rejudge"),Cp.prototype),Cp);Rp.displayName="SolutionStatusEditorContainer";const _p=(0,o.Ng)((function(e){return{isSuperuser:(0,T.Y8)(e),gradingStatus:kp(e),rejudgeStatus:Ap(e)}}),(function(e){return(0,_.zH)({gradeSolution:Tp.nY,rejudgeSolution:wp.s.request},e)}))(er((0,i.y)(Rp)));let Lp=function(e){return e.Unresolved="unresolved",e.Confirmed="confirmed",e.Declined="declined",e}({});var Mp=s(61019),Pp=s(36200);const xp=(0,$.cn)("yede32--plagiary-status-indicator"),Dp={m:Mp.h,l:Pp.h},Fp=e=>{let{size:t="m",color:s,className:n}=e;const r=Dp[t];return a.createElement(r,{className:(0,$.j)(n,xp({color:s}))})};Fp.displayName="PlagiaryStatusIndicator";const zp=(0,$.cn)("y22e45--plagiary-marker-viewer"),jp={[Lp.Declined]:"grey",[Lp.Confirmed]:"red",[Lp.Unresolved]:"yellow"},Up=e=>{let{className:t,plagiarism:s,size:n="m",compact:r=!1}=e;const i=l.Ru.text({id:"status-".concat(s.status),keyset:"antiplagiary"}),o=Math.ceil(100*s.similarity);let c=i,u=null;return s.status===Lp.Unresolved&&(r?c=a.createElement(a.Fragment,null,c,".",a.createElement("br",null),l.Ru.text({id:"plagiary-probability",keyset:"antiplagiary",params:{n:o}})):u="".concat(o,"%")),a.createElement(fe,{content:c},a.createElement("span",{className:(0,$.j)(t,zp({size:n,full:!r}))},a.createElement(Fp,{className:zp("indicator"),color:jp[s.status],size:n})," ",u))};Up.displayName="PlagiaryMarkerViewer";const Hp={yandexForm:new x.s("https\\://forms.yandex.ru/surveys/:formId/"),contestAdminRunReport:new x.s("https\\://contest.yandex.:tld/admin/run-report")},Qp=r().with("submission-header-editor"),Vp=e=>{let{runId:t}=e;return a.createElement(as.Ov.Consumer,null,(e=>a.createElement(u,{className:Qp("link"),href:Hp.contestAdminRunReport.build({tld:e.tld},{id:t})},a.createElement("div",{className:Qp("id")},l.Ru.text({id:"id",keyset:"tasks",params:{id:t}})))))};Vp.displayName="RunReportLink";const Gp=e=>{let{id:t}=e;return a.createElement("div",{className:Qp("id")},l.Ru.text({id:"id",keyset:"tasks",params:{id:t}}))};Gp.displayName="FileId";const Bp=e=>{let{submission:{file:t,plagiarism:s,runId:n},solution:r}=e;return a.createElement("header",{className:Qp({status:r.status.type})},a.createElement("div",{className:Qp("info")},a.createElement($t.D,{className:Qp("heading"),level:4},n?a.createElement(Vp,{runId:n}):a.createElement(Gp,{id:t.id}),s&&a.createElement(Up,{className:Qp("plagiarism"),plagiarism:s,size:"l"})),a.createElement("time",{className:Qp("date"),dateTime:t.addedTime},Ne.Ay.fromISO(t.addedTime).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")))),a.createElement("div",{className:Qp("solution-status")},a.createElement(_p,{solution:r})))};Bp.displayName="SubmissionHeaderEditor";const Wp={submissionsComparison:new x.s("".concat(p.BB,"/lessons/:lessonId/tasks/:taskId/submissions/compare/:firstSubmissionId/:secondSubmissionId"))},Jp=((0,D.k)(Wp),(0,$.cn)("y5bb67--submission")),Kp=e=>{var t,s,n,r,o,u,m;let{solution:p,submission:h,onSubmissionSelect:g,role:y,availableLanguages:f,readonly:S}=e;const b=(0,i.W5)(),{pathname:v}=(0,i.zy)(),{latestSubmission:N}=p;if(!N)throw new d.dH("Solution ".concat(p.id," has no submission"));const I=(0,a.useCallback)((()=>{g(N)}),[N,g]),T=(0,a.useCallback)((()=>{g(null)}),[g]),k=P(lm),C=!!h&&Ne.Ay.fromISO(h.file.addedTime)<Ne.Ay.fromISO(N.file.addedTime),w=Ko.I.get(Zo.Z.SavedSolutions);let A=null==w?void 0:w[p.id];A&&Date.parse((null==(t=A)?void 0:t.timestamp)||"")<Date.parse(N.file.addedTime)&&(Ko.I.set(Zo.Z.SavedSolutions,Object.assign({},w,{[p.id]:null})),A=null,g(N));const O={id:l.Ru.text({id:"draft",keyset:"solutions"}),name:"draft".concat(k),url:"",size:1,mimeType:(0,Tm.gW)(k),encoding:"",userTime:null==(s=A)?void 0:s.userTime,addedTime:null==(n=A)?void 0:n.timestamp,sourceCode:null==(r=A)?void 0:r.code},{file:R=O,runId:_=O.id}=null!=h?h:{};return a.createElement("section",{className:Jp()},a.createElement("div",{className:Jp("header-wrapper")},y===E.Student||p.task.hasP2p?a.createElement(Um,{selectedFile:R,solution:p,runId:_.toString(),isDraft:!h,role:y}):a.createElement(Bp,{submission:null!=h?h:N,solution:p})),h&&h.plagiarism&&a.createElement("div",{className:Jp("warning")},h.plagiarism.status===Lp.Unresolved?l.Ru.text({id:"plagiary-probability",keyset:"antiplagiary",params:{n:Math.ceil(100*h.plagiarism.similarity)}}):l.Ru.text({id:"status-".concat(h.plagiarism.status),keyset:"antiplagiary"}),".",c,b&&a.createElement(ci.N,{to:{pathname:Wp.submissionsComparison.build({courseId:b.params.courseId,groupId:b.params.groupId,lessonId:(null==(o=p.task.lesson)?void 0:o.id.toString())||"",taskId:p.task.id.toString(),firstSubmissionId:h.id.toString(),secondSubmissionId:h.plagiarism.submissionId.toString()}),state:{previousPath:v}}},l.Ru.text({id:"compare-solutions",keyset:"antiplagiary"}))),C&&a.createElement("div",{className:Jp("warning")},l.Ru.text({id:"old-submission-warning",keyset:"tasks"}),".",c,a.createElement(ci.N,{pseudo:!0,behavior:"external",href:N.file.url,onClick:I},l.Ru.text({id:"last-submission-link",keyset:"tasks"}))),h&&!C&&!Jo()(null==(u=A)?void 0:u.code)&&y===E.Student&&a.createElement("div",{className:Jp("warning")},l.Ru.text({id:"changes-warning",keyset:"tasks"}),".",c,a.createElement(ci.N,{pseudo:!0,behavior:"external",href:"",onClick:T},l.Ru.text({id:"draft-link",keyset:"tasks"}))),a.createElement("div",{className:Jp("file")},a.createElement(wm,{isOldSubmission:C,savedSolution:A,fileMetadata:null!=(m=null==h?void 0:h.file)?m:O,availableLanguages:f,onClear:T,readonly:S,solutionId:p.id})))};Kp.displayName="SubmissionBase";const Zp=er(Kp);var Yp=s(62383),qp=s.n(Yp),$p=s(87702),Xp=s(4398),eh=s.n(Xp);const th=["chooseimage","macaroni"];function sh(e){const t=e.markup.layout.reduce(((e,t)=>("marker"===t.kind&&(e[t.content.id]=t),e)),{}),s={};if(e.markup.answers)for(const[n,r]of Object.entries(e.markup.answers))void 0!==t[n]&&("inline"===t[n].content.type?s[n]=eh()(r,((e,t,s)=>{e[s]=Array.isArray(t)?t[0]:t}),{}):th.includes(t[n].content.type)?s[n]=r[0]:s[n]=r);return s}const nh=e=>{let{text:t,mdState:s}=e;return a.createElement("div",{className:"problem-block_kind_text"},a.createElement(Na.n,{state:s},t))};nh.displayName="ProblemBlockKindText";const rh=nh;var ah=s(71415),ih=s(70226),oh=s(22782),lh=s(79768),ch=s(38197),uh=s(8886),dh=s(82907),mh=s(9639),ph=s(3388),hh=s(24277),Eh=s(88628),gh=s(87152),yh=s(62174),fh=s(48924);const Sh=(0,Ut.compose)(Es.J,Ss.B,fh.z)(ys.z);var bh=s(2450),vh=s(67374),Nh=s(97242),Ih=s(96472),Th=s(52001),kh=s(62006);const Ch=(0,Ut.compose)(bh.N,(0,Ut.composeU)(vh.Q,Nh.T),Ih.z,Th.U)(kh.$);var wh=s(18069);const Ah=["className"],Oh=(0,Ut.withBemMod)((0,wh.l)(),{glyph:"carets-v"},(e=>t=>{let{className:s}=t,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,Ah);return a.createElement(e,Object.assign({},n,{className:(0,wh.l)({hasGlyph:!0},[s])}),a.createElement("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M4.77573 7.0625C4.43096 7.64583 3.56904 7.64583 3.22427 7.0625L0.121343 1.8125C-0.223426 1.22917 0.207536 0.5 0.897075 0.5L7.10293 0.5C7.79247 0.5 8.22343 1.22917 7.87866 1.8125L4.77573 7.0625Z"})))})),Rh=(0,Ut.compose)(Oh)(wh.I);var _h=s(92259),Lh=s(69738),Mh=s(79135),Ph=s(11581);const xh=(0,Ut.compose)(_h.N,Lh.z,Mh.T)(Ph.W);var Dh=s(24621),Fh=s(83018),zh=s(69717),jh=s(20483),Uh=s(93135),Hh=s(67209);const Qh=(0,Ut.compose)((0,Ut.composeU)(Dh.J,Fh.z,zh.v,Ht.x,Qt.r),(0,Ut.composeU)(jh.v,Uh.u),Jt.R,Gt.N,Hh.U)(Kt.a),Vh=e=>a.createElement(Sh,e);Vh.displayName="MountedPopup";const Gh=new ah.Registry({id:(0,mh.i)()}).set("Trigger",Ch).set("Popup",(0,fs.I)(Vh)).set("Menu",xh).set("Icon",Rh).set("Textinput",Qh),Bh=(0,Ut.compose)((0,ah.withRegistry)(Gh),ph.z,(0,hh.z)(),Eh.R,yh.w,gh.U)(mh.l);function Wh(e){return"field"===e.type}function Jh(e){return"rational"===e.type}var Kh=s(51861),Zh=s(60194),Yh=s(38528);const qh=new ah.Registry({id:(0,Kh.u)()});qh.set("Textinput",Qh);const $h=(0,Ut.compose)((0,ah.withRegistry)(qh),Zh.Q,Yh.W)(Kh.D);function Xh(e){return{value:e,content:arguments.length>1&&void 0!==arguments[1]?arguments[1]:e}}const eE=[1,2,3,4,5,6,7,8,9,0].map(String).map((e=>Xh(e))),tE=([">","<","=","≥","≤"].map((e=>Xh(e))),Xh("+"),Xh("-","−"),Xh("*","×"),Xh("/","÷"),[{value:"Backspace",width:"wide",mode:"backspace"}]),sE=[{value:",",content:",",mode:"decimal"}],nE=[{value:"-",content:"-"}],rE=[Xh("/")];let aE=function(e){return e.PRIMARY="primary",e.SECONDARY="secondary",e}({});const iE=()=>{},oE={[aE.PRIMARY]:{handleKeyboardArrow:iE,handleTrackKeypress:iE,setRef:iE,shouldShowKeyboard:!1,shouldDisableNativeMobileKeyboard:!1,keyboardAllowed:!1},[aE.SECONDARY]:{handleKeyboardArrow:iE,handleTrackKeypress:iE,setRef:iE,shouldShowKeyboard:!1,shouldDisableNativeMobileKeyboard:!1,keyboardAllowed:!1},show:()=>({hide:iE,render:iE}),refs:{}},lE=a.createContext(oE);var cE=s(53247),uE=s.n(cE);function dE(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=function(){e.removeEventListener(t,r,n),s(...arguments)};e.addEventListener(t,r,n)}const mE=function(){class e extends a.Component{constructor(){var e;super(...arguments),e=this,this.state={active:!1},this.displayName="withActiveClassWrapper",this.handleMouseDown=function(){const{onMouseDown:t}=e.props;t(...arguments),e.setState({active:!0}),dE(document,"mouseup",(()=>{e.setState({active:!1})}))},this.handleTouchStart=function(){const{onTouchStart:t}=e.props;t(...arguments),e.setState({active:!0}),dE(document,"touchend",(()=>{e.setState({active:!1})}))}}render(){const{className:e}=this.props,{active:t}=this.state;return a.createElement("button",Object.assign({},this.props,{className:(0,$.j)(e,t?"active":void 0),onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart}))}}return e.defaultProps={onMouseDown:()=>{},onTouchStart:()=>{}},e.displayName="WithActiveClass",e}(),pE=e=>{const{disabled:t=!1,mode:s,mix:n,isSelected:i,onPress:o,width:l,content:c}=e;return a.createElement(mE,{className:(0,$.j)(n,r()("keyboard","key",{width:l,mode:s,selected:i})),disabled:t,onClick:o},a.createElement("span",{className:"keyboard__key-content"},c))};pE.displayName="KeyboardKey";const hE=pE,EE=e=>{let{keys:t,onPress:s}=e;return a.createElement("div",{className:"keyboard__block"},function(e,t){return e.map((e=>Object.assign({},e,{onPress:uE()(t,Object.assign({},e))})))}(t,s).map((e=>a.createElement(hE,Object.assign({},e,{key:"".concat(e.value)})))))};EE.displayName="KeyboardBlock";const gE=EE;var yE=s(43561);const fE="navigation-event-".concat((0,yE.nanoid)());class SE extends a.Component{constructor(){super(...arguments),this.state={controls:null}}componentDidMount(){const{show:e}=this.props;var t;e&&this.show(),t=this.hide,document.addEventListener(fE,t)}componentDidUpdate(e){const{show:t}=this.props;t!==e.show&&(t?this.show():this.hide())}componentWillUnmount(){var e;this.hide(),e=this.hide,document.removeEventListener(fE,e)}show(){const{keyboardType:e}=this.props;this.setState({controls:this.context.show(e)})}hide(){const{controls:e}=this.state;e&&e.hide&&e.hide()}handleMouseDown(e){e.preventDefault()}handleKeyDown(e){e.preventDefault()}render(){const{children:e}=this.props,{controls:t}=this.state;return t&&t.render(a.createElement("div",{className:"keyboard__content",onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown,role:"button",tabIndex:0},e))||null}}SE.contextType=lE,SE.displayName="UseKeyboard";const bE=(0,dh.cn)("InlineInput"),vE=e=>{const{type:t,onChange:s,value:n}=e,i=bE({type:t}),o=e.readOnly||"initial"!==e.status,[l,c]=(0,a.useState)(!1),u=(0,a.useRef)(null),d=(0,a.useRef)(null),m=void 0!==n?n.toString():"",p=(0,a.useContext)(lE),{shouldDisableNativeMobileKeyboard:h,keyboardAllowed:E}=p[aE.PRIMARY],g=(Wh(e)&&"number"===e.options.typeContent||Jh(e))&&E,y=o||g&&h,f=(0,a.useCallback)(((e,t)=>{l&&function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){const s=e.createTextRange();return s.move("character",t),s.select(),!0}e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()}}(e,t)}),[l]),S=(0,a.useCallback)(((e,t)=>{s(e),d.current=t}),[s]);(0,a.useEffect)((()=>{const e=d.current;null!==e&&u.current&&(f(u.current,e),d.current=null)}),[f,n]);const b=(0,a.useCallback)((e=>{const{value:t}=e;if(!u.current)return;const{selectionStart:s,selectionEnd:n}=u.current;if(null===s||null===n)return;const r=m.slice(0,s),a=m.slice(n,m.length);S(r+t+a,s+1)}),[m,S]),v=(0,a.useCallback)((()=>{if(y||!u.current)return[m.length,m.length];const{selectionStart:e,selectionEnd:t}=u.current;return[e,t]}),[y,m.length]),N=(0,a.useCallback)((()=>{if(!u.current)return;const[e,t]=v();if(null===e||null===t)return;let s=e;s===t&&(s-=1),s=Math.max(0,s);const n=m.slice(0,s),r=m.slice(t,m.length);S(n+r,s)}),[m,v,S]),I=(0,a.useCallback)((()=>{if(function(e){return"choice"===e.type}(e))return a.createElement(Bh,{baseline:!0,className:i,disabled:e.disabled,onChange:t=>e.onChange(Number(t.target.value)),options:e.options.choices.map(((e,t)=>({value:t.toString(),content:e}))),placeholder:e.options.placeholder,readOnly:o,size:"m",status:e.status,value:"number"==typeof e.value?e.value.toString():"",view:"platform",width:"synced"});if(Wh(e)){const s=!o&&l&&g,n=!o&&g;return a.createElement(a.Fragment,null,a.createElement($h,{className:bE({type:t,focusEnabled:n}),disabled:e.disabled,onChange:t=>e.onChange(t.target.value),maxLength:e.options.width,readOnly:y,size:"m",status:e.status,value:e.value||"",type:e.options.typeContent,view:"platform",width:"computed",controlRef:u,onFocus:()=>c(!0),onBlur:()=>c(!1)}),a.createElement(SE,{keyboardType:aE.PRIMARY,show:s},a.createElement(gE,{keys:eE,onPress:b}),a.createElement(gE,{keys:sE,onPress:b}),a.createElement(gE,{keys:nE,onPress:b}),a.createElement(gE,{keys:rE,onPress:b}),a.createElement(gE,{keys:tE,onPress:N})))}if(Jh(e)){const s=!o&&l&&g,n=!o&&g;return a.createElement(a.Fragment,null,a.createElement($h,{baseline:!0,className:bE({type:t,focusEnabled:n}),disabled:e.disabled,onChange:t=>e.onChange(t.target.value),maxLength:e.options.width,readOnly:y,size:"m",status:e.status,value:e.value||"",view:"platform",width:"computed",controlRef:u,onFocus:()=>c(!0),onBlur:()=>c(!1)}),a.createElement(SE,{keyboardType:aE.PRIMARY,show:s},a.createElement(gE,{keys:eE,onPress:b}),a.createElement(gE,{keys:sE,onPress:b}),a.createElement(gE,{keys:nE,onPress:b}),a.createElement(gE,{keys:rE,onPress:b}),a.createElement(gE,{keys:tE,onPress:N})))}return null}),[i,N,b,l,o,g,e,y,t]);return a.createElement("div",{className:r()("inline-input",{type:t})},I())};vE.displayName="InlineInput";var NE=s(23145),IE=s(25830);const TE=new ah.Registry({id:(0,NE.U)()});TE.set("Input",vE);const kE=(0,Ut.compose)((0,ah.withRegistry)(TE),IE.w)(NE.R),CE=/{input:(\d+)}/g,wE=e=>{const t=CE.test(e.code||"");return a.createElement(kE,Object.assign({},e,{hasInputs:t}))};wE.displayName="Formula";const AE=new ah.Registry({id:(0,oh.DN)()});AE.set("Table",ch.h),AE.set("Formula",wE),AE.set("Input",vE);const OE=(0,Ut.compose)((0,ah.withRegistry)(AE),ih.rP,oh.wC,oh.bS,oh.gl,oh.vL,uh.b,lh.P)(oh.oz);var RE=s(99092);const _E=["inputs","children","correctAnswer"],LE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce(((e,t)=>(e[t]="correct",e)),{})},ME=(0,Ut.withBemMod)((0,RE.cnMarkerChoice)(),{statusMode:$p.U3.correctAnswer},(e=>t=>{let{inputs:s,children:n,correctAnswer:r=[]}=t,i=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,_E);return a.createElement(e,Object.assign({},i,{status:LE(r),inputs:s,value:r}),n)})),PE=new ah.Registry({id:(0,ih.Vd)()});PE.set("Input",vE),PE.set("Markdown",OE);const xE=ME((0,ah.withRegistry)(PE)(ih.yR)),DE=e=>{let{correctAnswer:t,statusMode:s,options:n,onChange:r,value:i={},mdState:o,readOnly:l}=e;return a.createElement("div",{className:"marker-inline"},a.createElement(xE,{statusMode:s,correctAnswer:t,inputs:n.inputs,onChange:e=>{let{target:{value:t}}=e;return r(t)},value:i,markdownState:o,readOnly:l},n.text))};DE.displayName="MarkerInline";const FE=()=>a.createElement("div",{className:"marker_type_fallback"},"Непоррерживаемый тип контента");FE.displayName="MarkerTypeFallback";const zE=FE;var jE=s(3610),UE=s(48692),HE=s(54394),QE=s(12780),VE=s(66955),GE=s(89731),BE=s(46821),WE=s(52161),JE=s(86919),KE=s(62029);const ZE=["options","correctAnswer"],YE=function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(((t,s)=>e.includes(s)?"correct":"initial"))},qE=(0,Ut.withBemMod)((0,RE.cnMarkerChoice)(),{statusMode:$p.U3.correctAnswer},(e=>t=>{let{options:s,correctAnswer:n=[]}=t,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,ZE);return a.createElement(e,Object.assign({},r,{statuses:YE(s,n),options:s,value:n}))})),$E=(0,JE.L)(KE.c),XE=new ah.Registry({id:(0,jE.h4)()});XE.set("Option",$E);const eg=qE((0,Ut.compose)((0,ah.withRegistry)(XE),(0,Ut.composeU)(UE.m,HE.Q),(0,Ut.composeU)(QE.y,VE.P,GE.T,BE.x),WE.L)(jE.OM)),tg=e=>{const{correctAnswer:t=[],statusMode:s,options:{choices:n,typeDisplay:r,flavor:i="checkbox"},value:o=[],onChange:l,readOnly:c}=e;return a.createElement("div",{className:"marker-choice"},a.createElement(eg,{correctAnswer:t,statusMode:s,type:i,flavor:"pumpkin",layout:r,options:n,value:o,onChange:e=>{let{target:{value:t}}=e;return l(t)},readOnly:c}))};tg.displayName="MarkerChoice";var sg=s(16762),ng=s.n(sg),rg=s(55848),ag=s(19396),ig=s(51810),og=s(36091),lg=s(97144),cg=s(75304),ug=s(23508);const dg=["correctAnswer","hitAreas"],mg=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>e.includes(t.id)?"correct":"initial"))},pg=(0,Ut.withBemMod)((0,RE.cnMarkerChoice)(),{statusMode:$p.U3.correctAnswer},(e=>t=>{let{correctAnswer:s=[],hitAreas:n}=t,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,dg);return a.createElement(e,Object.assign({},r,{hitAreas:n,statuses:mg(n,s),value:s}))})),hg=(0,Ut.compose)(cg.M)(ug.Wh),Eg=new ah.Registry({id:(0,rg.A)()});Eg.set("StatusBadge",hg);const gg=(0,Ut.compose)((0,ah.withRegistry)(Eg),ag.G,(0,Ut.composeU)(ig.e,og.Z))(rg.b),yg=new ah.Registry({id:(0,lg.ui)()});yg.set("HitArea",gg);const fg=pg((0,Ut.compose)((0,ah.withRegistry)(yg))(lg.xn)),Sg=e=>{let{statusMode:t,correctAnswer:s,options:n,onChange:r,value:i=[],mdState:o,readOnly:l}=e;const{hitAreaBadgeAlignment:c,hitAreas:u,imageFile:d}=n,m=ng()(o,["resources",d,"url"]),p=ng()(o,["resources",d,"name"]),h=ng()(o,["resources",d,"alt"]),E=Boolean(c);return a.createElement("div",{className:"marker-chooseimage"},a.createElement(fg,{statusMode:t,correctAnswer:s,backgroundSrc:m,badgeAlignment:c,flavor:E?"blueberry":"banana",hasBadge:E,hitAreas:u,onChange:e=>{let{target:{value:t}}=e;return r(t)},readOnly:l,value:i,backgroundAlt:h||p}))};Sg.displayName="MarkerChooseImage";const bg=Sg;var vg=s(81570),Ng=s(77582),Ig=s(11771),Tg=s(61079),kg=s(95063),Cg=s(4855),wg=s(28212),Ag=s(42882),Og=s(55381),Rg=s(50433),_g=s(93819);const Lg=["correctAnswer"],Mg=e=>e.map((()=>"correct")),Pg=(0,Ut.withBemMod)((0,_g.a)(),{statusMode:$p.U3.correctAnswer},(e=>t=>{let{correctAnswer:s=[]}=t,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,Lg);return a.createElement(e,Object.assign({},n,{statuses:Mg(s),value:s}))})),xg=new ah.Registry({id:(0,vg.aj)()}),Dg=(0,Ut.compose)(Ig.wx,Tg.Z,vg.dW)(kg.N),Fg=(0,Ut.compose)(Cg.Z,vg.Tc)(wg.B),zg=(0,Ut.compose)(Ag.Z)(KE.c),jg=(0,Ut.compose)(Og.Z)(Rg.y);xg.fill({Line:Dg,List:Fg,Option:zg,Pin:jg});const Ug=Pg((0,Ut.compose)((0,ah.withRegistry)(xg),Ng.Z)(vg.NL)),Hg=e=>{let{correctAnswer:t,statusMode:s,options:n,onChange:r,value:i=[],readOnly:o}=e;const{left:l,right:c}=n;return a.createElement("div",{className:"marker-macaroni"},a.createElement(Ug,{correctAnswer:t,flavor:"blueberry",lineShape:"z",value:i,lists:{left:l,right:c},readOnly:o,statusMode:s,onChange:e=>{let{target:{value:t}}=e;return r(t)},onClick:e=>(e=>{const t=e.target.closest(".MarkerMacaroni-ItemOption");t&&["mouseover","mousedown","mouseup"].forEach((e=>{const s=new MouseEvent(e,{bubbles:!0});t.dispatchEvent(s)}))})(e)}))};Hg.displayName="MarkerMacaroni";const Qg=Hg,Vg=r().with("marker-hint"),Gg=e=>{let{markerRef:t,mdState:s,children:n}=e;const[r,i,o,c,u]=((e,t,s)=>{const[n,r]=(0,a.useState)(!0),i=(0,a.useCallback)((()=>{r((e=>!e))}),[]),o=(0,a.useCallback)((()=>{r(!1)}),[]),l=(0,a.useCallback)((()=>{r(!0)}),[]);return[n,i,o,(0,a.useCallback)((e=>{r(!1)}),[t,s]),l]})(),d=P(vl.XG);return(0,a.useEffect)((()=>{u()}),[null==d?void 0:d.id,u]),a.createElement(Ts,{visible:r,theme:"normal",view:"default",target:"anchor",anchor:t,scope:t,mainOffset:15,direction:["right-start","top-start"],className:Vg(),zIndex:9e3},a.createElement("div",{className:Vg("container")},a.createElement(ge.$,{className:Vg("close"),icon:e=>a.createElement(ie,{className:e,size:"s",type:"close"}),theme:"clear",size:"l",view:"lyceum",onClick:o,"aria-label":l.Ru.text({keyset:"common",id:"close"})}),a.createElement(Na.n,{state:s},n)))};Gg.displayName="MarkerHint";const Bg=Gg,Wg=["type","onAnswerChange","userAnswer","statusMode","mdState","disabled","hintText"],Jg={inline:DE,choice:tg,chooseimage:bg,macaroni:Qg},Kg=[$p.U3.correctAnswer],Zg=e=>{const{type:t,onAnswerChange:s,userAnswer:n,statusMode:r,mdState:i,disabled:o,hintText:l}=e,c=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Wg),u=(0,a.useRef)(null),d=(e=>Jg[e]||zE)(t),m=o||r&&Kg.includes(r);return a.createElement("div",{className:"marker",ref:u},l&&a.createElement(Bg,{markerRef:u,mdState:i},l),a.createElement(d,Object.assign({value:n,onChange:s,statusMode:r,readOnly:m,mdState:i},c)))};Zg.displayName="Marker";const Yg=Zg,qg=["type"],$g=e=>{const{type:t}=e,s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,qg);return a.createElement("div",{className:r()("problem-block",{kind:"marker",type:t})},a.createElement(Yg,Object.assign({type:t},s)))};$g.displayName="ProblemBlockKindMarker";const Xg=$g,ey=e=>{let{disabled:t,statusMode:s,block:n,setAnswer:r,userAnswer:i,correctAnswer:o,mdState:l}=e;const c="marker"===n.kind?n.content.id:0,u=P((0,vl.Af)(c));return"text"===n.kind?a.createElement(rh,Object.assign({mdState:l},n.content)):a.createElement(Xg,Object.assign({disabled:t,correctAnswer:o[c],statusMode:s,mdState:l,hintText:u,userAnswer:i[c],onAnswerChange:e=>r(c,e)},n.content))};ey.displayName="ProblemBlock";const ty=ey;var sy=s(27841);const ny=["problem"],ry=(0,a.memo)((e=>{let{problem:t}=e,s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,ny);const n=(0,a.useMemo)((()=>(0,sy.E)(t)),[t]),r=(e,t,s)=>a.createElement("div",{role:"group","aria-labelledby":"desc_".concat(s),key:s},a.createElement("div",{id:"desc_".concat(s)},e),t),i=(0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(((e,r)=>a.createElement(ty,Object.assign({key:r+t,block:e,mdState:n},s))))}),[n,s]),o=(0,a.useMemo)((()=>{let e=[];const s=[],n=t.markup.layout;for(let t=0;t<n.length;t++)"marker"===n[t].kind&&"choice"===n[t].content.type&&e.length>0?(s.push(r(i(e),i([n[t]]),t)),e=[]):"text"===n[t].kind?e.push(n[t]):(s.push(...i(e,t-e.length)),e=[],s.push(i([n[t]],t)));return s.push(...i(e,n.length-e.length)),s}),[i,t.markup.layout]);return a.createElement("div",{className:"problem"},o)})),ay=ry,iy=[Ye.gt.Accepted,Ye.gt.PartialAccepted,Ye.gt.Wrong,Ye.gt.NotSolved,Ye.gt.Rework],oy=e=>{let{status:t}=e;const s=iy.includes(t)?"#fff":"#000";return a.createElement("svg",{fill:s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},a.createElement("path",{d:"M20.8 6.15a1.21 1.21 0 0 1 .85.36 1.19 1.19 0 0 1 0 1.69L12 17.85 2.35 8.21a1.2 1.2 0 0 1 1.7-1.7l8 8 7.94-8a1.17 1.17 0 0 1 .81-.36z"}))};oy.displayName="ProblemBarArrow";const ly=oy,cy=[Ye.gt.Wrong,Ye.gt.Accepted],uy=r().with("problem-bar"),dy=e=>{var t,s;let{toggleCorrectAnswer:n,shouldShowCorrectAnswer:r,attemptsCount:o,attemptsMax:c,status:u,counter:d,scoreMax:m,score:h,innerRef:E,hasCorrectAnswers:g=!0}=e;const y=c?c-o:0,f=g&&(u===Ye.gt.Wrong||u===Ye.gt.NotSolved||u===Ye.gt.PartialAccepted&&o===c),S=!(cy.includes(u)||!c),{courseId:b,lessonId:v,groupId:N,problemLinkId:I,taskId:T}=(0,i.g)(),k=P((e=>(0,vl.mO)(e,{problemLinkId:Number(I)}))),C=P(vl.Kx)(Number(T)),{previousProblem:w,nextProblem:A}=k,{previousTask:O,nextTask:R}=null!=C?C:{},_=null!=(t=w&&p.at.lessonProblem.build({lessonId:v,courseId:b,groupId:N,problemLinkId:w.id}))?t:O&&p.at.taskDetails.build({lessonId:v,courseId:b,groupId:N,taskId:O.id.toString()}),M=null!=(s=A&&p.at.lessonProblem.build({lessonId:v,courseId:b,groupId:N,problemLinkId:A.id}))?s:R&&p.at.taskDetails.build({lessonId:v,courseId:b,groupId:N,taskId:R.id.toString()}),x=l.Ru.text({id:"statusLabel.".concat(u),keyset:"problems",params:{score:null===h?"-":h,scoreMax:m}});return a.createElement("div",{className:uy({status:u}),ref:E},_&&a.createElement(L.N_,{className:uy("arrow",{direction:"left"}),to:_},a.createElement(ly,{status:u})),a.createElement("div",{className:uy("content")},a.createElement("div",{className:uy("info")},d&&a.createElement($t.D,{className:uy("counter",{status:u}),level:4},l.Ru.text({id:"problemsCounter",keyset:"problems",params:{currentProblemNumber:d.currentProblemNumber,problemsTotal:d.problemsTotal}}))),f&&a.createElement("div",{className:uy("switch")},a.createElement(ge.$,{className:uy("switch-button",{active:!r,status:u}),onClick:()=>n(!1),view:"lyceum",size:"m"},l.Ru.text({id:"answerSwitch.userSolution",keyset:"problems"})),a.createElement(ge.$,{className:uy("switch-button",{active:r,status:u}),onClick:()=>n(!0),view:"lyceum",size:"m"},l.Ru.text({id:"answerSwitch.correctAnswer",keyset:"problems"}))),a.createElement("div",{className:uy("solution-status")},a.createElement($t.D,{"aria-hidden":!0,className:uy("verdict",{status:u}),level:4},x),a.createElement(Cn,{dependencies:[o,u],text:x}),S&&a.createElement("div",{"aria-live":"polite",className:uy("attempts",{status:u})},l.Ru.text({id:"attemptsCounter",keyset:"problems",params:{attemptsLeft:y,attemptsTotal:c,count:y}})))),M&&a.createElement(L.N_,{className:uy("arrow",{direction:"right"}),to:M},a.createElement(ly,{status:u})))};dy.displayName="ProblemBarViewStudent";const my=dy,py=r().with("problem-bar"),hy=e=>{let{toggleCorrectAnswer:t,shouldShowCorrectAnswer:s,user:n}=e;return a.createElement("div",{className:py()},a.createElement("div",{className:py("info")},n&&a.createElement(am,{className:py("student"),avatar:n.avatar,displayName:n.displayName,userId:n.id})),a.createElement("div",{className:py("teacher-switch")},a.createElement(ge.$,{className:py("switch-button",{active:!s}),onClick:()=>t(!1),view:"lyceum",size:"m"},l.Ru.text({id:"answerSwitch.studentSolution",keyset:"problems"})),a.createElement(ge.$,{className:py("switch-button",{active:s}),onClick:()=>t(!0),view:"lyceum",size:"m"},l.Ru.text({id:"answerSwitch.correctAnswer",keyset:"problems"}))))};hy.displayName="ProblemBarViewTeacher";const Ey=hy,gy=["view"],yy=e=>{let{view:t}=e,s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,gy);return"student"===t?a.createElement(my,s):a.createElement(Ey,s)};yy.displayName="ProblemBar";const fy=yy;var Sy=s(15042);const by=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return t=>{"Enter"!==t.key&&" "!==t.key||e(...s)}},vy=e=>{let{mix:t,show:s}=e;const n=(0,a.useContext)(lE),{setRef:r}=n[aE.PRIMARY],i=(0,a.useCallback)((()=>{document&&document.activeElement&&document.activeElement.blur()}),[]),o=(0,a.useCallback)((e=>{e.preventDefault()}),[]);return Sy.Fr?a.createElement("div",{className:"keyboard__wrapper"},a.createElement(ve.CSSTransition,{classNames:"keyboard__animation",in:s,mountOnEnter:!0,timeout:300,unmountOnExit:!0},a.createElement("div",{className:(0,$.j)("keyboard",t),onMouseDown:o,role:"button",tabIndex:0,onKeyDown:e=>by(o,e)},a.createElement("div",{className:"keyboard__portal",ref:r}),a.createElement("div",{className:"keyboard__close-button",role:"button",tabIndex:0,onKeyDown:by(i),onClick:i})))):null};vy.displayName="KeyboardTypePrimary";const Ny=vy;var Iy=s(40961);class Ty extends a.Component{constructor(e){super(e),this.keyboardUser={},this.setRef=(e,t)=>{const{refs:s}=this.state;if(s[t]!==e&&e){const n=Object.assign({},s,{[t]:e});this.setState({refs:n})}},this.show=e=>{const t=Symbol("unique keyboard user");return this.keyboardUser[e]=t,this.toggleKeyboardVisibility(e,!0),{hide:()=>setTimeout((()=>{this.keyboardUser[e]===t&&this.toggleKeyboardVisibility(e,!1)}),10),render:s=>{if(this.keyboardUser[e]!==t)return null;const{refs:n}=this.state;return n[e]?Iy.createPortal(s,n[e]):null}}},this.toggleKeyboardVisibility=(e,t)=>{this.setState((s=>Object.assign({},s,{[e]:Object.assign({},s[e],{shouldShowKeyboard:t})})))},this.state={[aE.PRIMARY]:{shouldShowKeyboard:!1,shouldDisableNativeMobileKeyboard:!0,keyboardAllowed:Sy.Fr,setRef:e=>this.setRef(e,aE.PRIMARY)},show:this.show,refs:{}}}render(){return a.createElement(lE.Provider,{value:this.state},this.props.children)}}Ty.displayName="KeyboardContextProvider";const ky=Ty,Cy=e=>e===Ye.gt.Accepted||e===Ye.gt.Wrong?"actionButton.nextProblem":e===Ye.gt.Rework?"actionButton.sendAgain":"actionButton.sendSolution",wy=e=>{var t,s,n;let{answer:r,mode:o="student",problem:c,solution:u,attemptsMax:d,user:m,problemLinkId:h,scoreMax:g,hasCorrectAnswers:y,problemType:f,className:S,shouldShowBar:b=!0}=e;const v=M(),N=null!=(t=null==u?void 0:u.status.type)?t:Ye.gt.New,{courseId:I,lessonId:T,groupId:k}=(0,i.g)(),C=(0,a.useMemo)((()=>sh(c)),[c]),w=P((e=>(0,vl.GY)(e))),A=P((e=>(0,vl.QO)(e,{problemLinkId:h}))),O=P((e=>(0,vl.xP)(e,{problemLinkId:h}))),R=null==(s=P(vl.Kx)(null!=h?h:0))?void 0:s.nextTask,_=P(vl.VX),[L,x]=(0,a.useState)(!1),[D,F]=(0,a.useState)(r),z=(0,i.W6)(),j=P((0,vl.FH)(null==u?void 0:u.id)),U=(0,a.useRef)(null),H=(0,a.useCallback)(((e,t)=>{const s=Array.isArray(t)?t:Object.entries(t).reduce(((e,t)=>{let[s,n]=t;return""===n?e:Object.assign({},e,{[s]:n})}),{}),n=Object.assign({},D,{[e]:s});qp()(s)&&delete n[e],F(n)}),[D]),Q=u&&!u.isClosed&&u.status.type!==Ye.gt.Accepted,V="teacher"===o||!Q;let G,B;return o===E.Student&&(G=w(D,r),B=!O&&!R),(0,a.useEffect)((()=>{F(r)}),[null==u?void 0:u.id]),a.createElement(ky,null,a.createElement("div",{className:(0,$.j)("problem-run",S)},a.createElement(lE.Consumer,null,(e=>{const{shouldShowKeyboard:t}=e[aE.PRIMARY];return a.createElement(Ny,{mix:"problem-bar__keyboard",show:t})})),b&&a.createElement(fy,{counter:A,shouldShowCorrectAnswer:L,toggleCorrectAnswer:x,status:N,attemptsCount:j,attemptsMax:d,view:o,user:m,scoreMax:g,score:u?u.score:null,innerRef:U,hasCorrectAnswers:y}),a.createElement("div",{className:"problem-run__problem"},a.createElement(ay,{disabled:V,correctAnswer:C,statusMode:L?$p.U3.correctAnswer:void 0,problem:c,userAnswer:D,setAnswer:H})),"student"===o&&a.createElement("div",{className:"problem-run__bottom-block"},Q?a.createElement(ge.$,{onClick:()=>{u&&u.id&&v((0,cn.ib)(u.id,D,I,T,k,(()=>{U.current&&U.current.scrollIntoView({behavior:"smooth"})}),f))},disabled:G||_||u.status.type===Ye.gt.Review&&"task"in u&&(null==(n=u.task.lesson)?void 0:n.type)===lc.nv.Normal,view:"lyceum",theme:"action",size:"l"},l.Ru.text({id:Cy(N),keyset:"problems"})):a.createElement(ge.$,{onClick:()=>{if(O){const e=p.at.lessonProblem.build({lessonId:T,courseId:I,groupId:k,problemLinkId:Number(O.id)});z.push(e)}else if(R){const e=p.at.taskDetails.build({lessonId:T,courseId:I,groupId:k,taskId:R.id.toString()});z.push(e)}},disabled:B,view:"lyceum",theme:"action",size:"l"},l.Ru.text({id:"actionButton.nextProblem",keyset:"problems"})))))};wy.displayName="ProblemRun";const Ay=wy;var Oy;const Ry=r().with("solution-preview");let _y=(Oy=class extends a.Component{render(){const{fetchError:e,fetchStatus:t}=this.props;return a.createElement(nr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderError:this.renderError,renderSuccess:this.renderSolution})}renderSpin(){return a.createElement(he.t,{view:"default",progress:!0,size:"m",position:"center"})}renderError(e){return a.createElement("div",{className:Ry("error")},e)}renderSolution(){var e;const{solution:t,selectedSubmission:s,onSubmissionSelect:n,problem:r}=this.props;if(!t)return null;null!=t&&t.latestSubmission&&!s&&n(t.latestSubmission);const{student:i,task:o}=t,c=a.createElement("div",{className:Ry("task-title")},o.title,o.hasManualCheck&&o.taskType===qe.wP.Other&&a.createElement(Ze,{cls:Ry("task-check-info"),ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),o.hasP2p&&a.createElement(Ze,{cls:Ry("task-check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"}))),u=t.latestSubmission&&s?t.task.taskType===qe.wP.Other?a.createElement(Zp,{solution:t,submission:s,onSubmissionSelect:n}):r&&a.createElement(Ay,{answer:JSON.parse((null==(e=t.latestSubmission)?void 0:e.file.sourceCode)||"{}"),mode:"teacher",attemptsMax:o.maxAttempts,problem:r,solution:t,key:o.id,problemType:$p.yo.Task,className:"problem-solution"}):a.createElement(sm,{align:"center"},l.Ru.text({id:"no-submission",keyset:"tasks"}));return a.createElement("div",{className:Ry()},a.createElement("header",{className:Ry("header")},a.createElement(am,{size:"l",avatar:i.avatar,displayName:i.displayName,userId:i.id,status:i.status,addonAfter:c}),a.createElement("div",{className:Ry("solution-id")},l.Ru.text({id:"solution-ID",keyset:"solutions",params:{id:t.id}}))),u)}},function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}(Oy.prototype,"renderSolution",[R.Q2],Object.getOwnPropertyDescriptor(Oy.prototype,"renderSolution"),Oy.prototype),Oy);_y.displayName="SolutionPreview";const Ly=_y;var My=s(56407),Py=s(77506),xy=s(36242),Dy=s(87979);class Fy extends a.Component{componentDidMount(){const{solutionId:e,groupId:t,courseId:s}=this.props;this.props.fetchSolutionDetails({solutionId:e,groupId:t,courseId:s})}componentWillUnmount(){this.props.clearSolutionDetails(this.props.solutionId),this.props.clearTaskDetails()}componentDidUpdate(){const{solution:e,fetchProblemDetails:t,groupId:s,problem:n}=this.props;e&&!n&&e.task.taskType===qe.wP.Problem&&t({taskId:e.task.id,groupId:s})}render(){const{solution:e,fetchSolutionError:t,fetchSolutionStatus:s,selectedSubmission:n,fetchProblemError:r,problem:i}=this.props;return a.createElement(Ly,{solution:e,problem:i,fetchError:null!=t?t:r,fetchStatus:s,selectedSubmission:n,onSubmissionSelect:this.props.selectSubmission})}}Fy.displayName="SolutionPreviewContainer";const zy=(0,o.Ng)((function(e,t){var s;const{solutionId:n}=t;return{solution:(0,Dy.GZ)(e,n),problem:null==(s=(0,vl.MX)(e))?void 0:s.problem,selectedSubmission:(0,Py.a)(e),fetchSolutionError:(0,Dy.uO)(e),fetchSolutionStatus:(0,Dy.AJ)(e),fetchProblemError:(0,vl.sA)(e)}}),(function(e){return(0,_.zH)({clearSolutionDetails:xy.HZ,fetchSolutionDetails:xy.IS,fetchProblemDetails:cn.me,clearTaskDetails:cn.BN,selectSubmission:My.F},e)}))(Fy);function jy(e){let{target:t,legacy:s=!1}=e;const n=s?ks():(0,ys.g)();return null!==t.closest(".".concat(n))}var Uy=s(28848),Hy=s.n(Uy);s(52342),s(50271),s(72415),s(86378),s(96976),s(5651);const Qy=r().with("external-link-icon");class Vy extends a.Component{render(){const{cls:e}=this.props;return a.createElement(u,Object.assign({className:(0,$.j)(e,Qy())},this.props),a.createElement(ie,{className:Qy("icon"),type:"new-window",size:"l"}))}}Vy.displayName="ExternalLinkIcon";const Gy=Vy,By={},Wy=()=>{},Jy=r().with("task-status-bar"),Ky=e=>{let{size:t="medium",statistics:s}=e;const n=Object.values(Ye.gt);return a.createElement("div",{className:Jy({size:t})},n.map((e=>{const t={width:"".concat((n=s[e],r=s.total,n?n/r*100:0),"%")};var n,r;return a.createElement("span",{key:e,className:Jy("fill",{status:e}),style:t})})))};Ky.displayName="TaskStatusBar";const Zy=e=>Object.keys(Ye.s6).filter((t=>!e.includes(t))).map((e=>Ye.s6[e])),Yy=[Ye.gt.New],qy=[Ye.gt.New,Ye.gt.Draft],$y=(Zy(qy),Zy(Yy),e=>!!e&&Object.keys(e).some((t=>![...qy,"total"].includes(t)&&e[t]>0))),Xy=(0,$.cn)("y43a24--task-info"),ef=Xy("tag"),tf=Xy("tag-name"),sf=Xy("max-score"),nf=Xy("score"),rf=Xy("deadline"),af=Xy("deadline-time"),of=Xy("status-bar"),lf=Xy("max-size"),cf=Xy("attempts"),uf=e=>{let{className:t,taskTag:s,taskDeadline:n,taskMaxScore:r,taskStatistics:i,taskMaxAnswerLength:o,hideScoreInformation:u,currentAttempt:d,maxAttempts:m}=e;const p=s?s.type:qe.cl.Another,h=l.Ru.text({id:p,keyset:"task-tags"});return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,$.j)(Xy(),t)},a.createElement("div",{className:ef},a.createElement(vc,{type:p,ariaLabel:h}),a.createElement("div",{className:tf},h)),!u&&a.createElement("div",{className:sf},a.createElement("span",{"aria-hidden":!0},l.Ru.text({id:"max",keyset:"tasks"})),a.createElement(Cn,{text:l.Ru.text({id:"max-full",keyset:"tasks"})}),a.createElement("span",{"aria-hidden":!0},c),a.createElement("span",{"aria-hidden":!0,className:nf},l.Ru.text({id:"max-score",keyset:"tasks",params:{maxScore:r}})),a.createElement(Cn,{text:l.Ru.text({id:"max-score-full",keyset:"tasks",params:{maxScore:r,count:r}})})),m&&m>0&&a.createElement("div",{className:cf},l.Ru.text({id:"attempt",keyset:"solutions"}),c,a.createElement("span",{className:nf},d?Math.min(d+1,m):1,"/",m)),n&&a.createElement("div",{className:rf},l.Ru.element({id:"deadline",keyset:"tasks",params:{date:a.createElement("span",{className:af},Ne.Ay.fromISO(n).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")))}})),i&&$y(i)&&a.createElement("div",{className:of},a.createElement(Ky,{statistics:i}))),o&&a.createElement("div",{className:lf},l.Ru.text({id:"max-size",keyset:"tasks",params:{maxAnswerLength:o}})))},df=(0,$.cn)("y6c2ac--task-description"),mf=e=>{var t,s;let{taskTitle:n,className:r,content:i,taskUrl:o,hasManualCheck:c,hasP2p:u,taskType:d=null,maxScore:m=null,tag:p=null,problemContent:h=null,showCorrectAnswer:E=!1}=e;const g=null==(t=window)||null==(s=t.MathJax)?void 0:s.Hub,y=d===qe.wP.Problem,f=(0,a.useMemo)((()=>E&&y&&h?sh(h):{}),[y,h,E]);let S;return(0,a.useEffect)((()=>{Hy().highlightAll(),g&&g.Typeset()}),[i,g]),y?S=h&&a.createElement("div",{className:df("problem-container")},a.createElement(ay,{disabled:!1,correctAnswer:f,userAnswer:By,statusMode:$p.U3.correctAnswer,problem:h,setAnswer:Wy})):i&&(S=a.createElement("article",{className:df("content"),dangerouslySetInnerHTML:{__html:i}})),S||(S=l.Ru.text({id:"no-description",keyset:"tasks"})),a.createElement("section",{className:(0,$.j)(df(),r)},n&&a.createElement("header",{className:df(y?"header-problem":"header")},a.createElement($t.D,{smaller:!0,level:1,className:df("heading")},n,c&&a.createElement(Ze,{cls:df("check-info"),ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),u&&a.createElement(Ze,{cls:df("check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"}))),o&&a.createElement(Gy,{href:o})),y&&a.createElement("div",{className:df("additional-info")},a.createElement(uf,{hideScoreInformation:Jo()(m),taskMaxScore:m||0,taskTag:p,taskDeadline:null})),a.createElement("div",{className:df("content-wrapper")},S))};mf.displayName="TaskDescription";class pf extends a.Component{componentDidMount(){const{taskId:e,groupId:t}=this.props;this.props.fetchDetails({taskId:Number(e),groupId:Number(t)})}componentWillUnmount(){this.props.clearDetails()}render(){const{description:e,taskTitle:t,taskUrl:s,hasManualCheck:n,hasP2p:r,fetchStatus:i,fetchError:o,problem:l,taskType:c,tag:u,maxScore:d,showCorrectAnswer:m}=this.props;return a.createElement(nr,{fetchStatus:i,fetchError:o},a.createElement(mf,{content:e,problemContent:l,taskTitle:t,taskUrl:s,hasManualCheck:n,hasP2p:r,taskType:c,tag:u,maxScore:d,showCorrectAnswer:m}))}}pf.displayName="TaskDescriptionContainer";const hf=er((0,o.Ng)((function(e){return{problem:(0,vl.L$)(e),taskType:(0,vl.Kz)(e),tag:(0,vl.mT)(e),maxScore:(0,vl.wy)(e),description:(0,vl.gV)(e),fetchError:(0,vl.sA)(e),fetchStatus:(0,vl.uf)(e)}}),(function(e,t){const{role:s}=t;let n;switch(s){case E.Student:n=cn.$G;break;case E.Teacher:case E.Methodist:n=cn.me;break;default:throw new m("Role not supported",{role:s})}return(0,_.zH)({clearDetails:cn.BN,fetchDetails:n},e)}))(pf)),Ef=e=>{let{task:t,cls:s}=e;const{courseId:n,groupId:r}=(0,i.g)(),o=(0,a.useMemo)((()=>t.lesson?((e,t,s,n)=>p.ZZ.taskSolutions.build({courseId:e,groupId:t,lessonId:s.toString(),taskId:n.toString()}))(n,r,t.lesson.id,t.id):""),[t.lesson,t.id,n,r]);return t?a.createElement("div",{className:s},a.createElement(hf,{taskId:t.id.toString(),groupId:r,taskTitle:t.title,hasManualCheck:t.hasManualCheck&&t.taskType===qe.wP.Other,hasP2p:t.hasP2p,taskUrl:o})):null};Ef.displayName="TableTaskDescription";const gf=Ef,yf=r().with("course-table");let ff=function(e){return e.Deadline="deadline",e.Task="task__title",e}({});const Sf=e=>{let{tasks:t,groupId:s,courseId:n,appliedSortings:r,onSortingChange:i,onChangeParams:o}=e;const c=M(),u=P(ld),d=P(cd),[m,p]=(0,a.useState)(null),h=(0,a.useCallback)(((e,t)=>()=>{o({[e]:t.toString()})}),[o]),E=(0,a.useCallback)((e=>{e.target instanceof Element&&jy({target:e.target,legacy:!0})||c(dd())}),[c]),g=(0,a.useCallback)((()=>{c(dd()),null!==m&&document.querySelectorAll(".table-cell__details-tooltip-wrapper")[m].focus()}),[c,m]),y=((e,t)=>{let s=-1;return n=>r=>{switch(n){case yu.V.Task:return s++,a.createElement(jd,{task:r,setTriggerIndex:t,index:s});case yu.V.Tag:return a.createElement(Qd,{tag:r.tag,onSetFilter:e});case yu.V.Lesson:return a.createElement(Wd,{lesson:r.lesson,onSetFilter:e});case yu.V.Status:return a.createElement(Zd,{task:r,status:r.solution&&r.solution.status,score:r.solution&&r.solution.score});case yu.V.Deadline:return a.createElement($d,{deadline:r.deadline});case yu.V.UpdatedAt:return a.createElement(em,{updateTime:r.solution&&r.solution.updateTimeForUser});default:return null}}})(h,p),f={[yu.V.Task]:y(yu.V.Task),[yu.V.Tag]:y(yu.V.Tag),[yu.V.Lesson]:y(yu.V.Lesson),[yu.V.Status]:y(yu.V.Status),[yu.V.Deadline]:y(yu.V.Deadline),[yu.V.UpdatedAt]:y(yu.V.UpdatedAt)},S={[yu.V.Deadline]:{isActive:(b=ff.Deadline,()=>r.some((e=>e.field===b))),getOrder:(e=>()=>{const t=r.find((t=>t.field===e));return t?t.order:Kc.j.ASCENDING})(ff.Deadline),onChange:(e=>t=>{i({order:t,field:e})})(ff.Deadline)}};var b;return a.createElement("div",{className:yf()},a.createElement(Id,{items:t,columns:bu,sortings:S,columnRenderers:f}),a.createElement(Ln,{sidebarType:l.Ru.text({id:"column-task",keyset:"tables"}),visible:Boolean(d)||Boolean(u),onClose:g,onOutsideClick:E},d&&a.createElement(zy,{solutionId:d.id,groupId:Number(s),courseId:n}),u&&a.createElement(gf,{task:u,cls:yf("task-description-wrapper")})))};Sf.displayName="TasksTable";const bf=Sf,vf=["page","order","includeExpired","includeAccepted"],Nf=["page","order","includeExpired","includeAccepted"];function If(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}const Tf=r().with("course-tasks"),kf=[Jc.Task,Jc.Tag,Jc.Lesson,Jc.Status],Cf=e=>{let{course:t,group:s,pageSize:n,totalPages:r,queryParams:i,changeParams:o,tasks:c,tasksCount:u,fetchError:d,fetchStatus:m}=e;const{id:h}=t,{id:E}=s,{page:g,order:y=ff.Deadline,includeExpired:f,includeAccepted:S}=i,b=If(i,vf),v=l.Ru.text({id:"course-tasks-student",keyset:"page-titles",params:{course:t.title}}),N=M(),I=(0,a.useCallback)((()=>{o({includeExpired:f?void 0:"true"})}),[f,o]),T=(0,a.useCallback)((()=>{o({includeAccepted:S?void 0:"true"})}),[S,o]),k=a.useCallback((e=>Object.keys(e).reduce(((e,t)=>{const s=b[t];return kf.includes(t)&&s&&e.push({filterName:t,values:Array.isArray(s)?s.map((e=>e.toString())):[s.toString()]}),e}),[])),[b]),C=(0,a.useMemo)((()=>k(i)),[k,i]);a.useEffect((()=>{const{page:e,order:t=ff.Deadline,includeExpired:s,includeAccepted:r}=i,a=If(i,Nf);return N((0,cn.aY)(Object.assign({},a,{courseId:h,groupId:E,limit:n,excludeExpired:!s,excludeAccepted:!r,order:t,offset:e&&n?n*(Number(e)-1):0}))),()=>{N((0,cn.zd)())}}),[N,i,h,E,n]);const w=(0,a.useCallback)((()=>qc(y)),[y]),A=(0,a.useCallback)((e=>{const t=$c(w(),e);o({order:t})}),[o,w]),O=(0,a.useCallback)((e=>{o(e)}),[o]),R=e=>p.at.courseTasks.build({courseId:h.toString(),groupId:E.toString()},Object.assign({},i,{page:e})),_=(0,a.useCallback)((e=>a.createElement(sm,{className:Tf("message",{error:!0})},e)),[]);return a.createElement("article",{className:Tf()},a.createElement(tr.m,null,a.createElement("title",null,v),a.createElement("meta",{name:"title",content:v})),a.createElement(sr.P,{type:"wide"},a.createElement(sr.P.Main,null,a.createElement($t.D,{level:1,controls:a.createElement(a.Fragment,null,a.createElement(uu,{size:"m",className:Tf("checkbox"),checked:Boolean(S),onChange:T},l.Ru.text({id:"show-accepted",keyset:"students"})),a.createElement(uu,{size:"m",className:Tf("checkbox"),checked:Boolean(f),onChange:I},l.Ru.text({id:"show-expired",keyset:"students"})))},l.Ru.text({id:"tasks",keyset:"tasks"})),a.createElement("div",{className:Tf("filters-wrapper")},a.createElement(od,{courseId:t.id,groupId:s.id,appliedFilters:C,onFilterChange:O})),a.createElement(Au,null),a.createElement(nr,{fetchError:d,fetchStatus:m,renderSuccess:()=>{if(!u){const e=C.length>0?l.Ru.text({id:"no-tasks-found",keyset:"tasks"}):l.Ru.text({id:"no-tasks",keyset:"tasks"});return a.createElement(sm,{className:Tf("message")},e)}return a.createElement(a.Fragment,null,a.createElement(bf,{courseId:h,groupId:E,tasks:c,appliedSortings:w(),onSortingChange:A,onChangeParams:o}),a.createElement(_u,{currentPage:g?Number(g):1,totalPages:r,buildPageLink:R}))},renderError:_}))))};Cf.displayName="CourseTasksView";const wf=Cf,Af=()=>{const e=(0,i.W6)(),{courseId:t,groupId:s}=(0,i.g)(),{search:n,pathname:r}=(0,i.zy)(),o=(()=>{const e=M(),t=P(gu);return a.useEffect((()=>(e(mu(yu.E.Tasks)),()=>{e(Eu())})),[e]),t?{isReady:!0,settings:t}:{isReady:!1,settings:null}})(),l=(0,a.useMemo)((()=>Qs.parse(n)),[n]),c=P(vl.X6),u=c&&o.isReady?Math.ceil(c/o.settings.pageSize):0;l.page&&!Wc(l.page,u)&&e.push({pathname:r,search:Qs.stringify(Object.assign({},l,{page:1}))});const d=P(vl.El),m=P(vl.Kr),p=P(vl.YQ),h=P((e=>V(e,Number(t),Number(s)))),E=P((e=>Qc(e,s))),g=(0,a.useCallback)((t=>{const s=Object.assign({},l,t,{page:1});e.push({pathname:r,search:Qs.stringify(s,{encode:!1})})}),[e,r,l]);return o.isReady&&E&&h?a.createElement(wf,{tasks:d,tasksCount:c,pageSize:o.settings.pageSize,totalPages:u,course:h,group:E,fetchError:m,fetchStatus:p,queryParams:l,changeParams:g}):a.createElement(he.t,{view:"default",progress:!0,position:"center",size:"l"})};Af.displayName="CourseTasks";const Of=Af;class Rf extends a.Component{componentDidMount(){const{courseId:e,groupId:t}=this.props;this.props.fetchFilters({courseId:e,groupId:t})}componentWillUnmount(){this.props.clearFilters&&this.props.clearFilters()}render(){const{appliedFilters:e,onFilterChange:t}=this.props;return a.createElement(ad,{appliedFilters:e,onFilterChange:t})}}Rf.displayName="FiltersContainer";const _f=(0,o.Ng)(null,(function(e){return(0,_.zH)({clearFilters:Lu.hi,fetchFilters:Lu.Nf},e)}))(Rf),Lf={root:"y4560d--root",headingContainer:"y4560d--heading-container",filters:"y4560d--filters",spinContainer:"y4560d--spin-container",table:"y4560d--table",clickable:"y4560d--clickable",cellText:"y4560d--cell-text",status1:"y4560d--status-1",status2:"y4560d--status-2",status3:"y4560d--status-3",status4:"y4560d--status-4",score:"y4560d--score",maxScore:"y4560d--max-score"},Mf=(e,t)=>Math.ceil(e/t),Pf=(e,t)=>{let{pathname:s,search:n}=e;const r=Qs.parse(n);return"".concat(s,"?").concat(Qs.stringify(Object.assign({},r,{page:t})))},xf=(e,t)=>({page:t,pageSize:20,totalPages:Mf(e,20),query:{limit:20,offset:20*(t-1)}}),Df=e=>{let{key:t,id:s,displayValue:n}=e;return t===Jc.ReviewStatus?l.Ru.text({id:"review-status-".concat(s),keyset:"tasks"}):n},Ff="show_mine_only",zf=()=>{var e;const t=M(),s=(0,i.zy)(),n=(0,i.W6)(),r=null!=(e=P(T.wz))?e:{},{courseId:o,groupId:c}=(0,i.g)(),u=(0,a.useMemo)((()=>new URLSearchParams(s.search)),[s.search]),m=W(Number(o),Number(c)),p=m.role===E.Student?"/student":"/teacher",[h,g]=(0,a.useState)(null),[y,f]=(0,a.useState)(!1),[S,b]=(0,a.useState)(!0),[v,N]=(0,a.useState)([]),[I,k]=(0,a.useState)("true"===u.get(Ff)),[C,w]=(0,a.useState)(null),A=(e=>{let{dataLength:t}=e;const s=(0,i.zy)(),n=(0,i.W6)();return Object.assign({},((e,t,s)=>{const n=(e=>{let{search:t}=e;const{page:s}=Qs.parse(t);return"string"!=typeof s?null:Bc(s)?Number.parseInt(s):null})(e);if(null===n||n<1)return t.push(Pf(e,1)),xf(0,1);if(null===s)return xf(0,n);const r=Mf(s,20);return 0===r?xf(0,n):n>r?(t.push(Pf(e,1)),xf(s,n)):xf(s,n)})(s,n,t),{buildLink:e=>Pf(s,e)})})({dataLength:C}),O=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=I?"true":"false";u.get(Ff)!==e&&(u.set(Ff,I?"true":"false"),n.push("".concat(s.pathname,"?").concat(u.toString())))}),[I,u,n,s.pathname]);const R=(0,a.useMemo)((()=>{const e=[];return u.forEach(((t,s)=>{if(!Object.values(Jc).includes(s))return;const n=e.find((e=>e.filterName===s));n?n.values.push(t):e.push({filterName:s,values:[t]})})),e}),[u]),_=(0,a.useMemo)((()=>{const e={},t=u.getAll("ordering"),s=t[t.length-1];if(s){const t=/^-/.test(s)?Kc.j.DESCENDING:Kc.j.ASCENDING;e[s.replace(/^-/,"")]=t}return e}),[u]),L=(0,a.useCallback)((e=>{const{isReload:t}=e||{},s=new URL("https://".concat(window.location.hostname,"/api/proxy").concat(p,"/solutions/reviews/"));s.searchParams.set("course_id",o),s.searchParams.set("group_id",c),s.searchParams.set("limit",A.query.limit.toString()),s.searchParams.set("offset",t?"0":A.query.offset.toString()),u.forEach(((e,t)=>{s.searchParams.append(t,e)})),s.searchParams.delete("page"),s.searchParams.has("ordering")||s.searchParams.append("ordering",yu.V.ReviewStatus),(O.current!==s.toString()||t)&&(O.current=s.toString(),b(!0),f(!1),g(null),(0,zt.Ay)(s.toString()).then((e=>{let{results:t,count:s}=e;N(t),w(s)})).catch((e=>{e instanceof d.LG?g({status:e.statusCode,message:e.code}):f(!0)})).finally((()=>{b(!1),t&&n.push(A.buildLink(1))})))}),[p,o,c,A.query.limit,A.query.offset,u]);(0,a.useEffect)((()=>{L()}),[L]);const x=(0,a.useCallback)((e=>{Object.entries(e).forEach((e=>{let[t,s]=e;u.delete(t),null==s||s.forEach((e=>{u.append(t,e)}))})),n.push("".concat(s.pathname,"?").concat(u.toString()))}),[u,n,s]),D=(0,a.useCallback)((async()=>{const e="/api/proxy".concat(p,"/solutions/reviews/filters/?course_id=").concat(o,"&group_id=").concat(c);try{const s=await(0,zt.Ay)(e),n={};Object.keys(s).forEach((e=>{n[e]=s[e].map((t=>{let[s,n]=t;return{id:s,displayValue:Df({id:s,key:e,displayValue:n})}}))})),t((0,Lu._F)(n))}catch(e){console.error(e)}}),[p,o,t,c]),F=(0,a.useCallback)((e=>t=>{u.get("ordering")==="-".concat(e)?u.delete("ordering"):(u.delete("ordering"),u.append("ordering","".concat(t===Kc.j.DESCENDING?"-":"").concat(e))),n.push("".concat(s.pathname,"?").concat(u.toString()))}),[n,s,u]),z=(0,a.useCallback)((async()=>{b(!0);const e="https://".concat(window.location.hostname,"/api/proxy/student/solutions/reviews/more/?courseId=").concat(o,"&groupId=").concat(c);try{await(0,zt.Ay)(e,{method:"POST"}),L({isReload:!0})}catch(e){t((0,fn.z)({i18n:(0,l.T$)(e),type:Sn.V.ERROR}))}finally{b(!1)}}),[o,t,L,c]);return(0,a.useMemo)((()=>({groupId:c,courseId:o,networkError:y,apiError:h,isLoading:S,isStudent:m.role===E.Student,isSuperuser:r.isSuperuser,isShowMineOnlyEnabled:I,items:v,appliedSorting:_,filtersProps:{appliedFilters:R,onFilterChange:x,fetchFilters:D},getChangeSortingCallback:F,requestNewReviewsCallback:z,onToggleShowMine:()=>k((e=>!e)),texts:{pageTitle:m.role===E.Student?l.Ru.text({id:"course-p2p-tasks-student",keyset:"page-titles"}):l.Ru.text({id:"course-reviews-teacher",keyset:"page-titles"}),heading:m.role===E.Student?l.Ru.text({id:"p2p-tasks",keyset:"tasks"}):l.Ru.text({id:"course-reviews-teacher",keyset:"page-titles"})},pagination:A})),[c,o,I,y,h,S,v,_,R,x,D,F,z,m.role,r.isSuperuser,A])},jf=e=>{var t,s;let{p2p:n,groupId:r}=e;const o=(null==(t=n.task)?void 0:t.id)||n.taskId,c=(null==(s=n.task)?void 0:s.title)||n.taskTitle,u=(0,i.W6)(),d=(0,a.useCallback)((()=>{if(!n.solutionId)return;const e="/courses/".concat(n.courseId,"/groups/").concat(r,"/lessons/").concat(n.lessonId,"/tasks/").concat(o,"/reviews/").concat(n.id);u.push(e)}),[u,n.courseId,r,n.lessonId,n.id,n.solutionId,o]);return a.createElement("tr",{onClick:d,className:re({[Lf.clickable]:Boolean(n.solutionId)})},a.createElement("td",null,n.solutionId||"-"),a.createElement("td",null,a.createElement("span",{className:Lf.cellText},c)),a.createElement("td",null,a.createElement("span",{className:Lf.cellText},n.lesson)),a.createElement("td",null,a.createElement("span",{className:Lf["status".concat(n.reviewStatus)]},l.Ru.text({id:"review-status-".concat(n.reviewStatus),keyset:"tasks"}),[2,3].includes(n.reviewStatus)&&a.createElement(a.Fragment,null," ",a.createElement("span",{className:Lf.score},n.score," "),a.createElement("span",{className:Lf.maxScore},"/",n.scoreMax)))),a.createElement("td",null,n.reviewerFullName),a.createElement("td",null,a.createElement($d,{deadline:n.deadline})),a.createElement("td",null,a.createElement(em,{updateTime:n.reviewTime||""})))};jf.displayName="CourseReviewsTableRow";const Uf=()=>{const e=(0,a.useRef)(null),t=(0,a.useRef)(!0),s=(0,i.zy)(),{items:n,groupId:r,isLoading:o,isShowMineOnlyEnabled:c,apiError:u,networkError:d,filtersProps:m,requestNewReviewsCallback:p,appliedSorting:h,getChangeSortingCallback:E,onToggleShowMine:g,texts:y,isStudent:f,isSuperuser:S,pagination:b}=zf();return(0,a.useEffect)((()=>{if(!window||!e.current||o)return;if(t.current)return void(t.current=!1);const{offsetTop:s}=e.current;window.scrollTo({top:s,behavior:"smooth"})}),[s,o]),u?a.createElement(_s.eG,{statusCode:u.status,errorCode:u.message}):d?a.createElement(_s.AI,null):a.createElement("article",{className:Lf.root},a.createElement(tr.m,null,a.createElement("title",null,y.pageTitle),a.createElement("meta",{name:"title",content:y.pageTitle})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement("div",{className:Lf.headingContainer,ref:e},a.createElement($t.D,{level:1},y.heading),!S&&a.createElement(uu,{size:"m",checked:c,onChange:g},l.Ru.text({id:"reviews-mine-only"})),f&&a.createElement(ea.$,{theme:"action",size:"m",onClick:p,progress:o},l.Ru.text({id:"reviews-get-more"}))),a.createElement("div",{className:Lf.filters},a.createElement(Rf,m)),o?a.createElement("div",{className:Lf.spinContainer},a.createElement(he.t,{view:"default",progress:!0,size:"l"})):a.createElement("div",{className:Lf.content},0===n.length?a.createElement(sm,{className:Lf.message},m.appliedFilters.length>0?l.Ru.text({id:"no-tasks-found",keyset:"tasks"}):l.Ru.text({id:"no-tasks",keyset:"tasks"})):a.createElement(a.Fragment,null,a.createElement("table",{className:Lf.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,l.Ru.text({id:"column-solution",keyset:"tables"})),a.createElement("th",null,l.Ru.text({id:"column-task",keyset:"tables"}),a.createElement(gd,{active:Object.prototype.hasOwnProperty.call(h,"task_title"),activeOrder:h.task_title||Kc.j.ASCENDING,onOrderChange:E("task_title")})),a.createElement("th",null,l.Ru.text({id:"column-lesson",keyset:"tables"})),a.createElement("th",null,l.Ru.text({id:"column-status",keyset:"tables"}),a.createElement(gd,{active:Object.prototype.hasOwnProperty.call(h,"review_status"),activeOrder:h.review_status||Kc.j.ASCENDING,onOrderChange:E("review_status")})),a.createElement("th",null,l.Ru.text({id:"column-reviewer",keyset:"tables"}),a.createElement(gd,{active:Object.prototype.hasOwnProperty.call(h,"reviewer_full_name"),activeOrder:h.reviewer_full_name||Kc.j.ASCENDING,onOrderChange:E("reviewer_full_name")})),a.createElement("th",null,l.Ru.text({id:"column-review-deadline",keyset:"tables"}),a.createElement(gd,{active:Object.prototype.hasOwnProperty.call(h,"deadline"),activeOrder:h.deadline||Kc.j.ASCENDING,onOrderChange:E("deadline")})),a.createElement("th",null,l.Ru.text({id:"column-reviewTime",keyset:"tables"})))),a.createElement("tbody",null,n.map((e=>a.createElement(jf,{key:e.id,p2p:e,groupId:r}))))),a.createElement(_u,{currentPage:b.page,totalPages:b.totalPages,buildPageLink:b.buildLink}))))))};Uf.displayName="CourseReviewsTasks";const Hf=(0,$.cn)("yd609d--task-group-navigation"),Qf=e=>{let{taskGroups:t,urlData:s}=e;return a.createElement("nav",{className:Hf()},a.createElement("ul",{className:Hf("groups",{colorless:!1})},t.map((e=>{var t,n;const r=l.Ru.text({id:e.type,keyset:"task-tags"});return a.createElement("li",{key:e.id,className:Hf("group")},a.createElement(fe,{className:Hf("tooltip"),content:r},a.createElement(vc,{ariaLabel:r,className:Hf("tag"),size:"l",type:e.type})),a.createElement("ul",{className:Hf("tasks")},null==(t=e.tasks)?void 0:t.map((e=>{var t,n;const r=null==(t=e.solution)||null==(n=t.status)?void 0:n.type,i=e.title+(r?": ".concat(ll[r]):"");return a.createElement("li",{key:e.id,className:Hf("task")},a.createElement(fe,{content:i},a.createElement(L.k2,{className:Hf("link",{disabled:"disabled"===e.status}),activeClassName:Hf("link_checked"),to:(o=e.id,p.at.taskDetails.build(Object.assign({},s,{taskId:String(o)})))},a.createElement(Xe,Object.assign({ariaLabel:i,scoreMax:e.scoreMax},e.solution&&{score:e.solution.score,solutionStatus:e.solution.status.type})))));var o})),null==(n=e.problems)?void 0:n.map((e=>{return a.createElement("li",{key:e.id,className:Hf("task")},a.createElement(fe,{content:e.title},a.createElement(L.k2,{className:Hf("link"),activeClassName:Hf("link_checked"),to:(t=e.id,p.at.lessonProblem.build(Object.assign({},s,{problemLinkId:t})))},a.createElement(Xe,{solutionStatus:e.solution.status.type,scoreMax:e.scoreMax}))));var t}))))}))))};Qf.displayName="TaskGroupNavigation";const Vf=(0,$.cn)("yde1c4--task-header"),Gf=e=>{let{taskTitle:t,taskInfo:s,hasManualCheck:n,hasP2p:r,headerAside:i}=e;return a.createElement("header",{className:Vf()},a.createElement("div",null,a.createElement($t.D,{level:1,className:Vf("heading")},t,n&&a.createElement(Ze,{cls:Vf("check-info"),ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),r&&a.createElement(Ze,{cls:Vf("check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"}))),s&&a.createElement("div",{className:Vf("info")},s)),i)};Gf.displayName="TaskHeader";const Bf=(0,$.cn)("yd407c--arrow-navigation"),Wf=e=>{let{arrowClassName:t,leftArrowUrl:s,rightArrowUrl:n,className:i}=e;return a.createElement("nav",{className:(0,$.j)(Bf(),i)},s&&a.createElement(L.N_,{className:(0,$.j)(Bf("arrow",{direction:"left"}),t&&r()(t,{direction:"left"})),to:s},a.createElement(ie,{type:"scroll",size:"l",direction:"left"})),n&&a.createElement(L.N_,{className:(0,$.j)(Bf("arrow",{direction:"right"}),t&&r()(t,{direction:"right"})),to:n},a.createElement(ie,{type:"scroll",size:"l",direction:"right"})))};Wf.displayName="ArrowNavigation";const Jf=()=>a.createElement("div",{className:"problem-run_stub"},a.createElement("div",{className:"problem-run__stub-header"}),a.createElement("div",{className:"problem-run__stub-body"},a.createElement(Na.n,null,l.Ru.text({id:"controlWorkStub",keyset:"problems"}))),a.createElement("div",{className:"problem-run__stub-footer"}));Jf.displayName="ProblemRunControlWorkStub";const Kf=Jf;var Zf=s(49045),Yf=s(24251),qf=s(83930),$f=s(3376);const Xf=e=>{let{children:t}=e;const s=(0,Zf.A)("(max-width: 768px)"),n=(0,Yf.A)(),[r,i]=(0,qf.A)(4e3),o=(0,$f.A)(),c=(0,a.useCallback)((()=>{o(),i()}),[i,o]),u=!0===r()||null===r(),d="portrait-primary"===n.type||"portrait-secondary"===n.type||0===n.angle,m="undefined"!=typeof window&&Sy.Fr&&s&&d&&!u;return a.createElement("div",{className:"mobile-orientation-wrapper"},t,m&&a.createElement("div",{className:"mobile-orientation-wrapper__content"},a.createElement("div",{className:"mobile-orientation-wrapper__wrapper",onClick:c,onKeyDown:by(c),role:"button",tabIndex:0},a.createElement("div",{className:"mobile-orientation-wrapper__phone"}),a.createElement("div",{className:"mobile-orientation-wrapper__text"},l.Ru.markdown({id:"suggestLandscapeOrientation",keyset:"problems"})))))};Xf.displayName="MobileOrientationWrapper";const eS=Xf,tS=()=>{const e=P(vl.uR),{courseId:t,lessonId:s,groupId:n,problemLinkId:r}=(0,i.g)(),o=Number(r),c=P((e=>(0,vl.kA)(e,{problemLinkId:o}))),u=P(vl.eM),d=P(vl.lM),m=P(vl.gO),h=P((e=>(0,vl.mO)(e,{problemLinkId:o}))),E=P((0,vl.X)()),g=P(vl.HI),y=P(vl.uw),f=M();(0,a.useEffect)((function(){return f((0,cn.Kw)({problemLinkId:o,courseId:Number(t),lessonId:Number(s),groupId:Number(n)})),()=>{f((0,cn.Ek)())}}),[f,t,s,o,n]);const{previousProblem:S,nextProblem:b}=h,v=S&&p.at.lessonProblem.build({lessonId:s,courseId:t,groupId:n,problemLinkId:S.id}),N=b&&p.at.lessonProblem.build({lessonId:s,courseId:t,groupId:n,problemLinkId:b.id});return a.createElement(eS,null,a.createElement(sr.P,{type:"narrow",className:"problem-details"},a.createElement(Wf,{arrowClassName:"problem-details__arrow",className:"problem-details__navigation",leftArrowUrl:v,rightArrowUrl:N}),a.createElement(sr.P.ActiveArea,{className:"problem-details__layout-active-area"},a.createElement(Qf,{urlData:{courseId:t,lessonId:s,groupId:n},taskGroups:e})),a.createElement(sr.P.Main,{className:"problem-details__main-area"},a.createElement(Rs,{back:!0,exact:!0,to:p.oi.lessonDetails.build({courseId:t,groupId:n,lessonId:s})},l.Ru.text({id:"backToLesson",keyset:"problems"})),c&&m&&a.createElement(Gf,{taskTitle:c.title,hasManualCheck:!1,hasP2p:!1,taskInfo:a.createElement(uf,{taskDeadline:null,taskMaxScore:c.scoreMax,taskTag:c.tag,hideScoreInformation:null==m?void 0:m.hideScoreInformation})}),g?a.createElement(Kf,null):c&&u&&a.createElement(nr,{fetchStatus:y,fetchError:null,renderSuccess:()=>a.createElement(Ay,{answer:E,key:c.id,problem:u,solution:d,problemLinkId:c.id,attemptsMax:c.attemptsMax,scoreMax:c.scoreMax,problemType:$p.yo.Problem})}))))};tS.displayName="ProblemDetails";const sS=tS;function nS(e){return e.p2p.list.list}function rS(e){return e.p2p.list.fetchStatus}function aS(e){return e.p2p.list.fetchError}let iS=function(e){return e[e.Assigned=1]="Assigned",e[e.Reviewed=2]="Reviewed",e[e.Old=3]="Old",e[e.Canceled=4]="Canceled",e}({});const oS=r().with("p2p-review-status"),lS=oS("score"),cS=oS("max-score"),uS=e=>{let{type:t}=e;switch(t){case iS.Assigned:return a.createElement("span",{className:oS("text",{type:"assigned"})},l.Ru.text({id:"task-status-waiting",params:{count:1}}));case iS.Reviewed:case iS.Old:return a.createElement("span",{className:oS("text",{type:"reviewed"})},l.Ru.text({id:"p2p-status-reviewed"}));default:return null}},dS=e=>{const{scoreMax:t,score:s,type:n,hideScoreInformation:r}=e;switch(n){case iS.Assigned:return a.createElement("span",{className:oS()},a.createElement("span",{className:oS("text",{type:"assigned"})},l.Ru.text({id:"review-status-1",keyset:"tasks",params:{count:1}})));case iS.Canceled:return a.createElement("span",{className:oS()},a.createElement("span",{className:oS("text",{type:"canceled"})},l.Ru.text({id:"task-status-canceled",params:{count:1}})));case iS.Reviewed:case iS.Old:return a.createElement("span",{className:oS()},a.createElement("span",{className:oS("text",{type:"reviewed"})},l.Ru.text({id:"p2p-status-reviewed"})),!r&&"number"==typeof s&&a.createElement(a.Fragment,null,a.createElement("span",{className:lS}," ",s," "),a.createElement("span",{className:cS},"/ ",t)));default:return null}},mS=r().with("p2p-review-list"),pS=e=>{const{review:t}=e;return a.createElement("div",{className:mS("review")},a.createElement("div",{className:mS("review-info")},a.createElement("span",{className:mS("review-id")},l.Ru.text({id:"p2p-review-id",keyset:"common",params:{id:t.id}})),a.createElement("span",{className:mS("status")},a.createElement(dS,{type:t.reviewStatus,score:t.score,scoreMax:t.scoreMax}))))};pS.displayName="P2PReviewListItem";const hS=r().with("review-list");class ES extends a.Component{constructor(){super(...arguments),this.renderSpin=()=>a.createElement("div",{className:hS("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"})),this.renderError=e=>a.createElement("div",{className:hS("message",{error:!0})},e),this.renderSolutionList=()=>{const{reviews:e,courseId:t,groupId:s}=this.props,n=e.map((e=>{var n;return{id:e.id,component:a.createElement(pS,{review:e}),url:p.at.solutionReview.build({courseId:t,groupId:s,lessonId:e.lessonId.toString(),taskId:((null==(n=e.task)?void 0:n.id)||e.taskId).toString(),reviewId:e.id.toString()})}})),r=n.length>0;return a.createElement("div",{className:hS("list",{"has-shadow":r})},0!==n.length?a.createElement("div",{className:hS("link-list-wrapper")},a.createElement(Bo,{items:n,itemType:"navlink",listType:"aside"})):null)}}render(){const{fetchStatus:e,fetchError:t}=this.props;return a.createElement("div",{className:hS()},a.createElement(rr,{fetchError:t,fetchStatus:e,renderPending:this.renderSpin,renderSuccess:this.renderSolutionList,renderError:this.renderError}))}}ES.displayName="P2PReviewList";const gS=e=>{const{reviews:t,fetchError:s,fetchStatus:n,courseId:r,groupId:i,taskId:o}=e;return a.createElement(ES,{courseId:r,groupId:i,taskId:o,reviews:t,fetchError:s,fetchStatus:n})};gS.displayName="SolutionListContainer";const yS=(0,o.Ng)((function(e){return{reviews:nS(e),fetchStatus:rS(e),fetchError:aS(e)}}))(gS),fS=(0,$.cn)("y4ef2d--task-description-opener"),SS=l.Ru.text({id:"task-description",keyset:"tasks"}),bS=e=>{let{taskDescription:t,taskTitle:s,taskUrl:n,taskHasManualCheck:r,taskHasP2p:i}=e;const[o,l]=(0,a.useState)(!1),c=(0,a.useRef)(null),u=(0,a.useCallback)((e=>{e.preventDefault(),l(!0)}),[]),d=(0,a.useCallback)((()=>{var e;l(!1),null==(e=c.current)||e.focus()}),[]);return a.createElement("div",{className:fS()},a.createElement(Rs,{exact:!0,to:n,view:"button",onClick:u,innerRef:c},SS),a.createElement(Ln,{sidebarType:SS,visible:o,onClose:d},a.createElement("div",{className:fS("sideblock")},a.createElement(mf,{taskTitle:s,hasManualCheck:r,hasP2p:i,content:t}))))};bS.displayName="TaskDescriptionOpener";var vS=s(15100);function NS(e,t){return e.p2p.details.detailsMap[t]}function IS(e){return e.p2p.details.fetchStatus}function TS(e){return e.p2p.details.fetchError}var kS,CS=s(93601);function wS(e){return e.p2p.grade.fetchStatus}function AS(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const OS=r().with("p2p-review-status-editor");let RS=(kS=class extends a.Component{constructor(){super(...arguments),this.state={isPopupVisible:!1,formulaParamsDictionary:{}},this.rootRef=a.createRef(),this.editButtonRef=a.createRef(),this.popupDirections=["bottom","bottom-end"]}componentWillMount(){if(!this.props.review.task.useFormula)return;const e={},{formulaParams:t}=this.props.review.task,{formulaParamValues:s}=this.props.review;t.forEach((t=>{let{params:s}=t;s.forEach((t=>{e[t.name]=t.default}))})),s.forEach((t=>{e[t.name]=t.value})),this.setState((t=>Object.assign({},t,{formulaParamsDictionary:e})))}render(){const{review:e}=this.props;return a.createElement("section",{className:OS(),ref:this.rootRef},e.reviewer&&a.createElement(a.Fragment,null,this.renderReviewer(e.reviewer.displayName),a.createElement("div",{style:{flexGrow:1}})),this.renderStatusEditor(),this.hasPopup()&&this.renderPopup())}gradeAsAcceptedByScore(e){this.props.gradeAsAccepted(e,null)}gradeAsAcceptedByParams(e){const t=[];for(const[s,n]of Object.entries(e))t.push({name:s,value:Number(n)});this.props.gradeAsAccepted(null,t)}renderReviewer(e){return a.createElement("div",{className:OS("reviewer")},l.Ru.text({id:"p2p-reviewer",params:{name:e}}))}renderStatusEditor(){const{gradingStatus:e,review:t}=this.props;switch(t.reviewStatus){case iS.Assigned:case iS.Canceled:return t.task.useFormula?a.createElement("div",{className:OS("button-wrapper")},a.createElement(ge.$,{className:OS("button"),theme:"approve",size:"l",view:"lyceum",onClick:this.togglePopup,disabled:this.scoreEditDisabled()},l.Ru.text({keyset:"tasks",id:"set-score"}))):a.createElement(sp,{fetchStatus:e,maxScore:t.task.scoreMax,setAcceptedGrade:this.gradeAsAcceptedByScore,setAcceptedGradeText:l.Ru.text({id:"p2p-grade-label"}),disabled:this.scoreEditDisabled()});case iS.Reviewed:case iS.Old:return this.renderStatusDescription(!0);default:return null}}HandleInputChange(e){const{value:t,id:s}=e.target;this.setState((e=>Object.assign({},e,{formulaParamsDictionary:Object.assign({},e.formulaParamsDictionary,{[s]:t})})))}renderPopup(){const{isPopupVisible:e}=this.state,{review:t}=this.props,{score:s}=t,{useFormula:n,formulaParams:r}=t.task;return n?a.createElement(jt.a,{theme:"normal",visible:e,onClose:this.togglePopup,scope:this.rootRef||void 0},a.createElement(fp,{formulaParamGroups:r||[],formulaParamValues:this.state.formulaParamsDictionary||{},setAcceptedGrade:this.gradeAsAcceptedByParams,closePopup:this.togglePopup,onChange:this.HandleInputChange,disabled:this.scoreEditDisabled()})):a.createElement(ws,{cls:OS("popup"),theme:"normal",target:"anchor",direction:this.popupDirections,anchor:this.editButtonRef,visible:e,onClose:this.togglePopup},a.createElement(ip,{closePopup:this.togglePopup,maxScore:t.task.scoreMax,score:s,setAcceptedGrade:this.gradeAsAcceptedByScore,setAcceptedGradeText:l.Ru.text({id:"p2p-grade-label"}),disabled:this.scoreEditDisabled()}))}renderStatusDescription(e){const{review:t,gradingStatus:s}=this.props,{reviewStatus:n,reviewTime:r}=t,i=s===Ot.L.PENDING;return a.createElement("div",{className:OS("description",{status:n})},a.createElement("div",{className:OS("info")},a.createElement("div",{className:OS("status-text")},a.createElement("h4",{className:OS("status-name")},a.createElement(uS,{type:n})),a.createElement("span",{className:OS("score-info-wrapper")},e&&this.renderScore(),i?this.renderSpinner():this.renderEditButton()))),r&&a.createElement("time",{className:OS("updated-at")},Ne.Ay.fromISO(r).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))))}renderScore(){const{review:e}=this.props,{score:t,task:s}=e;if("number"!=typeof t)return null;const n=l.Ru.text({id:"N-points",params:{count:s.scoreMax,n:"".concat(t,"/").concat(s.scoreMax)}});return a.createElement("span",{className:OS("score-info"),title:n},l.Ru.element({id:"N-points",params:{count:s.scoreMax,n:a.createElement(a.Fragment,null,a.createElement("span",{className:OS("score")}," ",t," "),a.createElement("span",{className:OS("max-score")},"/",s.scoreMax))}}))}renderSpinner(){return a.createElement(he.t,{view:"default",progress:!0,size:"xs"})}renderEditButton(){const{isPopupVisible:e}=this.state;return a.createElement(ge.$,{innerRef:this.editButtonRef,theme:"clear",size:"xs",view:"lyceum",disabled:this.scoreEditDisabled(),checked:e,icon:e=>a.createElement(ie,{className:e,size:"l",type:"edit"}),"aria-label":l.Ru.text({keyset:"common",id:"edit"}),onClick:this.togglePopup})}togglePopup(){this.setState((e=>({isPopupVisible:!e.isPopupVisible})))}scoreEditDisabled(){const{review:e,userId:t,isSuperuser:s}=this.props,{reviewStatus:n,task:r,solutionId:a,canAlterScore:i,reviewer:o}=e;return s||a&&t===(null==o?void 0:o.id)?r.p2pReviewsSummarizingCompleted:a?r.p2pReviewsSummarizingCompleted||!i:n===iS.Canceled||n===iS.Old}hasPopup(){const{reviewStatus:e}=this.props.review,{useFormula:t}=this.props.review.task;return[iS.Reviewed,iS.Old].includes(e)||t}},AS(kS.prototype,"componentWillMount",[R.Q2],Object.getOwnPropertyDescriptor(kS.prototype,"componentWillMount"),kS.prototype),AS(kS.prototype,"gradeAsAcceptedByScore",[R.Q2],Object.getOwnPropertyDescriptor(kS.prototype,"gradeAsAcceptedByScore"),kS.prototype),AS(kS.prototype,"gradeAsAcceptedByParams",[R.Q2],Object.getOwnPropertyDescriptor(kS.prototype,"gradeAsAcceptedByParams"),kS.prototype),AS(kS.prototype,"HandleInputChange",[R.Q2],Object.getOwnPropertyDescriptor(kS.prototype,"HandleInputChange"),kS.prototype),AS(kS.prototype,"togglePopup",[R.Q2],Object.getOwnPropertyDescriptor(kS.prototype,"togglePopup"),kS.prototype),AS(kS.prototype,"scoreEditDisabled",[R.Q2],Object.getOwnPropertyDescriptor(kS.prototype,"scoreEditDisabled"),kS.prototype),kS);var _S;RS.displayName="P2PReviewStatusEditor";let LS=(function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}((_S=class extends a.Component{render(){const{review:e,gradingStatus:t,userId:s,isSuperuser:n}=this.props;return a.createElement(RS,{review:e,gradingStatus:t,gradeAsAccepted:this.gradeAsAccepted,userId:s,isSuperuser:n})}gradeAsAccepted(e,t){const{match:s,role:n}=this.props;this.props.gradeSolution({reviewId:Number(s.params.reviewId),role:n===E.Student?"student":"teacher",score:e,formulaParamValues:t||[]})}}).prototype,"gradeAsAccepted",[R.Q2],Object.getOwnPropertyDescriptor(_S.prototype,"gradeAsAccepted"),_S.prototype),_S);LS.displayName="SolutionStatusEditorContainer";const MS=(0,i.y)((0,o.Ng)((function(e,t){var s;return{role:null==(s=V(e,Number(t.match.params.courseId),Number(t.match.params.groupId)))?void 0:s.role,isSuperuser:(0,T.Y8)(e),userId:(0,T.F6)(e),gradingStatus:wS(e),rejudgeStatus:null}}),(function(e){return(0,_.zH)({gradeSolution:CS.ci},e)}))(er(LS))),PS=r().with("p2p-submission-header-editor"),xS=e=>{let{review:t}=e;return a.createElement("header",{className:PS({status:t.reviewStatus})},a.createElement("div",{className:PS("solution-status")},a.createElement(MS,{review:t})))};xS.displayName="P2PSubmissionHeaderEditor";const DS=(0,$.cn)("ya7cbe--submission"),FS=e=>{let{review:t}=e;const{submission:s}=t;if(!s)throw new d.dH("Solution ".concat(t.id," has no submission"));return a.createElement("section",{className:DS()},a.createElement("div",{className:DS("header-wrapper")},a.createElement(xS,{review:t})),a.createElement("div",{className:DS("file")},a.createElement(Am,{fileMetadata:s.file,readonly:!0})))};FS.displayName="SubmissionBase";const zS=FS,jS=r().with("p2p-review-header"),US=e=>{let{review:t}=e;return a.createElement("header",{className:jS()},t.solutionId&&a.createElement(a.Fragment,null,l.Ru.text({id:"solution-ID",keyset:"solutions",params:{id:t.solutionId}}),a.createElement("div",{style:{flexGrow:1}})),a.createElement("div",{className:jS("review-id")},l.Ru.text({id:"p2p-review-id",params:{id:t.id}})))};var HS;function QS(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}US.displayName="P2PReviewHeader";const VS=r().with("p2p-review");let GS=(QS((HS=class extends a.Component{render(){const{fetchError:e,fetchStatus:t}=this.props;return a.createElement("div",{className:VS()},a.createElement(nr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderSolution,renderError:this.renderError}))}renderSpin(){return a.createElement("div",{className:VS("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))}renderError(e){return a.createElement("div",{className:VS("error")},e)}renderSolution(){const{review:e}=this.props;return e?a.createElement("section",{className:VS()},a.createElement(US,{review:e}),a.createElement("div",{className:VS("info")},a.createElement("div",{className:VS("submission-wrapper")},e.submission?a.createElement(zS,{review:e}):a.createElement(sm,{align:"center"},l.Ru.text({id:"no-submission",keyset:"tasks"}))))):null}}).prototype,"renderSpin",[R.Q2],Object.getOwnPropertyDescriptor(HS.prototype,"renderSpin"),HS.prototype),QS(HS.prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(HS.prototype,"renderError"),HS.prototype),QS(HS.prototype,"renderSolution",[R.Q2],Object.getOwnPropertyDescriptor(HS.prototype,"renderSolution"),HS.prototype),HS);GS.displayName="P2PReview";const BS=e=>{const{reviewId:t,role:s,clearP2PReviewDetails:n,fetchP2PReviewDetails:r}=e,[i,o]=(0,a.useState)(t);(0,a.useEffect)((()=>{n(i),r({reviewId:t,role:s}),o(t)}),[n,i,r,t,s]);const{solution:l,fetchError:c,fetchStatus:u}=e;return a.createElement(GS,{review:l,fetchError:c,fetchStatus:u})};BS.displayName="P2PReviewContainer";const WS=(0,o.Ng)((function(e,t){var s;const{reviewId:n,courseId:r,groupId:a}=t;return{role:"student"===(null==(s=V(e,r,a))?void 0:s.role)?"student":"teacher",solution:NS(e,n),fetchError:TS(e),fetchStatus:IS(e)}}),(function(e){return(0,_.zH)({clearP2PReviewDetails:vS.ky,fetchP2PReviewDetails:vS.d1},e)}))(BS),JS=r().with("p2p-task-review"),KS=e=>{let{task:t,reviews:s}=e;const n=(0,i.g)(),{courseId:r,groupId:o,taskId:l,lessonId:c,reviewId:u}=n;return a.createElement(a.Fragment,null,t.description&&a.createElement(bS,{taskUrl:p.at.taskDetails.build(n),taskTitle:t.title,taskDescription:t.description,taskHasManualCheck:t.hasManualCheck&&t.taskType===qe.wP.Other,taskHasP2p:!0}),a.createElement("article",{className:JS()},a.createElement(sr.P,{type:"wide",className:JS("layout")},a.createElement(sr.P.Main,null,a.createElement("div",{className:JS("main-content")},a.createElement(WS,{reviewId:Number(u),groupId:Number(o),courseId:Number(r)}))),a.createElement(sr.P.Aside,null,a.createElement("div",{className:JS("review-list")},a.createElement(yS,{courseId:r,groupId:o,taskId:l,lessonId:c}))))))};var ZS=s(76200);const YS=e=>{let{task:t}=e;const{courseId:s,groupId:n,lessonId:r,taskId:o}=(0,i.g)(),l=W(Number(s),Number(n)),c=P(rS),u=P(aS),d=P(nS),m=P(T.wz),p=M();return(0,a.useEffect)((()=>(p((0,ZS.yG)({groupId:Number(n),courseId:Number(s),taskId:Number(o),lessonId:Number(r),reviewerId:null==m?void 0:m.id,role:l.role===E.Student?"student":"teacher"})),()=>{p((0,ZS.Ru)())})),[l.role,s,p,n,r,o,null==m?void 0:m.id]),a.createElement(nr,{fetchError:u,fetchStatus:c},a.createElement(KS,{task:t,reviews:d}))};YS.displayName="P2PTaskReview";const qS=e=>{let{isModalOpened:t,closeModal:s}=e;const n=(0,i.W6)(),r=(0,i.g)(),{courseId:o,groupId:c,lessonId:u}=r,d=(0,a.useCallback)((()=>{n.push(p.oi.lessonDetails.build({courseId:o,groupId:c,lessonId:u})),s()}),[s,o,c,n,u]),m=(0,a.useCallback)((()=>{n.push(p.oi.courseDetails.build({courseId:o,groupId:c})),s()}),[s,o,c,n]);return a.createElement(tn,{visible:t,okText:l.Ru.text({id:"go-to-next-lesson",keyset:"lessons"}),cancelText:l.Ru.text({id:"back-to-tasks-list",keyset:"tasks"}),content:l.Ru.text({id:"end-of-lesson",keyset:"lessons"}),onOkClick:m,onCancelClick:d,onCloseClick:s})};qS.displayName="EndOfLessonModal";const $S=qS;var XS=s(9928);function eb(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,n=s;null!==s&&t&&(t.statusCode===XS.C6||(0,XS.z3)(t.statusCode))&&(n=3e5),function(e,t){const[s,n]=(0,a.useState)(!1),r=(0,a.useCallback)((()=>{n(document.hidden)}),[]);(0,a.useEffect)((()=>(document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)})),[r]),function(e,t){const s=(0,a.useRef)((()=>{}));(0,a.useEffect)((()=>{s.current=e}),[e]),(0,a.useEffect)((()=>{if(null===t)return;const e=setInterval((function(){s.current()}),t);return()=>{clearInterval(e)}}),[t])}(e,s?null:t)}(e,n)}const tb=(0,$.cn)("y0d3de--sub-layout"),sb=e=>{let{leftColumn:t,rightColumn:s,narrowLeft:n}=e;return a.createElement("div",{className:tb()},a.createElement("div",{className:tb("left-column",{narrow:n})},t),a.createElement("div",{className:tb("right-column")},s))};sb.displayName="SubLayout";const nb=(0,$.cn)("yadc9f--rounded-wrapper"),rb=e=>{let{children:t,border:s,all:n,topLeft:r,topRight:i}=e;return a.createElement("div",{className:nb(Object.assign({border:s,all:n},!n&&{"top-left":r,"top-right":i}))},t)};rb.displayName="RoundedWrapper";var ab=s(57278);s(67929);const ib=e=>e.submissions.submissionsMap,ob=e=>e.submissions.contestLogsMap,lb=e=>e.submissions.plagiarismsMap;s(66332);var cb=s(40431),ub=s.n(cb);const db=r().with("contest-logs");class mb extends a.Component{constructor(){super(...arguments),this.renderSpin=()=>a.createElement("div",{className:db("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"})),this.renderError=e=>a.createElement("p",{className:db("error")},e),this.renderLogs=()=>{const{contestLogs:e}=this.props;if(!e)return null;const{verdict:t,compileLog:s,usedTime:n,usedMemory:r,testInfo:i,testNumber:o}=e,c=n?"".concat(n,"ms"):"-",u=r?ub()(r):"-";return a.createElement(a.Fragment,null,this.renderLog("verdict",l.Ru.text({id:t,keyset:"contest-verdicts"})),this.renderLog("compile-log",s),this.renderLog("time-and-memory","".concat(c," / ").concat(u)),this.renderLog("test-number",o),Object.keys(i).map((e=>this.renderLog(e,i[e]))))},this.renderLog=(e,t)=>{if(!t)return null;const s=l.Ru.text({id:e,keyset:"submissions"});return a.createElement("section",{key:e,className:db("log")},a.createElement("h3",{className:db("log-title")},s),a.createElement("pre",{className:db("log-text")},t))}}render(){const{fetchError:e,fetchStatus:t}=this.props;return a.createElement("section",{className:db()},a.createElement(nr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderLogs,renderError:this.renderError}))}}mb.displayName="ContestLogs";const pb=e=>{let{submissionId:t}=e;const s=M(),n=P(ob)[t];if((0,a.useEffect)((()=>{s(ab.gS.request({submissionId:t}))}),[s,t]),!n)return null;const{contestLogs:r,fetchError:i,fetchStatus:o}=n;return a.createElement(mb,{contestLogs:r,fetchError:i,fetchStatus:o})};pb.displayName="ContestLogsContainer";var hb=s(32953);const Eb=new ah.Registry({id:(0,hb.fz)()});Eb.set("Button",ge.$);const gb=(0,ah.withRegistry)(Eb)(hb.CW),yb=(e,t,s)=>{const n=(0,Tm.gW)(s);if(navigator&&navigator.msSaveBlob){const r=new Blob([e],{type:n});return r.lastModifiedDate=new Date,r.name="".concat(t).concat(s),r}return new File([e],"".concat(t).concat(s),{type:n})};var fb=s(22983);const Sb=e=>e.solutions.drafts.entities;function bb(e){return e.solutions.send.fetchStatus}var vb=s(57330),Nb=s(50632),Ib=s(87594);const Tb=(0,$.cn)("solution-sender-modal"),kb=(0,Ut.compose)(fs.I)(jt.a),Cb=e=>{let{isVisible:t,closeModal:s,handleFileAttachment:n,theme:r="normal",onLanguageChange:i}=e;const o=P(lm),c=P(vl.kT),u=(0,a.useCallback)((e=>{n(e),s()}),[s,n]);return a.createElement(kb,{theme:"normal",visible:t,onClose:s,onEscapeKeyDown:s},a.createElement("div",{className:Tb()},a.createElement("section",{className:Tb("content")},l.Ru.text({id:"select-language",keyset:"common"})),a.createElement("footer",{className:Tb("footer")},c&&a.createElement(um,{className:Tb("action"),language:o,availableLanguages:c,onLanguageChange:i}),a.createElement(gb,{className:Tb("action"),view:"lyceum",disabled:!o,size:"l",theme:r,accept:o,onChange:u},l.Ru.text({id:"upload-solution-file",keyset:"solutions"}))),a.createElement(ge.$,{className:Tb("close"),icon:e=>a.createElement(ie,{className:e,size:"l",type:"close"}),"aria-label":l.Ru.text({keyset:"common",id:"close"}),theme:"clear",size:"l",view:"lyceum",onClick:s})))};Cb.displayName="SolutionSenderModal";const wb=(0,$.cn)("solution-sender"),Ab=e=>{let{fileLimits:{fileSize:t},isFirstAttempt:s,isContestIntegrated:n,className:r,theme:o="normal",task:c,disabled:u=!1}=e;const d=P(bb),m=P(Sb),p=P(vl.kT),[h,E]=(0,a.useState)(!1);let g;const y=(0,a.useRef)(null);c&&(g=m[c.id]);const f=M(),S=(0,i.g)(),b=c&&c.lesson.type===lc.nv.Test&&c.lesson.isTestFinished,v=d===Ot.L.PENDING,N=b||v||u,I=(0,a.useCallback)((async e=>{y.current&&e.buttons&&y.current.click()}),[y]),T=(0,a.useCallback)((e=>{const{files:s}=e.target;if(!s||!s.length)return;const n=s.item(0);n&&(e.target.value="",f((0,Nb.IH)({solutionId:c.solutionId,taskId:c.id,file:n,maxSize:t,courseId:Number(S.courseId),groupId:Number(S.groupId),sendWay:vb.V.FROM_FILE,routeParams:S})))}),[f,t,S,c.id,c.solutionId]),k=(0,a.useCallback)((()=>{E(!h)}),[h]),C=(0,a.useCallback)((e=>{f((0,im.YF)(Array.isArray(e)?e[0]:e))}),[f]),w=(0,a.useCallback)((()=>{if(g)try{const e=yb(g.content,"solution",".py");f((0,Nb.IH)({solutionId:c.solutionId,taskId:c.id,file:e,maxSize:t,courseId:Number(S.courseId),groupId:Number(S.groupId)}))}catch(e){f((0,fn.z)(Ib.$7))}}),[f,g,t,S.courseId,S.groupId,c.id,c.solutionId]),A=p&&Object.keys(p)||[],O=Boolean(c.isContestIntegrated&&A.length>1),R=A[0];if(!g)return n&&O?a.createElement(a.Fragment,null,a.createElement(ge.$,{className:(0,$.j)(r,wb({type:"attach"})),view:"lyceum",disabled:N,size:"l",theme:o,title:N?void 0:l.Ru.text({id:"upload-solution-file",keyset:"solutions"}),onClick:k,icon:e=>a.createElement(ie,{size:"m",type:"upload",className:e}),"aria-label":l.Ru.text({id:"upload-solution-file",keyset:"solutions"})}),a.createElement(Cb,{isVisible:h,theme:o,handleFileAttachment:T,closeModal:k,onLanguageChange:C})):a.createElement("div",{className:wb("attach_container"),onClick:I},a.createElement(gb,{className:(0,$.j)(r,wb({type:"attach"})),view:"lyceum",disabled:N,size:"l",theme:o,accept:n&&R||void 0,onChange:T,controlRef:y},u?"":l.Ru.text({id:"upload-solution-file",keyset:"solutions"})),a.createElement(ie,{size:"m",type:"upload",className:wb("attach_icon")}));const{isValid:_,message:L=""}=function(e,t){return e.length?e.length>t?{isValid:!1,message:l.Ru.text({id:"solution-too-long",keyset:"solutions"})}:{isValid:!0}:{isValid:!1,message:l.Ru.text({id:"solution-is-empty",keyset:"solutions"})}}(g.content,t);return a.createElement(fe,{enabled:Boolean(L),content:L},a.createElement("span",null,a.createElement(ge.$,{className:(0,$.j)(r,wb({type:"button"})),view:"lyceum",disabled:N||!_,size:"l",theme:"action",onClick:w},l.Ru.text({id:"".concat(s?"send":"resend","-solution"),keyset:"tasks"}))))};Ab.displayName="SolutionSenderBase";const Ob=(0,fb.VX)((0,vm.To)(Ab)),Rb="y1b87d--comments",_b=["solutionStatus","isContestIntegrated","fileLimits","disabled"],Lb=(0,$.cn)(Rb),Mb=[Ye.gt.New,Ye.gt.Draft],Pb=[...Mb,Ye.gt.Rework],xb=e=>{var t;let{solutionStatus:s,isContestIntegrated:n=!1,fileLimits:{fileSize:r},disabled:o}=e,c=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,_b);const u=M(),d=(0,i.g)(),m=P(vl.MX),h=P((e=>(0,Dy.GZ)(e,m.solutionId))),E=Ko.I.get(Zo.Z.SavedSolutions),g=P(om)||"",y=P(lm),f=y,S=P(vl.cS),b=P(bb)===Ot.L.PENDING,v=Boolean((null==h?void 0:h.submissionsCount)&&(null==h||null==(t=h.task)?void 0:t.maxAttempts)&&h.submissionsCount>=h.task.maxAttempts),N=S||b||v||o,I=(0,a.useCallback)((()=>{try{const e=yb(g,"solution",f);u((0,Nb.IH)({solutionId:m.solutionId,taskId:m.id,file:e,maxSize:r,shouldDisableReadonly:!0,shouldShowSuccessMessage:!0,sendWay:vb.V.FROM_EDITOR,courseId:Number(d.courseId),groupId:Number(d.groupId),routeParams:d}))}catch(e){u((0,fn.z)(Ib.$7))}}),[g,f,u,r,d,m.id,m.solutionId]),T=v?l.Ru.text({id:"attempts-exceeded",keyset:"solutions"}):c.title;return(0,a.useEffect)((()=>{var e,t,s,n;!Jo()(null==E||null==(e=E[null!=(t=null==h?void 0:h.id)?t:""])?void 0:e.code)&&u((0,im.YH)(null==E||null==(s=E[null!=(n=null==h?void 0:h.id)?n:""])?void 0:s.code))}),[]),a.createElement("header",{className:Lb("header"),title:T},d.solutionId?a.createElement(ge.$,{onClick:I,className:Lb("link"),theme:"action",view:"lyceum",size:"l",disabled:N||!g||!y},l.Ru.text({id:"send-code",keyset:"solutions"})):a.createElement(ge.$,{className:Lb("link"),theme:"action",view:"lyceum",size:"l",type:"link",url:p.ZZ.taskSolutions.build({courseId:d.courseId.toString(),groupId:d.groupId.toString(),lessonId:d.lessonId.toString(),taskId:d.taskId.toString()}),disabled:N},l.Ru.text({id:"open-editor",keyset:"solutions"})),a.createElement(Ob,{isContestIntegrated:n,isFirstAttempt:Mb.includes(s),theme:Pb.includes(s)?"action":"normal",disabled:N,task:m}))};xb.displayName="CommentsHeaderBase";const Db=(0,fb.VX)((0,vm.To)(xb));var Fb,zb=s(49385);function jb(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const Ub=r().with("comments");let Hb=(Fb=class extends a.Component{constructor(){super(...arguments),this.textarea=null,this.focus=()=>{this.textarea&&this.textarea.focus()},this.formRef=e=>{e&&(this.textarea=e.getElementsByClassName("comments__textarea")[0])}}handleSubmit(e){e.preventDefault();const{value:t,onSubmit:s,uploadStatus:n}=this.props;t&&n!==Ot.L.PENDING&&s()}handleChange(e){const{onChange:t}=this.props;t(e.target.value)}handleKeyDown(e){13!==e.keyCode||e.shiftKey||this.handleSubmit(e)}render(){const{uploadStatus:e,isEditing:t,onBlur:s,onReset:n,value:r}=this.props,i=e===Ot.L.PENDING;return a.createElement("form",{ref:this.formRef,className:Ub("form",{editing:t}),onSubmit:this.handleSubmit},t&&a.createElement("div",{className:Ub("editing-title")},a.createElement("span",{className:Ub("editing-heading")},l.Ru.text({id:"edit-comment",keyset:"tasks"})),a.createElement(ge.$,{icon:e=>a.createElement(ie,{className:e,size:"m",type:"close-thin"}),size:"m",theme:"clear",view:"lyceum",onClick:n,"aria-label":l.Ru.text({keyset:"tasks",id:"cancel-comment-edit"})})),a.createElement("div",{className:Ub("controls")},a.createElement("div",{className:"comments__textarea-wrapper"},a.createElement(zb.A,{className:"comments__textarea",placeholder:l.Ru.text({id:"add-comment",keyset:"tasks"}),value:r,onBlur:s,onChange:this.handleChange,onKeyDown:this.handleKeyDown,minRows:1}),a.createElement("div",{className:"comments__textarea-box"})),a.createElement(ge.$,{progress:i,size:"m",theme:"clear",view:"lyceum",type:"submit",icon:e=>a.createElement(ie,{className:e,size:"m",type:"arrow-enter"}),onClick:this.handleSubmit,"aria-label":l.Ru.text({keyset:"tasks",id:"publish-comment"})})))}},jb(Fb.prototype,"handleSubmit",[R.Q2],Object.getOwnPropertyDescriptor(Fb.prototype,"handleSubmit"),Fb.prototype),jb(Fb.prototype,"handleChange",[R.Q2],Object.getOwnPropertyDescriptor(Fb.prototype,"handleChange"),Fb.prototype),jb(Fb.prototype,"handleKeyDown",[R.Q2],Object.getOwnPropertyDescriptor(Fb.prototype,"handleKeyDown"),Fb.prototype),Fb);Hb.displayName="CommentsForm";const Qb=Hb;function Vb(e,t){return e.comments.commentMap[t]}function Gb(e){return e.comments.commentMap}const Bb=(0,U.Mz)([Vb],(e=>e?e.filter((e=>e.submission)):null));function Wb(e){return e.comments.downloadStatus}function Jb(e){return e.comments.downloadStatusError}function Kb(e){return e.comments.uploadStatus}let Zb=function(e){return e.Text="text",e.Score="score",e.Status="status",e.Contest="contest",e.Rejudge="rejudge",e.Error="error",e.TimeoutBan="timeout_ban",e.WrongFile="wrong_file_submitted",e}({});var Yb;function qb(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const $b=r().with("comments");let Xb=(Yb=class e extends a.Component{constructor(){super(...arguments),this.availableLanguagesString=void 0,this.commentRefs=this.props.comments.reduce(((t,s)=>{const n=s.submission&&e.getRunIdFromSubmission(s.submission);return n&&(t[n]={commentId:s.id,ref:(0,a.createRef)()}),t}),{}),this.commentRenderers={[Zb.Text]:(e,t)=>{const{readonly:s,userId:n,activeCommentId:r}=this.props;if(e.submission){const s=e.data,{file:n,runId:r}=e.submission;return a.createElement("div",{className:$b("comment-group"),"submission-id":n.id},this.renderSubmissionInfo(e.submission,t,l.Ru.text({id:"id",keyset:"tasks",params:{id:r||n.id}})),a.createElement("div",{className:$b("comment-text",{"after-deadline":t})},l.Ru.text({id:s,keyset:"solutions"})))}const i=e.data,o=e.author.id===n,c=e.id===r;return a.createElement("div",{className:$b("editable-comment-text",{own:o})},!s&&o&&a.createElement(ge.$,{className:$b("edit-button"),theme:"clear",size:"xs",view:"lyceum",checked:c,icon:e=>a.createElement(ie,{className:e,size:"m",type:"edit"}),onClick:this.handleEditClick(e),"aria-label":l.Ru.text({keyset:"common",id:"edit"})}),a.createElement("div",{className:$b("comment-text",{"after-deadline":t}),dangerouslySetInnerHTML:{__html:i}}))},[Zb.WrongFile]:(e,t)=>{var s,n;const r=(null==(s=e.files)?void 0:s[0])||(null==(n=e.submission)?void 0:n.file);return a.createElement("div",{className:$b("comment-group")},a.createElement("div",{className:$b("comment-text",{"after-deadline":t})},l.Ru.element({id:"file-not-sent",keyset:"solutions",params:{filename:a.createElement(ci.N,{href:null==r?void 0:r.url,behavior:"external"},null==r?void 0:r.name)}})),a.createElement("div",{className:$b("comment-text",{"after-deadline":t})},l.Ru.text({id:e.data,keyset:"solutions"}),this.availableLanguagesString&&": ".concat(this.availableLanguagesString)))},[Zb.Status]:(e,t)=>{const s=e.data;return a.createElement("div",{className:$b("comment-text",{"after-deadline":t})},l.Ru.text({id:"status-changed",keyset:"tasks",params:{status:l.Ru.text({id:"status-".concat(s),keyset:"solutions"})}}))},[Zb.Score]:(e,t)=>{const s=e.data;return a.createElement("div",{className:$b("comment-text",{"after-deadline":t&&!e.forceScore})},l.Ru.text({id:"score-set",keyset:"tasks",params:{score:s}}))},[Zb.Contest]:(e,t,s)=>{const n=e.data;return a.createElement("button",{type:"button",className:$b("show-log",{"after-deadline":t}),onClick:()=>{this.handleContestVerdictClick(e.id)(),this.props.onTriggerIndexChange(s)}},l.Ru.text({id:"verdict",keyset:"submissions"}),": ",l.Ru.text({id:n,keyset:"contest-verdicts"}))},[Zb.Rejudge]:(t,s)=>{let{data:n,submission:r}=t,i=null,o=null;const{submissionsMap:c}=this.props,u=r&&r.isRejudgementOfId;if(c){const t=c.findIndex((e=>e.submission&&e.submission.id===u));-1!==t&&(o=c[t].submission,o&&(i=e.getRunIdFromSubmission(o)))}return a.createElement("div",{className:$b("comment-group")},a.createElement("button",{type:"button",className:$b("comment-text",{type:"rejudged-submission","after-deadline":s}),onClick:this.handleRedjudgedSubmissionClick(o)},i?l.Ru.text({id:"".concat(n,"-ID"),keyset:"solutions",params:{id:i}}):l.Ru.text({id:n,keyset:"solutions"})),r&&this.renderSubmissionInfo(r,s,l.Ru.text({id:"ID-rejudgement",keyset:"solutions",params:{id:e.getRunIdFromSubmission(r)}})))},[Zb.Error]:(e,t)=>a.createElement("div",{className:$b("comment-text",{"after-deadline":t})},l.Ru.text({id:e.data,keyset:"comments"})),[Zb.TimeoutBan]:(e,t)=>a.createElement("div",{className:$b("comment-text",{"after-deadline":t})},l.Ru.element({id:"timeoutBan.".concat(e.data),keyset:"comments"}))}}static scrollToComment(e){const{current:t}=e;t&&t.parentElement&&(t.parentElement.scrollTop=t.offsetTop-t.parentElement.offsetTop-10)}static getRunIdFromSubmission(e){return(e.runId||e.file.id).toString()}shouldComponentUpdate(e){return Cl(e,this.props,["comments","selectedSubmission"])}setAvailableLanguagesString(){this.availableLanguagesString=this.props.availableLanguages&&Object.entries(this.props.availableLanguages).map((e=>{let[t,s]=e;return"".concat(t," (").concat(s,")")})).join(", ")}componentDidMount(){this.setAvailableLanguagesString()}getCommentMods(e){const{activeCommentId:t,userId:s}=this.props;return{editing:e.id===t,own:e.author.id===s,type:e.type}}handleRedjudgedSubmissionClick(t){return()=>{if(!t)return;const s=e.getRunIdFromSubmission(t),{ref:n}=this.commentRefs[s];e.scrollToComment(n),this.props.onSubmissionClick(t)}}handleContestVerdictClick(e){return()=>{this.props.onContestVerdictClick(e)}}handleEditClick(e){return()=>{this.props.onEditClick(e)}}handleSubmissionClick(e){return t=>{t.preventDefault(),this.props.onSubmissionClick(e)}}isEveryCommentExpired(e,t){return e.every((e=>Ne.Ay.fromISO(e.addedTime)>t))}renderComment(t,s,n){const{id:r,submission:i,updateTime:o,author:u,isChanged:d}=t,m=Ne.Ay.fromISO(t.addedTime),p=this.props.deadline?Ne.Ay.fromISO(this.props.deadline):null,h=null!==p&&m>p,E=i&&this.commentRefs[e.getRunIdFromSubmission(i)],g=a.createElement(ve.CSSTransition,{key:r,timeout:500,classNames:"fade"},a.createElement("li",{ref:E&&E.ref,className:$b("comment",this.getCommentMods(t))},a.createElement(fe,{content:u.displayName},a.createElement(zi,{className:$b("user-icon"),avatarId:u.avatar,userId:u.id,alt:u.displayName,size:"s",tabIndex:-1,avatarReadable:!0})),a.createElement("div",{className:$b("comment-content")},this.commentRenderers[t.type](t,h,s),a.createElement("div",{className:$b("comment-date")},d&&"".concat(l.Ru.text({id:"comment-edited",keyset:"tasks"})).concat(c),Ne.Ay.fromISO(o).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))))));if(!p)return g;const y=n[s-1],f=0===s&&this.isEveryCommentExpired(n.slice(s),p)||y&&m>p&&Ne.Ay.fromISO(y.addedTime)<p;return a.createElement(a.Fragment,{key:r},f&&a.createElement("li",{key:"".concat(r,"-deadline"),className:$b("deadline")},a.createElement("span",{className:$b("deadline-inner")},l.Ru.text({id:"deadline-{date}",keyset:"solutions",params:{date:p.toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))}}))),g)}renderSubmissionInfo(e,t,s){const{selectedSubmission:n}=this.props;return a.createElement("span",{className:$b("file-wrapper")},a.createElement(u,{className:$b("file-link",{active:n&&n.id===e.id,"after-deadline":t}),href:e.file.url,title:e.file.name,onClick:this.handleSubmissionClick(e)},s),e.plagiarism&&a.createElement(Up,{compact:!0,plagiarism:e.plagiarism,size:"m"}))}render(){const{comments:e,listRef:t,onScroll:s}=this.props;return a.createElement("ul",{ref:t,className:$b("list"),onScroll:s},a.createElement(ve.TransitionGroup,{component:null},e.map(this.renderComment)))}},qb(Yb.prototype,"handleContestVerdictClick",[R.Q2],Object.getOwnPropertyDescriptor(Yb.prototype,"handleContestVerdictClick"),Yb.prototype),qb(Yb.prototype,"handleEditClick",[R.Q2],Object.getOwnPropertyDescriptor(Yb.prototype,"handleEditClick"),Yb.prototype),qb(Yb.prototype,"handleSubmissionClick",[R.Q2],Object.getOwnPropertyDescriptor(Yb.prototype,"handleSubmissionClick"),Yb.prototype),qb(Yb.prototype,"renderComment",[R.Q2],Object.getOwnPropertyDescriptor(Yb.prototype,"renderComment"),Yb.prototype),Yb);Xb.displayName="CommentsList";const ev=(0,o.Ng)((function(e,t){return{submissionsMap:Bb(e,t.solutionId),availableLanguages:(0,vl.kT)(e)}}))(Xb);var tv;function sv(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const nv=(0,$.cn)(Rb);let rv=(tv=class extends a.Component{constructor(){super(...arguments),this.state={hasScroll:!1,commentText:"",activeCommentId:null,verdictOfSubmission:null},this.formRef=(0,a.createRef)(),this.listRef=(0,a.createRef)(),this.triggerIndex=null,this.onTriggerIndexChange=e=>{this.triggerIndex=e}}componentDidMount(){const e=this.listRef.current;if(!e)return;const t=e.scrollHeight>e.clientHeight;t&&(e.scrollTop=e.scrollHeight),this.setState({hasScroll:t})}getSnapshotBeforeUpdate(e){const t=this.listRef.current;if(t)return e.comments.length<this.props.comments.length?t.scrollHeight-t.scrollTop:null}componentDidUpdate(e,t,s){this.fixScrollPosition(s),e.uploadStatus===Ot.L.PENDING&&this.props.uploadStatus===Ot.L.SUCCESS&&this.handleCommentTextReset()}render(){const{uploadStatus:e,comments:t,role:s,selectedSubmission:n,deadline:r,userId:i,solutionStatus:o,isContestIntegrated:c,onSelectSubmission:u,solutionId:d,p2pDeadlineExpired:m}=this.props,{commentText:p,activeCommentId:h,hasScroll:g,verdictOfSubmission:y}=this.state,f=this.props.readonly||![E.Student,E.Teacher].includes(s);return a.createElement("section",{className:nv({"has-scroll":g})},s===E.Student&&o&&a.createElement(Db,{solutionStatus:o,isContestIntegrated:c,disabled:m,title:m?l.Ru.text({id:"p2p-deadline-expired"}):""}),a.createElement("h2",{className:nv("title")},l.Ru.text({id:"solutions-history",keyset:"tasks"})),a.createElement(ev,{readonly:f,comments:t,solutionId:d,deadline:r,listRef:this.listRef,activeCommentId:h,selectedSubmission:n,userId:i,onEditClick:this.handleEditClick,onSubmissionClick:u,onContestVerdictClick:this.openSideblockWithLog,onScroll:this.updateScroll,onTriggerIndexChange:this.onTriggerIndexChange}),!f&&a.createElement(Qb,{ref:this.formRef,value:p,uploadStatus:e,isEditing:null!==h,onBlur:this.handleCommentTextBlur,onChange:this.handleCommentTextChange,onReset:this.handleCommentTextReset,onSubmit:this.handleCommentTextSubmit}),a.createElement(Ln,{sidebarType:l.Ru.text({id:"verdict",keyset:"submissions"}),visible:null!==y,onClose:this.closeSideblockWithLog},y&&a.createElement(pb,{submissionId:y.id})))}fixScrollPosition(e){const t=this.listRef.current;t&&null!==e&&(t.scrollTop=t.scrollHeight-e)}updateScroll(){const e=this.listRef.current;if(!e)return;const t=0!==e.scrollTop;this.state.hasScroll!==t&&this.setState({hasScroll:t})}handleEditClick(e){const t=this.formRef.current;t&&t.focus();let s=e.data;const n=new Map([[/<br ?\/?>/g,"\n"],[/&lt;/g,"<"],[/&gt;/g,">"]]);for(const[e,t]of n.entries())s=s.replace(e,t);this.setState({commentText:s,activeCommentId:e.id})}handleCommentTextBlur(){const{commentText:e}=this.state;e||this.setState({activeCommentId:null})}handleCommentTextChange(e){this.setState({commentText:e})}handleCommentTextReset(){const e=this.formRef.current;e&&e.focus(),this.setState({commentText:"",activeCommentId:null})}handleCommentTextSubmit(){const{commentText:e,activeCommentId:t}=this.state;null!==t?this.props.onEditComment(e,t):this.props.onAddComment(e)}openSideblockWithLog(e){const{comments:t}=this.props,s=t.findIndex((t=>t.id===e)),{verdictOfSubmission:n}=t[s];this.setState({verdictOfSubmission:n})}closeSideblockWithLog(){this.setState({verdictOfSubmission:null}),null!==this.triggerIndex&&document.querySelectorAll(".comments__comment-content")[this.triggerIndex].querySelector(".comments__show-log").focus()}},sv(tv.prototype,"updateScroll",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"updateScroll"),tv.prototype),sv(tv.prototype,"handleEditClick",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"handleEditClick"),tv.prototype),sv(tv.prototype,"handleCommentTextBlur",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"handleCommentTextBlur"),tv.prototype),sv(tv.prototype,"handleCommentTextChange",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"handleCommentTextChange"),tv.prototype),sv(tv.prototype,"handleCommentTextReset",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"handleCommentTextReset"),tv.prototype),sv(tv.prototype,"handleCommentTextSubmit",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"handleCommentTextSubmit"),tv.prototype),sv(tv.prototype,"openSideblockWithLog",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"openSideblockWithLog"),tv.prototype),sv(tv.prototype,"closeSideblockWithLog",[R.Q2],Object.getOwnPropertyDescriptor(tv.prototype,"closeSideblockWithLog"),tv.prototype),tv);rv.displayName="Comments";var av=s(78189);const iv="y0c473--actions-container",ov=["task","solution","nextTaskUrl"],lv=(0,_m.j)("slow-down-comments-polling")?3e5:1e4,cv=e=>{var t;let{task:s,nextTaskUrl:n,setIsModalOpened:r}=e;const o=(0,i.W6)(),c=(0,i.W5)(),u=(0,i.g)(),{groupId:d,courseId:m,lessonId:p}=u,h=M(),g=Boolean(s.solutionId),[y,f]=(0,a.useState)(!0),S=P(vl.PG),b=(0,a.useMemo)((()=>{var e,t;return null==(e=S.find((e=>e.id===s.id)))||null==(t=e.solution)?void 0:t.status.type}),[S,s.id]),v=P(Dy.AJ),N=P((e=>(0,Dy.GZ)(e,s.solutionId)));(0,a.useEffect)((()=>{g&&s.taskType===qe.wP.Other&&h((0,av.Ql)({solutionId:s.solutionId,groupId:Number(d),courseId:Number(m)}))}),[h,g,s.solutionId,s.taskType,d,m]);const I=P(Gb)[s.solutionId]||[];eb((()=>{g&&s.taskType===qe.wP.Other&&h((0,av.Ql)({solutionId:s.solutionId,groupId:Number(d),courseId:Number(m)}))}),P(Jb),I.length?lv:null);const k=(0,a.useCallback)((e=>{h((0,av.C6)({solutionId:s.solutionId,text:e}))}),[h,s.solutionId]),C=(0,a.useCallback)(((e,t)=>{h((0,av.T5)({solutionId:s.solutionId,commentId:t,text:e}))}),[h,s.solutionId]),w=P(Kb),A=P(T.F6),O=null!=(t=P(J))?t:{},R=(0,a.useCallback)((async()=>{if(s&&s.taskType===qe.wP.Material){f(!0);try{if(await(0,zt.Ay)("/api/proxy/student/tasks/".concat(s.id,"/material-read/?groupId=").concat(d),{method:"POST"}),h((0,cn.d3)({courseId:Number(m),groupId:Number(d),lessonId:Number(p)})),s.lesson.showEndOfLessonMessage){const e="/api/proxy/student/lessons/".concat(p,"/end_of_lesson_message/"),{showEndOfLessonMessage:t}=await(0,zt.Ay)(e);t?(f(!1),r(!0)):o.push(n||"..")}else o.push(n||"..")}catch(e){h((0,fn.z)({type:Sn.V.ERROR,text:e.code?l.Ru.text({id:e.code,keyset:"api-errors"}):l.Ru.text({id:"save-error-message"})})),f(!1)}}}),[s,d,h,m,p,n,o,r]);return(0,a.useEffect)((()=>{f(v===Ot.L.PENDING)}),[v]),!c||s.taskType===qe.wP.Problem&&!s.problem?null:s.taskType===qe.wP.Material?a.createElement("main",null,a.createElement(mf,{content:s.description}),a.createElement("div",{className:iv},y?a.createElement(he.t,{view:"default",progress:!0,size:"m"}):b!==Ye.gt.Accepted&&a.createElement(ge.$,{size:"l",theme:"action",view:"lyceum",onClick:R},l.Ru.text({id:"material-read",keyset:"tasks"})))):y?a.createElement("div",{className:iv},a.createElement(he.t,{progress:!0,size:"m"})):s.taskType===qe.wP.Problem&&s.problem?a.createElement(Ay,{key:s.id,answer:By,problem:s.problem,solution:N,problemLinkId:s.id,attemptsMax:s.maxAttempts,scoreMax:s.scoreMax,hasCorrectAnswers:!1,problemType:$p.yo.Task}):a.createElement(sb,{narrowLeft:!0,leftColumn:a.createElement(mf,{content:s.description}),rightColumn:a.createElement(rb,{all:!0,border:!0},a.createElement(rv,{userId:A,role:E.Student,solutionId:s.solutionId,deadline:s.deadline,isContestIntegrated:s.isContestIntegrated,solutionStatus:Ye.gt.New,readonly:!(null!=O&&O.studentCanWriteComments),p2pDeadlineExpired:!1,comments:I,uploadStatus:w,onAddComment:k,onEditComment:C,selectedSubmission:null,onSelectSubmission:()=>{}}))})},uv=e=>{let{task:t,solution:s,nextTaskUrl:n}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,ov);const o=M(),l=(0,i.W5)(),c=(0,a.useMemo)((()=>l.isExact&&Boolean(t.latestSubmission)&&t.taskType!==qe.wP.Material),[l.isExact,t.latestSubmission,t.taskType]),{groupId:u,courseId:d,lessonId:m}=(0,a.useMemo)((()=>Object.assign({},l.params)),[l]);if((0,a.useEffect)((()=>{c&&o((0,cn.d3)({groupId:Number(u),courseId:Number(d),lessonId:Number(m)}))}),[c,u,d,m,o]),c){const e="".concat(l.url,"/solutions/").concat(t.solutionId);return a.createElement(i.rd,{to:e.replace(/\/\//g,"/")})}return a.createElement(cv,Object.assign({task:t,solution:s,nextTaskUrl:n},r))};uv.displayName="StudentRootRoute";const dv=(0,_m.j)("slow-down-comments-polling")?3e5:1e4,mv=()=>{var e,t,s,n;const{taskId:r,solutionId:o,groupId:c,courseId:u}=(0,i.g)(),d=M(),m=P(Dy.fP)[o],p=P((0,vl.X)(Number(o))),h=P(vl.MX),g=P(Dy.uO),y=P(Dy.AJ),f=P(vl.kT)||void 0,S=P(vl.cS),[b,v]=(0,a.useState)(!1);!m||m.task.formulaParams&&0!==(null==(e=m.task.formulaParams)?void 0:e.length)||null==h||!h.formulaParams||(m.task.formulaParams=h.formulaParams),(0,a.useEffect)((()=>{(null==h?void 0:h.taskType)===qe.wP.Other&&d((0,xy.vv)({solutionId:Number(o),groupId:Number(c),courseId:Number(u)}))}),[d,o,c,u,null==h?void 0:h.taskType]);const N=P(Gb)[o]||[];eb((()=>{(null==h?void 0:h.taskType)===qe.wP.Other&&d((0,av.Ql)({solutionId:Number(o),groupId:Number(c),courseId:Number(u)}))}),P(Jb),dv);const I=(0,a.useCallback)((e=>{d((0,av.C6)({solutionId:Number(o),text:e}))}),[d,o]),k=(0,a.useCallback)(((e,t)=>{d((0,av.T5)({solutionId:Number(o),commentId:t,text:e}))}),[d,o]),C=(0,a.useCallback)((e=>{d((0,My.F)(e))}),[d]),w=(0,a.useCallback)((()=>{d((0,My.F)(null))}),[d]),A=(0,a.useCallback)((e=>{d((0,im.YH)(e))}),[d]),O=(0,a.useCallback)((e=>{d((0,im.YF)(e))}),[d]),R=P(Kb),_=P(Py.a),L=P(T.F6),x=P(J),D=P(Jb),F=(0,a.useMemo)((()=>Boolean(m&&m.task.isContestIntegrated&&f&&Object.keys(f).length>1)),[m,f]),z=Aa.c9.fromISO((null==_?void 0:_.file.addedTime)||"")<Aa.c9.fromISO((null==m||null==(t=m.latestSubmission)||null==(s=t.file)?void 0:s.addedTime)||""),j=null==(n=Ko.I.get(Zo.Z.SavedSolutions))?void 0:n[(null==m?void 0:m.id)||""],U=Jo()(null==j?void 0:j.code)&&!z||!Jo()(null==j?void 0:j.code)&&!_;return(0,a.useEffect)((()=>{v(!0)}),[]),a.createElement(nr,{fetchError:g,fetchStatus:y,renderError:e=>a.createElement(sm,null,e)},(null==h?void 0:h.taskType)===qe.wP.Problem&&h.problem?a.createElement(Ay,{answer:p,key:h.id,problem:h.problem,solution:m,problemLinkId:h.id,attemptsMax:h.maxAttempts,scoreMax:h.scoreMax,hasCorrectAnswers:!1,problemType:$p.yo.Task}):a.createElement(a.Fragment,null,(null==D?void 0:D.statusCode)===XS.BM&&a.createElement("div",{className:"ycf1d7--comments-warning"},l.Ru.text({id:"comments-warning",keyset:"tasks"})),m&&m.task.id===Number(r)&&a.createElement(sb,{leftColumn:a.createElement(rb,{topLeft:!0},m.latestSubmission?b&&a.createElement(Zp,{solution:m,submission:_,availableLanguages:f,onSubmissionSelect:C}):a.createElement(fm,{shouldSave:U,onCodeChange:A,onLanguageChange:O,isTestFinished:Boolean(S),availableLanguages:f,withLanguageSelect:F,resetSelectedSolution:w})),rightColumn:a.createElement(rb,{topRight:!0,border:!0},a.createElement(rv,{userId:L,role:E.Student,solutionId:m.id,solutionStatus:m.status.type,isContestIntegrated:m.task.isContestIntegrated,comments:N,deadline:m.deadline,readonly:!(null!=x&&x.studentCanWriteComments),selectedSubmission:_,uploadStatus:R,onAddComment:I,onEditComment:k,onSelectSubmission:C,p2pDeadlineExpired:m.p2pDeadlineExpired}))})))};mv.displayName="StudentSolutionIdRoute";const pv=e=>{let{task:t}=e;const s=(0,i.W5)(),n=(0,i.g)(),r=t.taskType===qe.wP.Material;return s?a.createElement(a.Fragment,null,t.description&&t.taskType===qe.wP.Other&&a.createElement(bS,{taskUrl:p.at.taskDetails.build(n),taskTitle:t.title,taskDescription:t.description,taskHasManualCheck:t.hasManualCheck,taskHasP2p:t.hasP2p}),a.createElement(i.dO,null,a.createElement(i.qh,{path:"".concat(s.path,"/:solutionId")},a.createElement(mv,null)),a.createElement(i.rd,{to:r?p.at.taskDetails.build(n):"".concat(s.url,"/").concat(t.solutionId)}))):null},hv=e=>{var t;let{task:s,nextTaskUrl:n,courseId:r,groupId:o,lessonId:c,taskId:u,setIsModalOpened:d,solution:m}=e;const[h,E]=(0,a.useState)(!1),y=null==m?void 0:m.status.type,f=null==s?void 0:s.solutionId,S=null!=(t=null==s?void 0:s.lesson)?t:{},b=function(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e})),t.current}(y),v=P(J),N=(0,i.W6)(),I=M(),T=(0,a.useCallback)((async e=>{const t="/api/proxy/student/lessons/".concat(c,"/end_of_lesson_message/");try{const{showEndOfLessonMessage:s}=await(0,zt.Ay)(t);s?d(!0):null==e||e()}catch(e){console.error(e)}}),[c,d]);(0,a.useEffect)((()=>{const e=y&&[Ye.gt.Accepted,Ye.gt.AcceptedAfterDeadline].includes(y),t=y&&!(null!=v&&v.waitForSolutionStatusAccepted)&&y===Ye.gt.Review&&((null==s?void 0:s.taskType)===qe.wP.Other||S.type===lc.nv.Test),n=y&&!(null!=v&&v.waitForSolutionStatusAccepted)&&y===Ye.gt.AutoReview,a=e||t||n;y&&b!==y&&(b&&(null==v?void 0:v.passType)===g.Conditional&&a&&I((0,cn.d3)({groupId:Number(o),courseId:Number(r),lessonId:Number(c)})),S.showEndOfLessonMessage&&[Ye.gt.Accepted,Ye.gt.AcceptedAfterDeadline].includes(y)&&T())}),[I,b,y,f,r,o,u,c,S.showEndOfLessonMessage,T,null==s?void 0:s.taskType,v,S.type]);const k=(0,a.useCallback)((async()=>{const e=()=>N.push(n||p.oi.lessonDetails.build({courseId:r,groupId:o,lessonId:c}));try{E(!0),await(0,zt.Em)(Ft.g.apiStudentTasksSkip.build({taskId:Number(u)},{group_id:Number(o)}),{method:"POST"}),I((0,cn.d3)({groupId:Number(o),courseId:Number(r),lessonId:Number(c)})),S.showEndOfLessonMessage?await T(e):e()}catch(e){console.error(e)}finally{E(!1)}}),[I,S.showEndOfLessonMessage,r,o,N,c,n,u,T]);return(0,a.useMemo)((()=>s&&s.isOptional?s.latestSubmission&&[void 0,Ye.gt.Accepted,Ye.gt.AcceptedAfterDeadline].includes(y)?null:a.createElement(ge.$,{size:"l",theme:"normal",view:"lyceum",onClick:k,disabled:h},l.Ru.text({id:"skip-task",keyset:"common"})):null),[h,k,y,s])},Ev=a.memo((e=>{var t;let{taskUrlBuilder:s,isModalOpened:n,setIsModalOpened:r}=e;const o=(0,i.W5)(),c=(0,i.g)(),u=(0,i.W5)("".concat(o.path,"/reviews/:reviewId")),{courseId:d,groupId:m,taskId:p,lessonId:h}=c,E=P(vl.uf),g=P(vl.sA),y=P(vl.MX),f=P((e=>null!=y&&y.solutionId?(0,Dy.GZ)(e,y.solutionId):null)),S=P((e=>V(e,Number(d),Number(m)))),b=P(vl.Kx)(Number(p)),v=M();let N;(0,a.useEffect)((()=>(v((0,cn.$G)({groupId:Number(m),taskId:Number(p)})),()=>{v((0,cn.BN)())})),[v,m,p]),(0,a.useEffect)((()=>{if((null==y?void 0:y.taskType)===qe.wP.Problem)return v((0,xy.vv)({solutionId:y.solutionId,groupId:Number(m),courseId:Number(d)})),()=>{v((0,xy.HZ)(y.solutionId))}}),[v,null==y?void 0:y.taskType,null==y?void 0:y.solutionId,m,d]),(0,a.useEffect)((()=>{if(null!=y&&y.solutionId&&(null==y?void 0:y.taskType)===qe.wP.Problem){const e=setInterval((()=>{v((0,xy.vv)({solutionId:Number(null==y?void 0:y.solutionId),groupId:Number(m),courseId:Number(d),shouldChangeFetchStatus:!1}))}),3e3);return()=>clearTimeout(e)}}),[y]);let I=null,T=null,k=!0;if(b){const{previousTask:e,nextTask:t}=b;I=e&&s(e.id),T=t&&s(t.id),k="disabled"!==(null==t?void 0:t.status)}S&&y&&(N=l.Ru.text({id:"task-details-student",keyset:"page-titles",params:{task:y.title,lesson:y.lesson.title,course:S.title}}));const C=(0,a.useCallback)((async()=>{const e="/api/proxy/student/lessons/".concat(h,"/end_of_lesson_message/");try{await(0,zt.Em)(e,{method:"POST"}),r(!1)}catch(e){console.error(e)}}),[h,r]);return o?a.createElement(nr,{fetchError:g,fetchStatus:E},a.createElement(tr.m,null,a.createElement("title",null,N),a.createElement("meta",{name:"title",content:N})),a.createElement(i.dO,null,a.createElement(i.qh,{path:"".concat(o.path,"/reviews/:reviewId?")}),a.createElement(i.qh,null,a.createElement(Wf,{leftArrowUrl:I,rightArrowUrl:k?T:null}))),y&&y.id===Number(p)&&a.createElement(a.Fragment,null,a.createElement($S,{isModalOpened:n,closeModal:C}),a.createElement(Gf,{taskTitle:y.title,hasManualCheck:y.hasManualCheck&&y.taskType===qe.wP.Other,hasP2p:y.hasP2p,taskInfo:y.taskType!==qe.wP.Material?a.createElement(uf,{taskDeadline:u?null:y.deadline,taskMaxScore:y.scoreMax,taskTag:y.tag,taskMaxAnswerLength:y.maxAnswerLength,hideScoreInformation:y.lesson.hideScoreInformation,currentAttempt:null==f?void 0:f.submissionsCount,maxAttempts:y.taskType===qe.wP.Other?null==f||null==(t=f.task)?void 0:t.maxAttempts:null}):null,headerAside:a.createElement(hv,{task:y,nextTaskUrl:T,courseId:d,groupId:m,lessonId:h,taskId:p,setIsModalOpened:r,solution:f})}),a.createElement(i.dO,null,a.createElement(i.qh,{exact:!0,path:"".concat(o.path,"/reviews/:reviewId")},a.createElement(YS,{task:y})),a.createElement(i.qh,{exact:!0,path:"".concat(o.path,"/solutions/:solutionId?")},a.createElement(pv,{task:y})),a.createElement(i.qh,{exact:!0,path:o.path},a.createElement(uv,{task:y,solution:f,nextTaskUrl:T,setIsModalOpened:r}))))):null})),gv=()=>{const e=(0,i.W5)(),{courseId:t,groupId:s,lessonId:n}=(0,i.g)(),r=(0,i.zy)().pathname.includes("reviews"),[o,c]=(0,a.useState)(!1),u=M();(0,a.useEffect)((()=>(u(kl.Uz.request({courseId:Number(t),groupId:Number(s)})),u((0,cn.d3)({courseId:Number(t),groupId:Number(s),lessonId:Number(n)})),()=>{u((0,cn.Ek)())})),[u,t,n,s]);const d=P(K),m=P(vl.wL),h=P(vl.uR),E=(0,a.useCallback)((t=>"".concat(e.url,"/").concat(t)),[e.url]);return e?a.createElement(nr,{fetchError:m,fetchStatus:d},h.length>0&&a.createElement(sr.P,{type:r?"wide":"narrow"},a.createElement(sr.P.ActiveArea,null,a.createElement(i.dO,null,a.createElement(i.qh,{path:"".concat(e.path,"/:taskId/reviews")}),a.createElement(i.qh,null,a.createElement(Qf,{taskGroups:h,urlData:{courseId:t,groupId:s,lessonId:n}})))),a.createElement(sr.P.Main,null,a.createElement(Rs,{back:!0,exact:!0,to:p.oi.lessonDetails.build({courseId:t,groupId:s,lessonId:n})},l.Ru.text({id:"lesson-TITLE",keyset:"tasks",params:{title:h[0].tasks&&h[0].tasks[0].lesson.shortTitle}})),a.createElement(i.dO,null,a.createElement(i.qh,{path:"".concat(e.path,"/:taskId")},a.createElement(Ev,{taskUrlBuilder:E,isModalOpened:o,setIsModalOpened:c})))))):null};gv.displayName="StudentTasksRoute";const yv=r().with("course-banners"),fv=()=>{const e=M(),{courseId:t,groupId:s}=(0,i.g)(),n=P(Y),r=(0,a.useCallback)((()=>{e((0,kl.BE)(Number(t)||void 0,Number(s)||void 0))}),[t,e,s]),o=(0,a.useCallback)((()=>{e((0,kl.N_)(Number(t)||void 0))}),[t,e]);return(0,ne.A)((()=>{r(),o()})),(0,Co.A)((()=>{r(),o()}),[t,s]),(0,wo.A)((()=>{e((0,kl.Re)()),e((0,kl.r9)())})),a.createElement("div",{className:yv()},n&&n.map((e=>a.createElement("div",{className:yv("banner"),key:e.id},a.createElement(Na.n,null,e.text)))))};fv.displayName="CourseBanners";const Sv=fv,bv=e=>{let{code:t,children:s}=e;return a.createElement(i.qh,{render:e=>{let{staticContext:n}=e;return n&&(n.statusCode=t),s}})};bv.displayName="Status";const vv=["code"],Nv=e=>{let{code:t}=e,s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,vv);return a.createElement(bv,{code:t},a.createElement(i.qh,s))};Nv.displayName="RouteWithStatus";const Iv=r().with("schedule-events");class Tv extends a.Component{render(){const{children:e,week:t}=this.props;return a.createElement("section",{className:Iv("week")},a.createElement("div",{className:Iv("week-index")},t+1),e)}}Tv.displayName="ScheduleEventsWeek";const kv=Tv;var Cv,wv=s(47920);function Av(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const Ov=r().with("schedule-events");let Rv=(Av((Cv=class extends a.Component{constructor(){super(...arguments),this.state={isEditPopupVisible:!1},this.editIconRef=(0,a.createRef)()}render(){const{readonlyMode:e,event:t,index:s,isEdited:n,isSelectedForSwap:r,isSwapInProgress:i,unassignedEvents:o}=this.props,{isEditPopupVisible:c}=this.state,u=Ne.Ay.fromISO(t.date)<Ne.Ay.local(),d=e||u,m=Ne.Ay.fromISO(t.date);return a.createElement("div",{className:Ov("event-description",{type:t.type,edited:n,passed:u,editing:c})},a.createElement("div",{className:Ov("event-datetime")},a.createElement("time",{className:Ov("event-date")},m.toLocaleString((0,Ne.km)("DateMedWithoutYear"))),a.createElement("time",{className:Ov("event-time")},m.toLocaleString((0,Ne.km)("TimeSimpleWithWeekday")))),a.createElement("div",{className:Ov("event")},a.createElement("div",{className:Ov("lesson-index")},s),d?a.createElement("div",{className:Ov("event-title",{type:t.type,readonly:d})},this.getEventTitle()):a.createElement(fe,{enabled:i,content:this.getSwapHint()},a.createElement("div",{className:Ov("event-title",{type:t.type,selected:r}),onClick:this.handleEventClick(t),role:"button",tabIndex:0,onKeyDown:by(this.handleEventClick(t))},this.getEventTitle()))),!d&&a.createElement(ge.$,{innerRef:this.editIconRef,className:Ov("edit-event"),size:"s",theme:"clear",view:"lyceum",checked:c,icon:e=>a.createElement(ie,{className:e,size:"m",type:"edit"}),onClick:t.type===wv.B.Skip?this.handleSkipReasonOpenClick:this.openEditPopup,"aria-label":l.Ru.text({keyset:"common",id:"edit"})}),a.createElement(pe.zD,{onClose:this.closeEditPopup,anchor:this.editIconRef,className:Ov("edit-popup"),target:"anchor",theme:"normal",visible:c},t.type===wv.B.Reserve&&o.map((e=>a.createElement(ge.$,{key:e.id,className:Ov("event-title",{type:e.type}),onClick:this.handleAssignClick(e)},e.title))),a.createElement(ge.$,{className:Ov("event-title",{type:"skip"}),onClick:this.handleSkipClick},l.Ru.text({id:"skip",keyset:"schedule"}))))}closeEditPopup(){this.setState({isEditPopupVisible:!1})}openEditPopup(){const{isSwapInProgress:e,onSwapCancel:t}=this.props;e&&t(),this.setState({isEditPopupVisible:!0})}handleSkipClick(){const{event:e,onSkip:t}=this.props;t(e),this.closeEditPopup()}handleEventClick(e){return()=>{const{isSwapAllowed:t,isSwapInProgress:s,onSwapStart:n,onSwapEnd:r}=this.props;s?t&&r(e):n(e)}}handleAssignClick(e){return()=>{const{event:t,onAssign:s}=this.props;s(e,t),this.closeEditPopup()}}handleSkipReasonOpenClick(){const{isSwapInProgress:e,event:t,onSkipReasonOpen:s,onSwapCancel:n}=this.props;e&&n(),s(t)}getEventTitle(){const{event:e}=this.props;switch(e.type){case wv.B.Elective:case wv.B.Lesson:case wv.B.Test:return e.title;case wv.B.Skip:return e.title||l.Ru.text({id:"skip",keyset:"schedule"});case wv.B.Reserve:return l.Ru.text({id:"reserve",keyset:"schedule"});default:return""}}getSwapHint(){const{isSwapAllowed:e}=this.props;return e?l.Ru.text({id:"swap-to-day-hint",keyset:"schedule"}):l.Ru.text({id:"swap-with-lesson-hint",keyset:"schedule"})}}).prototype,"closeEditPopup",[R.Q2],Object.getOwnPropertyDescriptor(Cv.prototype,"closeEditPopup"),Cv.prototype),Av(Cv.prototype,"openEditPopup",[R.Q2],Object.getOwnPropertyDescriptor(Cv.prototype,"openEditPopup"),Cv.prototype),Av(Cv.prototype,"handleSkipClick",[R.Q2],Object.getOwnPropertyDescriptor(Cv.prototype,"handleSkipClick"),Cv.prototype),Av(Cv.prototype,"handleEventClick",[R.Q2],Object.getOwnPropertyDescriptor(Cv.prototype,"handleEventClick"),Cv.prototype),Av(Cv.prototype,"handleAssignClick",[R.Q2],Object.getOwnPropertyDescriptor(Cv.prototype,"handleAssignClick"),Cv.prototype),Av(Cv.prototype,"handleSkipReasonOpenClick",[R.Q2],Object.getOwnPropertyDescriptor(Cv.prototype,"handleSkipReasonOpenClick"),Cv.prototype),Cv);Rv.displayName="ScheduleEventsEvent";const _v=Rv,Lv=r().with("schedule-events");class Mv extends a.Component{constructor(){super(...arguments),this.months=Ne.R2.months()}render(){const{children:e,month:t}=this.props,s=Gi(this.months[t-1]);return a.createElement("section",{className:Lv("month")},a.createElement($t.D,{smaller:!0,level:2,className:Lv("month-name")},s),e)}}Mv.displayName="ScheduleEventsMonth";const Pv=Mv,xv=r().with("schedule-events");class Dv extends a.Component{constructor(){super(...arguments),this.state={initialReason:this.props.initialReason,skipReason:this.props.initialReason||""},this.handleSkipReasonChange=e=>{const{value:t}=e.target;t.length<=255&&this.setState({skipReason:t})},this.handleSkipReasonCancel=()=>{const{onCancel:e}=this.props;this.setState({skipReason:""}),e()},this.handleSkipReasonSave=()=>{const{skipReason:e}=this.state,{onSave:t}=this.props;this.setState({skipReason:""}),t(e)}}static getDerivedStateFromProps(e,t){return t.initialReason!==e.initialReason?{initialReason:e.initialReason,skipReason:e.initialReason}:null}render(){const{visible:e}=this.props,{skipReason:t}=this.state;return a.createElement(jt.a,{theme:"normal",visible:e},a.createElement("div",{className:xv("skip-reason-modal")},a.createElement("div",{className:xv("skip-reason-modal-title")},l.Ru.text({id:"skip-reason",keyset:"schedule"})),a.createElement(qt,{size:"m",value:t,placeholder:l.Ru.text({id:"skip-reason",keyset:"schedule"}),onChange:this.handleSkipReasonChange}),a.createElement("div",{className:xv("skip-reason-modal-controls")},a.createElement(ge.$,{className:xv("skip-reason-control"),size:"m",theme:"pseudo",view:"lyceum",onClick:this.handleSkipReasonCancel},l.Ru.text({id:"cancel"})),a.createElement(ge.$,{className:xv("skip-reason-control"),size:"m",theme:"action",view:"lyceum",onClick:this.handleSkipReasonSave},l.Ru.text({id:"save"})))))}}Dv.displayName="ScheduleEventsSkipReasonModal";const Fv=Dv;var zv,jv=s(80974),Uv=s(83767);function Hv(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const Qv=r().with("schedule-events"),Vv={[wv.B.Lesson]:[wv.B.Reserve,wv.B.Elective,wv.B.Skip],[wv.B.Test]:[wv.B.Reserve,wv.B.Elective,wv.B.Skip],[wv.B.Reserve]:[wv.B.Lesson,wv.B.Test,wv.B.Reserve,wv.B.Elective,wv.B.Skip],[wv.B.Elective]:[wv.B.Lesson,wv.B.Test,wv.B.Reserve,wv.B.Elective,wv.B.Skip],[wv.B.Skip]:[wv.B.Lesson,wv.B.Test,wv.B.Reserve,wv.B.Elective,wv.B.Skip]};let Gv=(Hv((zv=class extends a.Component{constructor(){super(...arguments),this.state={eventToSwap:void 0,isSkipReasonModalVisible:!1,changingSkipReasonFor:void 0},this.rootRef=(0,a.createRef)()}componentDidMount(){window.addEventListener("click",this.handleOutsideClick),window.addEventListener("keydown",this.handleEscPress)}componentWillUnmount(){window.removeEventListener("click",this.handleOutsideClick),window.removeEventListener("keydown",this.handleEscPress)}render(){const{changingSkipReasonFor:e,eventToSwap:t,isSkipReasonModalVisible:s}=this.state,{cls:n,readonlyMode:r,events:i,editedEventsIds:o,unassignedEvents:l}=this.props,c=Boolean(t),u=function(e){return e.reduce(((e,t)=>{const s=Ne.Ay.fromISO(t.date),{year:n,month:r}=s,a=function(e){const t=Aa.c9.local(e.year,e.month,1);return Math.floor((e.day+t.weekday-2)/7)}(s);e[n]||(e[n]={}),e[n][r]||(e[n][r]={});const i=e[n][r];return i[a]||(i[a]=[]),i[a].push(t),e}),{})}(i),d=Object.keys(u).map(Number).sort(((e,t)=>e-t));return a.createElement("section",{ref:this.rootRef,className:(0,$.j)(n,Qv())},d.map((e=>{const s=u[e];return Object.keys(s).map((e=>{const n=s[e];return a.createElement(Pv,{key:e,month:Number(e)},Object.keys(n).map((e=>{const s=n[e];return a.createElement(kv,{key:e,week:Number(e)},s.map((e=>{const s=!!t&&t.id===e.id,n=this.hasIndex(e)?this.getLessonIndex(e.id):void 0,i=o.includes(e.id);return a.createElement(_v,{key:e.id,readonlyMode:r,event:e,index:n,isEdited:i,isSelectedForSwap:s,isSwapAllowed:t&&this.isSwapAllowed(t,e),isSwapInProgress:c,unassignedEvents:l,onAssign:this.handleAssign,onSkip:this.handleSkip,onSkipReasonOpen:this.handleSkipReasonOpen,onSwapCancel:this.handleSwapCancel,onSwapEnd:this.handleSwapEnd,onSwapStart:this.handleSwapStart})})))})))}))})),a.createElement(Fv,{initialReason:e&&e.title,visible:s,onCancel:this.handleSkipReasonCancel,onSave:this.handleSkipReasonSave}))}handleAssign(e,t){this.props.assignEvent(e.id,t.id)}handleSkip(e){this.props.skipEvent(e.id)}handleSwapStart(e){this.setState({eventToSwap:e})}handleSwapEnd(e){const{eventToSwap:t}=this.state;this.setState({eventToSwap:void 0}),t&&this.props.swapEvents(t.id,e.id)}handleSwapCancel(){this.setState({eventToSwap:void 0})}handleSkipReasonOpen(e){this.setState({changingSkipReasonFor:e,isSkipReasonModalVisible:!0})}handleSkipReasonCancel(){this.setState({changingSkipReasonFor:void 0,isSkipReasonModalVisible:!1})}handleSkipReasonSave(e){const{changingSkipReasonFor:t}=this.state;this.setState({changingSkipReasonFor:void 0,isSkipReasonModalVisible:!1}),t&&this.props.addSkipReason(t.id,e)}handleOutsideClick(e){let{target:t}=e;Boolean(this.state.eventToSwap)&&this.rootRef.current&&t&&!function(e,t){let s=e;do{if(s===t)return!0;s=s&&s.parentNode?s.parentNode:document}while(s!==document);return!1}(t,this.rootRef.current)&&this.handleSwapCancel()}handleEscPress(e){let{key:t}=e;Boolean(this.state.eventToSwap)&&"Escape"===t&&this.handleSwapCancel()}getLessonIndex(e){const{events:t}=this.props;return t.filter((e=>{let{type:t}=e;return t===wv.B.Lesson||t===wv.B.Test})).findIndex((t=>t.id===e))+1}hasIndex(e){return e.type===wv.B.Lesson||e.type===wv.B.Test}isSwapAllowed(e,t){if(this.props.isUserSuperuser)return!0;const s=this.props.events.findIndex((t=>t.id===e.id)),n=this.props.events.findIndex((e=>e.id===t.id));return 1===Math.abs(s-n)&&Vv[e.type].includes(t.type)}}).prototype,"handleAssign",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleAssign"),zv.prototype),Hv(zv.prototype,"handleSkip",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleSkip"),zv.prototype),Hv(zv.prototype,"handleSwapStart",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleSwapStart"),zv.prototype),Hv(zv.prototype,"handleSwapEnd",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleSwapEnd"),zv.prototype),Hv(zv.prototype,"handleSwapCancel",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleSwapCancel"),zv.prototype),Hv(zv.prototype,"handleSkipReasonOpen",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleSkipReasonOpen"),zv.prototype),Hv(zv.prototype,"handleSkipReasonCancel",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleSkipReasonCancel"),zv.prototype),Hv(zv.prototype,"handleSkipReasonSave",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleSkipReasonSave"),zv.prototype),Hv(zv.prototype,"handleOutsideClick",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleOutsideClick"),zv.prototype),Hv(zv.prototype,"handleEscPress",[R.Q2],Object.getOwnPropertyDescriptor(zv.prototype,"handleEscPress"),zv.prototype),zv);Gv.displayName="ScheduleEvents";const Bv=(0,o.Ng)((function(e){return{isUserSuperuser:(0,T.Y8)(e),events:(0,Uv.kQ)(e),editedEventsIds:(0,Uv.DQ)(e),unassignedEvents:(0,Uv.LT)(e)}}),(function(e){return(0,_.zH)({addSkipReason:jv.zE,assignEvent:jv.Uv,skipEvent:jv.Mg,swapEvents:jv.Bj},e)}))(Gv);var Wv=s(16854);const Jv=r().with("timepicker"),Kv=e=>"0".concat(e).slice(-2);class Zv extends a.Component{constructor(){super(...arguments),this.state=Object.assign({hours:"",minutes:""},this.parseDefaultValue()),this.minutesRef=(0,a.createRef)(),this.handleBlur=()=>{const{onChange:e}=this.props,{hours:t,minutes:s}=this.state,n=Ne.Ay.local().toFormat("ZZ");2===t.length&&2===s.length?e("".concat(t,":").concat(s).concat(n)):e()},this.handleHoursChange=e=>{const{value:t}=e.target;this.changeValue(t,{type:"hours",maxValue:23})},this.handleMinutesChange=e=>{const{value:t}=e.target;this.changeValue(t,{type:"minutes",maxValue:59})},this.changeValue=(e,t)=>{const{type:s}=t;e||this.setValue(s,e),this.isValueValid(e,t)&&this.setValue(s,e)},this.setValue=(e,t)=>{"hours"===e?this.setState({hours:t},this.continueEditing(e)):this.setState({minutes:t},this.continueEditing(e))},this.continueEditing=e=>()=>{this.minutesRef.current&&("hours"===e?2===this.state.hours.length&&this.minutesRef.current.focus():2===this.state.minutes.length&&this.minutesRef.current.blur())},this.isValueValid=(e,t)=>{let{maxValue:s,minValue:n=0}=t;return/^\d+$/.test(e)&&Number(e)>=n&&Number(e)<=s&&e.length<=s.toString().length}}parseDefaultValue(){const{defaultValue:e}=this.props;if(!e)return{};const t=Ne.Ay.fromISO(e);return t.invalidReason?(Wv.W.captureException(new Error('defaultValue should be in "HH:mm+ZZ" format')),{}):{hours:Kv(t.hour.toString()),minutes:Kv(t.minute.toString())}}render(){const{borderless:e,disabled:t}=this.props,{hours:s,minutes:n}=this.state;return a.createElement("div",{className:Jv({borderless:e})},a.createElement("input",{className:Jv("hours"),disabled:t,placeholder:"--",value:s,onBlur:this.handleBlur,onChange:this.handleHoursChange}),a.createElement("span",{className:Jv("colon")},":"),a.createElement("input",{ref:this.minutesRef,className:Jv("minutes"),disabled:t,placeholder:"--",value:n,onBlur:this.handleBlur,onChange:this.handleMinutesChange}))}}Zv.displayName="Timepicker";const Yv=Zv;var qv;function $v(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const Xv=r().with("schedule-plan-form");let eN=(qv=class extends a.Component{constructor(){super(...arguments),this.state=this.getInitialState()}static getDerivedStateFromProps(e,t){return Cl(t.initialValue,e.plan)?{changedDays:e.plan,initialValue:e.plan}:null}getInitialState(){return{isModalOpened:!1,isFormChanged:!1,changedDays:this.props.plan,initialValue:this.props.plan}}handleTimeChange(e){return t=>{this.setState((s=>{const n=Object.assign({},s.changedDays);return t?n[e]=t:delete n[e],{changedDays:n,isFormChanged:!0}}))}}handleGeneratePlan(){const{studyPeriodId:e,groupId:t}=this.props,{changedDays:s,initialValue:n}=this.state;this.setState({isFormChanged:!1}),n&&!Object.keys(n).length?this.props.generateSchedule({studyPeriodId:e,groupId:t,plan:s}):this.props.updateStudyPlan({studyPeriodId:e,groupId:t,plan:s}),this.closeModal()}openModal(e){e.preventDefault(),this.setState({isModalOpened:!0})}closeModal(){this.setState({isModalOpened:!1})}renderFormState(e){const{generateError:t}=this.props,{isFormChanged:s}=this.state;return t&&!s?a.createElement("span",{className:Xv("error")},l.Ru.text({id:t.code,keyset:"api-errors"})):a.createElement(a.Fragment,null,0!==e&&a.createElement("span",{className:Xv("days-left")},e>0?l.Ru.text({id:"template-days-left",keyset:"schedule",params:{count:e}}):l.Ru.text({id:"template-days-overflow",keyset:"schedule",params:{count:Math.abs(e)}})))}render(){const{cls:e,generateStatus:t,readonlyMode:s,lessonsPerWeek:n}=this.props,{isModalOpened:r,changedDays:i}=this.state,o=Object.keys(i).length,c=n-o;return a.createElement(a.Fragment,null,a.createElement("form",{className:(0,$.j)(e,Xv({readonly:s})),onSubmit:this.openModal},a.createElement("fieldset",{className:Xv("fieldset")},a.createElement("legend",{className:Xv("title")},l.Ru.text({id:"template-title",keyset:"schedule"})),a.createElement("div",{className:Xv("days")},[1,2,3,4,5,6,7].map((e=>{const t=Boolean(i[e]),r=!t&&o===n||s;return a.createElement("div",{key:e,className:Xv("day",{changed:t,disabled:r})},a.createElement("div",{className:Xv("day-name")},(0,Ne.Ud)(e)),a.createElement(Yv,{key:i[e],borderless:!0,disabled:r,defaultValue:i[e],onChange:this.handleTimeChange(e)}))})))),a.createElement("div",{className:Xv("submit")},a.createElement(ge.$,{size:"l",view:"lyceum",type:"submit",theme:"action",disabled:0!==c||s,progress:t===Ot.L.PENDING},l.Ru.text({id:"save"})),this.renderFormState(c))),a.createElement(tn,{visible:r,title:l.Ru.text({id:"study-plan-dialog-title",keyset:"schedule"}),okText:l.Ru.text({id:"study-plan-dialog-ok",keyset:"schedule"}),cancelText:l.Ru.text({id:"study-plan-dialog-cancel",keyset:"schedule"}),content:l.Ru.text({id:"study-plan-dialog-content",keyset:"schedule",params:{plan:(u=i,[1,2,3,4,5,6,7].reduce(((e,t)=>{if(!u[t])return e;const s=Ne.Ay.fromISO(u[t]).set({weekday:t%7});return[...e,Gi("".concat(s.toFormat("ccc")," ").concat(s.toLocaleString((0,Ne.km)("TimeSimple"))))]}),[]).join(", "))}}),onOkClick:this.handleGeneratePlan,onCancelClick:this.closeModal,onCloseClick:this.closeModal}));var u}},$v(qv.prototype,"handleGeneratePlan",[R.Q2],Object.getOwnPropertyDescriptor(qv.prototype,"handleGeneratePlan"),qv.prototype),$v(qv.prototype,"openModal",[R.Q2],Object.getOwnPropertyDescriptor(qv.prototype,"openModal"),qv.prototype),$v(qv.prototype,"closeModal",[R.Q2],Object.getOwnPropertyDescriptor(qv.prototype,"closeModal"),qv.prototype),qv);eN.displayName="SchedulePlanForm";const tN=(0,o.Ng)((function(e){const t=(0,Uv.TK)(e);return{plan:t?(s=t,s.items.reduce(((e,t)=>{let{dayOfWeek:s,startTime:n}=t;return e[s]=n,e}),{})):{},generateError:(0,Uv.pK)(e),generateStatus:(0,Uv.DM)(e)};var s}),(function(e){return(0,_.zH)({generateSchedule:jv.x1,updateStudyPlan:jv.G$},e)}))(eN);var sN;function nN(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const rN=r().with("course-schedule");let aN=(sN=class extends a.Component{constructor(){super(...arguments),this.state={isEditingPlan:!1}}static getDerivedStateFromProps(e,t){return t.isEditingPlan&&e.generateStatus===Ot.L.SUCCESS?{isEditingPlan:!1}:null}render(){const{pageLoadStatus:e,pageLoadError:t}=this.props;return a.createElement("article",{className:rN()},a.createElement(nr,{fetchError:t,fetchStatus:e,renderSuccess:this.renderPageContent,renderError:this.renderError}))}renderError(){const{course:e,group:t,role:s}=this.props;let n;return e&&(n=l.Ru.text({id:s===E.Student?"course-schedule-student":"course-schedule-teacher",keyset:"page-titles",params:{course:e.title,group:t.name}})),a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,n),a.createElement("meta",{name:"title",content:n})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Top,null,a.createElement("div",{className:rN("error-wrapper")},a.createElement("p",{className:rN("error-message")},l.Ru.text({id:"404_study_period_not_found",keyset:"api-errors"}))))))}renderPageContent(){const{scheduleLoadError:e,scheduleLoadStatus:t,course:s,group:n,role:r,needGenerate:i}=this.props,o=this.isReadonly();let c;return s&&(c=l.Ru.text({id:r===E.Student?"course-schedule-student":"course-schedule-teacher",keyset:"page-titles",params:{course:s.title,group:n.name}})),a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,c),a.createElement("meta",{name:"title",content:c})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Top,null,this.renderHeader(),this.shouldShowScheduleNotCreatedStudent()&&a.createElement("p",{className:rN("message")},l.Ru.text({id:"schedule-not-created-student",keyset:"schedule"})),!this.shouldShowScheduleNotCreatedStudent()&&this.renderPlan(o)),a.createElement(nr,{fetchError:e,fetchStatus:t,renderSuccess:this.renderMain})))}isReadonly(){const{role:e}=this.props;return e!==E.Teacher}shouldShowScheduleNotCreatedStudent(){const{role:e,needGenerate:t}=this.props;return t&&e===E.Student}renderMain(){const{hasSchedule:e,isScheduleEdited:t,unassignedEvents:s}=this.props,n=this.isReadonly();return this.shouldShowScheduleNotCreatedStudent()?null:a.createElement(a.Fragment,null,a.createElement(sr.A.Main,null,e&&a.createElement(Bv,{cls:rN("events"),readonlyMode:n}),!n&&e&&t&&this.renderChangeActions()),s.length>0&&this.props.role!==E.Student&&a.createElement(sr.A.Aside,null,this.renderUnassignedEvents()))}renderHeader(){const{hasSchedule:e,needGenerate:t,role:s}=this.props;return a.createElement("header",{className:rN("header")},a.createElement($t.D,{level:1},l.Ru.text({id:"schedule",keyset:"schedule"})),t&&s!==E.Student&&a.createElement("sub",{className:rN("announcement")},e?l.Ru.text({id:"need-regenerate",keyset:"schedule"}):l.Ru.text({id:"need-generate",keyset:"schedule"})),this.renderTabs())}renderTabs(){const{course:e,group:t}=this.props;return e&&a.createElement("nav",{className:rN("period-nav")},a.createElement("ul",{className:rN("period-tabs")},e.studyPeriods.map((s=>a.createElement("li",{key:s.id,className:rN("period-tabs-item")},a.createElement(Rs,{key:s.id,className:rN("period-tab"),isActive:this.checkIsTabActive(s.id),to:F.courseSchedule.build({courseId:e.id.toString(),groupId:t.id.toString()},{studyPeriod:s.id})},s.name))))))}checkIsTabActive(e){return()=>{const{currentStudyPeriod:t}=this.props;return!!t&&e===t.id}}renderPlan(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{isUserSuperuser:t,group:s,actualSchedulePlan:n,futureSchedulePlan:r,hasSchedule:i,needGenerate:o,currentStudyPeriod:c}=this.props,{isEditingPlan:u}=this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:rN("plan")},i&&a.createElement(a.Fragment,null,a.createElement("div",{className:rN("plan-description")},n&&l.Ru.text({id:"plan-description",keyset:"schedule",params:{plan:Bi(n)}}),!e&&!o&&a.createElement(ge.$,{className:rN("edit-plan"),theme:"clear",size:"xs",view:"lyceum",checked:u,icon:e=>a.createElement(ie,{className:e,size:"m",type:"edit"}),onClick:this.handleEditPlanClick,"aria-label":l.Ru.text({keyset:"common",id:"edit"})})),a.createElement("div",{className:rN("future-plan-description")},r&&l.Ru.text({id:"future-plan-description",keyset:"schedule",params:{startDate:Ne.Ay.fromISO(r.startDate).toLocaleString((0,Ne.km)("DateFullWithoutYear")),plan:Bi(r)}}))),!e&&(u||o)&&c&&a.createElement(tN,{key:c.id,cls:rN("plan-form"),groupId:s.id,studyPeriodId:c.id,lessonsPerWeek:c.lessonsPerWeek,readonlyMode:i&&!t})))}renderUnassignedEvents(){const{unassignedEvents:e}=this.props;return a.createElement("section",{className:rN("unassigned-events")},a.createElement($t.D,{smaller:!0,smallerOnDesktop:!0,level:2,className:rN("unassigned-events-heading")},l.Ru.text({id:"elective-themes",keyset:"schedule"})),a.createElement("ul",{className:rN("unassigned-events-list")},e.map((e=>a.createElement("li",{key:e.id,className:rN("unassigned-event")},e.title)))))}renderChangeActions(){const{saveStatus:e,cancelChanges:t}=this.props;return a.createElement("div",{className:rN("change-actions")},a.createElement(ge.$,{className:rN("change-action"),size:"l",view:"lyceum",theme:"action",progress:e===Ot.L.PENDING,onClick:this.handleSaveSchedule},l.Ru.text({id:"save"})),a.createElement(ge.$,{className:rN("change-action"),size:"l",view:"lyceum",theme:"action",onClick:t},l.Ru.text({id:"cancel-changes",keyset:"schedule"})))}handleEditPlanClick(){this.props.resetScheduleGenerator(),this.setState((e=>({isEditingPlan:!e.isEditingPlan})))}handleSaveSchedule(){const{group:e,currentStudyPeriod:t}=this.props;null!==t&&this.props.saveSchedule({groupId:e.id,studyPeriodId:t.id})}},nN(sN.prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(sN.prototype,"renderError"),sN.prototype),nN(sN.prototype,"renderPageContent",[R.Q2],Object.getOwnPropertyDescriptor(sN.prototype,"renderPageContent"),sN.prototype),nN(sN.prototype,"renderMain",[R.Q2],Object.getOwnPropertyDescriptor(sN.prototype,"renderMain"),sN.prototype),nN(sN.prototype,"handleEditPlanClick",[R.Q2],Object.getOwnPropertyDescriptor(sN.prototype,"handleEditPlanClick"),sN.prototype),nN(sN.prototype,"handleSaveSchedule",[R.Q2],Object.getOwnPropertyDescriptor(sN.prototype,"handleSaveSchedule"),sN.prototype),sN);aN.displayName="CourseSchedule";const iN=aN,oN=e=>t=>{const{courseId:s,groupId:n}=t.match.params;return a.createElement(Al,{courseId:s,groupId:n},(s=>{let{fetchError:n,fetchStatus:r}=s;return a.createElement(rr,{fetchError:n,fetchStatus:r,renderSuccess:()=>a.createElement(e,t)})}))};class lN extends a.Component{componentDidMount(){const{match:e,pageLoadStatus:t}=this.props,{groupId:s,courseId:n}=e.params,r=cN(this.props.location.search);this.redirectToStudyPeriod(r),t!==Ot.L.SUCCESS&&this.props.loadPageData({courseId:Number(n),groupId:Number(s),studyPeriodId:r})}componentDidUpdate(e){const{groupId:t,courseId:s}=this.props.match.params,n=cN(this.props.location.search);this.redirectToStudyPeriod(n),n&&e.currentStudyPeriod&&e.currentStudyPeriod.id!==n&&this.props.pageLoadStatus!==Ot.L.PENDING&&this.props.changeStudyPeriod({courseId:Number(s),groupId:Number(t),studyPeriodId:n})}componentWillUnmount(){this.props.clearSchedule()}redirectToStudyPeriod(e){const{history:t,location:s,currentStudyPeriod:n}=this.props;n&&void 0===e&&t.replace(Object.assign({},s,{search:Qs.stringify({studyPeriod:n.id})}))}render(){var e;return a.createElement(iN,Object.assign({key:null==(e=this.props.currentStudyPeriod)?void 0:e.id},this.props))}}function cN(e){const{studyPeriod:t}=Qs.parse(e.slice(1));return t?Number(Array.isArray(t)?t[0]:t):void 0}lN.displayName="CourseScheduleContainer";const uN=$r(oN(er((0,o.Ng)((function(e,t){const{groupId:s}=t.match.params;return{isUserSuperuser:(0,T.Y8)(e),course:(0,Uv.qW)(e),group:Qc(e,s),currentStudyPeriod:(0,Uv.Ih)(e),hasSchedule:(0,Uv.kw)(e),needGenerate:(0,Uv.Bl)(e),isScheduleEdited:(0,Uv.LX)(e),unassignedEvents:(0,Uv.LT)(e),actualSchedulePlan:(0,Uv.TK)(e),futureSchedulePlan:(0,Uv.Qo)(e),pageLoadError:(0,Uv.yp)(e),pageLoadStatus:(0,Uv.Mi)(e),scheduleLoadError:(0,Uv.sD)(e),scheduleLoadStatus:(0,Uv.AD)(e),saveStatus:(0,Uv.LV)(e),generateStatus:(0,Uv.DM)(e)}}),(function(e,t){const{role:s}=t;let n,r;return s===E.Student?(n=jv.D9,r=jv.iV):(n=jv.SB,r=jv.Bd),(0,_.zH)({loadPageData:n,changeStudyPeriod:r,clearSchedule:jv.ZJ,saveSchedule:jv.n7,cancelChanges:jv.IN,resetScheduleGenerator:jv._p},e)}))(lN))));var dN=s(88998);function mN(e){const{maxRating:t,maxBonusScore:s,useBonusScore:n,students:r}=e.studentCourseProgress;return{maxRating:t,maxBonusScore:s,useBonusScore:n,students:r}}const pN=r().with("left-progress-table"),hN=e=>{let{activeRow:t,rowControl:s,headings:n,rows:r}=e;return a.createElement("table",{className:pN()},a.createElement("thead",{className:pN("head")},a.createElement("tr",null,a.createElement("div",{className:pN("head-space-cont")},a.createElement("div",{className:pN("head-space")})),n.map(((e,t)=>{const[s,n]=e;return a.createElement("th",{key:t,className:pN("cell",{type:"head"})},a.createElement("div",{className:pN("column-heading")},s),n)})))),a.createElement("tbody",null,r.map(((e,n)=>{const r=t===n+1;return a.createElement("tr",{key:n,"data-index":n+1,className:pN("row",{active:r})},a.createElement("td",{className:pN("cell",{type:"body"})},a.createElement("div",{className:pN("row-control")},s?s({isActive:r,rowIndex:n}):n+1)),e.map(((e,t)=>a.createElement("td",{key:t,className:pN("cell",{type:"body"})},e))))}))))};hN.displayName="LeftProgressTable";const EN=r().with("right-progress-table"),gN=e=>{let{activeRow:t,headings:s,rows:n}=e;return a.createElement("table",{className:EN()},a.createElement("thead",{className:EN("head")},a.createElement("tr",null,s.map(((e,t)=>a.createElement("th",{key:t,className:EN("cell")},e))))),a.createElement("tbody",{className:EN("body")},n.map(((e,s)=>a.createElement("tr",{key:s,"data-index":s+1,className:EN("row",{active:t===s+1})},e.map(((e,t)=>a.createElement("td",{key:t,className:EN("cell")},e))))))))};gN.displayName="Table";const yN=gN,fN=r().with("progress-table"),SN=e=>{let{leftTableRows:t,leftTableHeadings:s,rightTableHeadings:n,rightTableRows:r,rowControl:i}=e;const[o,l]=a.useState(0),c=()=>{l(0)},u=e=>{const t=e.target.closest("tr");if(!t)return;const s=t.dataset.index;s?l(Number(s)):c()},d=a.useRef(null),{hasRightShadow:m,hasBottomShadow:p,handleScroll:h}=(e=>{const[t,s]=a.useState(!1),[n,r]=a.useState(!1),i=()=>{(e=>{let{isRightShadow:a,isBottomShadow:i}=e;t!==a&&s(a),n!==i&&r(i)})((e=>{if(!e.current)return{isRightShadow:!1,isBottomShadow:!1};const{clientWidth:t,scrollWidth:s,scrollLeft:n}=e.current,{clientHeight:r,scrollHeight:a,scrollTop:i}=e.current,o=t===s,l=r===a,c=t+n-s,u=Math.abs(c)<5,d=!o&&!u,m=r+i-a,p=Math.abs(m)<5;return{isRightShadow:d,isBottomShadow:!l&&!p}})(e))};return a.useEffect(i,[]),{hasRightShadow:t,hasBottomShadow:n,handleScroll:i}})(d);return a.createElement("div",{className:fN("shadows",{"has-right-shadow":m,"has-bottom-shadow":p})},a.createElement("div",{className:fN(),onMouseOver:u,onMouseLeave:c,onFocus:u,onBlur:c,onScroll:h,ref:d},a.createElement("div",{className:fN("left")},a.createElement(hN,{rowControl:i,activeRow:o,headings:s,rows:t})),n&&r&&a.createElement("div",{className:fN("right")},a.createElement(yN,{activeRow:o,headings:n,rows:r}))))};SN.displayName="Table";const bN=SN,vN=r().with("student-progress-table"),NN=e=>{let{courseProgress:t}=e;const s=t.students.reduce(((e,t)=>{let{id:s,avatar:n,displayName:r,place:a,rating:i}=t;const o=(e=>e[0]!==e[1]?"".concat(e[0]," - ").concat(e[1]):e[0].toString())(a);var l;return e.has(o)?null==(l=e.get(o))||l.students.push({id:s,avatar:n,displayName:r}):e.set(o,{place:o,rating:i,students:[{id:s,avatar:n,displayName:r}]}),e}),new Map),n=(r=s,Array.from(r.values()));var r;return t.students.length?a.createElement("div",{className:vN()},a.createElement(bN,{rowControl:e=>{let{rowIndex:t}=e;return a.createElement("div",{className:vN("place")},n[t].place)},leftTableHeadings:(()=>{const{maxRating:e}=t;return[[l.Ru.text({id:"students",keyset:"progress"}),t.students.length],[l.Ru.text({id:"students-rating",keyset:"progress"}),l.Ru.element({id:"students-max-rating",keyset:"progress",params:{rating:a.createElement("b",null,e)}})]]})(),leftTableRows:n.map((e=>[a.createElement("div",{className:vN("students-wrapper")},e.students.map((e=>{let{id:t,avatar:s,displayName:n}=e;return a.createElement(am,{className:vN("student"),avatar:s,key:t,displayName:n})}))),a.createElement("b",{className:vN("rating")},e.rating)]))})):a.createElement(a.Fragment,null,l.Ru.text({id:"no-students",keyset:"progress"}))};NN.displayName="StudentProgressTable";const IN=e=>{let{courseId:t,groupId:s,fetchCourseStudentProgress:n,clearCourseStudentProgress:r,courseStudentProgress:i,fetchError:o,fetchStatus:l}=e;return(0,a.useEffect)((()=>(n({courseId:Number(t),groupId:Number(s)}),()=>{r()})),[r,t,n,s]),a.createElement(rr,{fetchError:o,fetchStatus:l},a.createElement(NN,{courseProgress:i}))};IN.displayName="CourseProgressTableContainer";const TN=(0,o.Ng)((function(e){const{fetchStatus:t,fetchError:s}=e.studentCourseProgress;return{courseStudentProgress:mN(e),fetchStatus:t,fetchError:s}}),(function(e){return(0,_.zH)({clearCourseStudentProgress:dN.T9,fetchCourseStudentProgress:dN._H},e)}))(IN),kN=r().with("course-progress"),CN=e=>{let{course:t,group:s}=e;if(!t||!s)throw new d.dH("Course or group are missing",{courseId:null==t?void 0:t.id,groupId:null==s?void 0:s.id});const n=l.Ru.text({id:"course-progress-student",keyset:"page-titles",params:{course:t.title,group:s.name}});return a.createElement("article",{className:kN()},a.createElement(tr.m,null,a.createElement("title",null,n),a.createElement("meta",{name:"title",content:n})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement($t.D,{level:1},l.Ru.text({id:"course-progress",keyset:"courses"})),a.createElement(TN,{courseId:t.id.toString(),groupId:s.id.toString()}))))};CN.displayName="CourseProgress";const wN=$r((0,o.Ng)((function(e,t){const{params:s}=t.match;return{course:V(e,Number(s.courseId),Number(s.groupId)),group:Qc(e,s.groupId)}}))(CN)),AN=$r((()=>a.createElement(a.Fragment,null,a.createElement(Sv,null),a.createElement(i.dO,null,a.createElement(i.qh,{exact:!0,component:wN,path:p.at.courseProgress.template}),a.createElement(i.qh,{exact:!0,component:uN,path:F.courseSchedule.template}),a.createElement(i.qh,{exact:!0,component:Hl,path:p.oi.courseDetails.template}),a.createElement(i.qh,{exact:!0,component:xc,path:p.oi.lessonDetails.template}),a.createElement(i.qh,{exact:!0,component:sS,path:p.at.lessonProblem.template}),a.createElement(i.qh,{component:Gc,path:p.oi.lessonMaterial.template}),a.createElement(i.qh,{path:p.at.lessonTasks.template},a.createElement(gv,null)),a.createElement(i.qh,{exact:!0,component:Of,path:p.at.courseTasks.template}),a.createElement(i.qh,{exact:!0,component:Uf,path:p.at.courseReviews.template}),a.createElement(Nv,{code:XS.dJ,component:_s.wO}))))),ON=r().with("lessons-dashboard"),RN=e=>{let{fetchStatus:t,fetchError:s,courseId:n,groupId:r,role:i,fetchTeacherLessonsAction:o,setListFilterAction:c,clearLessonsAction:u,lessons:d,lessonFilter:m}=e;(0,a.useEffect)((()=>(o({courseId:Number(n),groupId:Number(r)}),()=>{u()})),[u,n,o,r]);const p=(0,a.useCallback)((e=>{const t=e.target.checked?lc.rY.ShowPublished:lc.rY.ShowAll;c({filter:t,groupId:Number(r)})}),[r,c]);return a.createElement("section",{className:ON()},a.createElement($t.D,{level:2,controls:a.createElement(uu,{cls:ON("checkbox"),size:"m",checked:m===lc.rY.ShowPublished,onChange:p},l.Ru.text({id:"hide-unpublished",keyset:"lessons"}))},l.Ru.text({id:"lessons"})),a.createElement(Xo,{fetchStatus:t,fetchError:s,courseId:n,groupId:r,role:i,lessons:d}))};RN.displayName="LessonsDashboardWrapper";const _N=(0,o.Ng)((function(e){return{lessons:(0,tl.XX)(e),lessonFilter:(0,tl.HF)(e),fetchStatus:(0,tl.Bn)(e),fetchError:(0,tl.FW)(e)}}),(function(e){return(0,_.zH)({fetchTeacherLessonsAction:el.CA.request,setListFilterAction:el.FG,clearLessonsAction:el.rc},e)}))(RN),LN=r().with("solutions-dashboard");class MN extends a.Component{render(){const{student:e,status:t,score:s,task:n,updateTime:r,sentAfterDeadline:i,hasActivityAfterDeadline:o}=this.props,{lesson:c}=n,u=null!=c&&c.deadline?Ne.Ay.fromISO(c.deadline):null;return a.createElement(am,{size:"m",className:LN("item",{expired:i}),avatar:e.avatar,status:e.status,renderDisplayName:r=>{let{className:i}=r;return a.createElement("div",{className:LN("student-info")},a.createElement("span",{className:(0,$.j)(LN("student-name"),i),title:e.displayName},e.displayName),a.createElement("span",{className:LN("status")},a.createElement(hl,{type:t.type,score:s,scoreMax:n.scoreMax,hideScoreInformation:"material"===n.taskType})))},addonAfter:a.createElement(a.Fragment,null,a.createElement("div",{className:LN("task-title"),title:n.title},n.title,n.hasManualCheck&&n.taskType===qe.wP.Other&&a.createElement(Ze,{cls:LN("task-check-info"),ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),n.hasP2p&&a.createElement(Ze,{cls:LN("task-check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"}))),a.createElement("div",{className:LN("info")},a.createElement("div",{className:LN("lesson")},u&&a.createElement("span",{className:LN("lesson-indicator")},a.createElement(We,{size:"small",type:u>Ne.Ay.local()?Qe.InProgress:Qe.Finished})),a.createElement("span",{className:LN("lesson-title"),title:null==c?void 0:c.title},null==c?void 0:c.title)),a.createElement("div",{className:LN("update-time")},Ne.Ay.fromISO(r).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")),o&&a.createElement(ie,{className:LN("deadline-marker"),type:"clock",size:"xs"}))))})}}MN.displayName="SolutionsDashboardItem";const PN=MN;var xN;const DN=r().with("solutions-dashboard");let FN=(xN=class extends a.Component{render(){const{courseId:e,groupId:t,solutions:s}=this.props;return a.createElement(ol,{body:this.renderBody(),tabName:s.length?l.Ru.text({id:"all-solutions",keyset:"solutions"}):"",tabUrl:p.ZZ.courseSolutions.build({courseId:e,groupId:t}),title:l.Ru.text({id:"solutions",keyset:"solutions"})})}renderBody(){const{fetchError:e,fetchStatus:t}=this.props;return a.createElement("div",{className:DN()},a.createElement(rr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderSolutionList,renderError:this.renderError}))}renderSpin(){return a.createElement("div",{className:DN("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"s"}))}renderError(e){return a.createElement("p",{className:DN("placeholder",{error:!0})},e)}renderSolutionList(){const{solutions:e,courseId:t,groupId:s}=this.props;if(0===e.length)return this.renderEmptyListMessage();const n=e.map((e=>{var n,r;return{id:e.id,component:a.createElement(PN,e),url:null!=(n=e.task)&&n.lesson?p.ZZ.taskSolutions.build({courseId:t,groupId:s,lessonId:(null==(r=e.task.lesson)?void 0:r.id.toString())||"",taskId:e.task.id.toString(),solutionId:e.id.toString()}):""}}));return a.createElement(Bo,{items:n,itemType:"link",listType:"aside"})}renderEmptyListMessage(){return a.createElement("p",{className:DN("placeholder")},l.Ru.text({id:"no-solutions-to-review",keyset:"solutions"}))}},function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}(xN.prototype,"renderSolutionList",[R.Q2],Object.getOwnPropertyDescriptor(xN.prototype,"renderSolutionList"),xN.prototype),xN);FN.displayName="SolutionsDashboard";const zN=FN;var jN=s(44498);function UN(e){return e.solutions.list.list}function HN(e){return e.solutions.list.fetchStatus}function QN(e){return e.solutions.list.fetchError}class VN extends a.Component{componentDidMount(){this.fetchSolutions()}componentDidUpdate(e){this.props.courseId===e.courseId&&this.props.groupId===e.groupId||this.fetchSolutions()}componentWillUnmount(){this.props.clearSolutions()}render(){const{courseId:e,groupId:t,solutions:s,fetchError:n,fetchStatus:r}=this.props;return a.createElement(zN,{courseId:e,groupId:t,solutions:s,fetchError:n,fetchStatus:r})}fetchSolutions(){const{courseId:e,groupId:t}=this.props;this.props.fetchSolutions({courseId:Number(e),groupId:Number(t),limit:6,solutionStatusId:Ye.s6[Ye.gt.Review],withLatestSubmissionPlagiarism:!1})}}VN.displayName="SolutionsDashboardContainer";const GN=(0,o.Ng)((function(e){return{solutions:UN(e),fetchStatus:HN(e),fetchError:QN(e)}}),(function(e){return(0,_.zH)({clearSolutions:jN.wU,fetchSolutions:jN.x6},e)}))(VN),BN=r().with("invite-details"),WN=e=>{let{invite:{url:t,usesLimit:s,usesCount:n}}=e;const r=M(),i=(0,a.useCallback)((()=>{r((0,fn.z)({i18n:{id:"copy-link-success-message",keyset:"common"},type:Sn.V.SUCCESS}))}),[r]),o=(0,a.useCallback)((()=>{const e={};return t&&(e.width="".concat(t.length,"ch")),e}),[t]);return a.createElement("div",{className:BN()},a.createElement("div",{className:BN("controls")},a.createElement(qt,{style:o(),className:BN("input"),value:t||""}),a.createElement(So(),{text:t||"",onCopy:i},a.createElement(ge.$,{className:BN("control-button"),theme:"action",view:"lyceum",size:"s"},l.Ru.text({id:"copy",keyset:"common"})))),a.createElement("div",{className:BN("info")},a.createElement("table",{className:BN("table")},a.createElement("tbody",null,void 0!==s&&a.createElement("tr",{className:BN("table-row")},a.createElement("td",{className:BN("table-key")},l.Ru.text({id:"group-invite-total",keyset:"invites"}),":"),a.createElement("td",{className:BN("table-value")},a.createElement("strong",null,s))),void 0!==n&&a.createElement("tr",{className:BN("table-row")},a.createElement("td",{className:BN("table-key")},l.Ru.text({id:"group-invite-used",keyset:"invites"}),":"),a.createElement("td",{className:BN("table-value")},a.createElement("strong",null,n)))))))};WN.displayName="InviteDetails";const JN=r().with("chat-card"),KN=e=>{let{canCreateChat:t,group:s}=e;const{courseId:n,groupId:r}=(0,i.g)(),o=M(),c=(0,a.useCallback)((async()=>{try{const e=Ft.g.apiCourseCreateChat.build({},{courseId:n,groupId:r});await(0,zt.Ay)(e,{method:"POST"})}catch(e){o((0,fn.z)(Ib.oS))}}),[n,o,r]);return!t||s.chatId?null:a.createElement("section",{className:JN()},l.Ru.text({id:"createChatDescription",keyset:"courses"}),a.createElement(ge.$,{size:"m",theme:"action",view:"lyceum",onClick:c},l.Ru.text({id:"createChatAction",keyset:"courses"})))};KN.displayName="ChatCard";const ZN=KN,YN=r().with("course-details"),qN=e=>{let{course:t,group:s,match:n}=e;if(!t)return null;const{courseId:r,groupId:i}=n.params,o=l.Ru.text({id:"course-details-teacher",keyset:"page-titles",params:{course:t.title,group:s.name}}),c=t.invite&&void 0!==t.invite.url&&void 0!==t.invite.usesCount&&void 0!==t.invite.usesLimit;return a.createElement("article",{className:YN()},a.createElement(tr.m,null,a.createElement("title",null,o),a.createElement("meta",{name:"title",content:o})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Top,null,a.createElement("div",{className:YN("top")},a.createElement("main",{className:YN("top-main")},a.createElement($t.D,{level:1},t.title),t.description&&a.createElement(Rl,{className:YN("description"),summary:l.Ru.text({id:"course-description",keyset:"courses"}),content:a.createElement(Ml,{content:t.description})}),a.createElement($t.D,{level:2,className:YN("group-name")},l.Ru.text({id:"group-NAME",keyset:"courses",params:{name:s.name}})),c&&a.createElement(Rl,{className:YN("description"),summary:l.Ru.text({id:"share-link",keyset:"invites"}),content:a.createElement(WN,{invite:t.invite})})),a.createElement("div",{className:YN("top-aside")},a.createElement(zl,{teachersList:t.teachersList}),a.createElement(ZN,{canCreateChat:t.canCreateChat,group:t.group})))),a.createElement(sr.A.Main,null,a.createElement(_N,{courseId:r,groupId:i,role:t.role})),a.createElement(sr.A.Aside,null,a.createElement(GN,{courseId:r,groupId:i}))))};qN.displayName="CourseDetails";const $N=(0,o.Ng)((function(e,t){return{group:Qc(e,t.groupId)}}))((e=>{let{children:t,group:s}=e;return t({group:s})})),XN=$r(oN((eI=(0,o.Ng)((function(e,t){const{params:s}=t.match;return{course:J(e),group:Qc(e,s.groupId)}}))(qN),e=>{const{groupId:t}=e.match.params;return a.createElement($N,{groupId:t},(t=>{let{group:s}=t;return a.createElement(eI,Object.assign({},e,{group:s}))}))})));var eI;let tI=function(e){return e.Absent="not-visited",e.Present="visited",e}({});const sI=r().with("attendance-switch"),nI={[tI.Absent]:"cross-red",[tI.Present]:"tick-green"};class rI extends a.PureComponent{constructor(){super(...arguments),this.changeStatus=e=>{this.props.onStatusChange(e.target.value)}}render(){const{cls:e,disabled:t}=this.props;return a.createElement("span",{className:(0,$.j)(e,sI({disabled:t}))},this.renderStatus(tI.Absent),this.renderStatus(tI.Present))}renderStatus(e){const t=this.props.status===e;return a.createElement("label",{className:sI("status",{current:t})},a.createElement("input",{checked:t,type:"radio",value:e,onChange:this.changeStatus}),a.createElement(ie,{size:"s",type:nI[e]}))}}rI.displayName="AttendanceSwitch";const aI=rI,iI=r().with("bonus-score-button"),oI=e=>{let{onClick:t,score:s,isActive:n,isDisabled:r}=e;const i=(0,a.useRef)(null);return a.createElement("button",{ref:i,type:"button",disabled:r,className:iI({active:n,set:Boolean(s)}),onClick:()=>t(i),"aria-label":"bonus"},s)};oI.displayName="BonusScoreButton";const lI=r().with("bonus-score-popup"),cI={openItem:null,currentStudentId:null,currentStudentBonusScore:null},uI=["className","isVisible","courseTitle","groupName","studentName"],dI=r().with("expel-student-button"),mI=e=>{const{className:t,isVisible:s=!0,courseTitle:n,groupName:r,studentName:i}=e,o=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,uI);return a.createElement(fe,{content:l.Ru.text({id:"expel",keyset:"students"})},a.createElement("button",Object.assign({},o,{type:"button","aria-label":l.Ru.text({id:"expel-action-description",keyset:"students",params:{course:n,group:r,student:i}}),className:(0,$.j)(dI({hidden:!s}),t)})))};mI.displayName="ExpelStudentButton";const pI=e=>{let{isVisible:t,student:s,courseTitle:n,groupName:r,expelStudent:i,closeModal:o}=e;return a.createElement(tn,{isDangerous:!0,visible:t,title:l.Ru.text({id:"are-you-sure"}),content:s?l.Ru.element({id:s.gender===Ce.Unspecified?"student-expel-confirmation":"".concat(s.gender,"-student-expel-confirmation"),keyset:"students",params:{student:a.createElement("b",null,s.displayName),course:a.createElement("b",null,n),group:a.createElement("b",null,r)}}):null,cancelText:l.Ru.text({id:"cancel"}),okText:l.Ru.text({id:"expel",keyset:"students"}),onCancelClick:o,onCloseClick:o,onOkClick:i})};pI.displayName="ExpelStudentModal";var hI=s(42325);const EI=["lesson","event"].join(", "),gI="slot should contain at least one of the following properties: ".concat(EI),yI=r().with("score-badge"),fI=(0,a.forwardRef)(((e,t)=>{const{cls:s,score:n,color:r}=e;return a.createElement("span",{ref:t,style:{backgroundColor:r},className:(0,$.j)(yI(),s)},n)}));var SI,bI=s(30382);function vI(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const NI=r().with("course-progress-table");let II=(SI=class extends a.PureComponent{constructor(){super(...arguments),this.renderSlot=e=>{const{lesson:t}=e,s=this.renderSlotInner(e);if(!t)return a.createElement("div",{className:NI("slot")},s);const{courseId:n,groupId:r}=this.props;return a.createElement(fe,{content:t.title},a.createElement("span",null,a.createElement(L.N_,{className:(0,$.j)(NI("slot"),NI("lesson-link")),to:p.ZZ.lessonProgress.build({courseId:n,groupId:r,lessonId:t.id.toString()})},s)))}}render(){const{courseProgress:e,studentIds:t,renderExpelButton:s}=this.props;return t.length?a.createElement("div",{className:NI()},a.createElement(bN,{rowControl:s,leftTableHeadings:this.renderStudentHeadings(),rightTableHeadings:e.slots.map(this.renderSlot),leftTableRows:t.map(this.renderStudentRow),rightTableRows:t.map(this.renderStudentProgress)})):l.Ru.text({id:"no-students",keyset:"progress"})}renderStudentHeadings(){const{studentIds:e,sortBy:t,sortOrder:s,courseProgress:n}=this.props,{slots:r,maxRating:i,maxBonusScore:o,useBonusScore:c}=n,u=[[a.createElement(a.Fragment,null,l.Ru.text({id:"students",keyset:"progress"}),a.createElement(gd,{active:t===bI.u.NAME,activeOrder:s,onOrderChange:this.changeOrder(bI.u.NAME)})),e.length],[a.createElement(a.Fragment,null,l.Ru.text({id:"rating",keyset:"progress"}),a.createElement(gd,{active:t===bI.u.RATING,activeOrder:s,onOrderChange:this.changeOrder(bI.u.RATING)})),l.Ru.element({id:"max-RATING",keyset:"progress",params:{rating:a.createElement("b",null,i)}})]];if((0,hI.nW)(r)){const e=[a.createElement(fe,{key:"top",content:l.Ru.text({id:"attendance",keyset:"progress"})},a.createElement("span",null,a.createElement(ie,{size:"m",type:"calendar"}))),a.createElement("b",{key:"bottom"},r.length)];u.push(e)}if(c){const e=[a.createElement(fe,{key:"top",content:l.Ru.text({id:"bonus-score",keyset:"progress"})},a.createElement("span",null,a.createElement(ie,{size:"m",type:"present"}))),a.createElement(a.Fragment,null,"+",a.createElement("b",{className:NI("bonus-score")},o))];u.push(e)}return u}renderStudentRow(e){const{courseProgress:t}=this.props,{id:s,avatar:n,displayName:r,status:i,rating:o,bonusScore:l}=t.students[e],c=[a.createElement(am,{className:NI("student"),userId:s,avatar:n,displayName:r,status:i}),a.createElement("b",{className:NI("rating")},o)];if((0,hI.Io)(t)){const{attendance:s}=t.students[e],n=Object.values(s).filter((e=>e===tI.Present)).length,r=a.createElement("b",{className:NI("attendance",{"non-zero":Boolean(n)})},n);c.push(r)}if(t.useBonusScore){const e=this.renderStudentBonusScore(s,l);c.push(e)}return c}renderSlotInner(e){return a.createElement(a.Fragment,null,a.createElement("span",{className:NI("slot-title")},a.createElement("b",null,function(e){if((0,hI.y$)(e)){const{event:t,lesson:s}=e;return s?s.shortTitle:l.Ru.text({id:t.type,keyset:"schedule"})}if((0,hI.Hr)(e)){const{lesson:t}=e;return t.shortTitle}throw new d.dH(gI)}(e))),a.createElement("span",{className:NI("event-info")},(0,hI.y$)(e)&&a.createElement(a.Fragment,null,a.createElement("span",{className:NI("event-date")},Ne.Ay.fromISO(e.event.date).toLocaleString((0,Ne.km)("DateMedWithoutYear"))),this.renderNumberOfEventAttendances(e.event))))}renderNumberOfEventAttendances(e){const{studentIds:t,courseProgress:s}=this.props;if(!(0,hI.Io)(s))return null;const{students:n}=s,r=t.filter((t=>n[t].attendance[e.id]===tI.Present)).length;return a.createElement("span",{className:NI("event-attendance",{"non-zero":0!==r})},a.createElement(ie,{size:"m",type:"person"}),a.createElement("b",null,r))}renderStudentProgress(e){const{courseProgress:t,readonly:s}=this.props;return(0,hI.Io)(t)?t.slots.map((n=>{const r=t.students[e],i=a.createElement(aI,{disabled:s,cls:NI("student-attendance"),status:t.students[e].attendance[n.event.id],onStatusChange:this.changeAttendanceStatus(r.id,n.event.id)});return this.renderStudentSlotProgress(n,r,i)})):t.slots.map((s=>this.renderStudentSlotProgress(s,t.students[e])))}renderStudentSlotProgress(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=function(e){if((0,hI.y$)(e))return e.event.id;if((0,hI.Hr)(e))return e.lesson.id;throw new d.dH(gI)}(e);return a.createElement("div",{key:n,className:NI("student-data")},e.lesson&&this.renderLessonProgress(e.lesson,t.scores[e.lesson.id]),s)}renderStudentBonusScore(e,t){const{setOpenItem:s,currentStudentId:n}=this.props;return a.createElement(oI,{isActive:n===e,score:t,onClick:n=>{s({node:n,bonusScore:t,studentId:e})}})}renderLessonProgress(e,t){const{tags:s}=this.props.courseProgress;if(!t)return null;const n=Object.values(t).reduce(((e,t)=>e+t),0),r=a.createElement(fe,{content:l.Ru.text({id:"total-score",keyset:"progress"})},a.createElement("div",{className:NI("total-score")},parseFloat(n.toFixed(10))));return e.type===lc.nv.Test?a.createElement("div",{className:NI("lesson-progress")},r):a.createElement("div",{className:NI("lesson-progress")},r,a.createElement("div",{className:NI("scores")},e.tags.map((e=>{const n=e in t?s[e].color:"#b3b3b3";return a.createElement(fe,{key:e,content:l.Ru.text({id:s[e].type,keyset:"task-tags"})},a.createElement(fI,{cls:NI("score-badge"),color:n,score:t[e]||0}))}))))}changeAttendanceStatus(e,t){return s=>{this.props.changeAttendanceStatus({eventId:t,studentId:e,status:s})}}changeOrder(e){return t=>{this.props.changeSort({sortBy:e,sortOrder:t})}}},vI(SI.prototype,"renderStudentRow",[R.Q2],Object.getOwnPropertyDescriptor(SI.prototype,"renderStudentRow"),SI.prototype),vI(SI.prototype,"renderStudentProgress",[R.Q2],Object.getOwnPropertyDescriptor(SI.prototype,"renderStudentProgress"),SI.prototype),SI);II.displayName="CourseProgressTable";const TI=function(e){return class extends a.Component{constructor(){super(...arguments),this.state={isModalVisible:!1,currentStudent:null},this.renderExpelButton=e=>{let{isActive:t,rowIndex:s}=e;const{students:n,course:r,group:i}=this.props,o=n[s],l=o.status!==Ls.a.Expelled;return a.createElement(a.Fragment,null,t&&l?null:s+1,l&&a.createElement(mI,{isVisible:t,courseTitle:r.title,groupName:i.name,studentName:o.displayName,onClick:this.openModal(o)}))},this.openModal=e=>()=>{this.setState({isModalVisible:!0,currentStudent:e})},this.closeModal=()=>{this.setState({isModalVisible:!1})},this.expelStudent=()=>{const{currentStudent:e}=this.state,{course:t,group:s,expelStudent:n}=this.props;e&&this.setState({isModalVisible:!1},(()=>{n({courseId:t.id,groupId:s.id,studentId:e.id,status:e.status})}))}}render(){const{isSuperUser:t,course:s,group:n}=this.props,{isModalVisible:r,currentStudent:i}=this.state;return t?a.createElement(a.Fragment,null,a.createElement(e,Object.assign({},this.props,{renderExpelButton:this.renderExpelButton})),a.createElement(pI,{isVisible:r,student:i,courseTitle:s.title,groupName:n.name,closeModal:this.closeModal,expelStudent:this.expelStudent})):a.createElement(e,this.props)}}}((kI=II,class extends a.Component{constructor(){super(...arguments),this.state=cI,this.popupDirection=["right"],this.setOpenItem=e=>{let{node:t,bonusScore:s,studentId:n}=e;null!=t&&t.current&&function(e,t){return!(!e||!t)&&0===e.compareDocumentPosition(t)}(this.state.openItem,null==t?void 0:t.current)?this.resetOpenItem():this.setState({openItem:t,currentStudentId:n,currentStudentBonusScore:s})},this.resetOpenItem=()=>{this.setState(cI)},this.setBonusScore=e=>{const{courseId:t,setBonusScore:s}=this.props,{currentStudentId:n,currentStudentBonusScore:r}=this.state;this.setState(cI,(()=>{s({courseId:Number(t),studentId:n,oldScore:r,newScore:e})}))}}render(){const{useBonusScore:e,maxBonusScore:t}=this.props,{openItem:s,currentStudentId:n,currentStudentBonusScore:r}=this.state,i=a.createElement(kI,Object.assign({},this.props,{setOpenItem:this.setOpenItem,currentStudentId:n}));return e?a.createElement(a.Fragment,null,i,a.createElement(ws,{hasTail:!0,cls:lI(),theme:"normal",anchor:s||void 0,target:s?"anchor":void 0,onClose:this.resetOpenItem,visible:Boolean(s),direction:this.popupDirection,tailSize:17},a.createElement("div",{className:lI("inner")},a.createElement("p",{className:lI("caption")},l.Ru.text({id:"assign-bonus-score",keyset:"progress"})),s&&a.createElement(Xm,{key:n,maxScore:t,precision:1,score:r,size:"medium",onSetScore:this.setBonusScore})))):i}}));var kI,CI=s(26364);function wI(e){const{maxRating:t,maxBonusScore:s,useBonusScore:n,students:r,slots:a,attendance:i,tags:o}=e.courseProgress;return{maxRating:t,maxBonusScore:s,useBonusScore:n,students:r,slots:a,attendance:i,tags:o}}function AI(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{students:s,sortedStudentIds:n}=e.courseProgress;return t?n:n.filter((e=>s[e].status!==Ls.a.Expelled))}const OI=(0,U.Mz)([function(e){return e.courseProgress.students},AI],((e,t)=>t.map((t=>e[t])))),RI=["course","courseId","role"];var _I;let LI=(_I=class extends a.Component{componentDidMount(){const{courseId:e,groupId:t}=this.props;this.props.fetchCourseProgress({courseId:Number(e),groupId:Number(t)})}componentWillUnmount(){this.props.clearCourseProgress()}render(){const{fetchStatus:e,fetchError:t}=this.props;return a.createElement(rr,{fetchError:t,fetchStatus:e,renderSuccess:this.renderCourseProgressTable})}renderCourseProgressTable(){const e=this.props,{course:t,courseId:s,role:n}=e,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,RI);if(!t)throw new d.dH("No course data",{courseId:s});return a.createElement(TI,Object.assign({},r,{courseId:s,course:t,readonly:n===E.Methodist,useBonusScore:this.props.courseProgress.useBonusScore,maxBonusScore:this.props.courseProgress.maxBonusScore}))}},function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}(_I.prototype,"renderCourseProgressTable",[R.Q2],Object.getOwnPropertyDescriptor(_I.prototype,"renderCourseProgressTable"),_I.prototype),_I);LI.displayName="CourseProgressTableContainer";const MI=(0,o.Ng)((function(e,t){const{fetchStatus:s,fetchError:n,sortBy:r,sortOrder:a}=e.courseProgress;return{studentIds:AI(e,t.showExpelled),courseProgress:wI(e),isSuperUser:(0,T.Y8)(e),course:V(e,Number(t.courseId),Number(t.groupId)),group:Qc(e,t.groupId),students:OI(e,t.showExpelled),fetchStatus:s,fetchError:n,sortBy:r,sortOrder:a}}),(function(e){return(0,_.zH)({changeAttendanceStatus:CI.AJ,changeSort:CI.Vk,clearCourseProgress:CI.QP,fetchCourseProgress:CI.L5,setBonusScore:CI.gb.request,expelStudent:CI.em.request},e)}))(er(LI));let PI=function(e){return e.NotAssigned="not_assigned",e.NotSolved="not_solved",e.IsSolving="is_solving",e.HasSolved="has_solved",e}({});const xI=r().with("variant-badge"),DI={[PI.NotAssigned]:"not-assigned",[PI.NotSolved]:"not-solved",[PI.IsSolving]:"is-solving",[PI.HasSolved]:"has-solved"};let FI=function(e){return e.Normal="normal",e.Button="button",e}({});class zI extends a.PureComponent{render(){const{cls:e,title:t,index:s,status:n,type:r,disabled:i,onClick:o}=this.props;if(r===FI.Button&&!o)throw new d.Di("Badge with type Button should have onClick handler",{argName:"onClick",argValue:o});return r===FI.Button?a.createElement("button",{className:(0,$.j)(xI({disabled:i,type:FI.Button,status:DI[n]}),e),type:"button",title:t,disabled:i,onClick:o},s):a.createElement("span",{className:(0,$.j)(xI({status:DI[n],type:FI.Normal}),e),title:t},s)}}zI.defaultProps={type:FI.Normal,disabled:!1},zI.displayName="VariantBadge";const jI=zI;function UI(e,t){const s={};if(Object.values(e).some((e=>e===PI.IsSolving))){for(const t of Object.keys(e))s[t]={isAssigningPossible:!1,disablingReason:"test_is_solving"};return s}for(const[n,r]of Object.entries(e))r===PI.NotAssigned||r===PI.NotSolved||r===PI.HasSolved&&t?s[n]={isAssigningPossible:!0}:s[n]={isAssigningPossible:!1,disablingReason:"variant_is_assigned_before"};return s}var HI=s(43717);const QI=r().with("variant-picker");class VI extends a.PureComponent{constructor(){super(...arguments),this.state={fetchStatus:null,statuses:this.props.statuses}}static changeStatus(e,t,s){const n={};for(const[t,s]of Object.entries(e))s===PI.NotSolved?n[t]=PI.NotAssigned:n[t]=s;return n[t]=s,n}componentDidUpdate(e){e.statuses!==this.props.statuses&&Cl(this.state.statuses,this.props.statuses)&&this.setState({statuses:this.props.statuses})}checkIfNeedsAssignment(){return!this.props.isAutoAssigned&&Object.values(this.state.statuses).every((e=>e===PI.NotAssigned))}assignVariant(e){const t=this.state.statuses;let s;s=t[e]===PI.HasSolved?PI.HasSolved:t[e]===PI.NotSolved?PI.NotAssigned:PI.NotSolved;const n=VI.changeStatus(t,e,s);this.setState({fetchStatus:Ot.L.PENDING,statuses:n},(async()=>{const n=Ft.g.apiAssignVariant.build({variantId:e,lessonId:this.props.lessonId},{studentId:this.props.studentId,groupId:this.props.groupId,courseId:this.props.courseId});try{const e=await(0,zt.Ay)(n,{method:s===PI.NotAssigned?"DELETE":"POST"});this.props.fetchCourseVariants(e),this.setState({fetchStatus:Ot.L.SUCCESS})}catch(e){this.setState({fetchStatus:Ot.L.FAIL,statuses:t}),this.props.addNotification({i18n:(0,l.T$)(e),type:Sn.V.ERROR})}}))}render(){const{cls:e,variants:t,isShufflePending:s,isReassigningAllowed:n,timer:r}=this.props,{statuses:i,fetchStatus:o}=this.state,{deadline:c="",serverTime:u=""}=r||{},d=UI(i,n),m=Number(new Date(c))-Number(new Date(u));return a.createElement("div",{className:(0,$.j)(e,QI(),QI("variant-wrapper"))},a.createElement("div",null,t.map((e=>{let{isAssigningPossible:t}=d[e.id];const n=d[e.id].disablingReason||"";return o===Ot.L.PENDING&&(t=!1),a.createElement(jI,{key:e.id,cls:QI("badge",{pending:o===Ot.L.PENDING||s,"needs-assignment":this.checkIfNeedsAssignment()}),index:e.index,type:FI.Button,disabled:!t,status:i[e.id],title:l.Ru.text({id:n,keyset:"lessons"}),onClick:()=>this.assignVariant(e.id)})}))),r&&a.createElement("span",{className:QI("timer")},Aa.dw.fromMillis(m).toFormat("hh:mm")))}}VI.displayName="VariantPicker";const GI=(0,o.Ng)(null,(function(e){return(0,_.zH)({addNotification:fn.z,fetchCourseVariants:HI.Gg.success},e)}))(er(VI)),BI=e=>e.courseVariants.maxRating,WI=(0,U.Mz)([e=>e.courseVariants.studentsMap,e=>e.courseVariants.studentIds],((e,t)=>t.map((t=>e[t])))),JI=(0,U.Mz)([WI],(e=>e.filter((e=>e.status!==Ls.a.Expelled)))),KI=e=>e.courseVariants.slots,ZI=e=>e.courseVariants.fetchStatus,YI=e=>e.courseVariants.fetchError;var qI=s(71542);const $I=r().with("problem-variant-picker"),XI=e=>{const{cls:t,variants:s,statuses:n,userId:i,groupId:o,courseId:c,isReassigningAllowed:u,isAutoAssigned:d,timer:m}=e,{deadline:p="",serverTime:h=""}=m||{},E=Number(new Date(p))-Number(new Date(h)),g=M(),[y,f]=(0,a.useState)(null),S=(0,a.useCallback)((async e=>{f(Ot.L.PENDING);const t=Ft.g.apiAssignProblemVariant.build({},{variantId:e,userId:i,groupId:o,courseId:c});let s;s=n[e]===PI.HasSolved?PI.HasSolved:n[e]===PI.NotSolved?PI.NotAssigned:PI.NotSolved;try{const e=await(0,zt.Ay)(t,{method:s===PI.NotAssigned?"DELETE":"POST"});g(HI.Gg.success(e)),f(Ot.L.SUCCESS)}catch(e){f(Ot.L.FAIL),g((0,fn.z)({i18n:(0,l.T$)(e),type:Sn.V.ERROR}))}}),[c,g,o,i,n]),b=UI(n,u),v=(0,a.useMemo)((()=>!d&&Object.values(n).every((e=>e===PI.NotAssigned))),[d,n]);return a.createElement("div",{className:(0,$.j)(t,$I(),r()("variant-picker","variant-wrapper"))},a.createElement("div",null,s.map((e=>{let{isAssigningPossible:t}=b[e.id];const s=b[e.id].disablingReason||"";return y===Ot.L.PENDING&&(t=!1),a.createElement(jI,{key:e.id,cls:r()("variant-picker","badge",{"needs-assignment":v}),index:e.index,type:FI.Button,disabled:!t,status:n[e.id],title:l.Ru.text({id:s,keyset:"lessons"}),onClick:()=>S(e.id)})}))),m&&s.length>0&&a.createElement("span",{className:r()("variant-picker","timer")},Aa.dw.fromMillis(E).toFormat("hh:mm")))};XI.displayName="ProblemVariantPicker";const eT=XI;var tT;function sT(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const nT=r().with("course-variants-table");let rT=(tT=class e extends a.Component{constructor(){super(...arguments),this.timer=void 0,this.POLL_DELAY=6e4,this.state={lessonShuffleStatuses:{},timers:{}}}componentDidMount(){const{courseId:e,groupId:t}=this.props;this.props.fetchCourseVariantsStart({courseId:Number(e),groupId:Number(t)}),this.getTimers(),this.timer=setInterval(this.getTimers,this.POLL_DELAY)}componentWillUnmount(){this.props.clearCourseVariants(),this.timer&&clearInterval(this.timer)}getTimers(){const{courseId:e,groupId:t}=this.props;(0,zt.Ay)("/api/proxy/teacher/courses/".concat(e,"/group/").concat(t,"/timer/")).then((e=>{this.setState((t=>Object.assign({},t,{timers:e})))}))}changeOrder(e){return t=>{this.props.changeSort({sortBy:e,sortOrder:t})}}isReassignmentAllowed(){return this.props.isSuperuser}isShufflePending(e){return this.state.lessonShuffleStatuses[e]===Ot.L.PENDING}isShuffleDisabled(e){if(this.isShufflePending(e.id))return!0;const t=this.isReassignmentAllowed(),s=this.props.students.map((s=>UI(s.lessons[e.id].tasks,t)));return!s.some((e=>Object.values(e).some((e=>e.isAssigningPossible))))}shuffleVariants(e){return()=>{const{courseId:t,groupId:s}=this.props;this.isShufflePending(e)||this.setState({lessonShuffleStatuses:Object.assign({},this.state.lessonShuffleStatuses,{[e]:Ot.L.PENDING})},(async()=>{const n=Ft.g.apiShuffleVariants.build({lessonId:e},{courseId:Number(t),groupId:Number(s)});try{const t=await(0,zt.Ay)(n,{method:"POST"});this.props.updateLessonVariants(t),this.setState({lessonShuffleStatuses:Object.assign({},this.state.lessonShuffleStatuses,{[e]:Ot.L.SUCCESS})})}catch(t){this.setState({lessonShuffleStatuses:Object.assign({},this.state.lessonShuffleStatuses,{[e]:Ot.L.FAIL})}),this.props.addNotification({i18n:(0,l.T$)(t),type:Sn.V.ERROR})}}))}}renderTable(){const{students:e}=this.props;return e.length?a.createElement(bN,{leftTableHeadings:this.renderLeftHeadings(),leftTableRows:this.renderLeftRows(),rightTableHeadings:this.renderRightHeadings(),rightTableRows:this.renderRightRows()}):l.Ru.text({id:"no-students",keyset:"progress"})}renderLeftHeadings(){const{students:e,maxRating:t,sortBy:s,sortOrder:n}=this.props;return[[a.createElement(a.Fragment,null,l.Ru.text({id:"students",keyset:"progress"}),a.createElement(gd,{active:s===qI.xT.NAME,activeOrder:n,onOrderChange:this.changeOrder(qI.xT.NAME)})),e.length],[a.createElement(a.Fragment,null,l.Ru.text({id:"rating",keyset:"progress"}),a.createElement(gd,{active:s===qI.xT.RATING,activeOrder:n,onOrderChange:this.changeOrder(qI.xT.RATING)})),l.Ru.element({id:"max-RATING",keyset:"progress",params:{rating:a.createElement("b",null,t)}})]]}renderLeftRows(){const{students:e}=this.props;return e.map((e=>[a.createElement(am,{className:nT("student"),userId:e.id,avatar:e.avatar,displayName:e.displayName,status:e.status}),a.createElement("div",{className:nT("rating")},a.createElement("b",null,e.rating))]))}renderRightHeadings(){const{courseId:t,groupId:s,slots:n}=this.props;return n.map((n=>{let{lesson:r}=n;return a.createElement("div",{key:r.id,className:nT("lesson-heading")},a.createElement(fe,{content:r.title},a.createElement("span",null,a.createElement(L.N_,{className:(0,$.j)(nT("lesson"),nT("lesson-link")),to:p.ZZ.lessonProgress.build({courseId:t,groupId:s,lessonId:r.id.toString()})},a.createElement("b",{className:nT("lesson-title")},r.shortTitle),a.createElement(ie,{className:nT("visibility-icon"),size:"l",type:r.isHidden?"eye-closed":"eye-open"})))),r.manualVariantsAssignment?this.renderShuffleButton(r):e.renderAutoAssignmentMessage())}))}renderRightRows(){const{slots:e,groupId:t,students:s,courseId:n}=this.props;return s.map((s=>e.map((e=>{var r,i;let{lesson:o}=e;const l=1===o.variants.length&&o.problemVariants.length>0;return a.createElement(a.Fragment,null,!l&&a.createElement(GI,{key:"".concat(s.id,"-").concat(o.id,"-task"),cls:nT("variant-picker"),isShufflePending:this.isShufflePending(o.id),isReassigningAllowed:this.isReassignmentAllowed(),isAutoAssigned:!o.manualVariantsAssignment,studentId:s.id,lessonId:o.id,groupId:Number(t),courseId:Number(n),variants:o.variants,statuses:s.lessons[o.id].tasks,timer:null==(r=this.state.timers[s.id])?void 0:r[o.id]}),a.createElement(eT,{userId:s.id,key:"".concat(s.id,"-").concat(o.id,"-problem"),cls:nT("variant-picker"),isShufflePending:this.isShufflePending(o.id),isReassigningAllowed:this.isReassignmentAllowed(),isAutoAssigned:!o.manualVariantsAssignment,studentId:s.id,lessonId:o.id,courseId:Number(n),groupId:Number(t),variants:o.problemVariants,statuses:s.lessons[o.id].problems,timer:null==(i=this.state.timers[s.id])?void 0:i[o.id]}))}))))}static renderAutoAssignmentMessage(){return a.createElement("span",{className:nT("lesson-info")},l.Ru.text({id:"auto-assignment",keyset:"lessons"}))}renderShuffleButton(e){return a.createElement("button",{type:"button",className:nT("shuffle-button"),disabled:this.isShuffleDisabled(e),onClick:this.shuffleVariants(e.id)},a.createElement(ie,{size:"s",type:"shuffle"}),l.Ru.text({id:"shuffle-variants",keyset:"lessons"}))}render(){const{fetchStatus:e,fetchError:t}=this.props;return a.createElement("div",{className:nT()},a.createElement(nr,{fetchError:t,fetchStatus:e,renderSuccess:this.renderTable}))}},sT(tT.prototype,"getTimers",[R.Q2],Object.getOwnPropertyDescriptor(tT.prototype,"getTimers"),tT.prototype),sT(tT.prototype,"renderTable",[R.Q2],Object.getOwnPropertyDescriptor(tT.prototype,"renderTable"),tT.prototype),tT);rT.displayName="CourseVariantsTable";const aT=(0,o.Ng)((function(e,t){const{sortBy:s,sortOrder:n}=e.courseVariants;return{maxRating:BI(e),slots:KI(e),students:t.showExpelled?WI(e):JI(e),fetchStatus:ZI(e),fetchError:YI(e),isSuperuser:(0,T.Y8)(e),sortBy:s,sortOrder:n}}),(function(e){return(0,_.zH)({changeSort:HI.Vk,fetchCourseVariantsStart:HI.Gg.request,clearCourseVariants:HI.RG,updateLessonVariants:HI.Cf,addNotification:fn.z},e)}))(rT);function iT(e){let{students:t,initialValue:s=!1}=e;const[n,r]=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,s]=(0,a.useState)(e);return[t,function(){s(!t)}]}(s);let i=[];return t&&(i=n?t:t.filter((e=>e.status!==Ls.a.Expelled))),{showExpelled:n,filteredStudents:i,toggleExpelledFilter:r}}const oT=e=>a.createElement(uu,Object.assign({size:"m"},e),l.Ru.text({id:"show-expelled",keyset:"students"}));oT.displayName="ExpelledFilterCheckbox";const lT=r().with("course-progress"),cT=e=>{let{course:t,group:s,history:n,location:r,match:o}=e;if(!t||!s)throw new d.dH("Course or group are missing",{courseId:t?t.id:void 0,groupId:s?s.id:void 0});const c=t.id.toString(),u=s.id.toString();(0,a.useEffect)((()=>{r.pathname===o.url&&n.replace(Object.assign({},r,{pathname:p.ZZ.courseAttendance.build({courseId:c,groupId:u})}))}));const m=l.Ru.text({id:"course-progress-teacher",keyset:"page-titles",params:{course:t.title,group:s.name}}),{showExpelled:h,toggleExpelledFilter:E}=iT({});return a.createElement("article",{className:lT()},a.createElement(tr.m,null,a.createElement("title",null,m),a.createElement("meta",{name:"title",content:m})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement($t.D,{level:1,controls:a.createElement(oT,{cls:lT("checkbox"),checked:h,onChange:E})},l.Ru.text({id:"course-progress",keyset:"courses"})),a.createElement("nav",{className:lT("nav")},a.createElement("ul",{className:lT("nav-list")},a.createElement("li",{className:lT("nav-item")},a.createElement(Rs,{to:p.ZZ.courseAttendance.build({courseId:c,groupId:u})},l.Ru.text({id:"records-and-attendance",keyset:"progress"}))),a.createElement("li",{className:lT("nav-item")},a.createElement(Rs,{to:p.ZZ.courseVariants.build({courseId:c,groupId:u})},l.Ru.text({id:"tests",keyset:"progress"}))))),a.createElement("section",{className:lT("table")},a.createElement(i.dO,null,a.createElement(i.qh,{path:p.ZZ.courseAttendance.template,render:()=>a.createElement(MI,{showExpelled:h,courseId:c,groupId:u})}),a.createElement(i.qh,{path:p.ZZ.courseVariants.template,render:()=>a.createElement(aT,{showExpelled:h,courseId:c,groupId:u})}))))))};cT.displayName="CourseProgress";const uT=$r(oN((0,o.Ng)((function(e,t){const{params:s}=t.match;return{course:V(e,Number(s.courseId),Number(s.groupId)),group:Qc(e,s.groupId)}}))(cT)));var dT;function mT(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const pT=r().with("course-table");let hT=function(e){return e.StudentFullName="student_full_name",e.UpdateTime="update_time",e.TaskTitle="task__title",e.Teacher="teacher_full_name",e}({}),ET=(dT=class e extends a.Component{constructor(t){super(t),this.state={selectedSolution:null,selectedTask:null},this.sortings=void 0,this.renderers=void 0,this.triggerIndex=[null,""],this.getTimesMap=(0,zu.A)((e=>{const t={};return e&&e.forEach((e=>{t[e.id]=Ne.Ay.fromISO(e.updateTime).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))})),t})),this.getSidebarType=()=>this.state.selectedSolution?l.Ru.text({id:"solutions",keyset:"solutions"}):this.state.selectedTask?l.Ru.text({id:"column-task",keyset:"tables"}):"",this.renderers={[yu.V.Lesson]:this.renderLessonCell,[yu.V.Variant]:e.renderVariantCell,[yu.V.Solution]:this.renderSolutionCell,[yu.V.Status]:this.renderStatusCell,[yu.V.Student]:this.renderStudentCell,[yu.V.Tag]:this.renderTagCell,[yu.V.Task]:this.renderTaskCell,[yu.V.Teacher]:this.renderTeacherCell,[yu.V.SubmissionsCount]:this.renderSubmissionsCountCell,[yu.V.UpdatedAt]:this.renderUpdatedAtCell},this.sortings={[yu.V.Teacher]:{isActive:this.isSortingActive(hT.Teacher),getOrder:this.getSortingOrder(hT.Teacher),onChange:this.changeSorting(hT.Teacher)},[yu.V.Student]:{isActive:this.isSortingActive(hT.StudentFullName),getOrder:this.getSortingOrder(hT.StudentFullName),onChange:this.changeSorting(hT.StudentFullName)},[yu.V.UpdatedAt]:{isActive:this.isSortingActive(hT.UpdateTime),getOrder:this.getSortingOrder(hT.UpdateTime),onChange:this.changeSorting(hT.UpdateTime)},[yu.V.Task]:{isActive:this.isSortingActive(hT.TaskTitle),getOrder:this.getSortingOrder(hT.TaskTitle),onChange:this.changeSorting(hT.TaskTitle)}}}render(){const{solutions:e,groupId:t,courseId:s}=this.props,{selectedSolution:n,selectedTask:r}=this.state;if(!e)return null;const i=e;for(const e of i)e.modifier=pT("row",{expired:e.sentAfterDeadline});return a.createElement("div",{className:pT()},a.createElement(Id,{items:i,columns:Su,sortings:this.sortings,columnRenderers:this.renderers}),a.createElement(Ln,{sidebarType:this.getSidebarType(),visible:Boolean(n)||Boolean(r),onClose:this.clearSelected,onOutsideClick:this.onOutsideClick},n&&a.createElement(zy,{solutionId:n.id,groupId:Number(t),courseId:Number(s)}),r&&this.renderTaskDescription(r)))}renderTaskDescription(e){var t;const{groupId:s}=this.props;if(!e)return null;const n=e.lesson&&this.buildTaskUrl(null==(t=e.lesson)?void 0:t.id,e.id);return a.createElement("div",{className:pT("task-description-wrapper")},a.createElement(hf,{taskId:e.id.toString(),groupId:s,taskTitle:e.title,hasManualCheck:e.hasManualCheck&&e.taskType===qe.wP.Other,hasP2p:e.hasP2p,taskUrl:n||"",showCorrectAnswer:!0}))}renderStudentCell(e){let{student:t}=e;return a.createElement(am,{size:"s",avatar:t.avatar,userId:t.id,status:t.status,renderDisplayName:e=>{let{className:s}=e;return a.createElement(wd,{withFilterIcon:!0,className:s,title:l.Ru.text({id:"apply-filter",keyset:"filters"}),onClick:this.onSetFilter(Jc.Student,t.id)},t.displayName)}})}renderSolutionCell(e,t){const{task:s,latestSubmissionPlagiarism:n}=e,{lesson:r}=s;if(!r||!s||!e)return null;const i=this.buildTaskUrl(r.id,s.id,e.id),o=l.Ru.text({id:"show-solution",keyset:"solutions"});return a.createElement("span",{className:pT("details")},a.createElement(Ld,{ariaLabel:o,href:i}),a.createElement(fe,{key:e.id,content:o},a.createElement("span",{className:pT("details-tooltip-wrapper details-tooltip-wrapper-solution")},a.createElement(wd,{onClick:()=>{this.selectSolution(e)(),this.triggerIndex=[t,"solution"]}},e.id))),n&&a.createElement(Up,{compact:!0,className:pT("plagiarism-icon"),plagiarism:n}))}renderTaskCell(e,t){const{task:s}=e,{lesson:n}=s;if(!s||!n)return null;const r=this.buildTaskUrl(n.id,s.id);return a.createElement("span",{className:pT("details")},a.createElement(Ld,{ariaLabel:l.Ru.text({id:"show-solution",keyset:"solutions"}),href:r}),a.createElement(fe,{key:s.id,content:l.Ru.text({id:"show-description",keyset:"tasks"})},a.createElement("span",{className:pT("details-tooltip-wrapper details-tooltip-wrapper-task")},a.createElement(wd,{onClick:()=>{this.selectTask(s)(),this.triggerIndex=[t,"task"]}},s.title,s.hasManualCheck&&s.taskType===qe.wP.Other&&a.createElement(Ze,{cls:pT("task-check-info"),ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),s.hasP2p&&a.createElement(Ze,{cls:pT("task-check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"}))))))}renderTagCell(e){const{tag:t}=e.task;return t?a.createElement(wd,{withFilterIcon:!0,title:l.Ru.text({id:"apply-filter",keyset:"filters"}),onClick:this.onSetFilter(Jc.Tag,t.id)},l.Ru.text({id:t.type,keyset:"task-tags"})):a.createElement("span",{className:pT("tag")},l.Ru.text({id:qe.cl.Another,keyset:"task-tags"}))}renderLessonCell(e){const{lesson:t}=e.task;return t?a.createElement(wd,{withFilterIcon:!0,title:l.Ru.text({id:"apply-filter",keyset:"filters"}),onClick:this.onSetFilter(Jc.Lesson,t.id)},t.title):null}static renderVariantCell(e){const{task:{lesson:t,variant:s}}=e;return t&&s?a.createElement("span",{className:pT("variant")},t.type===lc.nv.Test?s.index:"-"):null}renderStatusCell(e){var t;const{status:s,task:n,score:r}=e;return[s,n,r].some(Jo())?null:a.createElement(a.Fragment,null,a.createElement(wd,{withFilterIcon:!0,onClick:this.onSetFilter(Jc.Status,s.id)},a.createElement(hl,{type:s.type,scoreMax:n.scoreMax,score:r,hideScoreInformation:(null==(t=n.lesson)?void 0:t.hideScoreInformation)||"material"===n.taskType})))}renderUpdatedAtCell(e){const t=this.getTimesMap(this.props.solutions);return a.createElement("div",{className:pT("update-time")},a.createElement("time",null,t[e.id]),e.hasActivityAfterDeadline&&a.createElement("span",{className:pT("deadline-activity"),title:l.Ru.text({id:"has-activity-after-deadline",keyset:"solutions"})},a.createElement(ie,{type:"clock",size:"xs"})))}renderSubmissionsCountCell(e){const{submissionsCount:t}=e;return a.createElement("span",{className:pT("submission-count")},t||"-")}renderTeacherCell(e){const{teacher:t}=e;return a.createElement("span",{className:pT("teacher-name")},(null==t?void 0:t.displayName)||"-")}buildTaskUrl(e,t,s){const{courseId:n,groupId:r}=this.props;return p.ZZ.taskSolutions.build({courseId:n,groupId:r,lessonId:e.toString(),taskId:t.toString(),solutionId:s?s.toString():void 0})}selectSolution(e){return()=>{this.setState({selectedSolution:e})}}selectTask(e){return()=>{this.setState({selectedTask:e})}}clearSelected(){this.setState({selectedSolution:null,selectedTask:null});const e=this.triggerIndex[0];if(null!==e){const t=this.triggerIndex[1];"solution"===t?document.querySelectorAll(".details-tooltip-wrapper-solution")[e].focus():"task"===t&&document.querySelectorAll(".details-tooltip-wrapper-task")[e].focus()}}onOutsideClick(e){e.target instanceof Element&&jy({target:e.target,legacy:!0})||this.clearSelected()}isSortingActive(e){return()=>this.props.appliedSortings.some((t=>t.field===e))}onSetFilter(e,t){return()=>{this.props.onChangeParams({[e]:t.toString()})}}getSortingOrder(e){return()=>{const t=this.props.appliedSortings.find((t=>t.field===e));return t?t.order:Kc.j.ASCENDING}}changeSorting(e){return t=>{this.props.onSortingChange({order:t,field:e})}}},mT(dT.prototype,"renderStudentCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderStudentCell"),dT.prototype),mT(dT.prototype,"renderSolutionCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderSolutionCell"),dT.prototype),mT(dT.prototype,"renderTaskCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderTaskCell"),dT.prototype),mT(dT.prototype,"renderTagCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderTagCell"),dT.prototype),mT(dT.prototype,"renderLessonCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderLessonCell"),dT.prototype),mT(dT.prototype,"renderStatusCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderStatusCell"),dT.prototype),mT(dT.prototype,"renderUpdatedAtCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderUpdatedAtCell"),dT.prototype),mT(dT.prototype,"renderSubmissionsCountCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderSubmissionsCountCell"),dT.prototype),mT(dT.prototype,"renderTeacherCell",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"renderTeacherCell"),dT.prototype),mT(dT.prototype,"clearSelected",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"clearSelected"),dT.prototype),mT(dT.prototype,"onOutsideClick",[R.Q2],Object.getOwnPropertyDescriptor(dT.prototype,"onOutsideClick"),dT.prototype),dT);ET.displayName="SolutionsTable";const gT=["page","ordering"],yT=["page","ordering","withExpelled"];var fT;function ST(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}function bT(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const vT=r().with("course-solutions");let NT=(fT=class extends a.Component{constructor(e){super(e),this.filterList=[Jc.Student,Jc.Task,Jc.Tag,Jc.Lesson,Jc.Status,Jc.Plagiarism,Jc.TaskType],this.defaultFilters={taskType:[qe.wP.Other,qe.wP.Problem]},"undefined"!=typeof window&&e.initializeTable(yu.E.Solutions)}componentDidMount(){this.props.queryParams.ordering||this.changeSortingParam({field:hT.UpdateTime,order:Kc.j.DESCENDING})}componentDidUpdate(e){const{location:{search:t},pageSize:s}=this.props;(e.location.search!==t||e.pageSize!==s)&&this.fetchSolutions()}componentWillUnmount(){this.props.clearSolutions(),this.props.clearSettings()}render(){const{course:e,group:t,fetchError:s,fetchStatus:n}=this.props,r=this.getAppliedFilters(),i=l.Ru.text({id:"course-solutions-teacher",keyset:"page-titles",params:{course:e.title,group:t.name}});return a.createElement("article",{className:vT()},a.createElement(tr.m,null,a.createElement("title",null,i),a.createElement("meta",{name:"title",content:i})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement($t.D,{level:1,controls:a.createElement(oT,{cls:vT("checkbox"),checked:this.getExpelledFilterValue(),onChange:this.toggleExpelledFilter})},l.Ru.text({id:"solutions",keyset:"solutions"})),a.createElement("div",{className:vT("filters-wrapper")},a.createElement(_f,{courseId:e.id,groupId:t.id,appliedFilters:r,onFilterChange:this.changeParams})),a.createElement(Au,null),a.createElement(nr,{fetchError:s,fetchStatus:n,renderSuccess:this.renderTable(r),renderError:this.renderError}))))}getExpelledFilterValue(){return"true"===this.props.queryParams.withExpelled}toggleExpelledFilter(){const e=this.getExpelledFilterValue();this.changeParams({withExpelled:(!e).toString()})}renderError(e){return this.renderMessage(e,!0)}renderTable(e){return()=>{const{solutions:t,solutionCount:s,totalPages:n,queryParams:{page:r},match:{params:i}}=this.props,{courseId:o,groupId:c}=i;if(!s){const t=e.length>0?l.Ru.text({id:"no-solutions-found",keyset:"solutions"}):l.Ru.text({id:"no-sent-solutions",keyset:"solutions"});return this.renderMessage(t)}return a.createElement(a.Fragment,null,a.createElement(ET,{courseId:o,groupId:c,solutionCount:s,solutions:t,appliedSortings:this.getAppliedSortings(),onChangeParams:this.changeParams,onSortingChange:this.changeSortingParam}),a.createElement(_u,{currentPage:r?Number(r):1,totalPages:n,buildPageLink:this.buildPageUrl}))}}renderMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.createElement("p",{className:vT("message",{error:t})},e)}getAppliedFilters(){const e=this.props,{}=e,t=ST(e.queryParams,gT),s=Object.assign({},this.defaultFilters,t);return Object.keys(s).reduce(((e,t)=>{const n=s[t];return this.filterList.includes(t)&&n&&e.push({filterName:t,values:Array.isArray(n)?n.map((e=>e.toString())):[n.toString()]}),e}),[])}getAppliedSortings(){const{queryParams:{ordering:e}}=this.props;return qc(e)}changeSortingParam(e){const t=$c(this.getAppliedSortings(),e);this.changeParams({ordering:t})}changeParams(e){const{history:t,location:{pathname:s},queryParams:n}=this.props,r=Object.assign({},n,e,{page:1});t.push({pathname:s,search:Qs.stringify(r,{encode:!1})})}fetchSolutions(){const e=this.props,{match:{params:t},queryParams:{page:s,ordering:n},pageSize:r}=e,a=ST(e.queryParams,yT),{courseId:i,groupId:o}=t,l=Object.assign({},this.defaultFilters,a);this.props.fetchSolutions(Object.assign({},l,{courseId:Number(i),groupId:Number(o),limit:r,offset:s&&r?r*(Number(s)-1):0,ordering:n,withExpelled:this.getExpelledFilterValue(),withLatestSubmissionPlagiarism:!0}))}buildPageUrl(e){const{match:{params:t},queryParams:s}=this.props,{courseId:n,groupId:r}=t;return p.ZZ.courseSolutions.build({courseId:n,groupId:r},Object.assign({},s,{page:e}))}},bT(fT.prototype,"getExpelledFilterValue",[R.Q2],Object.getOwnPropertyDescriptor(fT.prototype,"getExpelledFilterValue"),fT.prototype),bT(fT.prototype,"toggleExpelledFilter",[R.Q2],Object.getOwnPropertyDescriptor(fT.prototype,"toggleExpelledFilter"),fT.prototype),bT(fT.prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(fT.prototype,"renderError"),fT.prototype),bT(fT.prototype,"renderTable",[R.Q2],Object.getOwnPropertyDescriptor(fT.prototype,"renderTable"),fT.prototype),bT(fT.prototype,"changeSortingParam",[R.Q2],Object.getOwnPropertyDescriptor(fT.prototype,"changeSortingParam"),fT.prototype),bT(fT.prototype,"changeParams",[R.Q2],Object.getOwnPropertyDescriptor(fT.prototype,"changeParams"),fT.prototype),bT(fT.prototype,"buildPageUrl",[R.Q2],Object.getOwnPropertyDescriptor(fT.prototype,"buildPageUrl"),fT.prototype),fT);NT.displayName="CourseSolutions";const IT=(0,i.y)(NT),TT=$r(oN((0,o.Ng)((function(e,t){const{history:s,location:{pathname:n,search:r},match:{params:a}}=t,i=Qs.parse(r),o=function(e){return e.solutions.list.count}(e),l=function(e){const{settings:t}=e.tableSettings;return t?t.pageSize:void 0}(e),c=o&&l?Math.ceil(o/l):0;return i.page&&!Wc(i.page,c)&&s.push({pathname:n,search:Qs.stringify(Object.assign({},i,{page:1}))}),{course:V(e,Number(a.courseId),Number(a.groupId)),group:Qc(e,a.groupId),solutions:UN(e),solutionCount:o,fetchError:QN(e),fetchStatus:HN(e),pageSize:l,queryParams:i,totalPages:c}}),(function(e){return(0,_.zH)({fetchSolutions:jN.x6,clearSolutions:jN.wU,initializeTable:mu,clearSettings:Eu},e)}))(IT)));var kT,CT=s(67430);function wT(e){return e.lessonProgressPreview.progressPreview}function AT(e){return e.lessonProgressPreview.fetchStatus}function OT(e){return e.lessonProgressPreview.fetchError}const RT=r().with("lesson-progress-dashboard");let _T=(kT=class extends a.Component{componentDidMount(){const{lessonId:e,groupId:t,fetchStatus:s}=this.props;s!==Ot.L.SUCCESS&&this.props.fetchLessonProgressPreview({lessonId:Number(e),groupId:Number(t)})}componentWillUnmount(){this.props.clearLessonProgressPreview()}render(){const{courseId:e,groupId:t,lessonId:s,progressPreview:n}=this.props,r=n&&n.students.length;return a.createElement(ol,{cls:RT("container"),body:this.renderBody(),title:l.Ru.text({id:"progress",keyset:"progress"}),tabUrl:p.ZZ.lessonProgress.build({courseId:e,groupId:t,lessonId:s}),tabName:r?l.Ru.text({id:"all-students",keyset:"progress"}):""})}renderBody(){const{fetchError:e,fetchStatus:t}=this.props;return a.createElement("div",{className:RT()},a.createElement(rr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderError:this.renderError,renderSuccess:this.renderStudentsProgress}))}renderSpin(){return a.createElement("div",{className:RT("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))}renderError(e){return a.createElement("div",{className:RT("error")},e)}renderStudentsProgress(){const{progressPreview:e}=this.props;return e?a.createElement("table",{className:RT("progress-table")},a.createElement("tbody",null,e.students.map((t=>a.createElement("tr",{key:t.id,className:RT("student-row")},a.createElement("td",null,a.createElement(am,{className:RT("student"),avatar:t.avatar,displayName:t.displayName,userId:t.id,status:t.status})),a.createElement("td",null,a.createElement("div",{className:RT("score-badges")},e.tags.map((e=>a.createElement(fe,{key:e.id,content:l.Ru.text({id:e.type,keyset:"task-tags"})},a.createElement(fI,{cls:RT("score-badge"),color:e.color,score:t.summary[e.id]||0}))))))))))):null}},function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}(kT.prototype,"renderStudentsProgress",[R.Q2],Object.getOwnPropertyDescriptor(kT.prototype,"renderStudentsProgress"),kT.prototype),kT);_T.displayName="LessonProgressDashboard";const LT=(0,o.Ng)((function(e){return{progressPreview:wT(e),fetchError:OT(e),fetchStatus:AT(e)}}),(function(e){return(0,_.zH)({fetchLessonProgressPreview:CT.i.request,clearLessonProgressPreview:CT.z},e)}))(_T);var MT=s(35974);function PT(e){return e.solutions.info.info}function xT(e){return e.solutions.info.fetchStatus}function DT(e){return e.solutions.info.fetchError}var FT,zT=s(20966);function jT(e){return e.solutions.studentsWithoutSolutions.studentsWithoutSolutions}function UT(e){return e.solutions.studentsWithoutSolutions.fetchStatus}function HT(e){return e.solutions.studentsWithoutSolutions.fetchError}function QT(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const VT=r().with("no-solutions");let GT=(FT=class e extends a.Component{static countNoSolutionsHeight(e){const t=Math.ceil(Math.max(e,21)/3);return 36*t+10*t+40+8}getNoSolutionsMinHeight(){const{noSolutionCount:t}=this.props;return t>0?e.countNoSolutionsHeight(t):0}renderSpin(){const e=this.getNoSolutionsMinHeight();return a.createElement("div",{className:VT("spin"),style:{minHeight:"".concat(e,"px")}},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))}renderStudents(){const{studentsWithoutSolutions:e,hasQuery:t,noSolutionCount:s}=this.props;if(!e)return null;const{results:n,count:r}=e;return a.createElement(a.Fragment,null,s>0&&a.createElement("section",{className:VT()},a.createElement("header",{className:VT("header")},a.createElement("div",{className:VT("title")},l.Ru.element({id:t?"not-passed-search-result":"not-passed",keyset:"tasks",params:{total:a.createElement("span",{className:VT("count")},c,r)}}))),a.createElement("ul",{className:VT("students-list")},n.map((e=>a.createElement("li",{key:e.id,className:VT("student-wrapper")},a.createElement(am,{className:VT("student"),avatar:e.avatar,displayName:e.displayName,userId:e.id,status:Ls.a.Enrolled})))))))}renderError(e){const t=this.getNoSolutionsMinHeight();return a.createElement("div",{className:VT("error"),style:{minHeight:"".concat(t,"px")}},e)}render(){const{studentsWithoutSolutionsFetchError:e,studentsWithoutSolutionsFetchStatus:t}=this.props;return a.createElement(rr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderStudents,renderError:this.renderError})}},QT(FT.prototype,"renderSpin",[R.Q2],Object.getOwnPropertyDescriptor(FT.prototype,"renderSpin"),FT.prototype),QT(FT.prototype,"renderStudents",[R.Q2],Object.getOwnPropertyDescriptor(FT.prototype,"renderStudents"),FT.prototype),QT(FT.prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(FT.prototype,"renderError"),FT.prototype),FT);GT.displayName="StudentsWithoutSolutions";const BT=GT,WT=e=>{let{className:t,searchStudents:s,query:n,setQuery:r}=e;const[i,o]=(0,a.useState)(n),c=(0,a.useCallback)((e=>{o(e.target.value||"")}),[]),u=(0,a.useCallback)((async()=>{r(i),s(i)}),[i,s,r]),d=(0,a.useCallback)((e=>{"Enter"===e.key&&u()}),[u]);return a.createElement(qt,{type:"text",value:i,className:t,onChange:c,onKeyDown:d,placeholder:l.Ru.text({id:"search-student-input-placeholder",keyset:"common"}),size:"m",iconRight:a.createElement("button",{className:[Xt.button,Xt.inputButton].join(" "),onClick:u,type:"button","aria-label":"search",children:"↵"})})};WT.displayName="StudentSearch";const JT=r().with("solution-status-counts");class KT extends a.Component{render(){const{type:e,count:t=0}=this.props;return a.createElement("span",{className:JT({type:e})},l.Ru.element({id:"status-".concat(e),keyset:"tasks",params:{total:a.createElement("span",{className:JT("count")},t)}}))}}KT.displayName="SolutionStatusCounts";const ZT=KT,YT=r().with("task-solutions");class qT extends a.PureComponent{render(){const{solution:{id:e,student:t,score:s,status:n,updateTime:r},scoreMax:i,solutionUrl:o,hideScoreInformation:l,children:c}=this.props;return a.createElement("div",{className:YT("solution")},a.createElement(am,{className:YT("student"),avatar:t.avatar,displayName:t.displayName,userId:t.id,status:t.status}),a.createElement("div",{className:YT("solution-content")},a.createElement(L.N_,{className:YT("link"),to:o},a.createElement(ie,{type:"new-window",size:"m"}),a.createElement("div",{className:YT("id")},e)),a.createElement("div",{className:YT("solution-status")},a.createElement(hl,{scoreMax:i,score:s,type:n.type,hideScoreInformation:l})),c,r&&a.createElement("div",{className:YT("date")},Ne.Ay.fromISO(r).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")))))}}qT.displayName="Solution";const $T=qT;var XT,ek;function tk(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const sk=r().with("solutions");let nk=(ek=class e extends a.Component{static countSolutionsHeight(t){const{solutionHeight:s,solutionsMarginBottom:n,headerHeight:r,borderWidth:a}=e;return r+s*t+a*(t+1)+n}getMinHeight(){const t=(s=this.props.taskStatistics,Object.entries(s).reduce(((e,t)=>{let[s,n]=t;return e+(Ye.bU.includes(s)?n:0)}),0));var s;return t>0?e.countSolutionsHeight(t):0}static getCounters(e){return[{type:"waiting",count:e[Ye.gt.Review]+e[Ye.gt.AutoReview]+(e[Ye.gt.SamplesPassed]||0)},{type:"ok",count:e[Ye.gt.Accepted]+(e[Ye.gt.AcceptedAfterDeadline]||0)},{type:"redo",count:e[Ye.gt.Rework]}]}static getCountersForP2p(e){return[{type:"assigned-to-p2p",count:e[Ye.gt.Uploaded]+e[Ye.gt.AssignedToP2p]},{type:"ok",count:e[Ye.gt.Accepted]+(e[Ye.gt.AcceptedAfterDeadline]||0)},{type:"on-clarifying",count:e[Ye.gt.OnClarifying]}]}buildSolutionUrl(e,t){const{courseId:s,groupId:n,lessonId:r}=this.props;return p.ZZ.taskSolutions.build({courseId:s,groupId:n,lessonId:r,taskId:e,solutionId:t})}renderError(e){const t=this.getMinHeight();return a.createElement("div",{className:sk("error"),style:{minHeight:"".concat(t,"px")}},e)}renderSpin(){const e=this.getMinHeight();return a.createElement("div",{className:sk("spin"),style:{minHeight:"".concat(e,"px")}},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))}renderTaskSolutions(){const{solutionsInfo:t,scoreMax:s,taskId:n,taskStatistics:{total:r},hasP2p:i,taskType:o,courseId:u,groupId:d,lessonId:m}=this.props;if(!t)return null;const{solutions:h,statusCounter:E,count:g}=t,y=Object.assign({total:r},E),f=i?e.getCountersForP2p(E):e.getCounters(E);return a.createElement(a.Fragment,null,0!==h.length&&a.createElement("section",{className:sk()},a.createElement("header",{className:sk("header")},a.createElement("div",{className:sk("title")},l.Ru.element({id:"solutions",keyset:"tasks",params:{total:a.createElement("span",{className:sk("count")},c,"number"==typeof g?g:h.length)}})),a.createElement("div",{className:sk("progress")},a.createElement(Ky,{statistics:y}),a.createElement("div",{className:sk("counters")},f.map((e=>a.createElement("span",{key:e.type,className:sk("counter")},a.createElement(ZT,{type:e.type,count:e.count}))))))),a.createElement("ul",{className:sk("solutions-list")},h.map((e=>a.createElement("li",{key:e.id,className:sk("solution-wrapper")},a.createElement($T,{scoreMax:s,solution:e,solutionUrl:this.buildSolutionUrl(n,e.id.toString()),hideScoreInformation:"material"===o}))))),"number"==typeof this.props.solutionsLimit&&"number"==typeof g&&g>this.props.solutionsLimit&&a.createElement("div",{className:sk("all-solutions-button")},a.createElement(ge.$,{size:"l",theme:"normal",view:"lyceum",type:"link",url:p.ZZ.courseSolutions.build({courseId:u,groupId:d},{taskId:n,lessonId:m,taskType:["material","other"]})},l.Ru.text({keyset:"solutions",id:"all-solutions"})))))}render(){return a.createElement(rr,{fetchError:this.props.solutionsFetchError,fetchStatus:this.props.solutionsFetchStatus,renderPending:this.renderSpin,renderSuccess:this.renderTaskSolutions,renderError:this.renderError})}},ek.headerHeight=40,ek.solutionHeight=48,ek.borderWidth=1,ek.solutionsMarginBottom=24,tk((XT=ek).prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(XT.prototype,"renderError"),XT.prototype),tk(XT.prototype,"renderSpin",[R.Q2],Object.getOwnPropertyDescriptor(XT.prototype,"renderSpin"),XT.prototype),tk(XT.prototype,"renderTaskSolutions",[R.Q2],Object.getOwnPropertyDescriptor(XT.prototype,"renderTaskSolutions"),XT.prototype),XT);nk.displayName="StudentSolutions";const rk=r().with("task-solutions"),ak=e=>{var t;let{courseId:s,groupId:n,lessonId:r,taskId:i,taskStatistics:o,solutionsFetchStatus:l,scoreMax:c,solutionsInfo:u,onTaskLoaded:d,searchStudentsWithNoSolutions:m,noSolutionsLimit:p,solutionsLimit:h,hasP2p:E,taskType:g,studentsWithoutSolutions:y,studentsWithoutSolutionsFetchError:f,studentsWithoutSolutionsFetchStatus:S,solutionsFetchError:b}=e;const[v,N]=(0,a.useState)(""),I=null!=(t=null==y?void 0:y.count)?t:0,T=(0,a.useRef)(null);return(0,a.useEffect)((()=>{l===Ot.L.SUCCESS&&(null==d||d())}),[d,l]),a.createElement("div",{className:rk(),ref:T},a.createElement(nk,{scoreMax:c,solutionsInfo:u,taskStatistics:o,courseId:s,groupId:n,lessonId:r,taskId:i,solutionsFetchError:b,solutionsFetchStatus:l,solutionsLimit:h,hasP2p:E,taskType:g}),a.createElement(BT,{hasQuery:Boolean(v),noSolutionCount:I,studentsWithoutSolutions:y,searchStudentsWithNoSolutions:m,studentsWithoutSolutionsFetchStatus:S,studentsWithoutSolutionsFetchError:f}),"number"==typeof p&&I>=p&&a.createElement("div",{className:rk("student-list-search")},a.createElement(WT,{query:v,setQuery:N,className:rk("student-list-search-input"),searchStudents:m})))};ak.displayName="TaskSolutions";const ik=ak;var ok;let lk=(function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}((ok=class extends a.Component{componentDidMount(){const{groupId:e,taskId:t,courseId:s,lessonId:n}=this.props;this.props.fetchSolutionsInfo({groupId:Number(e),taskId:Number(t),limit:20,offset:0}),this.props.fetchStudentsWithoutSolutions({courseId:Number(s),lessonId:Number(n),groupId:Number(e),taskId:Number(t),limit:21})}componentWillUnmount(){this.props.clearSolutionsInfo(),this.props.clearStudentsWithoutSolutions()}searchStudentsWithoutSolutions(e){const{groupId:t,taskId:s,courseId:n,lessonId:r}=this.props;this.props.fetchStudentsWithoutSolutions({courseId:Number(n),lessonId:Number(r),groupId:Number(t),taskId:Number(s),limit:21,studentFullName:e})}render(){const{courseId:e,solutionsFetchError:t,solutionsFetchStatus:s,noSolutionFetchError:n,noSolutionFetchStatus:r,groupId:i,lessonId:o,scoreMax:l,solutionsInfo:c,studentsWithoutSolutions:u,taskId:d,taskStatistics:m,hasP2p:p,taskType:h,onTaskLoaded:E}=this.props;return a.createElement(ik,{courseId:e,solutionsFetchError:t,solutionsFetchStatus:s,searchStudentsWithNoSolutions:this.searchStudentsWithoutSolutions,studentsWithoutSolutionsFetchStatus:r,studentsWithoutSolutionsFetchError:n,groupId:i,lessonId:o,scoreMax:l,solutionsInfo:c,studentsWithoutSolutions:u,taskStatistics:m,taskId:d,hasP2p:p,taskType:h,solutionsLimit:20,noSolutionsLimit:21,onTaskLoaded:E})}}).prototype,"searchStudentsWithoutSolutions",[R.Q2],Object.getOwnPropertyDescriptor(ok.prototype,"searchStudentsWithoutSolutions"),ok.prototype),ok);lk.displayName="TaskSolutionsContainer";const ck=(0,o.Ng)((function(e){return{solutionsInfo:PT(e),studentsWithoutSolutions:jT(e),solutionsFetchStatus:xT(e),solutionsFetchError:DT(e),noSolutionFetchStatus:UT(e),noSolutionFetchError:HT(e)}}),(function(e){return(0,_.zH)({fetchSolutionsInfo:MT.JU,fetchStudentsWithoutSolutions:zT.z_,clearSolutionsInfo:MT.G$,clearStudentsWithoutSolutions:zT.Uy},e)}))(lk),uk=r().with("visibility-button"),dk=e=>{let{isHidden:t,children:s,onClick:n}=e;const r=(0,a.useCallback)((e=>a.createElement(ie,{className:e,size:"l",type:t?"eye-open":"eye-closed"})),[t]);return a.createElement(ge.$,{className:uk(),iconLeft:r,size:"l",theme:"clear",view:"lyceum",onClick:n},s)};dk.displayName="VisibilityButton";const mk=dk;var pk;let hk=(pk=class extends a.Component{componentDidMount(){this.props.detailsFetchStatus!==Ot.L.SUCCESS&&this.fetchData()}componentDidUpdate(e){Cl(e,this.props,["courseId","groupId","lessonId"])&&this.fetchData()}componentWillUnmount(){this.props.clearLessonDetails()}render(){const{course:e,group:t,lesson:s,detailsFetchError:n,detailsFetchStatus:r}=this.props;if(!e)return null;let i;s&&(i=l.Ru.text({id:"lesson-details-teacher",keyset:"page-titles",params:{course:e.title,lesson:s.title,group:t.name}}));const o=p.oi.courseDetails.build({courseId:e.id.toString(),groupId:t.id.toString()});return a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,i),a.createElement("meta",{name:"title",content:i})),a.createElement(nc,{lesson:s,lessonsUrl:o,detailsFetchError:n,detailsFetchStatus:r,visibilityButton:this.renderVisibilityButton()}))}renderVisibilityButton(){const{lesson:e,visibilityFetchStatus:t}=this.props;if(!e)return null;const{isHidden:s}=e;return t===Ot.L.PENDING?a.createElement(he.t,{view:"default",progress:!0,size:"xs"}):a.createElement(mk,{isHidden:s,onClick:this.toggleVisibility},s?l.Ru.text({id:"show-lesson",keyset:"lessons"}):l.Ru.text({id:"hide-lesson",keyset:"lessons"}))}fetchData(){const{courseId:e,groupId:t,lessonId:s}=this.props;this.props.fetchTeacherLessonDetails({courseId:Number(e),groupId:Number(t),lessonId:Number(s)})}toggleVisibility(){const{group:e,lesson:t}=this.props;t&&this.props.changeLessonVisibility({group:e,lesson:t})}},function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}(pk.prototype,"toggleVisibility",[R.Q2],Object.getOwnPropertyDescriptor(pk.prototype,"toggleVisibility"),pk.prototype),pk);hk.displayName="TeacherLessonHeaderContainer";const Ek=(0,o.Ng)((function(e,t){return{course:V(e,Number(t.courseId),Number(t.groupId)),group:Qc(e,t.groupId),lesson:pc(e),detailsFetchError:hc(e),detailsFetchStatus:Ec(e),visibilityFetchStatus:gc(e)}}),(function(e){return(0,_.zH)({changeLessonVisibility:mc.T5,clearLessonDetails:mc.wT,fetchTeacherLessonDetails:mc.lj},e)}))(hk);var gk;function yk(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const fk=r().with("teacher-task-list");let Sk=(gk=class e extends a.PureComponent{constructor(){super(...arguments),this.headerRef=(0,a.createRef)(),this.canOpen=()=>this.hasNonZeroStats()&&"minimized"===this.props.view}onTaskClick(){const{task:e,toggleTask:t}=this.props;this.canOpen()&&t(e.id)}onTaskLoaded(){var e;const t=null==(e=this.headerRef)?void 0:e.current;t&&t.getBoundingClientRect().top<0&&t.scrollIntoView({behavior:"smooth"})}toggleTask(){const{task:e,toggleTask:t}=this.props;t(e.id)}buildTaskUrl(e){const{courseId:t,groupId:s,lessonId:n}=this.props;return p.ZZ.taskSolutions.build({courseId:t,groupId:s,lessonId:n,taskId:e.toString()})}static renderTaskTitle(e){return a.createElement(a.Fragment,null,e.title,e.hasManualCheck&&e.taskType===qe.wP.Other&&a.createElement(Ze,{ariaLabel:l.Ru.text({id:"manual-check-label",keyset:"tasks"})},l.Ru.text({id:"manual-check-abbr",keyset:"tasks"})),e.hasP2p&&a.createElement(Ze,{cls:fk("task-check-info")},l.Ru.text({id:"p2p-check-abbr",keyset:"tasks"})))}hasNonZeroStats(){const{task:{statistics:e}}=this.props;return Object.keys(e).some((t=>![...qy,"total"].includes(t)&&e[t]>0))}renderMinimizedTask(){const{task:t}=this.props,{statistics:s}=t,n=s[Ye.gt.Review]+s[Ye.gt.AutoReview],r=this.buildTaskUrl(t.id);return a.createElement(a.Fragment,null,a.createElement("div",{className:fk("left")},a.createElement(L.N_,{className:fk("link-icon"),to:r},a.createElement(ie,{type:"new-window",size:"s"})),a.createElement("h4",{className:fk("title")},e.renderTaskTitle(t))),a.createElement("div",{className:fk("right")},this.hasNonZeroStats()&&a.createElement(Ky,{statistics:s}),n>0&&a.createElement("div",{className:fk("waiting")},a.createElement(hl,{type:Ye.gt.Review,waitingCount:n,hideScoreInformation:"material"===t.taskType}))))}renderOpenedTask(){const{task:t,renderOpenedTask:s}=this.props,n=this.buildTaskUrl(t.id);return a.createElement(a.Fragment,null,a.createElement("header",{className:fk("task-header"),ref:this.headerRef},a.createElement(L.N_,{className:fk("link-icon"),to:n},a.createElement(ie,{type:"new-window",size:"l"})),a.createElement("h2",{className:fk("title")},a.createElement(L.N_,{className:fk("link"),to:n},e.renderTaskTitle(t)))),s(t,this.onTaskLoaded))}render(){const{view:e="minimized"}=this.props;return a.createElement("section",{className:fk("task",{view:e,disabled:!this.canOpen()}),onClick:this.onTaskClick},this.hasNonZeroStats()&&a.createElement(ge.$,{className:fk("toggle-button"),checked:"opened"===e,size:"xs",theme:"clear",view:"lyceum",icon:t=>a.createElement(ie,{className:(0,$.j)(t,fk("arrow-icon")),direction:"minimized"===e?"bottom":"top",size:"m",type:"scroll"}),onClick:this.toggleTask,"aria-label":l.Ru.text({keyset:"common",id:"show"})}),a.createElement("div",{className:fk("content")},"minimized"===e?this.renderMinimizedTask():this.renderOpenedTask()))}},yk(gk.prototype,"onTaskClick",[R.Q2],Object.getOwnPropertyDescriptor(gk.prototype,"onTaskClick"),gk.prototype),yk(gk.prototype,"onTaskLoaded",[R.Q2],Object.getOwnPropertyDescriptor(gk.prototype,"onTaskLoaded"),gk.prototype),yk(gk.prototype,"toggleTask",[R.Q2],Object.getOwnPropertyDescriptor(gk.prototype,"toggleTask"),gk.prototype),gk);Sk.displayName="Task";const bk=Sk;var vk=s(3576);function Nk(e){return e.solutions.problemDetails.solutionInfo}function Ik(e){return e.solutions.problemDetails.fetchError}function Tk(e){return e.solutions.problemDetails.fetchProblemDetailsError}function kk(e){return e.solutions.problemDetails.fetchStatus}function Ck(e){return e.solutions.problemDetails.fetchProblemDetailsStatus}function wk(e){return e.solutions.problemDetails.problemDetails}const Ak=(0,U.Mz)(wk,(e=>{const t={};return e?0===e.submissions.length?t:e.submissions[e.submissions.length-1].submission:t})),Ok=(0,U.Mz)([Nk,(e,t)=>t.solutionId],((e,t)=>{if(!e)return;const s=e.solutions.find((e=>e.id===t));return s?s.user:void 0})),Rk=e=>{let{attempts:t,attemptsMax:s}=e;return a.createElement("div",{className:"problem-attempts"},l.Ru.text({id:"solutionList.attempts",keyset:"problems",params:{attempts:t,attemptsMax:s}}))};Rk.displayName="ProblemAttempts";const _k=Rk,Lk=r().with("task-solutions"),Mk=e=>[{type:"ok",count:e[Ye.gt.Accepted]||0},{type:"wrong",count:e[Ye.gt.Wrong]||0}],Pk=e=>{let{problem:t}=e;const s=P(Nk),{courseId:n,lessonId:r,groupId:o}=(0,i.g)();if(!s)return null;const{scoreMax:u}=t,{solutions:d,usersNotPassed:m}=s,h=Mk(s.statistics);return a.createElement("div",{className:"problem-solution__content"},a.createElement(a.Fragment,null,0!==d.length&&a.createElement("section",{className:Lk("solutions")},a.createElement("header",{className:Lk("solutions-header")},a.createElement("div",{className:Lk("solutions-title")},l.Ru.element({id:"solutions",keyset:"tasks",params:{total:a.createElement("span",{className:Lk("solutions-count")},c,d.length)}})),a.createElement("div",{className:Lk("solutions-progress")},a.createElement(Ky,{statistics:s.statistics}),a.createElement("div",{className:Lk("solutions-counters")},h.map((e=>a.createElement("span",{key:e.type,className:Lk("solutions-counter")},a.createElement(ZT,{type:e.type,count:e.count}))))))),a.createElement("ul",{className:Lk("solution-list")},d.map((e=>{const t={id:e.id,student:e.user,score:e.score,status:e.status,updateTime:e.lastAttempt},s=p.ZZ.problemSolution.build({courseId:n,lessonId:r,groupId:o,problemLinkId:e.problemLinkId,solutionId:e.id});return a.createElement("li",{key:e.id,className:Lk("solution-wrapper")},a.createElement($T,{scoreMax:u,solution:t,solutionUrl:s},a.createElement("div",{className:Lk("attempts")},a.createElement(_k,{attempts:e.attempts,attemptsMax:e.attemptsMax}))))})))),m.length>0&&a.createElement("section",{className:Lk("solutions")},a.createElement("header",{className:Lk("solutions-header")},a.createElement("div",{className:Lk("solutions-title")},l.Ru.element({id:"not-passed",keyset:"tasks",params:{total:a.createElement("span",{className:Lk("solutions-count")},c,m.length)}}))),a.createElement("ul",{className:Lk("no-solution-list")},m.map((e=>a.createElement("li",{key:e.id,className:Lk("no-solution-wrapper")},a.createElement(am,{className:Lk("student"),avatar:e.avatar,displayName:e.displayName,userId:e.id,status:Ls.a.Enrolled}))))))))};Pk.displayName="ProblemSolutionsContent";const xk=Pk,Dk=e=>{let{problem:t}=e;const s=M(),{groupId:n}=(0,i.g)(),r=P(kk),o=P(Ik);return(0,a.useEffect)((function(){s((0,vk.Wh)(t.id,Number(n)))}),[s,n,t]),a.createElement(rr,{fetchError:o,fetchStatus:r,renderPending:()=>a.createElement(he.t,{view:"default",progress:!0,size:"l"}),renderSuccess:()=>a.createElement(xk,{problem:t})})};Dk.displayName="ProblemSolutions";const Fk=Dk;var zk;function jk(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const Uk=r().with("teacher-task-list");let Hk=(jk((zk=class extends a.PureComponent{constructor(){super(...arguments),this.headerRef=(0,a.createRef)(),this.canOpen=()=>"minimized"===this.props.view}onTaskLoaded(){var e;const t=null==(e=this.headerRef)?void 0:e.current;t&&t.getBoundingClientRect().top<0&&t.scrollIntoView({behavior:"smooth"})}onProblemClick(){const{problem:e,toggleTask:t}=this.props;this.canOpen()&&t(e.id)}toggleProblem(){const{problem:e,toggleTask:t}=this.props;t(e.id)}buildProblemUrl(e){const{courseId:t,groupId:s,lessonId:n,problemVariantIndex:r}=this.props;return p.ZZ.problemSolution.build({courseId:t,groupId:s,lessonId:n,problemLinkId:e},{variant:r?r.toString():void 0})}renderOpenedTask(){const{problem:e}=this.props,t=this.buildProblemUrl(e.id);return a.createElement(a.Fragment,null,a.createElement("header",{className:Uk("task-header"),ref:this.headerRef},a.createElement(L.N_,{className:Uk("link-icon"),to:t},a.createElement(ie,{type:"new-window",size:"l"})),a.createElement("h2",{className:Uk("title")},a.createElement(L.N_,{className:Uk("link"),to:t},e.title))),a.createElement(Fk,{problem:e}))}renderMinimizedTask(){const{problem:e}=this.props,t=this.buildProblemUrl(e.id);return a.createElement(a.Fragment,null,a.createElement("div",{className:Uk("left")},a.createElement(L.N_,{className:Uk("link-icon"),to:t},a.createElement(ie,{type:"new-window",size:"s"})),a.createElement("h4",{className:Uk("title")},e.title)),a.createElement("div",{className:Uk("right")},a.createElement(Ky,{statistics:e.statistics})))}render(){const{view:e="minimized"}=this.props;return a.createElement("section",{className:Uk("task",{view:e,disabled:!this.canOpen()}),onClick:this.onProblemClick},a.createElement(ge.$,{className:Uk("toggle-button"),checked:"opened"===e,size:"xs",theme:"clear",view:"lyceum",icon:t=>a.createElement(ie,{className:(0,$.j)(t,Uk("arrow-icon")),direction:"minimized"===e?"bottom":"top",size:"m",type:"scroll"}),onClick:this.toggleProblem,"aria-label":l.Ru.text({keyset:"common",id:"show"})}),a.createElement("div",{className:Uk("content")},"minimized"===e?this.renderMinimizedTask():this.renderOpenedTask()))}}).prototype,"onTaskLoaded",[R.Q2],Object.getOwnPropertyDescriptor(zk.prototype,"onTaskLoaded"),zk.prototype),jk(zk.prototype,"onProblemClick",[R.Q2],Object.getOwnPropertyDescriptor(zk.prototype,"onProblemClick"),zk.prototype),jk(zk.prototype,"toggleProblem",[R.Q2],Object.getOwnPropertyDescriptor(zk.prototype,"toggleProblem"),zk.prototype),zk);Hk.displayName="ProblemItem";const Qk=Hk;var Vk;function Gk(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const Bk=r().with("teacher-task-list");let Wk=(Vk=class e extends a.PureComponent{constructor(){super(...arguments),this.state={lessonVariantIndex:ng()(this.props.lessonVariants,"0.index"),problemVariantIndex:ng()(this.props.problemVariants,"0.index")}}get lessonVariantsIndex(){return this.state.lessonVariantIndex||ng()(this.props.lessonVariants,"0.index")}get problemVariantIndex(){const{problemVariants:e,lessonType:t}=this.props;if(t===lc.nv.Test)return Jo()(this.state.problemVariantIndex)?ng()(e,"0.index"):this.state.problemVariantIndex}static renderSpin(){return a.createElement("div",{className:Bk("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))}static renderError(e){return a.createElement("p",{className:Bk("error")},e)}updateLessonContent(){const{fetchTaskGroups:e,lessonId:t,groupId:s}=this.props,n=this.lessonVariantsIndex,{problemVariantIndex:r}=this;e({lessonId:Number(t),groupId:Number(s),variantIndex:n,problemVariantIndex:r})}handleLessonVariantChange(e){var t;const s=e.target.value;let n=s;Array.isArray(s)&&([n]=s),(null==(t=this.state.lessonVariantIndex)?void 0:t.toString())!==n&&this.setState({lessonVariantIndex:Number(n)},this.updateLessonContent)}handleProblemVariantChange(e){var t;const s=e.target.value;let n=s;Array.isArray(s)&&([n]=s),(null==(t=this.state.problemVariantIndex)?void 0:t.toString())!==n&&this.setState({problemVariantIndex:Number(n)},this.updateLessonContent)}renderLessonVariantsSelect(){const{lessonType:e,lessonVariants:t}=this.props;if(e===lc.nv.Test&&t.length>1){const[e]=t,s=this.state.lessonVariantIndex||e.index;return a.createElement(ca.l,{value:s,className:Bk("select"),theme:"normal",size:"m",onChange:this.handleLessonVariantChange,options:t.map((e=>({value:e.index,content:"".concat(l.Ru.text({id:"variants-select",keyset:"lessons"})," ").concat(e.index)})))})}return null}renderProblemVariantsSelect(){const{lessonType:e,problemVariants:t}=this.props;if(e===lc.nv.Test&&t.length>1){const[e]=t,s=Jo()(this.state.problemVariantIndex)?e.index:this.state.problemVariantIndex;return a.createElement(ca.l,{value:s,className:Bk("select"),theme:"normal",size:"m",onChange:this.handleProblemVariantChange,options:t.map((e=>({value:e.index,content:"".concat(l.Ru.text({id:"problem-variants-select",keyset:"lessons"})," ").concat(e.index)})))})}return null}renderProblemItem(e,t,s){const{courseId:n,groupId:r,lessonId:i,renderOpenedTask:o}=this.props;return a.createElement(Qk,{courseId:n,groupId:r,lessonId:i,problemVariantIndex:this.problemVariantIndex,problem:e,view:t?"opened":"minimized",toggleTask:s,renderOpenedTask:o})}renderTaskItem(e,t,s){const{courseId:n,groupId:r,lessonId:i,renderOpenedTask:o}=this.props;return a.createElement(bk,{courseId:n,groupId:r,lessonId:i,task:e,view:t?"opened":"minimized",toggleTask:s,renderOpenedTask:o})}renderTaskGroups(){const{taskGroups:e}=this.props;return e.length?a.createElement(Sc.n,{items:e.map((e=>{const t=e.tasks||e.problems||[];return{id:e.id.toString(),title:a.createElement(Ic,{type:e.type}),items:t.map((e=>({id:e.id.toString(),content:t=>{let{isOpen:s,toggle:n}=t;return(e=>!("problem"in e))(e)?this.renderTaskItem(e,s,n):this.renderProblemItem(e,s,n)}})))}}))}):l.Ru.text({id:"no-tasks-message",keyset:"tasks"})}render(){const{fetchError:t,fetchStatus:s}=this.props;return a.createElement("div",{className:Bk()},a.createElement("div",{className:Bk("title-wrapper")},a.createElement($t.D,{level:2},l.Ru.text({id:"teacher-tasks-title",keyset:"lessons"})),a.createElement("div",{className:Bk("variant-controls")},this.renderLessonVariantsSelect(),this.renderProblemVariantsSelect())),a.createElement(nr,{fetchError:t,fetchStatus:s,renderPending:e.renderSpin,renderError:e.renderError,renderSuccess:this.renderTaskGroups}))}},Gk(Vk.prototype,"handleLessonVariantChange",[R.Q2],Object.getOwnPropertyDescriptor(Vk.prototype,"handleLessonVariantChange"),Vk.prototype),Gk(Vk.prototype,"handleProblemVariantChange",[R.Q2],Object.getOwnPropertyDescriptor(Vk.prototype,"handleProblemVariantChange"),Vk.prototype),Gk(Vk.prototype,"renderLessonVariantsSelect",[R.Q2],Object.getOwnPropertyDescriptor(Vk.prototype,"renderLessonVariantsSelect"),Vk.prototype),Gk(Vk.prototype,"renderProblemVariantsSelect",[R.Q2],Object.getOwnPropertyDescriptor(Vk.prototype,"renderProblemVariantsSelect"),Vk.prototype),Gk(Vk.prototype,"renderProblemItem",[R.Q2],Object.getOwnPropertyDescriptor(Vk.prototype,"renderProblemItem"),Vk.prototype),Gk(Vk.prototype,"renderTaskItem",[R.Q2],Object.getOwnPropertyDescriptor(Vk.prototype,"renderTaskItem"),Vk.prototype),Gk(Vk.prototype,"renderTaskGroups",[R.Q2],Object.getOwnPropertyDescriptor(Vk.prototype,"renderTaskGroups"),Vk.prototype),Vk);Wk.displayName="TeacherTaskList";const Jk=Wk;class Kk extends a.Component{componentDidMount(){const{fetchStatus:e}=this.props;e!==Ot.L.SUCCESS&&this.fetchTaskList()}componentDidUpdate(e){null===e.lesson&&this.props.lesson&&this.fetchTaskList()}componentWillUnmount(){this.props.clearTaskGroups()}fetchTaskList(){const{fetchTaskGroups:e,lessonId:t,groupId:s,lesson:n}=this.props;if(!n)return;let r={lessonId:Number(t),groupId:Number(s)};switch(n.type){case lc.nv.Normal:e(r);break;case lc.nv.Test:{const[t]=n.variants,[s]=n.problemVariants;t&&(r=Object.assign({},r,{variantIndex:t.index})),s&&(r=Object.assign({},r,{problemVariantIndex:s.index})),e(r);break}default:throw new d.gs("Lesson type not supported",{type:n.type})}}render(){const{courseId:e,groupId:t,lessonId:s,lesson:n,taskGroups:r,fetchTaskGroups:i,fetchError:o,fetchStatus:l,renderOpenedTask:c}=this.props;let u=null,d=[],m=[];return n&&(u=n.type,d=n.variants,m=n.problemVariants),a.createElement(Jk,{courseId:e,groupId:t,lessonId:s,lessonType:u,lessonVariants:d,problemVariants:m,taskGroups:r,fetchTaskGroups:i,fetchError:o,fetchStatus:l,renderOpenedTask:c})}}Kk.displayName="TeacherTaskListContainer";const Zk=(0,o.Ng)((function(e){return{lesson:pc(e),taskGroups:(0,vl.uR)(e),fetchStatus:(0,vl.Ku)(e),fetchError:(0,vl.wL)(e)}}),(function(e){return(0,_.zH)({clearTaskGroups:cn.Ek,fetchTaskGroups:cn.mD},e)}))(Kk);var Yk;const qk=r().with("lesson-details");let $k=(function(e,t,s,n,r){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&Object.defineProperty(e,t,a)}((Yk=class extends a.Component{render(){const{courseId:e,groupId:t,lessonId:s}=this.props.match.params,n=l.Ru.text({id:"lesson-details",keyset:"lessons"});return a.createElement("article",{className:qk()},a.createElement(tr.m,null,a.createElement("title",null,n),a.createElement("meta",{name:"title",content:n})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Top,null,a.createElement(Ek,{courseId:e,groupId:t,lessonId:s})),a.createElement(sr.A.Main,null,a.createElement(Zk,{courseId:e,groupId:t,lessonId:s,renderOpenedTask:this.renderOpenedTask(e,t,s)})),a.createElement(sr.A.Aside,null,a.createElement(LT,{courseId:e,groupId:t,lessonId:s}),a.createElement(ec,{pathParams:{courseId:e,groupId:t,lessonId:s},role:E.Teacher})),a.createElement(sr.A.ActiveArea,null)))}renderOpenedTask(e,t,s){return(n,r)=>a.createElement(ck,{courseId:e,groupId:t,lessonId:s,taskId:n.id.toString(),scoreMax:n.scoreMax,taskStatistics:n.statistics,hasP2p:n.hasP2p,taskType:n.taskType,onTaskLoaded:r})}}).prototype,"renderOpenedTask",[R.Q2],Object.getOwnPropertyDescriptor(Yk.prototype,"renderOpenedTask"),Yk.prototype),Yk);$k.displayName="LessonDetails";const Xk=$r($k);class eC extends a.Component{componentDidMount(){const{match:{params:e}}=this.props,{groupId:t,lessonId:s,materialId:n}=e;this.props.fetchMaterialDetails({groupId:Number(t),lessonId:Number(s),materialId:Number(n)})}componentWillUnmount(){this.props.clearMaterialDetails()}render(){const{match:e,course:t,group:s,detailedMaterialInfo:n,fetchError:r,fetchStatus:i}=this.props,{params:{courseId:o,groupId:l,lessonId:c}}=e,u=p.oi.lessonDetails.build({courseId:o,groupId:l,lessonId:c});return a.createElement(Hc,{course:t,group:s,lessonId:c,lessonUrl:u,fetchError:r,fetchStatus:i,detailedMaterialInfo:n})}}eC.displayName="TeacherLessonMaterial";const tC=$r((0,o.Ng)((function(e,t){const{match:{params:s}}=t;return{course:V(e,Number(s.courseId),Number(s.groupId)),group:Qc(e,s.groupId),detailedMaterialInfo:Wl(e),fetchError:Kl(e),fetchStatus:Jl(e)}}),(function(e){return(0,_.zH)({fetchMaterialDetails:Ql.C0,clearMaterialDetails:Ql.Jh},e)}))(eC));var sC=s(28527);function nC(e){return e.lessonProgress.lessonPreview}function rC(e){return e.lessonProgress.progressTable}function aC(e){return e.lessonProgress.fetchStatus}function iC(e){return e.lessonProgress.fetchError}function oC(e){return e.lessonProgress.tableSortOptions}function lC(e){const{progressTable:t}=e.lessonProgress;return t?t.studentIds.map((e=>t.studentsMap[e])):[]}var cC,uC=s(31833),dC=s(89970);function mC(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const pC=r().with("lesson-progress-table");let hC=(cC=class e extends a.Component{changeSortField(e){return t=>{this.props.changeSortOptions({field:e,order:t})}}changeAttendanceStatus(e,t){return s=>{this.props.changeAttendanceStatus({eventId:t,studentId:e,status:s})}}renderLeftHeadings(){const{students:e,data:t,sortOptions:s}=this.props,n=[[a.createElement(a.Fragment,null,l.Ru.text({id:"students",keyset:"progress"}),a.createElement(gd,{active:s.field===uC.u.NAME,activeOrder:s.order,onOrderChange:this.changeSortField(uC.u.NAME)})),e.length],[a.createElement(a.Fragment,null,l.Ru.text({id:"rating",keyset:"progress"}),a.createElement(gd,{active:s.field===uC.u.RATING,activeOrder:s.order,onOrderChange:this.changeSortField(uC.u.RATING)})),l.Ru.element({id:"max-RATING",keyset:"progress",params:{rating:a.createElement("b",null,t.maxRating)}})]];if((0,dC.i)(t)){const t=e.filter((e=>e.attendance===tI.Present)).length,s=[a.createElement(ie,{key:"calendar-icon",size:"m",type:"calendar"}),a.createElement("div",{key:"total-attendance",className:pC("students-attendance")},a.createElement(ie,{size:"m",type:"person"}),a.createElement("b",{className:pC("total-attendance",{"non-zero":Boolean(t)})},t))];n.push(s)}return n}renderLeftRows(){const{students:e,data:t}=this.props;return e.map((e=>{const s=[a.createElement(am,{avatar:e.avatar,displayName:e.displayName,userId:e.id,status:e.status}),a.createElement("div",{className:pC("rating")},a.createElement("b",null,e.rating))];if((0,dC.i)(t)){const n=a.createElement(aI,{status:t.studentsMap[e.id].attendance,onStatusChange:this.changeAttendanceStatus(e.id,t.eventId)});s.push(n)}return s}))}renderRightHeadings(){const{data:e,lessonType:t}=this.props;return[...t===lc.nv.Normal?this.renderTagHeadings(e.taskGroups):this.renderVariantHeadings(e.taskGroups),a.createElement("div",{className:pC("passes-heading")},a.createElement("div",{className:pC("passes-title")},l.Ru.text({id:"passes",keyset:"progress"})),l.Ru.element({id:"max-PASSES",keyset:"progress",params:{passes:a.createElement("b",null,e.maxPassesCount)}})),a.createElement("div",{className:pC("scores-heading")},a.createElement("div",{className:pC("scores-title")},l.Ru.text({id:"tag-scores",keyset:"progress"})),l.Ru.element({id:"max-TAG-SCORES",keyset:"progress",params:{tagScores:a.createElement("b",null,e.maxTagsScore)}}))]}renderTagHeadings(e){const{courseId:t,groupId:s,lessonId:n}=this.props;return e.map((e=>{const r=l.Ru.text({id:e.type,keyset:"task-tags"});return a.createElement("div",{key:e.id,className:pC("tag-heading")},a.createElement("div",{className:pC("tag-title")},a.createElement(vc,{className:pC("tag-indicator"),type:e.type,ariaLabel:r}),a.createElement("div",{className:pC("tag-name")},r)),a.createElement("span",{className:pC("tag-tasks")},e.tasks.map(((e,r)=>{const i="task"===e.type?p.ZZ.taskSolutions.build({courseId:t,groupId:s,lessonId:n,taskId:e.id.toString()}):p.ZZ.problemSolution.build({courseId:t,groupId:s,lessonId:n,problemLinkId:e.id});return a.createElement(fe,{key:e.id,content:e.title},a.createElement("div",{className:pC("tag-task")},a.createElement(u,{href:i,className:pC("tag-task-number")},r+1)))}))))}))}renderVariantHeadings(e){const{courseId:t,groupId:s,lessonId:n}=this.props;return e.map((e=>a.createElement("div",{key:e.id,className:pC("variant-heading")},a.createElement("div",{className:pC("variant-name")},l.Ru.text({id:"variant {index}",keyset:"lessons",params:{index:e.index}})),a.createElement("span",{className:pC("variant-tasks")},e.tasks.map(((r,i)=>{const o="task"===r.type?p.ZZ.taskSolutions.build({courseId:t,groupId:s,lessonId:n,taskId:r.id.toString()}):p.ZZ.problemSolution.build({courseId:t,groupId:s,lessonId:n,problemLinkId:r.id},{variant:e.index.toString()});return a.createElement(fe,{key:r.id,content:r.title},a.createElement("div",{className:pC("variant-task")},a.createElement(u,{href:o,className:pC("variant-task-number")},i+1)))}))))))}renderRightRows(){const{students:t,data:s,courseId:n,groupId:r,lessonId:i}=this.props;return t.map((t=>[...s.taskGroups.map((e=>a.createElement("div",{key:e.id,className:pC("task-progress")},e.tasks.map((e=>{const s=t.progress.tasks[e.id],o=t.progress.problems[e.id];if(!s&&!o)return a.createElement("div",{key:e.id,className:pC("solution-status")},a.createElement(Xe,{scoreMax:e.scoreMax}));if(o&&Yy.includes(o.status))return a.createElement("div",{key:e.id,className:pC("solution-status")},a.createElement(Xe,{scoreMax:e.scoreMax}));if(s){const t=p.ZZ.taskSolutions.build({courseId:n,groupId:r,lessonId:i,taskId:e.id.toString(),solutionId:s.taskSolutionId.toString()}),o=null!==s.deadline&&Ne.Ay.fromISO(s.addedTime)>Ne.Ay.fromISO(s.deadline);return a.createElement(u,{key:e.id,href:t,className:pC("solution-status")},a.createElement(Xe,{scoreMax:e.scoreMax,score:s.score,solutionStatus:s.status.type,sentAfterDeadline:o,hasActivityAfterDeadline:s.hasActivityAfterDeadline}))}const l=p.ZZ.problemSolution.build({courseId:n,groupId:r,lessonId:i,problemLinkId:o.problemId,solutionId:o.solutionId});return a.createElement(u,{key:e.id,href:l,className:pC("solution-status")},a.createElement(Xe,{scoreMax:e.scoreMax,solutionStatus:o.status}))}))))),e.renderPasses(t),this.renderScores(s,t)]))}static renderPasses(e){return a.createElement("div",{className:pC("passes")},a.createElement(fI,{cls:pC("score-badge",{color:"dark-green"}),score:e.passesCount}))}renderScores(e,t){if(this.props.lessonType===lc.nv.Test)return a.createElement("div",{className:pC("scores",{type:lc.nv.Test})},a.createElement("div",{className:pC("total-score",{type:lc.nv.Test}),title:l.Ru.text({id:"total-score",keyset:"progress"})},t.scoresSum));const s=e.taskGroups;return a.createElement("div",{className:pC("scores")},a.createElement("div",{className:pC("total-score"),title:l.Ru.text({id:"total-score",keyset:"progress"})},t.scoresSum),a.createElement("div",{className:pC("tag-scores")},s.map((e=>a.createElement(fe,{key:e.id,content:l.Ru.text({id:e.type,keyset:"task-tags"})},a.createElement(fI,{cls:pC("score-badge"),color:e.color,score:t.summary[e.id]||0}))))))}render(){const{students:e}=this.props;return e.length?a.createElement("div",{className:pC()},a.createElement(bN,{leftTableHeadings:this.renderLeftHeadings(),leftTableRows:this.renderLeftRows(),rightTableHeadings:this.renderRightHeadings(),rightTableRows:this.renderRightRows()})):l.Ru.text({id:"no-students",keyset:"progress"})}},mC(cC.prototype,"changeSortField",[R.Q2],Object.getOwnPropertyDescriptor(cC.prototype,"changeSortField"),cC.prototype),mC(cC.prototype,"changeAttendanceStatus",[R.Q2],Object.getOwnPropertyDescriptor(cC.prototype,"changeAttendanceStatus"),cC.prototype),cC);hC.displayName="LessonProgressTable";const EC=(0,o.Ng)((function(e){return{sortOptions:oC(e)}}),(function(e){return(0,_.zH)({changeSortOptions:sC.Ru,changeAttendanceStatus:sC.AJ},e)}))(hC),gC=r().with("lesson-progress"),yC=e=>{const{fetchStatus:t,fetchError:s,lessonPreview:n,lessonProgress:r,students:i,course:o,group:c,match:{params:u},fetchLessonProgressRequest:m,clearLessonProgressStore:h}=e,{courseId:E,groupId:g,lessonId:y}=u;if(!o)throw new d.dH("No course",{courseId:E});let f;(0,a.useEffect)((()=>(m({lessonId:Number(y),groupId:Number(g)}),()=>{h()})),[y,g,m,h]),n&&(f=l.Ru.text({id:"lesson-progress-teacher",keyset:"page-titles",params:{course:o.title,group:c.name,lesson:n.title}}));const{showExpelled:S,toggleExpelledFilter:b,filteredStudents:v}=iT({students:i});return a.createElement("article",{className:gC()},a.createElement(tr.m,null,a.createElement("title",null,f),a.createElement("meta",{name:"title",content:f})),a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement(nr,{fetchStatus:t,fetchError:s,renderPending:fC,renderError:SC,renderSuccess:()=>{if(!n||!r)throw new d.dH("No lesson data",{lessonId:y});return a.createElement(a.Fragment,null,a.createElement(Rs,{back:!0,exact:!0,to:p.oi.lessonDetails.build(u)},l.Ru.text({id:"lesson-TITLE",keyset:"lessons",params:{title:n.shortTitle}})),a.createElement($t.D,{level:1,className:gC("heading"),controls:a.createElement(oT,{cls:gC("checkbox"),checked:S,onChange:b})},l.Ru.text({id:"lesson-progress",keyset:"lessons"})),a.createElement("section",{className:gC("table")},a.createElement(EC,Object.assign({},u,{data:r,lessonType:n.type,students:v}))))}}))))};yC.displayName="LessonProgress";const fC=()=>a.createElement("div",{className:gC("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l",position:"center"}));fC.displayName="renderLoader";const SC=e=>a.createElement("p",{className:gC("error")},e);SC.displayName="renderError";const bC=$r((0,o.Ng)((function(e,t){let{match:{params:s}}=t;return{course:V(e,Number(s.courseId),Number(s.groupId)),group:Qc(e,s.groupId),fetchError:iC(e),fetchStatus:aC(e),lessonProgress:rC(e),lessonPreview:nC(e),students:lC(e)}}),(function(e){return(0,_.zH)({fetchLessonProgressRequest:sC.In.request,clearLessonProgressStore:sC.Vk},e)}))(yC)),vC=r().with("solution-list");class NC extends a.Component{render(){const{solution:e}=this.props,{student:t,task:s}=e;return a.createElement(am,{size:"m",className:vC("solution",{expired:e.sentAfterDeadline}),avatar:t.avatar,status:t.status,renderDisplayName:n=>{let{className:r}=n;return a.createElement("div",{className:vC("student-info")},a.createElement("span",{className:(0,$.j)(vC("student-name"),r),title:t.displayName},t.displayName),a.createElement("div",{className:vC("status")},a.createElement(hl,{hideScoreInformation:"material"===s.taskType,type:e.status.type,score:e.score,scoreMax:s.scoreMax})))},addonAfter:a.createElement("time",{className:vC("updated-at")},Ne.Ay.fromISO(e.updateTime).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")),e.hasActivityAfterDeadline&&a.createElement(ie,{className:vC("deadline-marker"),type:"clock",size:"xs"}))})}}NC.displayName="Solution";const IC=NC,TC=r().with("solution-list");class kC extends a.Component{constructor(){super(...arguments),this.renderSpin=()=>a.createElement("div",{className:TC("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"})),this.renderError=e=>a.createElement("div",{className:TC("message",{error:!0})},e),this.renderSolutionList=()=>{const{solutions:e,courseId:t,groupId:s,task:n}=this.props,r=e.map((e=>{var n,r;return{id:e.id,component:a.createElement(IC,{solution:e}),url:null!=(n=e.task)&&n.lesson?p.ZZ.taskSolutions.build({courseId:t,groupId:s,lessonId:(null==(r=e.task.lesson)?void 0:r.id.toString())||"",taskId:e.task.id.toString(),solutionId:e.id.toString()}):""}})),i=r.length>0,o=0!==r.length?a.createElement("div",{className:TC("link-list-wrapper")},a.createElement(Bo,{items:r,itemType:"navlink",listType:"aside"})):(null==n?void 0:n.taskType)===qe.wP.Problem?l.Ru.text({id:"solutionList.noSolutions",keyset:"problems"}):null;return a.createElement("div",{className:TC("list",{"has-shadow":i})},o)}}render(){const{fetchStatus:e,fetchError:t}=this.props;return a.createElement("div",{className:TC()},a.createElement(rr,{fetchError:t,fetchStatus:e,renderPending:this.renderSpin,renderSuccess:this.renderSolutionList,renderError:this.renderError}))}}kC.displayName="SolutionList";const CC=kC,wC=e=>{const{solutions:t,fetchError:s,fetchStatus:n,courseId:r,groupId:i,taskId:o,lessonId:l,fetchSolutions:c,clearSolutions:u,task:d}=e;return(0,a.useEffect)((()=>(c({courseId:Number(r),groupId:Number(i),taskId:o?Number(o):void 0,lessonId:l?Number(l):void 0}),()=>{u()})),[r,i,o,l,c,u]),a.createElement(CC,{courseId:r,groupId:i,solutions:t,fetchError:s,fetchStatus:n,task:d})};wC.displayName="SolutionListContainer";const AC=(0,o.Ng)((function(e){return{solutions:UN(e),fetchStatus:HN(e),fetchError:QN(e),task:(0,vl.MX)(e)}}),(function(e){return(0,_.zH)({clearSolutions:jN.wU,fetchSolutions:jN.x6},e)}))(wC);class OC extends a.Component{componentDidMount(){const{groupId:e,taskId:t,fetchDetails:s}=this.props;s({taskId:Number(t),groupId:Number(e)})}componentDidUpdate(e){const{groupId:t,taskId:s,fetchDetails:n}=this.props;s!==e.taskId&&n({taskId:Number(s),groupId:Number(t)})}componentWillUnmount(){const{clearDetails:e}=this.props;e()}renderTaskHeader(e){const{fetchError:t,fetchStatus:s,lessonUrl:n,withStatistic:r=!0}=this.props;return a.createElement(nr,{fetchError:t,fetchStatus:s},a.createElement(Rs,{back:!0,exact:!0,to:n},l.Ru.text({id:"lesson-TITLE",keyset:"tasks",params:{title:e.lesson.shortTitle}})),a.createElement(Gf,{taskTitle:e.title,hasManualCheck:e.hasManualCheck&&e.taskType===qe.wP.Other,hasP2p:e.hasP2p,taskInfo:a.createElement(uf,{taskTag:e.tag,taskDeadline:r?e.deadline:null,taskMaxScore:e.scoreMax,taskStatistics:r?e.statistics:void 0})}),e.description&&e.taskType!==qe.wP.Problem&&a.createElement(bS,{taskUrl:"/",taskDescription:e.description,taskTitle:e.title,taskHasManualCheck:e.hasManualCheck&&e.taskType===qe.wP.Other,taskHasP2p:e.hasP2p}))}render(){const{task:e,course:t,group:s}=this.props;if(!e)return null;const n=l.Ru.text({id:"task-solutions-teacher",keyset:"page-titles",params:{task:e.title,lesson:e.lesson.title,course:t.title,group:s.name}});return a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,n),a.createElement("meta",{name:"title",content:n})),this.renderTaskHeader(e))}}OC.displayName="TeacherTaskHeader";const RC=(0,o.Ng)((function(e,t){const{courseId:s,groupId:n}=t;return{course:V(e,Number(s),Number(n)),group:Qc(e,n),task:(0,vl.MX)(e),fetchError:(0,vl.sA)(e),fetchStatus:(0,vl.uf)(e)}}),(function(e){return(0,_.zH)({clearDetails:cn.BN,fetchDetails:cn.me},e)}))(OC);var _C;function LC(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}let MC=(_C=class extends a.Component{constructor(){super(...arguments),this.timer=void 0,this.POLL_DELAY=1e4}componentDidMount(){this.timer=setTimeout(this.pollComments,this.POLL_DELAY)}componentWillUnmount(){const{solutionId:e}=this.props;this.timer&&clearTimeout(this.timer),this.props.clearComments(e)}render(){const{uploadStatus:e,comments:t,solutionId:s,deadline:n,role:r,userId:i,selectedSubmission:o,onSubmissionSelect:l,p2pDeadlineExpired:c}=this.props;return t&&0!==t.length?a.createElement(rv,{role:r,userId:i,comments:t,selectedSubmission:o,solutionId:s,deadline:n,uploadStatus:e,onAddComment:this.addComment,onEditComment:this.editComment,onSelectSubmission:l,p2pDeadlineExpired:c}):null}fetchComments(){const{solutionId:e,fetchTeacherComments:t}=this.props;t(e)}pollComments(){const{downloadStatus:e,downloadStatusError:t}=this.props;let s=(0,_m.j)("slow-down-comments-polling")?3e5:this.POLL_DELAY;t&&t.statusCode===XS.C6&&(s=3e5),e!==Ot.L.PENDING&&this.fetchComments(),this.timer=setTimeout(this.pollComments,s)}addComment(e){const{solutionId:t}=this.props;this.props.addTeacherComment({solutionId:t,text:e})}editComment(e,t){const{solutionId:s}=this.props;this.props.editTeacherComment({solutionId:s,commentId:t,text:e})}},LC(_C.prototype,"pollComments",[R.Q2],Object.getOwnPropertyDescriptor(_C.prototype,"pollComments"),_C.prototype),LC(_C.prototype,"addComment",[R.Q2],Object.getOwnPropertyDescriptor(_C.prototype,"addComment"),_C.prototype),LC(_C.prototype,"editComment",[R.Q2],Object.getOwnPropertyDescriptor(_C.prototype,"editComment"),_C.prototype),_C);MC.displayName="CommentsContainer";const PC=(0,o.Ng)((function(e,t){return{comments:Vb(e,t.solutionId),downloadStatus:Wb(e),downloadStatusError:Jb(e),uploadStatus:Kb(e),userId:(0,T.F6)(e)}}),(function(e){return(0,_.zH)({addTeacherComment:av.LK,clearComments:av.w5,editTeacherComment:av.qj,fetchTeacherComments:av.J4},e)}))(er(MC)),xC=r().with("teacher-solution-header");class DC extends a.Component{render(){const{solution:e}=this.props,{student:t}=e;return a.createElement("header",{className:xC("solution-header")},a.createElement("h4",{className:xC("student")},a.createElement(am,{size:"l",avatar:t.avatar,displayName:t.displayName,userId:t.id,status:t.status})),a.createElement("div",{className:xC("solution-id")},l.Ru.text({id:"solution-ID",keyset:"solutions",params:{id:e.id}})))}}DC.displayName="TeacherSolutionHeader";const FC=DC;var zC;function jC(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const UC=r().with("teacher-solution");let HC=(jC((zC=class extends a.Component{renderSpin(){return a.createElement("div",{className:UC("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}))}renderError(e){return a.createElement("div",{className:UC("error")},e)}handleSelectSubmission(e){const{solution:t,selectSubmission:s}=this.props;s(null!=t&&t.latestSubmission&&(null==e?void 0:e.id)===t.latestSubmission.id?t.latestSubmission:e)}renderSolution(){const{solution:e,selectedSubmission:t,selectSubmission:s,downloadStatusError:n,task:r,userAnswer:i}=this.props;return e?(null!=e&&e.latestSubmission&&!t&&s(e.latestSubmission),a.createElement(a.Fragment,null,e.task.taskType===qe.wP.Problem?(null==r?void 0:r.problem)&&i&&a.createElement(Ay,{answer:i,mode:"teacher",problem:r.problem,solution:e,user:e.student,attemptsMax:r.maxAttempts,problemType:$p.yo.Task}):a.createElement(a.Fragment,null,a.createElement(FC,{solution:e}),(null==n?void 0:n.statusCode)===XS.BM&&a.createElement("h2",{className:UC("warning")},l.Ru.text({id:"comments-warning",keyset:"tasks"})),a.createElement("div",{className:UC("info")},a.createElement("div",{className:UC("submission-wrapper")},e.latestSubmission&&t?a.createElement(Zp,{solution:e,submission:t,onSubmissionSelect:s}):a.createElement(sm,{align:"center"},l.Ru.text({id:"no-submission",keyset:"tasks"}))),a.createElement("div",{className:UC("comments-wrapper")},a.createElement(PC,{solutionId:e.id,deadline:e.deadline,selectedSubmission:t,onSubmissionSelect:this.handleSelectSubmission,p2pDeadlineExpired:!1})))))):null}render(){const{fetchError:e,fetchStatus:t}=this.props;return a.createElement("div",{className:UC()},a.createElement(nr,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderSolution,renderError:this.renderError}))}}).prototype,"renderSpin",[R.Q2],Object.getOwnPropertyDescriptor(zC.prototype,"renderSpin"),zC.prototype),jC(zC.prototype,"renderError",[R.Q2],Object.getOwnPropertyDescriptor(zC.prototype,"renderError"),zC.prototype),jC(zC.prototype,"handleSelectSubmission",[R.Q2],Object.getOwnPropertyDescriptor(zC.prototype,"handleSelectSubmission"),zC.prototype),jC(zC.prototype,"renderSolution",[R.Q2],Object.getOwnPropertyDescriptor(zC.prototype,"renderSolution"),zC.prototype),zC);HC.displayName="TeacherSolution";const QC=HC;class VC extends a.Component{componentDidMount(){const{solutionId:e,groupId:t,courseId:s}=this.props;this.props.fetchTeacherSolutionDetails({solutionId:e,groupId:t,courseId:s})}componentDidUpdate(e){const{solutionId:t,groupId:s,courseId:n}=this.props;t!==e.solutionId&&(this.props.clearSolutionDetails(e.solutionId),this.props.fetchTeacherSolutionDetails({solutionId:t,groupId:s,courseId:n}))}componentWillUnmount(){const{solutionId:e}=this.props;this.props.clearSolutionDetails(e)}render(){const{solution:e,fetchError:t,fetchStatus:s,groupId:n,selectedSubmission:r,downloadStatusError:i,task:o,userAnswer:l}=this.props;return a.createElement(QC,{solution:e,fetchError:t,fetchStatus:s,groupId:n,selectedSubmission:r,selectSubmission:this.props.selectSubmission,downloadStatusError:i,task:o,userAnswer:l})}}VC.displayName="TeacherSolutionContainer";const GC=(0,o.Ng)((function(e,t){const{solutionId:s}=t;return{solution:(0,Dy.GZ)(e,s),fetchError:(0,Dy.uO)(e),fetchStatus:(0,Dy.AJ)(e),selectedSubmission:(0,Py.a)(e),downloadStatusError:Jb(e),task:(0,vl.MX)(e),userAnswer:(0,vl.X)(Number(s))(e)}}),(function(e){return(0,_.zH)({clearSolutionDetails:xy.HZ,fetchTeacherSolutionDetails:xy.IS,selectSubmission:My.F},e)}))(VC);class BC extends a.Component{render(){const{solutions:e,pathParams:t,errorBlockMix:s,task:n}=this.props,{courseId:r,groupId:o,solutionId:c}=t;if(this.shouldRedirect()){var u,d;const[t]=e,s=null!=(u=t.task)&&u.lesson?p.ZZ.taskSolutions.build({courseId:r,groupId:o,lessonId:(null==(d=t.task.lesson)?void 0:d.id.toString())||"",taskId:t.task.id.toString(),solutionId:t.id.toString()}):"";return a.createElement(i.rd,{to:s})}return c?a.createElement(GC,{solutionId:Number(c),groupId:Number(o),courseId:Number(r)}):a.createElement("div",{className:(null==n?void 0:n.taskType)===qe.wP.Problem?"":s},(null==n?void 0:n.taskType)===qe.wP.Problem&&(null==n?void 0:n.problem)&&a.createElement("div",{className:"problem-solutions__unsolved-problem"},a.createElement(ay,{disabled:!1,problem:n.problem,statusMode:$p.U3.correctAnswer,userAnswer:By,correctAnswer:sh(n.problem),setAnswer:Wy})),(null==n?void 0:n.taskType)===qe.wP.Other&&l.Ru.text({id:"no-sent-solutions",keyset:"solutions"}))}shouldRedirect(){const{solutionsFetchStatus:e,solutions:t,pathParams:s}=this.props,{solutionId:n}=s;return!n&&e===Ot.L.SUCCESS&&t.length>0}}BC.displayName="SolutionOrRedirect";const WC=BC,JC=(0,o.Ng)((function(e){return{solutionsFetchStatus:HN(e),solutions:UN(e),task:(0,vl.MX)(e)}}))(WC),KC=r().with("task-solutions-teacher");class ZC extends a.Component{shouldComponentUpdate(e){const{solutionId:t}=this.props.match.params;return t!==e.match.params.solutionId}render(){const{params:e}=this.props.match,{courseId:t,groupId:s,taskId:n,lessonId:r}=e,i=p.oi.lessonDetails.build({courseId:t,groupId:s,lessonId:r});return a.createElement("article",{className:KC()},a.createElement(sr.P,{type:"wide"},a.createElement(sr.P.Top,null,a.createElement(RC,{withDescriptionTab:!0,courseId:t,groupId:s,lessonUrl:i,taskId:n})),a.createElement(sr.P.Main,null,a.createElement("div",{className:KC("main-content")},a.createElement(JC,{pathParams:e,errorBlockMix:KC("error-message")}))),a.createElement(sr.P.Aside,null,a.createElement("div",{className:KC("solution-list")},a.createElement(AC,{courseId:t,groupId:s,taskId:n,lessonId:r})))))}}ZC.displayName="TaskSolutions";const YC=$r(ZC),qC=r().with("plagiarism-actions"),$C=e=>{let{cls:t,suspiciousSubmissionId:s,sourceSubmissionId:n}=e;const r=M(),i="".concat(s,",").concat(n),o=P(lb)[i],c=(0,a.useCallback)((()=>{r(ab.kW.request({suspiciousSubmissionId:s,sourceSubmissionId:n,body:{status:Lp.Declined}}))}),[r,s,n]),u=(0,a.useCallback)((()=>{r(ab.kW.request({suspiciousSubmissionId:s,sourceSubmissionId:n,body:{status:Lp.Confirmed}}))}),[r,s,n]);return o?a.createElement("div",{className:(0,$.j)(t,qC())},o.updateStatus===Ot.L.PENDING?a.createElement(he.t,{view:"default",progress:!0,size:"l",position:"center"}):a.createElement(a.Fragment,null,a.createElement(ge.$,{className:qC("button",{action:"decline"}),size:"l",theme:"approve",view:"lyceum",onClick:c},l.Ru.text({keyset:"antiplagiary",id:"not-plagiarism"})),a.createElement(ge.$,{className:qC("button",{action:"confirm"}),size:"l",theme:"reject",view:"lyceum",onClick:u},l.Ru.text({keyset:"antiplagiary",id:"plagiarism"})))):null};$C.displayName="PlagiarismActions";const XC=r().with("submissions-diff-header"),ew=e=>{let t,s,{submission:n}=e;if(Array.isArray(n.groups)&&n.groups.length){const e=p.oi.courseDetails.build({courseId:n.solution.task.courseId.toString(),groupId:n.groups[0].id.toString()});s=n.groups[0].id&&n.solution.task.courseId?a.createElement(ci.N,{to:e,theme:"ghost"},n.groups[0].name):n.groups[0].name}if(n.teacher){const e=bn.profile.build({userId:n.teacher.id.toString()});t=n.teacher.id?a.createElement(ci.N,{to:e,theme:"ghost"},n.teacher.displayName):n.teacher.displayName}return a.createElement("div",{className:XC("group-info")},t,t&&s&&" - ",s)};ew.displayName="GroupInfo";const tw=(0,a.memo)((e=>{let{student:t,firstSubmission:s,secondSubmission:n,plagiarism:r}=e;return a.createElement("section",{className:XC("submission",{order:"first"})},a.createElement(Vi,{className:XC("student"),avatar:t.avatar,size:"l",displayName:t.displayName,userId:t.id,addonAfter:a.createElement(ew,{submission:s})}),a.createElement("div",{className:XC("submission-info")},a.createElement("div",null,a.createElement($t.D,{level:4,className:XC("submission-heading")},s.runId?a.createElement(Vp,{runId:s.runId}):a.createElement(Gp,{id:s.file.id}),r&&a.createElement(Up,{className:XC("submission-plagiarism"),plagiarism:r,size:"l"})),a.createElement("time",{className:XC("submission-submit-date")},Ne.Ay.fromISO(s.file.addedTime).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")))),r&&r.status===Lp.Unresolved&&a.createElement($C,{cls:XC("plagiarism-actions"),suspiciousSubmissionId:s.id,sourceSubmissionId:n.id})))})),sw=(0,a.memo)((e=>{let{student:t,submission:s,plagiarism:n,shiftPx:r=0}=e;return a.createElement("section",Object.assign({className:XC("submission",{order:"second"})},r&&{style:{width:"calc(50% + ".concat(r,"px)")}}),a.createElement(Vi,{className:XC("student"),avatar:t.avatar,size:"l",displayName:t.displayName,userId:t.id,addonAfter:a.createElement(ew,{submission:s})}),a.createElement("div",{className:XC("submission-info")},a.createElement("div",null,a.createElement($t.D,{level:4,className:XC("submission-heading")},s.runId?a.createElement(a.Fragment,null,a.createElement(Vp,{runId:s.runId})):a.createElement(Gp,{id:s.file.id}),n&&a.createElement(a.Fragment,null," (",l.Ru.text({keyset:"antiplagiary",id:"source"}),")")),a.createElement("time",{className:XC("submission-submit-date")},Ne.Ay.fromISO(s.file.addedTime).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear"))))))})),nw=e=>{let{firstSubmission:t,secondSubmission:s,plagiarism:n,shiftPx:r=0}=e;const{student:i}=t,{student:o}=s;return a.createElement("header",{className:XC()},a.createElement(tw,{student:i,firstSubmission:t,secondSubmission:s,plagiarism:n}),a.createElement(sw,{student:o,submission:s,plagiarism:n,shiftPx:r}))};nw.displayName="SubmissionsDiffHeader";const rw=(0,a.lazy)((()=>Promise.all([s.e(715),s.e(854),s.e(387)]).then(s.bind(s,4521)))),aw=e=>{let{firstSubmission:t,firstFileContent:s,secondSubmission:n,secondFileContent:r,plagiarism:i}=e;const[o,l]=(0,a.useState)(0),c=(0,a.useCallback)((e=>{l(e)}),[]),u=(0,a.useMemo)((()=>({sourceCode:s,language:(0,Tm.od)(t.file.mimeType)})),[s,t.file.mimeType]),d=(0,a.useMemo)((()=>({sourceCode:r,language:(0,Tm.od)(n.file.mimeType)})),[r,n.file.mimeType]);return a.createElement(a.Fragment,null,a.createElement(nw,{firstSubmission:t,secondSubmission:n,plagiarism:i,shiftPx:o}),a.createElement(a.Suspense,{fallback:null},a.createElement(rw,{height:"500px",originalCode:u,modifiedCode:d,onWidthFix:c})))},iw=e=>{let{match:t}=e;const s=M(),n=(0,i.zy)(),{courseId:r,groupId:o,taskId:c}=t.params,u=P(vl.MX),d=P(vl.sA),m=P(vl.uf);(0,a.useEffect)((()=>{m!==Ot.L.SUCCESS&&s((0,cn.me)({groupId:Number(o),taskId:Number(c)}))}),[s,o,c,m]);const{firstSubmissionId:h,secondSubmissionId:E}=t.params,g=P(ib)[h],y=P(ib)[E],f="".concat(h,",").concat(E),S=P(lb)[f];(0,a.useEffect)((()=>{s(ab.lp.request({submissionId:Number(h)}))}),[s,h]),(0,a.useEffect)((()=>{s(ab.lp.request({submissionId:Number(E)}))}),[s,E]),(0,a.useEffect)((()=>{s(ab.hH.request({suspiciousSubmissionId:Number(h),sourceSubmissionId:Number(E)}))}),[s,h,E]);const{error:b,status:v}=function(e){if(e.some((e=>!e)))return{error:null,status:null};const t=e.find((e=>e.fetchStatus===Ot.L.FAIL));return t?{error:t.fetchError,status:Ot.L.FAIL}:e.every((e=>e.fetchStatus===Ot.L.SUCCESS))?{error:null,status:Ot.L.SUCCESS}:{error:null,status:Ot.L.PENDING}}([g,y,S]);let N,I,T,k,C;return g&&({submission:N,fileContent:I}=g),y&&({submission:T,fileContent:k}=y),S&&({plagiarism:C}=S),a.createElement(nr,{fetchError:d,fetchStatus:m},(()=>{if(!u)return null;const e=l.Ru.text({id:"submissions-comparisons-teacher",keyset:"page-titles",params:{task:u.title}});return a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,e),a.createElement("meta",{name:"title",content:e})),a.createElement(sr.P,{type:"wide"},a.createElement(sr.P.Main,null,a.createElement(Rs,{back:!0,exact:!0,to:n.state?n.state.previousPath:p.ZZ.courseSolutions.build({courseId:r,groupId:o})},l.Ru.text({keyset:"common",id:"back"})),a.createElement(Gf,{taskTitle:u.title,hasManualCheck:u.hasManualCheck&&u.taskType===qe.wP.Other,hasP2p:u.hasP2p,taskInfo:a.createElement(uf,{taskTag:u.tag,taskDeadline:u.deadline,taskMaxScore:u.scoreMax,taskStatistics:u.statistics})}),u.description&&a.createElement(bS,{taskUrl:"/",taskDescription:u.description,taskTitle:u.title,taskHasManualCheck:u.hasManualCheck&&u.taskType===qe.wP.Other,taskHasP2p:u.hasP2p}),a.createElement(nr,{fetchError:b,fetchStatus:v},N&&T&&void 0!==C&&a.createElement(aw,{firstSubmission:N,firstFileContent:I||"",secondSubmission:T,secondFileContent:k||"",plagiarism:C})))))})())};iw.displayName="SubmissionsComparisonBase";const ow=$r(iw);function lw(){const e=M(),{courseId:t,groupId:s,taskId:n,lessonId:r,reviewId:o}=(0,i.g)(),l=W(Number(t),Number(s)),c=P(T.F6),u=l.role===E.Student?"student":"teacher";(0,a.useEffect)((()=>(e((0,ZS.yG)({groupId:Number(s),courseId:Number(t),taskId:Number(n),lessonId:Number(r),reviewerId:"teacher"===u?void 0:c,role:u})),()=>{e((0,ZS.Ru)())})),[t,e,r,n,u,s,c]);const d=p.oi.lessonDetails.build({courseId:t,groupId:s,lessonId:r});return a.createElement("article",null,a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Top,null,a.createElement(RC,{withDescriptionTab:!0,withStatistic:!1,courseId:t,groupId:s,lessonUrl:d,taskId:n})),a.createElement(sr.A.Main,null,a.createElement(WS,{reviewId:Number(o),groupId:Number(s),courseId:Number(t)})),a.createElement(sr.A.Aside,null,a.createElement(yS,{courseId:t,groupId:s,taskId:n,lessonId:r}))))}lw.displayName="SolutionReview";var cw=s(63576);const uw=r().with("problem-solution-list"),dw=()=>{const e=P(Nk),{courseId:t,lessonId:s,groupId:n}=(0,i.g)(),r=(0,cw.A)("variant");if(!e)return null;const{solutions:o}=e;return 0===o.length?a.createElement("div",null,l.Ru.text({id:"solutionList.noSolutions",keyset:"problems"})):a.createElement("div",{className:uw()},o.map((e=>{const i=p.ZZ.problemSolution.build({courseId:t,lessonId:s,groupId:n,problemLinkId:e.problemLinkId,solutionId:e.id},{variant:r||void 0});return a.createElement(L.k2,{to:i,className:uw("link"),activeClassName:uw("link_active"),key:i},a.createElement(am,{size:"m",className:uw("solution"),avatar:e.user.avatar,renderDisplayName:t=>{let{className:s}=t;return a.createElement("div",{className:uw("student-info")},a.createElement("span",{className:(0,$.j)(uw("student-name"),s),title:e.user.displayName},e.user.displayName),a.createElement("div",{className:uw("status")},a.createElement(hl,{type:e.status.type,score:e.score,scoreMax:e.scoreMax})))},addonAfter:a.createElement("time",{className:uw("updated-at")},e.lastAttempt&&Ne.Ay.fromISO(e.lastAttempt).toLocaleString((0,Ne.km)("DateTimeMedWithoutYear")))}))})))};dw.displayName="ProblemSolutionList";const mw=dw,pw=r().with("problem-solutions"),hw=()=>{var e;const t=M(),{courseId:s,lessonId:n,problemLinkId:r,groupId:o,solutionId:c}=(0,i.g)(),u=(0,cw.A)("variant"),d=!c,m=P((e=>Ok(e,{solutionId:Number(c)}))),h=P(wk),E=P(Ak),g=P(Ck),y=P(Tk),f=P(kk),S=P(Ik),b=P((e=>(0,vl.kA)(e,{problemLinkId:Number(r)}))),v=(0,a.useMemo)((()=>b?sh(b.problem):{}),[b]);return(0,ne.A)((function(){t((0,vk.sn)(Number(r),Number(o),Number(c))),d&&t((0,cn.mD)({groupId:Number(o),lessonId:Number(n),problemVariantIndex:Number(u)}))})),(0,Co.A)((function(){return t((0,vk.sn)(Number(r),Number(o),Number(c))),()=>{t((0,vk.z7)())}}),[t,s,n,r,o]),(0,Co.A)((function(){t((0,vk.sn)(Number(r),Number(o),Number(c)))}),[c]),(0,wo.A)((function(){t((0,vk.z7)()),t((0,cn.Ek)())})),a.createElement(sr.P,{type:"wide"},a.createElement(sr.P.Top,null,a.createElement(Rs,{back:!0,exact:!0,to:p.oi.lessonDetails.build({courseId:s,groupId:o,lessonId:n})},l.Ru.text({id:"backToLesson",keyset:"problems"})),h&&a.createElement(Gf,{taskTitle:h.title,hasManualCheck:!1,hasP2p:!1,taskInfo:a.createElement(uf,{taskDeadline:null,taskMaxScore:h.scoreMax,taskTag:h.tag})}),d&&b&&a.createElement(Gf,{taskTitle:b.title,hasManualCheck:!1,hasP2p:!1,taskInfo:a.createElement(uf,{taskDeadline:null,taskMaxScore:b.scoreMax,taskTag:b.tag})})),a.createElement(sr.P.Main,{className:pw("main-area")},a.createElement("div",{className:pw("main-area-div")},h&&a.createElement(rr,{fetchError:y,fetchStatus:g,renderPending:()=>a.createElement("div",{className:pw("spin")},a.createElement(he.t,{view:"default",progress:!0,size:"l"})),renderSuccess:()=>a.createElement(Ay,{answer:E,mode:"teacher",attemptsMax:h.attemptsMax,problem:h.problem,solution:h.solution,key:h.problem.id,user:m,problemType:$p.yo.Problem})}),d&&b&&a.createElement("div",{className:pw("unsolved-problem")},a.createElement(ay,{disabled:!1,problem:b.problem,statusMode:$p.U3.correctAnswer,userAnswer:null!=(e=b.problem.markup.answers)?e:By,correctAnswer:v,setAnswer:Wy})))),a.createElement(sr.P.Aside,null,a.createElement(rr,{fetchError:S,fetchStatus:f,renderPending:()=>a.createElement("div",{className:pw("spin")},a.createElement(he.t,{progress:!0,size:"l"})),renderSuccess:()=>a.createElement("aside",{className:pw("aside")},a.createElement(mw,null))})))};hw.displayName="ProblemSolutions";const Ew=hw,gw=["passTypes"],yw=[{exact:!0,key:"course-details",component:XN,path:p.oi.courseDetails.template,passTypes:[g.Schedule,g.Conditional]},{exact:!0,key:"course-solutions",component:TT,path:p.ZZ.courseSolutions.template,passTypes:[g.Schedule,g.Conditional]},{exact:!0,key:"course-reviews",component:Uf,path:p.ZZ.courseReviews.template,passTypes:[g.Schedule,g.Conditional]},{key:"course-progress",exact:!1,component:uT,path:p.ZZ.courseProgress.template,passTypes:[g.Schedule,g.Conditional]},{key:"course-schedule",exact:!0,component:uN,path:F.courseSchedule.template,passTypes:[g.Schedule]},{key:"lesson-details",exact:!0,component:Xk,path:p.oi.lessonDetails.template,passTypes:[g.Schedule,g.Conditional]},{key:"lesson-progress",exact:!0,component:bC,path:p.ZZ.lessonProgress.template,passTypes:[g.Schedule,g.Conditional]},{key:"lesson-material",exact:!1,component:tC,path:p.oi.lessonMaterial.template,passTypes:[g.Schedule,g.Conditional]},{key:"task-solutions",exact:!1,component:YC,path:p.ZZ.taskSolutions.template,passTypes:[g.Schedule,g.Conditional]},{key:"submissions-comparison",exact:!0,component:ow,path:Wp.submissionsComparison.template,passTypes:[g.Schedule,g.Conditional]},{key:"problem-solution",exact:!1,component:Ew,path:p.ZZ.problemSolution.template,passTypes:[g.Schedule,g.Conditional]},{exact:!0,key:"course-review",component:lw,path:p.ZZ.solutionReview.template,passTypes:[g.Schedule,g.Conditional]},{key:"task-redirect-to-solutions",exact:!1,component:function(){const e=(0,i.g)();return a.createElement(i.rd,{to:p.ZZ.taskSolutions.build({courseId:e.courseId,groupId:e.groupId,taskId:e.taskId,lessonId:e.lessonId})})},path:p.ZZ.task.template,passTypes:[g.Schedule,g.Conditional]}],fw=()=>{const{courseId:e,groupId:t}=(0,i.g)(),s=W(Number(e),Number(t)),n=(0,a.useMemo)((()=>{const e=yw.filter((e=>e.passTypes.includes(s.passType)));return 0===s.reviewsType?e.filter((e=>"course-reviews"!==e.key)):e}),[s.passType,s.reviewsType]);return a.createElement(a.Fragment,null,a.createElement(i.qh,{path:p.oi.courseDetails.template,component:Sv}),a.createElement(i.dO,null,n.map((e=>{let t=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,gw);return a.createElement(i.qh,Object.assign({key:t.key},t))})),a.createElement(i.qh,{component:ow,path:Wp.submissionsComparison.template}),a.createElement(Nv,{code:XS.dJ,component:_s.wO})))},Sw={activation:new x.s("/invites/:inviteKey")},bw={activation:new x.s("/invites/parent/:inviteKey")},vw={activation:new x.s("/invites/group/:inviteKey")},Nw=((0,D.k)(Sw,vw,vw),(0,$.cn)("invite-activation")),Iw={fetchError:null,fetchStatus:null},Tw=(0,i.y)((e=>{let{match:t}=e;const{inviteKey:s}=t.params,[n,r]=(0,a.useState)(Iw),{brand:i}=(0,as.lk)();(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,zt.Ay)(ir.activation.build({inviteKey:s}));r({response:e,fetchError:null,fetchStatus:Ot.L.SUCCESS})}catch(e){r({fetchError:e,fetchStatus:Ot.L.FAIL})}})()}),[s]);const{fetchError:o,fetchStatus:c}=n,u=p.oi.root.build(),d=l.Ru.text({id:"parentInvite.pageTitle",keyset:"invites"}),m=(0,a.useCallback)((e=>{e.preventDefault(),window.location.assign(u)}),[u]),h=(0,a.useCallback)((()=>a.createElement("div",{className:Nw("progress")},a.createElement(he.t,{view:"default",progress:!0,size:"l"}),a.createElement("span",{className:Nw("progress-text")},l.Ru.text({id:"profile-activation",keyset:"invites"})))),[]),E=(0,a.useCallback)((()=>a.createElement(sr.A,{type:"wide"},a.createElement(sr.A.Main,null,a.createElement("article",{className:Nw()},a.createElement("section",{className:Nw("greeting")},a.createElement(Jr,{className:Nw("greeting-image"),width:500,height:500}),a.createElement("div",{className:Nw("greeting-heading")},l.Ru.markdown({id:i===b.m.YANGO?"parentInvite.yango-greeting":"parentInvite.greeting",keyset:"invites"})),a.createElement(ge.$,{className:Nw("guide-button"),type:"link",url:u,size:"l",view:"lyceum",theme:"action",onClick:m},l.Ru.text({id:"parentInvite.greetingButton",keyset:"invites"}))))))),[u,m,i]);return a.createElement(a.Fragment,null,a.createElement(tr.m,null,a.createElement("title",null,d),a.createElement("meta",{name:"title",content:d})),a.createElement(nr,{fetchError:o,fetchStatus:c,renderPending:h,renderSuccess:E}))}));var kw;function Cw(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}let ww=(kw=class extends a.Component{renderMainPage(){const{user:e}=this.props;return e?a.createElement(Ca,null):a.createElement(_s.eG,{statusCode:XS.C6,errorCode:"401_unauthorized"})}renderProfilePage(e){let{match:{params:t}}=e;const{userId:s}=t,{user:n}=this.props;return n?s?n.id===Number(s)?a.createElement(ko,null):a.createElement(yo,null):a.createElement(i.rd,{to:bn.profile.build({userId:n.id.toString()})}):null}renderServicePage(){return a.createElement(a.Fragment,null,a.createElement(i.qh,{path:p._x.calendar.template},a.createElement(wa,null)),a.createElement(i.qh,{path:p._x.root.template}))}render(){return a.createElement(i.dO,null,this.props.isPathUnknown&&a.createElement(Nv,{code:XS.dJ,component:_s.wO}),a.createElement(i.qh,{path:p._x.root.template,render:this.renderServicePage}),a.createElement(i.qh,{exact:!0,path:p.oi.root.template,render:this.renderMainPage}),a.createElement(i.qh,{exact:!0,path:p.oi.courses.template,component:Ca}),a.createElement(i.qh,{exact:!0,path:Sw.activation.template,render:()=>a.createElement(qr,{inviteType:Yr.DEFAULT_INVITE})}),a.createElement(i.qh,{exact:!0,path:vw.activation.template,render:()=>a.createElement(qr,{inviteType:Yr.GROUP_INVITE})}),a.createElement(i.qh,{exact:!0,path:bw.activation.template,component:Tw}),a.createElement(i.qh,{exact:!0,path:bn.profile.template,render:this.renderProfilePage}),a.createElement(i.qh,{path:p.oi.courseDetails.template,component:Ow}),a.createElement(Nv,{code:XS.dJ,component:_s.wO}))}},Cw(kw.prototype,"renderMainPage",[R.Q2],Object.getOwnPropertyDescriptor(kw.prototype,"renderMainPage"),kw.prototype),Cw(kw.prototype,"renderProfilePage",[R.Q2],Object.getOwnPropertyDescriptor(kw.prototype,"renderProfilePage"),kw.prototype),Cw(kw.prototype,"renderServicePage",[R.Q2],Object.getOwnPropertyDescriptor(kw.prototype,"renderServicePage"),kw.prototype),kw);ww.displayName="Routes";const Aw=function(e){return(0,i.y)(class extends a.Component{componentDidMount(){this.log()}componentDidUpdate(e){e.location!==this.props.location&&this.log()}render(){return a.createElement(e,this.props)}log(){const{location:{pathname:e,search:t}}=this.props;(0,f.av)("".concat(e).concat(t),{referrer:document.referrer})}})}((0,o.Ng)((function(e){return{user:e.users.user,courseMap:e.courses.courseMap}}))(ww)),Ow=()=>{var e;const t=(0,i.g)(),s=Number(t.courseId),n=Number(t.groupId),[r,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),u=P(H),d=M();(0,a.useEffect)((()=>{if(!r)return u[s]?o(!0):void fetch(Ft.g.apiMyCourses.build({},{status:[h.Active,h.Archived,h.Draft]})).then((e=>e.json())).then((e=>{e.courses.allIds=e.courses.allIds.filter((e=>e===s)),e.courses.courseMap={[s]:e.courses.courseMap[s]},e.groups.groupMap={[n]:e.groups.groupMap[n]},d((0,Ms.h7)(e)),o(!0)})).catch(c)}),[d,r,s,n,u]);const p=null==(e=u[Number(t.courseId)])?void 0:e.find((e=>e.groups.includes(Number(n)))),g=Number(n);if(l)return a.createElement(_s.eG,{statusCode:l.statusCode,errorCode:l.code});if(!r)return a.createElement(he.t,{view:"default",size:"l"});if(!p||!p.groups.includes(g))return a.createElement(_s.eG,{statusCode:XS.xW,errorCode:"403_course_view_permission_denied"});let y;switch(p.role){case E.Student:y=AN;break;case E.Teacher:case E.Methodist:y=fw;break;default:throw new m("Role not supported",{role:p.role})}return a.createElement(Xn,{role:p.role},a.createElement(y,null))};Ow.displayName="CourseDetailsPage";const Rw=e=>{let{hintView:t,onNextHint:s,onClose:n,hintsAvailable:r}=e;const i=(0,a.useRef)(t.target);return a.createElement(Ts,{theme:"normal",view:"default",mainOffset:8,target:"anchor",anchor:i,visible:!0,direction:t.directions,hasTail:!0,tailSize:10,className:"wizard__hint",onOutsideClick:n},a.createElement("div",{className:"wizard__hint-content"},l.Ru.markdown({id:t.messageId,keyset:"wizard"})),a.createElement("div",{className:"wizard__controls-block"},r>1&&a.createElement(ge.$,{view:"lyceum",theme:"action",size:"m",onClick:s},l.Ru.text({id:"wizard.nextHint"})),a.createElement(ge.$,{className:"wizard__close",size:"m",onClick:n},l.Ru.text({id:"wizard.close"}))))};Rw.displayName="WizardHint";const _w=Rw,Lw=[{id:0,element:"/html/body/div[2]/div/div[2]/header/div[1]/div[2]/nav/button[1]",messageId:"initialWizardHint"}];function Mw(e){return"id"in e}var Pw;function xw(e,t,s,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=s.slice().reverse().reduce((function(s,n){return n(e,t,s)||s}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}const Dw=["bottom-start","bottom","bottom-end","top-start","top","top-end","right-start","right","right-end","left-start","left","left-end"];function Fw(e){return document.evaluate(e,document.body,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}const zw={target:null,hintIndex:-1,hintsAvailable:0};let jw=(Pw=class e extends a.Component{constructor(e){super(e),this.updateTimerId=void 0,this.state=zw}componentDidMount(){Sy.Fr||this.checkAvailableHints()}static getHintDirections(e){return e?Array.isArray(e)?0===e.length?Dw:e:[e]:Dw}onNextHint(){this.runCheckCloseInitialHint();const e=this.getNextHintIndex();if(-1===e)return void this.closeWizard();const t=Fw(this.hints[e].element);t&&this.showHint(e,t)}get hints(){return function(){const e=Ko.I.get(Zo.Z.WizardViewedHints)||[];return Lw.filter((t=>void 0!==t.id&&!e.includes(t.id)))}().concat(this.props.hints)}getNextHintIndex(){const{hintIndex:e}=this.state,t=this.hints.findIndex(((t,s)=>s>e&&Boolean(Fw(t.element))));return-1!==t?t:this.hints.findIndex(((t,s)=>s<e&&Boolean(Fw(t.element))))}getCurrentHintView(){const{target:t,hintIndex:s}=this.state;if(!t)return null;const n=this.hints[s];return{target:t,messageId:n.messageId,directions:e.getHintDirections(n.direction)}}getAvailableHints(){return this.hints.filter(Boolean).filter((e=>Fw(e.element)))}runCheckCloseInitialHint(){const{hintIndex:e}=this.state,t=this.hints[e];if(t&&Mw(t)&&Fw(t.element)){const e=(Ko.I.get(Zo.Z.WizardViewedHints)||[]).concat([t.id]);Ko.I.set(Zo.Z.WizardViewedHints,e),this.checkAvailableHints()}}showHint(e,t){this.setState({hintIndex:e,target:t})}showInitialHint(e){const{hintIndex:t}=this.state,s=this.hints.indexOf(e);if(t===s)return;const n=Fw(e.element);n&&this.showHint(s,n)}checkAvailableHints(){const e=this.getAvailableHints(),t=e.find(Mw),s=e.length;this.setState({hintsAvailable:s},(()=>{void 0!==this.updateTimerId&&clearTimeout(this.updateTimerId),this.updateTimerId=setTimeout(this.checkAvailableHints,2e3),t&&this.showInitialHint(t)}))}run(){this.onNextHint()}closeWizard(){this.runCheckCloseInitialHint(),this.setState((e=>{let{hintsAvailable:t}=e;return Object.assign({},zw,{hintsAvailable:t})}))}render(){const{hintIndex:e,hintsAvailable:t}=this.state,s=t>0,n=this.getCurrentHintView();return a.createElement(vn.Provider,{value:{run:this.run,hasHints:s}},n&&a.createElement(_w,{key:e,onNextHint:this.onNextHint,hintView:n,onClose:this.closeWizard,hintsAvailable:t}),this.props.children)}},xw(Pw.prototype,"onNextHint",[R.Q2],Object.getOwnPropertyDescriptor(Pw.prototype,"onNextHint"),Pw.prototype),xw(Pw.prototype,"getNextHintIndex",[R.Q2],Object.getOwnPropertyDescriptor(Pw.prototype,"getNextHintIndex"),Pw.prototype),xw(Pw.prototype,"checkAvailableHints",[R.Q2],Object.getOwnPropertyDescriptor(Pw.prototype,"checkAvailableHints"),Pw.prototype),xw(Pw.prototype,"run",[R.Q2],Object.getOwnPropertyDescriptor(Pw.prototype,"run"),Pw.prototype),xw(Pw.prototype,"closeWizard",[R.Q2],Object.getOwnPropertyDescriptor(Pw.prototype,"closeWizard"),Pw.prototype),Pw);jw.displayName="Wizard";const Uw=jw,Hw={form:new x.s("/new-candidate/:seasonId")};(0,D.k)(Hw);var Qw=s(37996);const Vw=r().with("admission-form"),Gw=e=>{let{freezeTimer:t=!1}=e;const[s,n]=(0,a.useState)(10);return(0,a.useEffect)((()=>{setTimeout((()=>{0===s?window.location.assign("/"):t||n((e=>e-1))}),1e3)}),[s]),a.createElement("h1",{className:Vw("headline")},l.Ru.markdown({id:"submit-success-page-headline",keyset:"admission-form"}),a.createElement("div",{className:Vw("timer")},s))};Gw.displayName="SubmittedSuccessfully";const Bw=$r(Gw);var Ww=s(47933),Jw=s(91385),Kw=s(92317),Zw=s(44964),Yw=s(52490),qw=s(5436),$w=s(42181),Xw=s(70027);const eA=r().with("admission-form"),tA=e=>{let{children:t,title:s,validationMessage:n}=e;return a.createElement("div",{className:eA("item-input")},a.createElement("div",{className:eA("item-label")},a.createElement("div",{className:eA("item-title")},a.createElement("span",null,s)),void 0!==n&&n!==Xw.U.VALID&&a.createElement("div",{className:eA("item-message")},l.Ru.text({id:n,keyset:"admission-form"}))),t)};tA.displayName="AdmissionFormInput";const sA=tA,nA=r().with("admission-form"),rA=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],aA=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],iA=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],oA=()=>{const e=M(),t=P(Qw.EI),s=P(Qw.an),n=P(Qw.P),r=P(Qw.dY),i=P(Qw.rc),o=P(Qw.Wf),c=P(Qw.oP),u=P(Qw.gn),d=P(Qw.CP),m=P(Qw.uz),p=P(Qw.uO),h=P(Qw.hS),E=P(Qw.Ev),g=P(Qw.sr),y=(0,a.useCallback)((t=>{e((0,Ww.m9)(t.target.value))}),[e]),f=(0,a.useCallback)((t=>{e((0,Ww.a9)(t.target.value))}),[e]),S=(0,a.useCallback)((t=>{e((0,Ww.zi)(t.target.value))}),[e]),b=(0,a.useCallback)((()=>{e((0,Ww.Z6)())}),[e]),v=(0,a.useCallback)((t=>{if(!t)return;t.setHours(t.getTimezoneOffset()/-60);const s=t.toISOString().split("T")[0];e((0,Ww.O9)(s))}),[e]),N=(0,a.useCallback)((t=>{e((0,Ww.vm)(t.target.value))}),[e]),I=(0,a.useCallback)((t=>{e((0,Ww.e3)(t.target.value))}),[e]),T=(0,a.useCallback)((t=>{e((0,Ww.Ub)(t.target.value))}),[e]),k=(0,a.useCallback)((t=>{e((0,Ww.sy)(t.target.value))}),[e]),C=(0,a.useCallback)((t=>{e((0,Ww.i7)(t.target.value))}),[e]),w=(0,a.useCallback)((()=>{e((0,Ww.A$)())}),[e]),A=(0,a.useCallback)(((e,t)=>{const s=(0,Yw.A)(e,t,new Date);if(Kw.DateUtils.isDate(s))return s}),[]);return a.createElement("fieldset",{className:nA("fieldset")},a.createElement("legend",{className:nA("fieldset-label")},l.Ru.text({id:"personal-info-fieldset",keyset:"admission-form"})),a.createElement(sA,{title:l.Ru.text({id:"input-title-lastname",keyset:"admission-form"}),validationMessage:E.lastname},a.createElement(qt,{value:s,cls:nA("input"),size:"m",onChange:f})),a.createElement(sA,{title:l.Ru.text({id:"input-title-name",keyset:"admission-form"}),validationMessage:E.name},a.createElement(qt,{value:t,cls:nA("input"),size:"m",onChange:y})),a.createElement(sA,{title:l.Ru.text({id:"input-title-middlename",keyset:"admission-form"}),validationMessage:E.middlename},a.createElement("div",{className:nA("input-with-checkbox")},a.createElement(qt,{value:n,disabled:!r,cls:nA("input"),size:"m",onChange:S}),a.createElement(uu,{size:"m",checked:!r,onChange:b,cls:(0,$.j)(nA("checkbox"),nA("under-input"))},l.Ru.text({id:"input-title-has-middlename",keyset:"admission-form"})))),a.createElement(sA,{title:l.Ru.text({id:"input-title-birth-date",keyset:"admission-form"}),validationMessage:E.birthDate},a.createElement(Jw.default,{inputProps:{className:nA("input-date")},onDayChange:v,format:"dd.MM.y",formatDate:(e,t)=>(0,Zw.A)(e,t),parseDate:A,placeholder:l.Ru.text({id:"input-placeholder-birth-date",keyset:"admission-form"}),dayPickerProps:{firstDayOfWeek:1,modifiers:{today:[]},months:rA,weekdaysLong:aA,weekdaysShort:iA}})),a.createElement(sA,{title:l.Ru.text({id:"input-title-sex",keyset:"admission-form"}),validationMessage:E.sex},a.createElement(qw.bH,{size:"m",value:i,theme:"normal",onChange:N,className:nA("radio")},a.createElement($w.sx,{value:"female"},l.Ru.text({id:"input-sex-female",keyset:"admission-form"})),a.createElement($w.sx,{value:"male"},l.Ru.text({id:"input-sex-male",keyset:"admission-form"})))),g.schoolName&&a.createElement(sA,{title:l.Ru.text({id:"input-title-school",keyset:"admission-form"}),validationMessage:E.schoolName},a.createElement(qt,{value:o,cls:nA("input"),size:"m",onChange:I,hint:l.Ru.text({id:"input-hint-school",keyset:"admission-form"})})),g.grade&&a.createElement(sA,{title:l.Ru.text({id:"input-title-grade",keyset:"admission-form"}),validationMessage:E.grade},a.createElement(qw.bH,{size:"m",value:u,theme:"normal",onChange:T,className:nA("radio")},c.map((e=>a.createElement($w.sx,{value:e.value,key:e.key},l.Ru.text({id:"input-grade-".concat(e.key),keyset:"admission-form"})))))),a.createElement(sA,{title:l.Ru.text({id:"input-title-phone",keyset:"admission-form"}),validationMessage:E.phoneNumber},a.createElement(Pa(),{mask:"+7 999 999 99 99",value:d,onChange:k},(()=>a.createElement(qt,{cls:nA("input"),placeholder:l.Ru.text({id:"input-placeholder-phone",keyset:"admission-form"}),size:"m"})))),a.createElement(sA,{title:l.Ru.text({id:"input-title-telegram",keyset:"admission-form"}),validationMessage:E.telegram},a.createElement("div",{className:nA("input-with-checkbox")},a.createElement(qt,{value:m,disabled:!p,cls:nA("input"),size:"m",onChange:C,hint:l.Ru.text({id:"input-hint-telegram-yandex",keyset:"admission-form"})}),a.createElement(uu,{size:"m",checked:!p,onChange:w,cls:(0,$.j)(nA("checkbox"),nA("under-input"))},l.Ru.text({id:"input-title-has-telegram",keyset:"admission-form"})))),a.createElement(sA,{title:l.Ru.text({id:"input-title-email",keyset:"admission-form"})},a.createElement(qt,{value:h,cls:nA("input"),size:"m",disabled:!0,hint:l.Ru.text({id:"input-hint-email",keyset:"admission-form"})})))};oA.displayName="PersonalData";const lA=$r(oA),cA=r().with("admission-form"),uA=()=>{const e=M(),t=P(Qw._m),s=P(Qw.wj),n=P(Qw.Ly),r=P(Qw.EQ),i=P(Qw.Km),o=P(Qw.ug),c=P(Qw.TT),u=P(Qw.JS),d=P(Qw.Ev),m=(0,a.useCallback)((t=>{e((0,Ww.nd)(Number(Array.isArray(t)?t[0]:t)))}),[e]),p=(0,a.useCallback)((t=>{e((0,Ww.Rp)(Number(Array.isArray(t)?t[0]:t)))}),[e]),h=(0,a.useCallback)((t=>{e((0,Ww.Uc)(Number(Array.isArray(t)?t[0]:t)))}),[e]),E=(0,a.useCallback)((t=>{e((0,Ww.MP)(Number(Array.isArray(t)?t[0]:t)))}),[e]);return a.createElement("fieldset",{className:cA("fieldset")},a.createElement("legend",{className:cA("fieldset-label")},l.Ru.text({id:"location-fieldset",keyset:"admission-form"})),a.createElement(sA,{title:l.Ru.text({id:"input-title-region",keyset:"admission-form"}),validationMessage:d.selectedRegion},a.createElement(ca.l,{value:s,theme:"normal",placeholder:l.Ru.text({id:"input-placeholder-region",keyset:"admission-form"}),size:"s",className:cA("input"),onChange:e=>m(e.target.value),options:t.map((e=>({value:e.id,content:e.name})))})),o&&a.createElement(sA,{title:l.Ru.text({id:"input-title-district",keyset:"admission-form"}),validationMessage:d.selectedDistrict},a.createElement(ca.l,{value:n,theme:"normal",placeholder:l.Ru.text({id:"input-placeholder-district",keyset:"admission-form"}),size:"s",className:cA("input"),onChange:e=>p(e.target.value),options:o.map((e=>({value:e.id,content:e.name})))})),c&&a.createElement(sA,{title:l.Ru.text({id:"input-title-location",keyset:"admission-form"}),validationMessage:d.selectedLocation},a.createElement(ca.l,{value:r,theme:"normal",placeholder:l.Ru.text({id:"input-placeholder-location",keyset:"admission-form"}),size:"s",className:cA("input"),onChange:e=>h(e.target.value),options:c.map((e=>({value:e.id,content:e.name})))})),a.createElement(sA,{title:l.Ru.text({id:"input-title-venue",keyset:"admission-form"}),validationMessage:d.selectedVenue},a.createElement(ca.l,{value:i,theme:"normal",placeholder:l.Ru.text({id:"input-placeholder-venue",keyset:"admission-form"}),size:"s",className:cA("input"),onChange:e=>E(e.target.value),options:u?u.map((e=>({value:e.id,content:e.name}))):[]})))};uA.displayName="LocationData";const dA=$r(uA),mA=r().with("admission-form"),pA=()=>{const e=M(),t=P(Qw._L),s=P(Qw.in),n=P(Qw.x3),r=P(Qw.dM),i=P(Qw.$G),o=P(Qw.YS),c=P(Qw.Ev),u=(0,a.useCallback)((t=>{e((0,Ww.Qu)(t.target.value))}),[e]),d=(0,a.useCallback)((t=>{e((0,Ww.yf)(t.target.value))}),[e]),m=(0,a.useCallback)((t=>{e((0,Ww.jm)(t.target.value))}),[e]),p=(0,a.useCallback)((()=>{e((0,Ww.dw)())}),[e]),h=(0,a.useCallback)((t=>{e((0,Ww._j)(t.target.value))}),[e]),E=(0,a.useCallback)((t=>{e((0,Ww.BN)(t.target.value))}),[e]);return a.createElement("fieldset",{className:mA("fieldset")},a.createElement("legend",{className:mA("fieldset-label")},l.Ru.text({id:"parent-info-fieldset",keyset:"admission-form"})),a.createElement(sA,{title:l.Ru.text({id:"input-title-parent-lastname",keyset:"admission-form"}),validationMessage:c.parentLastname},a.createElement(qt,{value:s,cls:mA("input"),size:"m",onChange:d})),a.createElement(sA,{title:l.Ru.text({id:"input-title-parent-name",keyset:"admission-form"}),validationMessage:c.parentName},a.createElement(qt,{value:t,cls:mA("input"),size:"m",onChange:u})),a.createElement(sA,{title:l.Ru.text({id:"input-title-parent-middlename",keyset:"admission-form"}),validationMessage:c.parentMiddlename},a.createElement("div",{className:mA("input-with-checkbox")},a.createElement(qt,{value:n,disabled:!r,cls:mA("input"),size:"m",onChange:m}),a.createElement(uu,{size:"m",checked:!r,onChange:p,cls:(0,$.j)(mA("checkbox"),mA("under-input"))},l.Ru.text({id:"input-title-has-parent-middlename",keyset:"admission-form"})))),a.createElement(sA,{title:l.Ru.text({id:"input-title-parent-phone",keyset:"admission-form"}),validationMessage:c.parentPhoneNumber},a.createElement(Pa(),{mask:"+7 999 999 99 99",value:o,onChange:h},(()=>a.createElement(qt,{cls:mA("input"),placeholder:l.Ru.text({id:"input-placeholder-parent-phone",keyset:"admission-form"}),size:"m"})))),a.createElement(sA,{title:l.Ru.text({id:"input-title-parent-email",keyset:"admission-form"}),validationMessage:c.parentEmail},a.createElement(qt,{value:i,cls:mA("input"),size:"m",onChange:E})))};pA.displayName="ParentData";const hA=$r(pA),EA=r().with("admission-form"),gA=e=>{let{children:t,validationMessage:s}=e;return a.createElement("div",{className:EA("item-checkbox")},t,void 0!==s&&s!==Xw.U.VALID&&a.createElement("div",{className:EA("item-message")},l.Ru.text({id:s,keyset:"admission-form"})))};gA.displayName="AdmissionFormCheckbox";const yA=gA,fA=r().with("admission-form"),SA=$r((()=>{const e=M(),t=P(Qw.c6),s=P(Qw.Kz),n=P(Qw.aO),r=P(Qw.cX),i=P(Qw.Z9),o=P(Qw.Ev),c=P(Qw.sr),u=(0,a.useCallback)((()=>{e((0,Ww.QU)())}),[e]),d=(0,a.useCallback)((()=>{e((0,Ww.Uk)())}),[e]),m=(0,a.useCallback)((()=>{e((0,Ww.mM)())}),[e]),p=(0,a.useCallback)((()=>{e((0,Ww.Hy)())}),[e]),h=(0,a.useCallback)((()=>{e((0,Ww.Yz)())}),[e]),{agreementGDPR:E,agreementOfEducationalProject:g,agreementUsingService:y,agreementReceiveMail:f}=c,S=[E,g,y],b=[f];return a.createElement(a.Fragment,null,S.some((e=>e))&&a.createElement("fieldset",{className:fA("fieldset")},a.createElement("legend",{className:fA("fieldset-label")},l.Ru.text({id:"agreement-block-fieldset",keyset:"admission-form"})),c.agreementOfEducationalProject&&a.createElement(yA,{validationMessage:o.agreementOfEducationalProject},a.createElement(uu,{cls:fA("checkbox"),size:"m",checked:s,onChange:d},l.Ru.markdown({id:"input-title-agreement-of-educational-project",keyset:"admission-form"}))),a.createElement(yA,{validationMessage:o.agreementCompetitionConditions},a.createElement(uu,{cls:fA("checkbox"),size:"m",checked:r,onChange:h},l.Ru.markdown({id:"input-title-agreement-competition-conditions",keyset:"admission-form"}))),c.agreementUsingService&&a.createElement(yA,{validationMessage:o.agreementUsingService},a.createElement(uu,{cls:fA("checkbox"),size:"m",checked:n,onChange:m},l.Ru.markdown({id:"input-title-agreement-using-service",keyset:"admission-form"}))),c.agreementGDPR&&a.createElement(yA,{validationMessage:o.agreementGDPR},a.createElement(uu,{cls:fA("checkbox"),size:"m",checked:t,onChange:u},l.Ru.markdown({id:"input-title-agreement-gdpr",keyset:"admission-form"})))),b.some((e=>e))&&a.createElement("fieldset",{className:fA("fieldset")},a.createElement(yA,{validationMessage:o.agreementReceiveMail},a.createElement(uu,{cls:fA("checkbox"),size:"m",checked:i,onChange:p},l.Ru.markdown({id:"input-title-agreement-receive-mail",keyset:"admission-form"})))))})),bA=r().with("admission-form"),vA=["utm_source","utm_medium","utm_content","utm_campaign"],NA=$r((()=>{const e=M(),t=(0,i.zy)(),s=P(Qw.Pd),n=P(Qw.sr),{agreementGDPR:r,agreementOfEducationalProject:o,agreementUsingService:c,agreementReceiveMail:u}=n,d=[r,o,c,u],{seasonId:m}=(0,i.g)(),p=(0,a.useMemo)((()=>{const e=new URLSearchParams(t.search);return vA.reduce(((t,s)=>{var n;return Object.assign({},t,{[s]:null!=(n=e.get(s))?n:void 0})}),{})}),[t.search]),h=m.includes("base")?"base":"additional",E=(0,a.useCallback)((()=>{e((0,Ww.tA)(Object.assign({seasonId:m},p)))}),[e,m,p]);return a.createElement(a.Fragment,null,a.createElement("h1",{className:bA("headline")},l.Ru.markdown({id:"form-headline-".concat(h),keyset:"admission-form"})),a.createElement("div",{className:bA("headline")},l.Ru.markdown({id:"form-disclaimer",keyset:"admission-form"})),a.createElement("form",{onSubmit:e=>e.preventDefault(),className:bA("form")},a.createElement(lA,null),n.parentData&&a.createElement(hA,null),n.venue&&a.createElement(dA,null),d.some((e=>e))&&a.createElement(SA,null)),n.infoUnderForm&&a.createElement("div",{className:bA("info-under-form")},l.Ru.markdown({id:"info-after-submitting",keyset:"admission-form"})),a.createElement("div",{className:bA("button-submit-wrap")},a.createElement(ge.$,{theme:"action",size:"m",view:"lyceum",onClick:E,progress:s===Ot.L.PENDING},l.Ru.text({id:"button-submit",keyset:"admission-form"}))))})),IA=l.Ru.text({id:"page-title",keyset:"admission-form"}),TA=()=>{const e=P(Qw.Pd),t=P(Qw.FW);return t?a.createElement(_s.eG,{errorCode:"".concat(t.statusCode,"_").concat(t.errorCode),statusCode:t.statusCode}):a.createElement("article",null,a.createElement(tr.m,null,a.createElement("title",null,IA),a.createElement("meta",{name:"title",content:IA})),a.createElement(sr.P,{type:"wide"},a.createElement(sr.P.Main,null,e!==Ot.L.SUCCESS?a.createElement(NA,null):a.createElement(Bw,null))))};TA.displayName="AdmissionForm";const kA=$r(TA),CA=r().with("light-header"),wA=e=>{const{uid:t,yandexuid:s,name:n,avatar:r,currentUrl:i,type:o,isChild:l,hasPlus:c}=e,u=P(T.wz);return a.createElement("header",{className:CA()},a.createElement("div",{className:CA("left")},a.createElement(ps,{type:o})),a.createElement("div",{className:CA("right")},a.createElement(Un,{className:CA("language-selector")}),a.createElement(yn,{uid:t,name:n,avatar:r,hasPlus:c,isChild:l,yandexuid:s,retpath:i,profileLmsPath:u?bn.profile.build({userId:u.id.toString()}):void 0})))};wA.displayName="LightHeader";const AA=wA;s(40754);var OA=s(52060);const RA={buttonText:{ru:"Чаты",en:"Chats"},title:{ru:"Чаты",en:"Chats"}},_A=()=>{const e=M(),t=(0,a.useContext)(ue.U),{language:s}=(0,a.useContext)(as.Ov);return(0,a.useEffect)((()=>{e((0,OA.j)())}),[e]),(0,ne.A)((async function(){if("undefined"!=typeof window&&t){const e=Object.assign({buttonText:RA.buttonText[s||"ru"],title:RA.title[s||"ru"]},t.widgetOptions);window.chatWidget=await ce(e)}})),(0,wo.A)((()=>{var e,t;null==(e=window)||null==(t=e.chatWidget)||t.destroy()})),null},LA=r().with("desktop"),MA=e=>{let{isPathUnknown:t,brand:s,data:n,i18n:r}=e;const o=t?a.createElement(AA,{type:s,uid:n.uid,avatar:n.avatar,hasPlus:Boolean(n.hasPlus),isChild:Boolean(n.isChild),name:n.displayName,yandexuid:n.yandexuid.toString(),currentUrl:n.currentUrl}):a.createElement(Bn,{type:s,passportHost:n.passportHost,yandexuid:n.yandexuid,currentUrl:n.currentUrl});return a.createElement(a.Fragment,null,a.createElement(_A,null),a.createElement(Uw,{hints:n.wizard,key:r.updateKey},a.createElement("div",{"data-version":n.version,className:LA()},a.createElement("div",{className:LA("content")},a.createElement(i.dO,null,a.createElement(i.qh,{exact:!0,path:Hw.form.template},a.createElement(AA,{type:s,uid:n.uid,avatar:n.avatar,hasPlus:Boolean(n.hasPlus),isChild:Boolean(n.isChild),name:n.displayName,yandexuid:n.yandexuid.toString(),currentUrl:n.currentUrl}),a.createElement(kA,null)),a.createElement(i.qh,null,o,a.createElement(Aw,{isPathUnknown:Boolean(t)}))),a.createElement(O,{withHelpLink:!0,type:s})),a.createElement(qn,null))))}},38890:(e,t,s)=>{"use strict";s.d(t,{$:()=>T});var n=s(28199),r=s(98906),a=s(34001),i=s(14367),o=s(43498),l=s(91121),c=s(48978),u=s(67930),d=s(65921),m=s(62486),p=s(58126),h=s(2450),E=s(95430),g=s(41484),y=s(23944),f=s(34815),S=s(62006),b=s(54625),v=s(96540);const N=["url","disabled","tabIndex"],I=(0,n.withBemMod)((0,S.G)(),{type:"router-link"},(e=>t=>{let{url:s="",disabled:n,tabIndex:r}=t,a=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,N);return v.createElement(e,Object.assign({},a,{disabled:n,tabIndex:n?-1:r,as:(i=b.N_,v.forwardRef(((e,t)=>v.createElement(i,Object.assign({},e,{innerRef:t}))))),to:s,type:null}));var i})),T=(0,n.compose)((0,n.composeU)(r.r,a.x),(0,n.composeU)(i.T,o.N,l.I,c.z,u.M,d.v),(0,n.composeU)(m.R,p.L,h.N,E.U),(0,n.composeU)(g.b,y.$,I),f.M)(S.$)},41915:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var n=s(96540),r=s(16854);class a extends n.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0}),r.W.captureComponentException(e,t)}render(){const{hasError:e}=this.state,{children:t,renderFallback:s}=this.props;return e?s():t}}a.displayName="ErrorBoundary";const i=a},16982:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(96540),r=s(80545),a=s(21840),i=s(96802),o=s(78342),l=s.n(o);const c=s.p+"./assets/be954e1240e9297687fb.png",u=e=>{let{lang:t}=e;const{brand:s}=(0,a.lk)();return s===i.m.YANGO?n.createElement(r.m,null,n.createElement("link",{rel:"shortcut icon",href:c})):n.createElement(l(),{lang:t})};u.displayName="Favicon";const d=u},78301:(e,t,s)=>{"use strict";s.d(t,{D:()=>m});var n=s(306),r=s.n(n),a=s(96540),i=s(91992);const o=["className"],l=r().with("section-header"),c=e=>{let{className:t}=e,s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,o);return a.createElement("header",Object.assign({className:(0,i.j)(l(),t)},s))};c.displayName="SectionHeader";const u=["className","level","controls","smaller","smallerOnDesktop"],d=r().with("heading"),m=e=>{const{className:t,level:s=1,controls:n,smaller:r,smallerOnDesktop:o}=e,l=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,u),m=(0,a.createElement)("h".concat(s),Object.assign({className:(0,i.j)(d({level:s,padded:Boolean(n),smaller:r,"smaller-on-desktop":o}),t)},l));return n?a.createElement(c,null,m,n):m}},67752:(e,t,s)=>{"use strict";s.d(t,{P:()=>m,A:()=>p});var n=s(306),r=s.n(n),a=s(96540),i=s(91992);const o=r().with("layout"),l=e=>a.createElement("div",{className:o("top")},e.children);l.displayName="Top";const c=e=>{let{className:t,children:s}=e;return a.createElement("main",{className:(0,i.j)(o("main"),t)},s)};c.displayName="Main";const u=e=>{let{className:t,children:s}=e;return a.createElement("aside",{className:(0,i.j)(o("active-area"),t)},s)};u.displayName="ActiveArea";const d=e=>a.createElement("aside",{className:o("aside")},e.children);d.displayName="Aside";class m extends a.Component{render(){const{type:e,fixed:t,className:s}=this.props;let n=null;const r=a.Children.map(this.props.children,(e=>a.isValidElement(e)&&"string"!=typeof e.type?e.type===u||e.type.displayName===u.name?(n=a.cloneElement(e),null):e:null));return a.createElement("div",{className:(0,i.j)(o(),s)},a.createElement("div",{className:o("wrapper",{type:e,fixed:t})},r),n)}}m.ActiveArea=void 0,m.Aside=void 0,m.Main=void 0,m.Top=void 0,m.displayName="Layout",m.ActiveArea=u,m.Aside=d,m.Main=c,m.Top=l;const p=m},31334:(e,t,s)=>{"use strict";s.d(t,{N:()=>I});var n=s(96540),r=s(28199),a=s(75377),i=s(59811),o=s(2700),l=s(69344),c=s(20886),u=s(20926),d=s(70285),m=s(2273),p=s(88576),h=s(36707),E=s(31073),g=s(10280),y=s(54625);const f=["behavior"],S=(0,r.withBemMod)((0,g.s)(),{behavior:"router"},(e=>t=>{let s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,f);return n.createElement(e,Object.assign({},s,{as:y.N_}))})),b=["behavior"],v=(0,r.withBemMod)((0,g.s)(),{behavior:"external"},(e=>t=>{let s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,b);return n.createElement(e,Object.assign({as:"a",rel:"noopener noreferrer",target:"_blank"},s))})),N=(0,r.compose)(a.B,(0,r.composeU)(i.r,o.x,l.J),(0,r.composeU)(c.v,u.h,d.M,m.L,p.X,h.L,E.N),(0,r.composeU)(S,v))(g.N),I=e=>n.createElement(N,Object.assign({theme:"normal",view:"lyceum"},e.to&&{behavior:"router"},e));I.displayName="Link"},55838:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var n=s(96540),r=s(35764);class a extends n.Component{render(){return n.createElement(r.TD,Object.assign({},this.props,{version:"2"}))}}a.displayName="MetrikaCounter";const i=a},87594:(e,t,s)=>{"use strict";s.d(t,{$7:()=>c,ES:()=>d,IU:()=>l,LR:()=>p,OX:()=>o,YG:()=>u,aM:()=>i,ac:()=>m,cU:()=>E,ft:()=>h,oS:()=>g});var n=s(40431),r=s.n(n),a=s(19077);const i={i18n:{id:"profile-saved",keyset:"profile"},type:a.V.SUCCESS,timeout:5e3},o={i18n:{id:"profile-save-error",keyset:"profile"},type:a.V.ERROR,timeout:1e4},l={i18n:{id:"save-success-message",keyset:"common"},type:a.V.SUCCESS},c={i18n:{id:"save-error-message",keyset:"common"},type:a.V.ERROR},u={i18n:{id:"400_file_is_empty",keyset:"api-errors"},type:a.V.ERROR},d={i18n:{id:"400_solution_symbols_max_length_exceeded",keyset:"api-errors"},type:a.V.ERROR},m={i18n:{id:"400_task_deadline_expired",keyset:"api-errors"},type:a.V.ERROR},p=e=>({i18n:{id:"file-SIZE-exceeded",keyset:"errors",params:{size:r()(e,{locale:!0})}},type:a.V.ERROR}),h={i18n:{id:"openProblemError",keyset:"problems"},type:a.V.ERROR,timeout:1e4},E={i18n:{id:"sendSubmissionError",keyset:"problems"},type:a.V.ERROR,timeout:1e4},g={i18n:{id:"createChatError",keyset:"notifications"},type:a.V.ERROR,timeout:1e4}},782:(e,t,s)=>{"use strict";s.d(t,{Tt:()=>r,ad:()=>i,rE:()=>a});var n=s(96540);const r=(0,n.createContext)({host:"https://avatars.mds.yandex.net"});class a extends n.Component{render(){const{avatarOptions:e,children:t}=this.props;return n.createElement(r.Provider,{value:e},t)}}function i(e){return class extends n.Component{render(){return n.createElement(r.Consumer,null,(t=>n.createElement(e,Object.assign({avatarOptions:t},this.props))))}}}a.displayName="AvatarOptionsProvider"},11743:(e,t,s)=>{"use strict";s.d(t,{U:()=>n});const n=(0,s(96540).createContext)()},22983:(e,t,s)=>{"use strict";s.d(t,{VX:()=>i,yb:()=>a});var n=s(96540);const r=(0,n.createContext)({fileExtensions:[]}),a=e=>{let{options:t,children:s}=e;return n.createElement(r.Provider,{value:t},s)};function i(e){return t=>n.createElement(r.Consumer,null,(s=>n.createElement(e,Object.assign({contestOptions:s},t))))}a.displayName="ContestOptionsProvider"},98889:(e,t,s)=>{"use strict";s.d(t,{Cj:()=>i,To:()=>o});var n=s(96540);const r={fileSize:262144,displayableFileSize:102400},a=(0,n.createContext)(r);class i extends n.Component{render(){const{children:e,fileLimits:t}=this.props;return n.createElement(a.Provider,{value:t},e)}}function o(e){return class extends n.Component{render(){return n.createElement(a.Consumer,null,(t=>n.createElement(e,Object.assign({fileLimits:t},this.props))))}}}i.displayName="FileLimitsProvider"},89093:(e,t,s)=>{"use strict";s.d(t,{T:()=>r,b:()=>a});var n=s(96540);const r=(0,n.createContext)(1),a=e=>{let{id:t,children:s}=e;return n.createElement(r.Provider,{value:t},s)};a.displayName="LyceumBotIdProvider"},21840:(e,t,s)=>{"use strict";s.d(t,{Ov:()=>o,GL:()=>l,lk:()=>c});var n=s(96540);let r=function(e){return e.RU="ru",e.COM="com",e}({}),a=function(e){return e.RU="ru",e.EN="en",e}({});var i=s(96802);const o=(0,n.createContext)({language:a.RU,availableLanguages:[a.RU],tld:r.RU,isTestPassport:!1,hostname:"",onChangeLanguage:()=>{},brand:i.m.YANDEX});class l extends n.Component{render(){const{settings:e,children:t}=this.props;return n.createElement(o.Provider,{value:e},t)}}l.displayName="SiteSettingsProvider";const c=()=>(0,n.useContext)(o)},38197:(e,t,s)=>{"use strict";s.d(t,{h:()=>o});var n=s(28199),r=s(22782),a=s(96540);const i=(0,n.compose)(r.Z3)(r.iC),o=e=>a.createElement(i,Object.assign({flavor:"blueberry"},e));o.displayName="BlueberryTable"},91378:(e,t,s)=>{"use strict";s.d(t,{n:()=>b});var n=s(28199),r=s(71415),a=s(22782),i=s(23145),o=s(77419),l=s(38197),c=s(8886),u=s(5847),d=s.n(u),m=s(96540),p=s(27841),h=s(31334),E=s(38890);const g=["rules"],y=["isRouter","isButton","target","rel"];function f(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}const S=new r.Registry({id:(0,a.DN)()});S.set("Table",l.h),S.set("Formula",i.R);const b=(0,n.compose)((0,r.withRegistry)(S),a.wC,a.L2,a.ec,a.Uv,a.yU,a.W7,a.EI,a.bS,a.gl,a.ix,a.vL,a.qT,a.ZA,a.V5,a.Ax,o.P,c.b,(e=>t=>{let{rules:s}=t,n=f(t,g);const r=(0,m.useMemo)((()=>Object.assign({},s,{link:{order:0,match:d().inlineRegex(new RegExp("^\\[(".concat("(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",")\\]\\(").concat("\\s*<?((?:[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*","\\)(").concat('?:{:((?:\\w*(="[^"]*")?\\s?)*)}',")?"))),parse:(e,t,s)=>({content:t(e[1],s),target:e[2],title:e[3],attributes:e[4]?(0,p.y)(e[4]):{}}),react(e,t,s){const n=d().sanitizeUrl(e.target)||"",r=t(e.content,s),{attributes:a={}}=e,{isRouter:i,isButton:o,target:l,rel:c}=a,u=f(a,y),p={key:s.key,title:e.title,target:l,rel:c};return i?o?m.createElement(h.N,Object.assign({to:n},p),m.createElement(E.$,Object.assign({view:"lyceum"},u),r)):m.createElement(h.N,Object.assign({to:n},p,u),r):o?m.createElement("a",Object.assign({href:n},p),m.createElement(E.$,Object.assign({view:"lyceum"},u),r)):m.createElement("a",Object.assign({href:n},p,u),r)}}})),[s]);return m.createElement(e,Object.assign({},n,{rules:r}))}))(a.oz)},27841:(e,t,s)=>{"use strict";s.d(t,{E:()=>n,y:()=>r});const n=e=>{const t={};return e.markup.formulas&&(t.formulas=e.markup.formulas),e.resources&&(t.resources=e.resources),t};function r(e){const t=e.match(/\w*(="[^"]*")?/gim),s={};return Array.isArray(t)&&t.forEach((e=>{const t=e.match(/(\w*)(="([^"]*)")?/i);if(t&&t[1]){const e=t[1],n=!t[3]||t[3];s[e]="style"===e?function(e){return"string"!=typeof e?{}:e.split(";").reduce(((e,t)=>{const[s,n]=t.split(":"),r=function(e){return e.replace(/-([a-z])/g,(e=>e[1].toUpperCase()))}(s.trim());return""!==r&&"string"==typeof n&&(e[r]=n.trim()),e}),{})}(n):n}})),s}},8886:(e,t,s)=>{"use strict";s.d(t,{b:()=>y});var n=s(16762),r=s.n(n),a=s(74733),i=s.n(a),o=s(96540),l=s(5847),c=s(91992);function u(e,t){if(e&&t)return 0===t?e:.25*e}const d=e=>{let{mixClassname:t,resource:s}=e;const{imageWidth:n,version:r,name:a,alt:i}=s,l=(0,c.j)("resource__image",t);return o.createElement("img",{className:l,src:s.url,width:u(n,r),alt:i||a,loading:"lazy",decoding:"async"})};d.displayName="ResourceImage";const m={IMAGE:["jpg","jpeg","png","svg","gif"]},p={IMAGE:d},h=e=>{let{resource:t,className:s}=e;const n=(r=t.type,Object.keys(m).find((e=>m[e].includes(r))));var r;if(!n)return null;const a=p[n];return o.createElement(a,{mixClassname:s,resource:t})};h.displayName="Resource";const E=h,g=["rules"],y=e=>t=>{let{rules:s}=t,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,g);const a=(0,o.useMemo)((()=>Object.assign({},s,{resource:{order:0,match:(0,l.inlineRegex)(/^{resource:(\d+)}/),parse:e=>({content:e[1]}),react:(e,t,s)=>i()(r()(s,["resources",e.content]))?null:o.createElement(E,{resource:s.resources[e.content],key:"resource_".concat(e.content,"_").concat(s.key)})}})),[s]);return o.createElement(e,Object.assign({},n,{rules:a}))}},52722:(e,t,s)=>{"use strict";s.d(t,{Wt:()=>Xt,eG:()=>Kt,ft:()=>Yt,AI:()=>Zt,wO:()=>qt});var n,r,a,i,o,l,c,u,d,m,p,h,E,g,y,f,S,b,v,N,I,T,k,C=s(96540),w=s(4400),A=s(9928),O=s(306),R=s.n(O),_=s(80545),L=s(38890),M=s(78301),P=s(67752),x=s(31334),D=s(21840),F=s(96802),z=s(83573);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},j.apply(null,arguments)}const U=e=>C.createElement("svg",j({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"},e),n||(n=C.createElement("style",null,"\n    .st0,.st1{stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st0{fill:none;stroke:#000}.st1{stroke:#13110c}.st1,.st2{fill:#fff}.st3,.st4,.st5{fill:none;stroke:#13110c;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st4,.st5{fill:#fff;stroke:#000}.st5{fill:#ffd33c}\n  ")),r||(r=C.createElement("path",{className:"st0",d:"M275.7 387.6l10.3-11s2.1-2.1 3.9-.4c1.3 1.2 9.7 9.1 12.4 11.5 1.6 1.3 3.4-.3 3.4-.3l10.2-10.9s1.4-1.5 3.3.3M199.2 389.8l-10.3-11s-2.1-2.1-3.9-.4c-1.3 1.2-9.7 9.1-12.4 11.5-1.6 1.3-3.4-.3-3.4-.3L159 378.7M115.8 389.8l10.3-11s2.1-2.1 3.9-.4c1.3 1.2 9.7 9.1 12.4 11.5"})),a||(a=C.createElement("path",{className:"st1",d:"M336 162h100v86H336z"})),i||(i=C.createElement("path",{className:"st2",d:"M426 162v86h-90v-86"})),o||(o=C.createElement("path",{className:"st3",d:"M369 162h57v86h-90v-23M336 205v-43h18"})),l||(l=C.createElement("path",{className:"st3",d:"M344 204.8V171h10M369 171h48v62h-73v-8M349 240h-5M388 240h-15"})),c||(c=C.createElement("path",{className:"st2",d:"M372 248h17v22h-17z"})),u||(u=C.createElement("path",{className:"st1",d:"M372 248h26v22h-26z"})),d||(d=C.createElement("path",{className:"st4",d:"M389 249v21M409.9 262c-.7 0-83.2-.1-84.5 0-1.3.1-1.4 1.1-1.4 1.1v5.8c0 1.1 1.6 1 1.6 1s81.8.1 83.7 0c1.9-.1 1.7-.8 1.7-.8v-6c0 .1 0-1.1-1.1-1.1zM392.7 262v7"})),m||(m=C.createElement("path",{className:"st5",d:"M369 147V176.7s0 2 2.7 2c2.6 0 13.3.1 13.3.1v18h-26.1s-4.9.3-4.9-4.2v-33.7s.1-2-1.5-2h-6.1c-3.9 0-3.6-1.2-3.6-7 0-3.9-.3-7 3.6-7h14.1c6.5-.1 8.4-.1 8.5 4.1z"})),p||(p=C.createElement("path",{className:"st0",d:"M334 153.8h2.4c.7 0 .6-.8.6-.8v-1.5s0-.7.8-.7h4.2"})),h||(h=C.createElement("circle",{cx:358.2,cy:148.9,r:1.5})),E||(E=C.createElement("g",null,C.createElement("path",{className:"st5",d:"M310 179.4v22.8s.1 2.5 3.5 2.5 71.5.1 71.5.1v21.9h-89.5s-6.5.4-6.5-5.4v-28s.1-2.5-2-2.6h-6.3c-5 0-4.6-1.6-4.6-9 0-5-.4-9 4.6-9h18.2c9.3.1 11.1.1 11.1 6.7z"}),C.createElement("path",{className:"st0",d:"M265 186.8h3.1c.9 0 .9-1.1.9-1.1v-2s0-.9 1.2-.9h5.8"}),C.createElement("circle",{cx:297.7,cy:179.9,r:1.5}))),g||(g=C.createElement("g",null,C.createElement("path",{className:"st0",d:"M429 122h-26M427 131h-26M411.5 113.9c-1.1 8.3-2.2 16.8-3.2 25.2M422 113.9c-1.1 8.3-2.2 16.8-3.2 25.2"}))),y||(y=C.createElement("path",{className:"st4",d:"M319 271.7c0 1-.1 136.4 0 138.3.1 1.9 1.7 2 1.7 2h120.6c1.7 0 1.6-2.3 1.6-2.3s.1-134.4 0-137.1c-.1-2.8-1.3-2.5-1.3-2.5H320.8c0-.1-1.8-.1-1.8 1.6z"})),f||(f=C.createElement("g",null,C.createElement("path",{className:"st0",d:"M374.2 89.5c0-2.4-.1-1.7 0-4.3.1-2.6 2.4-2.2 2.4-2.2h3.3s2.1-.2 2.1 2.4v3.7s-.2 1.9 1.7 1.9h2.4s1.5-.4 1.5-2.2c0-1.7-.1-3.2 0-4.5.1-1.4 1.5-1.3 1.5-1.3h4.2c.5 0 .9.4.9.9v5c0 1.8 1 2.1 1.5 2.1h3.5c2.5 0 2.3-2.6 2.3-2.6v-2.6c0-2.4 1.6-2.8 2.2-2.8h8.3"}))),S||(S=C.createElement("g",null,C.createElement("path",{className:"st0",d:"M272 124h4.8c2.8 0 2.4 2.2 2.4 2.2v4.7c0 2.3 1.9 2.1 1.9 2.1h4.3s1.8-.2 1.8-2.6-.1-1.7 0-4.3c.1-2.5 2.4-2.2 2.4-2.2h3.4s2.1-.3 2.1 2.4v3.7s-.2 1.9 1.7 1.9h2.4s1.5-.5 1.5-2.2c0-1.8-.1-3.1 0-4.5s1.5-1.3 1.5-1.3h3.8c1.4 0 1.4 1.6 1.4 1.6v3.7c0 1.7 1.5 1.7 1.5 1.7h4.2c1.8-.1 1.6-2.2 1.6-2.2v-2.6c0-2.4 2.2-2.2 2.2-2.2h8.3"}))),b||(b=C.createElement("path",{className:"st0",d:"M385 176.8v52"})),v||(v=C.createElement("path",{className:"st4",d:"M319 278h124M412 278v134"})),N||(N=C.createElement("g",null,C.createElement("path",{className:"st0",d:"M338 80h-25M337 89h-26M321.3 71.5c-1.1 8.3-2.2 16.8-3.2 25.2M331.8 71.5c-1.1 8.3-2.2 16.8-3.2 25.2"}))),I||(I=C.createElement("g",null,C.createElement("path",{className:"st0",d:"M295 255h-25M293 263h-25M278 246c-1.1 8.3-2.2 16.8-3.2 25.2M288.5 246c-1.1 8.3-2.2 16.8-3.2 25.2"}))),T||(T=C.createElement("g",null,C.createElement("path",{className:"st4",d:"M201.5 205.9c-.8-.4-1.5-.8-1.5-.8s-.7-.4-1-.6l-9.7-5c-.5.6-1.1 1-2.2 1.3-3.5.9-10.3 2.6-18.1 4.6v8.8s19.2-3.2 31.1-5.1l1.4-3.2zM142.1 399s-.9 7.4-1.1 8.5c-.1 1.1.9 1.5.9 1.5h29.6c1.4 0 1.5-1.4 1.5-1.4v-1.8c0-.6-1-.9-1.8-1-.8-.1-23.5-5-23.5-5l-5.6-.8z"}),C.createElement("path",{className:"st5",d:"M163.2 238.9l30.9 74.9s1.8 4.1-.4 8.1c-3.1 5.5-43.8 75.3-43.8 75.3s-1.2 2.7-2.6 2.7c-1.8 0-3.1 0-4.6-.4-1.5-.4-1.4-2.2-.8-4.3 2.9-10.3 11.6-41.1 15.2-58.2.2-.8 1-4.4 1.2-5.2 2.3-12.9 11.8-14.2 15.2-14.3 0 0 1-.2.8-.6-.3-.4-39.1-54-39.1-54l18.8-27.4 9.2 3.4z"}),C.createElement("path",{className:"st4",d:"M39.2 387.5l-3 3.6s-.6 1.6.1 3.1 10 11.9 10.9 12.7c.9.7 2.3 1.2 3.3 1.2h9.9s1.6-.4 1.6-1.8v-1.4s-.1-1-1.5-1.2c-1.4-.2-6-1.3-7.7-1.8-1.6-.4-2.5-2.5-2.5-2.5l-3.7-8.4-7.4-3.5"}),C.createElement("path",{className:"st5",d:"M215.4 184.5l12.2 3.1s5.7.8 7-3.5c1.2-3.9 27.2-90.2 33.1-109.8.5-1.8-.4-3.8-.9-4.8-.2-.4-.6-.5-1-.4-1.1.4-3.2 1.4-4.3 3.1-10.8 17.9-58.2 96.9-60.3 100.4-2.4 4 2.5 6.8 2.5 6.8l11.7 5.1zM241.6 127l-26.2 57.5"}),C.createElement("path",{className:"st4",d:"M188.8 114.2c-2.2-.4-2.8.6-2.8.6l-3.7 4.4s-.8 1.1-1.8.1-2.3-2.4-2.3-2.4-1.4-.8-1.9.3c-.4 1-2.3 5.5-2.8 6.6-.5 1.1.1 2.4.1 2.4s.1.3.8 1.1c.7.8-.3 1.8-.3 1.8s-.5.4-1.6 1.7c-1.1 1.3-2.3.4-2.3.4l-4.8-3.9-.5.7-7.8 10.5s.1 0 .1.1l2.2 1.3c3.9 2.4 6.2 6.3 6.7 10.6l8.1-10.7s.8-1.1 1.8-.5c1 .6 2.9 1.6 2.9 1.6s3.6 1.4 5-1.2c1.4-2.6 2.7-5.2 3.1-6 .4-.8 1.2-.6 1.2-.6s1.2.3 3.1.9c1.9.5 2.1-1.7 2.1-1.7l3.6-15.9c-3-1-7-2-8.2-2.2z"}),C.createElement("path",{d:"M189 120.4c.1.5-.2 1-.7 1.1-.5.1-1-.2-1.1-.7-.1-.5.2-1 .7-1.1.5-.1 1 .2 1.1.7z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10}),C.createElement("path",{className:"st5",d:"M117.4 165.1l21.1-35.3-1.9-1.1c-6.6-4-15.2-1.8-19.2 4.8l-21.1 35.3 1.9 1.1c6.7 4 15.3 1.8 19.2-4.8zM116.3 221.6c.2.1.4.3.7.4.7.3 3.2 1.3 6.7 2.6l-6.3 10.5c-2.1 3.5-5.5 5.8-9.2 6.5l-22.1 55s-11.6-2.5-16.7 10.9c-3.5 9-4.3 10.9-4.3 10.9l-26.8 68.7 8.9 4.2L154 235.5l-37.7-13.9zM170.3 131l-8.5-7s-1.4-1.6-.4-2.7c1-1.1 17.3-19.4 18.7-20.8 1.4-1.4 3.4-.7 3.4-.7s22 4.8 24.1 5.3c2 .5.7 2.4.7 2.4s-3.5 6.3-4.6 8c-1.1 1.7-2.7 1.4-2.7 1.4s-10.1-2.4-12.3-2.8c-2.2-.4-2.8.6-2.8.6l-3.7 4.4s-.8 1.1-1.8.1-2.3-2.4-2.3-2.4-1.4-.8-1.9.3c-.4 1-2.3 5.5-2.8 6.6-.5 1.1.1 2.4.1 2.4s.1.3.8 1.1c.7.8-.3 1.8-.3 1.8s-.5.4-1.6 1.7c-.9 1.2-2.1.3-2.1.3z"}),C.createElement("path",{className:"st4",d:"M189.7 192.7c0-1.9-2.6-1.7-2.6-1.7h-40s-1.6-.5-.6-2.2c1-1.7 17.8-29.8 17.8-29.8 4-6.7 1.9-15.4-4.7-19.4l-2.2-1.3c-6.6-4-15.2-1.9-19.2 4.8L108 193.4c-4 6.7-1.9 15.4 4.7 19.4l2.2 1.3c2.3 1.4 4.8 2 7.3 2 1.5.1 3.3 0 4.9-.4 3.3-.8 48.5-12.2 59.9-15.1 1.6-.4 2.3-1.1 2.8-2.4.5-1.2-.1-3.6-.1-5.5zM241 192.6h-6.6c-.8 0-4.8.1-5.5.3l-2.1.2-6 1.7c.5 1.3.7 2.7.5 4.3-.2 2-.8 4.1-1.7 5.8l7.9 3.2c.4.2 1.4.5 1.4.5s4.4 1.5 5.2 1.5l7 .1c-.1-5.8-.1-11.7-.1-17.6z"}),C.createElement("path",{className:"st4",d:"M241.1 275.1s-.1-64.8-.1-110.9l7.4-25.8c3.5 12.6 7.3 26.2 7.3 26.2s1.2 3.8 1.2 8.2c0 5.6-.1 41.5 0 46.5 0 3.6-1 7.8-1 7.8s-11.4 46.2-12.8 48.1c-1.3 1.8-2-.1-2-.1z"}),C.createElement("path",{className:"st5",d:"M205.8 215.2c-.9 1.8-3.1 2.5-5 1.7-1.8-.8-2.7-2.8-2.1-4.6-2.7.9-4.6 3.6-4.2 6.5.4 3.3 3.5 5.6 6.8 5.2 3.3-.4 5.6-3.5 5.2-6.8-.2-.7-.4-1.4-.7-2z"}),C.createElement("path",{className:"st4",d:"M215.7 190.4l-10.1-.9c-.6-.1-3.7-.2-4.3-.1l-1.7.1-11 1.8.7 8.1 9.7 5c.3.2 1 .6 1 .6s3.3 1.8 3.9 1.8l11 1.3c3.5.3 6-4.6 6.4-9.1.3-4.4-2.1-8.3-5.6-8.6zM165.4 156.8c-.3.8-.7 1.6-1.1 2.3 0 0-16.8 28.1-17.8 29.8-1 1.7.6 2.2.6 2.2h22v-33c0-3-2-5-2.7-5.7-.2 1.4-.5 2.9-1 4.4zM129.2 215.3c-1 .2-1.7.4-2 .5-1.7.4-3.4.4-4.9.4-1.7 0-3.5-.3-5.2-1l-1.3 2.2s-2.1 3.1 1.2 4.6c3.3 1.5 45.3 16.5 48.1 17.5 2.8 1 3.9-2.8 3.9-2.8v-31.4c-14.9 3.8-33.5 8.5-39.8 10z"}),C.createElement("g",null,C.createElement("path",{className:"st4",d:"M116.9 222c-3.3-1.5-1.2-4.6-1.2-4.6l1.3-2.2c-.7-.3-1.4-.6-2.1-1l-2.2-1.3c-6.6-4-8.7-12.7-4.7-19.4l30.1-50.3c2.5-4.2 6.8-6.6 11.3-6.8l-10.9-6.5-21.1 35.3c-4 6.6-12.5 8.8-19.2 4.8l-1.9-1.1-23.6 39.6c-4 6.6-1.8 15.2 4.8 19.2L98.2 240c6.6 4 15.2 1.8 19.2-4.8l6.3-10.5c-3.5-1.4-6-2.4-6.8-2.7z"})),C.createElement("g",null,C.createElement("path",{className:"st4",d:"M215.7 190.4c.4 0 .9.1 1.3.3l1.1-2.4c.9-1.9 0-4.2-2-5.1-1.9-.9-4.2-.1-5.1 1.9l-2.2 4.7 6.9.6zM203.9 206.9c-.3 0-1.4-.6-2.3-1l-2.7 5.9c-.9 1.9 0 4.2 2 5.1 2 .9 4.2.1 5.1-1.8l3.4-7.4-5.5-.8z"})))),k||(k=C.createElement("g",null,C.createElement("path",{className:"st0",d:"M266.5 423.5l-10.3-11s-2.1-2.1-3.9-.4c-1.3 1.2-9.7 9.1-12.4 11.5-1.6 1.3-3.4-.3-3.4-.3l-10.2-10.9s-1.7-1.6-3.3.1"}),C.createElement("path",{className:"st0",d:"M183.1 423.4l10.3-11s2.1-2.1 3.9-.4c1.3 1.2 9.7 9.1 12.4 11.5 1.6 1.3 3.4-.3 3.4-.3l10.2-10.9s1.4-1.5 3.3.3"})))),H=(s.p,R().with("error-page")),Q=e=>{let{pageTitle:t,errorText:s,errorDescription:n,withHomeLink:r,Image:a=U}=e;const{brand:i}=(0,D.lk)(),o=(0,z.r)((e=>w.Ru.text({id:e===F.m.YANGO?"yango-feedback-form-url":"feedback-form-url",keyset:"common"}))(i)),l=o.startsWith("mailto:");return C.createElement(C.Fragment,null,C.createElement(_.m,null,C.createElement("title",null,t),C.createElement("meta",{name:"title",content:t})),C.createElement(P.A,{type:"wide"},C.createElement(P.A.Main,null,C.createElement("article",{className:H()},C.createElement(a,{className:H("image"),width:500,height:500}),C.createElement(M.D,{className:H("title"),level:1},s),n&&C.createElement("p",{className:H("description")},n),C.createElement("div",{className:H("feedback")},C.createElement(L.$,Object.assign({type:"link",url:o},!l&&{target:"_blank"},{rel:"noopener noreferrer",size:"l",view:"lyceum",theme:"action"}),w.Ru.text({id:"feedback"})),C.createElement("p",{className:H("feedback-text")},w.Ru.text({id:"feedback-prompt"}))),r&&C.createElement(x.N,{href:"/"},w.Ru.text({id:"home-link"}))))))};var V,G,B,W,J,K,Z,Y,q,$,X,ee,te,se,ne,re,ae,ie,oe,le,ce,ue,de,me,pe,he,Ee,ge,ye,fe,Se,be,ve,Ne,Ie,Te,ke,Ce;function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},we.apply(null,arguments)}const Ae=e=>C.createElement("svg",we({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"},e),V||(V=C.createElement("style",null,"\n    .st0,.st1,.st2,.st3,.st4{fill:#fff;stroke:#13110c;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st1,.st2,.st3,.st4{fill:#ffd33c;stroke:#000}.st2,.st3,.st4{fill:none;stroke:#13110c}.st3,.st4{fill:#ffd33c}.st4{fill:none;stroke:#000}.st5{fill:#ffd33c}.st6{fill:#13110c}.st7{fill:#fff;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\n  ")),G||(G=C.createElement("path",{className:"st0",d:"M214.2 269.3c-15.7-2-44.4-8.8-44.4-8.8s-5.2 1.5-10.8 2.5v150h99.5l-4.7-108.4c-16.2-8-29.9-20.3-39.6-35.3zM159 95v154.1c5.5 2.3 10.8 4.7 10.8 4.7s18.3-3.7 33.7-7c-3.3-9.8-5-20.3-5-31.2v-2.9c9 0 16.4-7.3 16.4-16.4 0-6.9-4.2-12.7-10.2-15.2 14-37.8 50.5-64.7 93.3-64.7 4.5 0 8.9.3 13.2.9V95H159z"})),B||(B=C.createElement("path",{className:"st1",d:"M264.8 230.4c-.1.4-.3.9-.4 1.3.1-.4.3-.8.4-1.3zM253.5 250.2zM259.8 241.4l-.1.1.1-.1zM254.7 248.7s0 .1 0 0c0 .1 0 0 0 0zM252.3 251.6c0 .1 0 .1 0 0 0 .1 0 .1 0 0zM251 253.1c-8.4 9.2-19.4 16.8-30 16.8-1.7 0-4.1-.2-6.8-.6 9.7 15 23.4 27.3 39.6 35.3l-1.8-41.9c-.7-1.7-1-5.1-1-9.6zM297.8 116.4c-42.8 0-79.2 26.9-93.3 64.7 6 2.4 10.2 8.3 10.2 15.2 0 9-7.3 16.3-16.4 16.4v2.9c0 10.9 1.8 21.4 5 31.2 10.6-2.3 19.8-4.4 20.4-5 3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9l46.3-.2v-59.7c-4.3-.5-8.7-.9-13.2-.9zM263.7 233.7c-.1.3-.2.5-.3.8 0-.2.2-.5.3-.8zM263 235.2c-.1.3-.2.5-.3.8.1-.3.2-.5.3-.8zM264.2 232.2l-.3.9.3-.9zM262.3 236.7c-.1.2-.2.5-.3.7.1-.2.2-.4.3-.7zM260.7 239.8c-.1.2-.2.3-.3.5.1-.2.2-.3.3-.5zM261.6 238.2l-.3.6c0-.1.2-.3.3-.6z"})),W||(W=C.createElement("path",{className:"st0",d:"M347 116h95v89h-95z"})),J||(J=C.createElement("path",{className:"st2",d:"M355 132h79v34h-79z"})),K||(K=C.createElement("path",{className:"st3",d:"M355 172.8h20V196h-20zM385 172.8h20V196h-20zM414 172.8h20V196h-20z"})),Z||(Z=C.createElement("path",{className:"st4",d:"M355 124h79M364.8 413H456M274.9 413h74.4M117.8 413h140.7M54 413h22.6"})),Y||(Y=C.createElement("path",{className:"st5",d:"M254.2 315c-7.7-5.7-17.2-9.1-27.6-9.1-25.5 0-46.1 20.6-46.1 46s20.6 46 46.1 46c11.8 0 22.5-4.4 30.7-11.6l-3.1-71.3z"})),q||(q=C.createElement("path",{d:"M254.7 314.1c-20.1-14.5-48.6-11.4-64.5 7.9-14.3 17.3-14.1 43 .4 60.2 15.8 18.7 44.4 22 64.1 7.3 1.7-1.3 3.2-2.1 3.5-4.1.3-1.8-.2-4-.2-5.8-.3-7.4-.6-14.7-1-22.1-.6-14.2-1.2-28.4-1.8-42.5-.1-1.3-2.1-1.3-2 0 1 22.5 1.9 44.9 2.9 67.4 0 1 .4 2.6.2 3.5-.3 1-3.2 2.4-4.4 3.2-3 2-6.2 3.7-9.5 4.9-11.7 4.3-25 3.6-36.1-2.1-20.9-10.7-30.4-36.5-20.9-58.1 11.6-26.5 45.2-34.7 68.4-18 1 .8 2-.9.9-1.7z"})),$||($=C.createElement("path",{className:"st2",d:"M149 273c-5.5 0-10-4.5-10-10.1v-17.8c0-5.6 4.5-10.1 10-10.1M235.2 323c0 2.8-2.3 5.1-5.1 5.1s-5.1-2.3-5.1-5.1 2.3-5.1 5.1-5.1 5.1 2.3 5.1 5.1zM226.7 382.8c0 1.6-1.3 2.9-3 2.9-1.6 0-3-1.3-3-2.9s1.3-2.9 3-2.9c1.6 0 3 1.3 3 2.9zM224.2 344c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9 7.1.1 12.9 5.8 12.9 12.9zM254.8 354.6c0 4.3-3.5 7.8-7.7 7.8-4.3 0-7.7-3.5-7.7-7.8s3.5-7.8 7.7-7.8 7.7 3.5 7.7 7.8zM184.1 369.6c4.2-2.7 12.9 5.7 8.2 12.1"})),X||(X=C.createElement("path",{className:"st5",d:"M283.7 107.1c0 3-2.4 5.5-5.5 5.5-3 0-5.5-2.4-5.5-5.5 0-3 2.4-5.5 5.5-5.5 3 0 5.5 2.5 5.5 5.5z"})),ee||(ee=C.createElement("path",{d:"M282.7 107.1c-.3 5.7-8.9 5.8-8.9 0s8.6-5.7 8.9 0c.1 1.3 2.1 1.3 2 0-.2-3.5-2.8-6.5-6.5-6.5-3.5 0-6.5 2.9-6.5 6.5 0 3.4 2.8 6.3 6.2 6.4 3.8.2 6.6-2.8 6.8-6.4.1-1.3-1.9-1.3-2 0z"})),te||(te=C.createElement("path",{className:"st6",d:"M196.7 119.9c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4zM187.8 131.8l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM188.6 127.7l-7.5-5.2c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l7.4 5.2c.2-.7.6-1.3 1.2-1.7zM199.5 135.3l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.2-1.4z"})),se||(se=C.createElement("path",{className:"st1",d:"M304.5 279H347v-47h-35.2c-4.1 19.4-8.2 37.3-9.7 40.7l2.4 6.3z"})),ne||(ne=C.createElement("path",{className:"st6",d:"M177.2 302.6l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM186.1 290.7c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4z"})),re||(re=C.createElement("g",null,C.createElement("path",{className:"st6",d:"M188.8 306.1l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.4-.5.3-1.1-.2-1.4zM177.9 298.5l-7.5-5.2c-.5-.3-1.1-.2-1.4.3s-.2 1.1.3 1.4l7.4 5.2c.2-.7.7-1.3 1.2-1.7z"}))),ae||(ae=C.createElement("g",null,C.createElement("path",{className:"st6",d:"M239.7 165.8l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM246.6 157.1c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),C.createElement("g",null,C.createElement("path",{className:"st6",d:"M240.5 161.8l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM248.2 167.2l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.6.2-1.2-.3-1.5z"})))),ie||(ie=C.createElement("g",null,C.createElement("path",{className:"st6",d:"M175.2 397.1l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM182.1 388.4c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),C.createElement("g",null,C.createElement("path",{className:"st6",d:"M176 393.1l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM183.7 398.4l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.3-1.5z"})))),oe||(oe=C.createElement("g",null,C.createElement("path",{className:"st6",d:"M178.1 233.5l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.2-1.1-.6-1.6-1.1zM185 224.7c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),C.createElement("g",null,C.createElement("path",{className:"st6",d:"M178.9 229.4l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.3 1.2-1.7zM186.7 234.8l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.2-.6.1-1.2-.3-1.5z"})))),le||(le=C.createElement("path",{className:"st0",d:"M112.6 286.1l16.9 12.7-29.1 25.5zM54.3 322.5l12.8-16.9 25.4 29.1z"})),ce||(ce=C.createElement("path",{className:"st2",d:"M100.7 324.3L94 336.2V356"})),ue||(ue=C.createElement("path",{className:"st0",d:"M92.5 298.8l-17.3-25.5 17.8-5.2z"})),de||(de=C.createElement("g",null,C.createElement("path",{className:"st7",d:"M308.6 246.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM309 244.9c.1-.2.1-.5.2-.7-.1.2-.2.5-.2.7zM308.3 248.1c0-.1.1-.3.1-.4-.1.1-.1.3-.1.4zM309.4 243.1c.1-.2.1-.5.2-.7-.1.3-.2.5-.2.7zM306.9 254c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM306.6 255.5c0-.2.1-.4.1-.5 0 .2-.1.4-.1.5zM309.8 241.4c.1-.3.1-.5.2-.8-.1.3-.2.5-.2.8zM307.6 251.2v-.2.2zM307.9 249.8c0-.2.1-.3.1-.5 0 .2-.1.3-.1.5zM310.1 239.7c.1-.3.1-.6.2-.8-.1.2-.1.5-.2.8zM302 272.7c.1-.1.1-.2.2-.4-.1.2-.1.3-.2.4zM302.3 272.2c0-.1.1-.2.1-.3-.1.1-.1.2-.1.3zM304.5 279l-2.5-6.3 5 12.7c5.2-1.5 14.3-4.2 21.1-6.5h-23.6zM310.5 237.8c.1-.2.1-.5.2-.7-.1.2-.1.4-.2.7zM310.9 236c.1-.3.1-.5.2-.8-.1.3-.1.5-.2.8zM311.3 234.1c.1-.3.1-.5.2-.8-.1.3-.1.6-.2.8zM311.8 232h20c-3.9-23.5-8.5-48.6-9.3-52.8v.4c-1.5 7.7-6.2 31.2-10.8 52.8 0-.2 0-.3.1-.4zM303.3 268.8c0-.2.1-.3.1-.5 0 .2 0 .4-.1.5zM303.1 269.7c0-.1.1-.3.1-.4 0 .1-.1.2-.1.4zM303.6 267.9c0-.2.1-.3.1-.5 0 .2-.1.4-.1.5zM302.4 271.7c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM303.8 267c0-.2.1-.3.1-.5 0 .1 0 .3-.1.5zM302.9 270.4c0-.1.1-.3.1-.4-.1.2-.1.3-.1.4zM302.7 271.1c0-.1.1-.2.1-.4-.1.2-.1.3-.1.4zM306.3 257c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM304.1 265.9c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM305.9 258.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM305.3 261.2c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM305.6 259.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.4 264.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.7 263.7c.1-.2.1-.4.2-.6-.1.2-.2.4-.2.6zM305 262.5c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6z"}))),me||(me=C.createElement("path",{className:"st0",d:"M92.5 298.8l1.2 37.4"})),pe||(pe=C.createElement("path",{className:"st7",d:"M320.2 254.5c0 2.8-2.3 5-5 5s-5-2.3-5-5c0-2.8 2.3-5 5-5s5 2.2 5 5zM295.4 167.4c-.2-.2-.5-.4-.6-.9-.4-1.4-.6-1.9-.6-1.9s-.4-1.1.5-1.5c.8-.4 1-.6 1-.6s.9-.8 1-1.8c0-1 .2-5.2.3-6.2 0-1-1.4-.9-1.4-.9s-1.5.6-2.7 1c-1.2.4-1.4-.7-1.4-.7l-1.2-4.8s-.1-1-2-1.5c-1.8-.4-8.6-1.9-8.6-1.9h-.4l-6.5 13.1s-.8 1.6.8 2c1.6.4 2.6.7 2.6.7s.7.2.7.9-.2 3-.4 5.4c-.1 2.4 3.1 2.9 3.1 2.9s1.8.1 2.8.1c1 0 1.1 1.1 1.1 1.1l.7 5h12.2l-1-9.2v-.3z"})),he||(he=C.createElement("path",{d:"M282.6 153.6c-.3.3-.3.8 0 1.1.3.3.8.3 1.1 0 .3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10})),Ee||(Ee=C.createElement("path",{className:"st7",d:"M252.8 442h-11.1s-1.7 3.2 0 3.8c1.7.6 19.1 7.2 21.9 8 2.8.8 5.4-1.1 5.4-1.1l-1-10.7h-15.2zM355.6 430h-11.8s-1.8 3.2 0 3.8c1.8.6 20.5 7.2 23.4 8 3 .8 5.8-1.1 5.8-1.1l-1.1-10.7h-16.3z"})),ge||(ge=C.createElement("g",null,C.createElement("path",{className:"st7",d:"M346.4 369.4c-5-11.8-11-11.8-11-11.8L302 272.7c-.1.1-.1.2-.1.3-3.3 5.9-44.5-2.7-49.6-9.6-.1-.2-.3-.4-.4-.7l7.8 179.3h8.6s8.4-36.4 13-58c4.6-21.5-4.1-29.6-4.1-29.6l6.7-34.5L361.3 430h10.6s-20.5-48.8-25.5-60.6z"}))),ye||(ye=C.createElement("path",{className:"st0",d:"M283.8 319.9l-6.7 34.5s8.7 8.1 4.1 29.6c-1.8 8.4-4.1 19.1-6.4 29h36.4v-54l-27.4-39.1z"})),fe||(fe=C.createElement("path",{className:"st7",d:"M289.5 293.4l-5.7 26.7"})),Se||(Se=C.createElement("path",{className:"st1",d:"M296.4 167.6l3.3-.4s2.2-1.7 2.4-4.3c.1-1.3.8-23.3.2-24.9-.5-1.6-2.4-1.8-2.4-1.8s-22.2-.7-24.1-.8c-3.4-.2-5.7.1-5.9 1.7-.2 1.6 1.1 4.7 2.5 7.2.9 1.6 7.1 1.4 7.1 1.4s6.8 1.4 8.6 1.9c1.8.4 2 1.5 2 1.5l1.2 4.8s.2 1.2 1.4.7c1.2-.4 2.7-1 2.7-1s1.4-.1 1.4.9-.2 5.2-.3 6.2c0 1-1 1.8-1 1.8s-.2.2-1 .6c-.8.4-.5 1.5-.5 1.5s.2.5.6 1.9c.6 1.4 1.8 1.1 1.8 1.1z"})),be||(be=C.createElement("path",{className:"st0",d:"M214.8 196.3c0 9-7.3 16.4-16.4 16.4-9.1 0-16.4-7.3-16.4-16.4 0-9 7.3-16.4 16.4-16.4 9 .1 16.4 7.4 16.4 16.4z"})),ve||(ve=C.createElement("path",{className:"st7",d:"M264.8 177.2s5.2 34.3 0 53.2c-1.8 6.5-6.9 15.2-13.8 22.7 0 5.3.4 9.1 1.3 10.3 5 6.9 46.2 15.5 49.6 9.6 3-5.3 17.7-78.7 20.6-93.5.3-1.3-.8-2.6-2.1-2.6l-55.6.3z"})),Ne||(Ne=C.createElement("path",{className:"st7",d:"M169.8 260.4v-6.6s52.7-10.6 54-12c3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9s5.2 34.3 0 53.2c-4 14.6-24.6 39.5-43.8 39.4-11.6 0-51.2-9.4-51.2-9.4z"})),Ie||(Ie=C.createElement("g",null,C.createElement("path",{className:"st0",d:"M159 249.1V95h-10v150.5c2.5.6 6.3 2.1 10 3.6zM149 263.8V413h10V262.9c-3.6.7-7.4 1.2-10 .9z"}))),Te||(Te=C.createElement("g",null,C.createElement("path",{d:"M169.8 253.8s-20.7-9.6-23.3-8.6c-2.6 1-3.8 14.9 0 17.9 3.8 2.9 23.3-2.6 23.3-2.6v-6.7z",fill:"#fff"}),C.createElement("path",{d:"M170.3 253c-5.7-2.6-11.5-5.2-17.4-7.3-1.7-.6-5-2.2-6.9-1.3-2.1 1-2.5 4.7-2.7 6.6-.7 6-.4 13.7 7 13.9 6.6.2 13.5-1.7 19.8-3.5.4-.1.7-.5.7-1v-6.6c0-1.3-2-1.3-2 0v3.8c0 .6-.2 1.4 0 2 .3 1.1-.2.5.7-.1-1.5 1-4.3 1.1-6 1.5-3.6.8-7.4 1.6-11.1 1.8-4.6.3-6.6-.9-7.2-5.6-.3-2.3-.8-9.4 1.5-10.8 1.6-1 6.1 1.4 7.7 2 5 1.9 10 4.1 14.9 6.3 1.1.5 2.1-1.2 1-1.7z"}))),ke||(ke=C.createElement("path",{className:"st7",d:"M311 284.3v11.2l-4-10z"})),Ce||(Ce=C.createElement("path",{className:"st0",d:"M68.7 357l8.9 70h36.8l8.9-70z"})));var Oe,Re,_e,Le,Me,Pe,xe,De,Fe,ze,je,Ue,He,Qe,Ve,Ge,Be,We,Je,Ke,Ze,Ye;function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},qe.apply(null,arguments)}s.p;const $e=e=>C.createElement("svg",qe({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"},e),Oe||(Oe=C.createElement("style",null,"\n    .st0{fill:#ffd33c;stroke:#000;stroke-miterlimit:10}.st0,.st1,.st2,.st4{stroke-width:2;stroke-linecap:round;stroke-linejoin:round}.st1{stroke:#000;stroke-miterlimit:10;fill:#fff}.st2,.st4{fill:none}.st2{stroke-miterlimit:10;stroke:#000}.st4{stroke:#13110c}.st5{fill:#13110c}\n  ")),Re||(Re=C.createElement("path",{className:"st0",d:"M179 402h37.6c1.5 0 1.3-1.4 1.3-1.4s.1-4.5 0-6.2c-.1-1.6-1.1-1.5-1.1-1.5H179v9.1zM75 327.4c0 .9-.1 71.3 0 72.9.1 1.6 1.5 1.7 1.5 1.7h101.1c1.5 0 1.3-1.9 1.3-1.9s.1-69.6 0-71.9c-.1-2.3-1.1-2.1-1.1-2.1H76.5c0-.1-1.5-.1-1.5 1.3z"})),_e||(_e=C.createElement("path",{className:"st1",d:"M136 351c0 5-4 9-9 9s-9-4-9-9 4-9 9-9 9 4 9 9zM436 410H56c-2.2 0-4-1.8-4-4s1.8-4 4-4h380c2.2 0 4 1.8 4 4s-1.8 4-4 4z"})),Le||(Le=C.createElement("path",{className:"st0",d:"M341 100H83c-2.2 0-4 1.8-4 4v89.7c0 36.7 0 70.9.1 72.5.3 3.6 3.7 3.8 3.7 3.8h81.3c-11.6-23.9-28.5-59.4-36.1-74.9-.3-.7.2-1.4.9-1.4h12.9c13.9 15.5 52.2 58.4 54.4 60.8 2.7 3 10.4 2.5 10.4 2.5h138.3v-18.9c0-.4.1-1.7.1-1.7s-1.2.6-1.5.8c-3 1.6-9.6 5.2-9.7 5.2l-2.6-5.1s-.8-1.9.6-2.6c1.3-.7 5.8-2.9 5.8-2.9s1-1.6.4-3-.9-1.9-.9-1.9-.8-1.4-2.8-1.4l-2-.1s-2 .6-3.5-3.2c-1.2-3-4.1-8.9-5-11.2-.9-1.6 1.9-3.2 1.9-3.2l9.4-3.3s4.7-1.4 9.9.4V104c0-2.2-1.8-4-4-4z"})),Me||(Me=C.createElement("path",{className:"st1",d:"M334 107H90c-2.2 0-4 1.8-4 4v16.7h.1c-.1 39.1-.2 129.3 0 131.9.3 3.2 3.5 3.5 3.5 3.5h71.1c-13.3-27.6-31.2-65-35.7-73.8-1.6-3.2 1.4-3.2 1.4-3.2h5.6c2.9 0 4.8 2.1 4.8 2.1s56.7 63.4 59.4 66.4c2.7 3 10.4 2.5 10.4 2.5h131.3v-16.8l-4.1 2.2-2.6-5.1s-.8-1.9.6-2.6c1.3-.7 5.8-2.9 5.8-2.9s.2-.3.3-.6v-2.5c-.5-1.2-.8-1.7-.8-1.7s-.8-1.4-2.8-1.4l-2-.1s-2 .6-3.5-3.2c-1.2-3-4.1-8.9-5-11.2-.1-.1-.1-.2-.1-.4l-7.8 9.2-17.5-33.1s-.9-2 .4-4 4.5-6.8 4.5-6.8.9-1 2.4.2c1.3 1 23.9 18.7 32.2 25.2V111c.1-2.2-1.7-4-3.9-4z"})),Pe||(Pe=C.createElement("path",{className:"st1",d:"M130 186h2.1c2.9 0 4.8 2.1 4.8 2.1s28.9 32.3 46.4 51.9H210V140h-78s-2 0-1.9 1.8c0 .9-.1 28.4-.1 44.2zM333.8 242.4l-2.6-5.1s-.8-1.9.6-2.6c1.3-.7 5.8-2.9 5.8-2.9s1-1.6.4-3-.9-1.9-.9-1.9-.8-1.4-2.8-1.4l-2-.1s-2 .6-3.5-3.2c-1.2-3-4.1-8.9-5-11.2-.1-.1-.1-.2-.1-.4l-12.8 15.1s-1.4 1.7.2 2.7c1.7 1 2.8 1.6 2.8 1.6s.7.5.5 1.3c-.3.8-1.2 3.6-2.2 6.4-.9 2.8 2.6 4.4 2.6 4.4s2 .7 3.2 1c1.1.3.9 1.7.9 1.7l-1.6 12.3h14.5l2-13.8 1.2-1.4-1.2.5zM133.6 251.5c0 1.9-1.6 3.5-3.5 3.5h-22.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5h22.5c1.9 0 3.5 1.6 3.5 3.5z"})),xe||(xe=C.createElement("path",{className:"st2",d:"M130 186h-3.5c-3.6-3.6-8.2-9.5-8.2-16.6 0-9.1 4.9-16.8 11.9-19.2L130 186z"})),De||(De=C.createElement("path",{d:"M322.4 220.1c-.4.3-.6.8-.3 1.3.3.4.8.6 1.3.3.4-.3.6-.9.3-1.3s-.9-.6-1.3-.3z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10})),Fe||(Fe=C.createElement("path",{className:"st2",d:"M142 153h57M142 165h57M142 178h57"})),ze||(ze=C.createElement("path",{className:"st1",d:"M292 142.8c-.1-3-1.5-2.8-1.5-2.8h-62.8l-8.8 19.3c4.2 2.9 5.3 8.6 2.6 13l-2.6 4.2 6.5 12.2-5.2 15.2 5.1 11.6-8.5 8.5 7.8 8-14.6 8h80.2c1.9 0 1.8-2.6 1.8-2.6s.1-91.6 0-94.6z"})),je||(je=C.createElement("path",{className:"st2",d:"M232 200h48M232 212h48M232 224h48M232 165h48M232 153h48M232 177h48M232 189h48M298.3 183.6l-6.3-5.3v-25l11.4 22.5z"})),Ue||(Ue=C.createElement("path",{className:"st0",d:"M425.7 285.5c1.9-3.9 3.1-8.2 3.1-12.8 0-13.1-8.8-24.1-20.9-27.5 2.2-4.7 3.3-10.1 2.8-15.7-1.2-15.3-13.7-27.6-29.1-28.6-18.2-1.2-33.4 13.2-33.4 31.2 0 6.1 1.8 11.8 4.8 16.6V278c-6.2 2.9-10.6 9.1-10.6 16.4 0 7.1 4.1 13.3 10.2 16.2-.9 3.5-1.3 7.2-1.3 11 0 25.4 20.6 46 46 46s46-20.6 46-46c0-14.6-6.9-27.7-17.6-36.1z"})),He||(He=C.createElement("path",{className:"st1",d:"M210 240v-99.6l20.4-6.3-11.5 25.3c4.2 2.9 5.3 8.6 2.6 13l-2.6 4.2 6.5 12.2-5.2 15.2 5.1 11.6-8.5 8.5 7.8 8L210 240z"})),Qe||(Qe=C.createElement("path",{className:"st0",d:"M156.9 255H97.1s-1.1 0-1 .1c0 .1-.1 7.5 0 7.7.1.2 1 .2 1 .2h63.7c-1.3-2.6-2.6-5.3-3.9-8z"})),Ve||(Ve=C.createElement("path",{className:"st1",d:"M351.3 321.7c0-3.8.5-7.5 1.3-11-6-2.9-10.2-9.1-10.2-16.2 0-7.3 4.3-13.6 10.6-16.4v-21H206.6s-7.7.5-10.4-2.5-59.4-66.4-59.4-66.4-1.9-2.1-4.8-2.1h-5.6s-3 0-1.4 3.2c6.4 12.5 40.5 84.4 49 101.1 9.3 18.3 33.9 18.4 33.9 18.4s45.7.6 52.1.2c6.4-.4 4.3 2.9 2.8 6.6-1.5 3.7-34.5 86.5-29.1 86.5h131.1v-47.6c-8.3-8.4-13.5-20-13.5-32.8z"})),Ge||(Ge=C.createElement("path",{className:"st0",d:"M348.2 232.1c0-7.1 2.4-13.6 6.4-18.9-6.7-12.5-19.5-8.8-19.5-8.8l-9.4 3.3s-2.8 1.6-1.9 3.2c.9 2.3 3.8 8.2 5 11.2 1.5 3.7 3.5 3.2 3.5 3.2l2 .1c2 .1 2.8 1.4 2.8 1.4s.2.6.9 1.9c.6 1.4-.4 3-.4 3s-4.5 2.2-5.8 2.9c-1.3.7-.6 2.6-.6 2.6l2.6 5.1 14.5-7.8c-.1-.7-.1-1.6-.1-2.4z"})),Be||(Be=C.createElement("path",{className:"st1",d:"M324 211.4c-.1-.2-.2-.4-.2-.5.1.2.2.3.2.5zM325.1 213.8c-.1-.3-.2-.5-.4-.8.1.3.3.5.4.8zM324.3 212.1c-.1-.2-.1-.3-.2-.5.1.2.1.3.2.5zM324.7 212.9c-.1-.2-.2-.4-.2-.5 0 .1.1.3.2.5z"})),We||(We=C.createElement("path",{className:"st1",d:"M305.7 176.1c-1.6-1.2-2.4-.2-2.4-.2s-3.2 4.8-4.5 6.8c-1.3 2-.4 4-.4 4l17.5 33.1 7.8-9.2c-.4-1.5 2-2.8 2-2.8l9.4-3.3s2.3-.7 5.4-.5l.5-.4s-33.7-26.3-35.3-27.5z"})),Je||(Je=C.createElement("g",null,C.createElement("path",{className:"st4",d:"M366.8 83.2s0-15.3 14.6-15.3c10.2 0 15.9 5.7 15.9 15.2 0 11.8-15.3 16.9-15.3 27"}),C.createElement("path",{className:"st5",d:"M381.9 116.7c1.3 0 2.4 1.1 2.4 2.4 0 1.4-1.1 2.4-2.4 2.4-1.4 0-2.4-1.1-2.4-2.4-.1-1.3 1-2.4 2.4-2.4z"}))),Ke||(Ke=C.createElement("g",null,C.createElement("path",{className:"st4",d:"M404 117.5s0-11.9 11.4-11.9c7.9 0 12.4 4.5 12.4 11.9 0 9.2-11.9 13.1-11.9 21.1"}))),Ze||(Ze=C.createElement("path",{className:"st5",d:"M415.9 144.2c1.4 0 2.4 1.1 2.4 2.4 0 1.4-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4 0-1.4 1.1-2.4 2.4-2.4z"})),Ye||(Ye=C.createElement("path",{className:"st1",d:"M331.8 257l2-14.6 14.5-7.8s1.5 8.5 4.7 14.2v8.3h-21.2z"})));var Xe,et,tt,st,nt,rt,at,it,ot,lt,ct,ut,dt,mt,pt,ht,Et,gt,yt,ft,St,bt,vt,Nt,It,Tt,kt,Ct,wt,At,Ot,Rt,_t,Lt,Mt,Pt,xt,Dt,Ft,zt,jt,Ut,Ht,Qt;function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Vt.apply(null,arguments)}s.p;const Gt=e=>C.createElement("svg",Vt({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"},e),Xe||(Xe=C.createElement("style",null,"\n    .st0{fill:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st0,.st1,.st3{stroke:#000;stroke-width:2}.st1{stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;fill:none}.st3{fill:#ffd33c}.st3,.st4,.st5{stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st4{fill:#fff;stroke-width:2;stroke:#13110c}.st5{stroke:#000}.st7{fill:#13110c}\n  ")),et||(et=C.createElement("path",{className:"st0",d:"M270 401.4c0 .8-.1 31.4 0 33 .1 1.5 1.4 1.7 1.4 1.7h93.3c1.3 0 1.2-1.9 1.2-1.9s.1-29.8 0-32c-.1-2.3-1-2.1-1-2.1h-93.6c.1-.1-1.3-.1-1.3 1.3zM118.1 401.5c0-1.5 1.3-1.5 1.3-1.5H38c-2.2 0-4 1.8-4 4s1.8 4 4 4h80.1v-6.5z"})),tt||(tt=C.createElement("path",{className:"st0",d:"M270 401.4c0-1.4 1.4-1.4 1.4-1.4h-65.2c.2 0 .8.3.9 2.3v5.7h63c-.1-3.7 0-6.4-.1-6.6z"})),st||(st=C.createElement("path",{className:"st1",d:"M385.5 255H457M40 255h65.1M404.9 314H437"})),nt||(nt=C.createElement("path",{className:"st0",d:"M365 400s1-.2 1 2.1c.1 2.3 0 32 0 32s.1 1.9-1.2 1.9h-80.7v5.9c.1 1.9 1.4 2 1.4 2h91.2c1.4 0 1.3-2.3 1.3-2.3s.1-36.4 0-39.1c-.1-2.8-1.1-2.5-1.1-2.5H365"})),rt||(rt=C.createElement("path",{className:"st1",d:"M278 408h77M278 418h77M278 427h77"})),at||(at=C.createElement("path",{className:"st3",d:"M145.3 112h-12.6c-4.8 0-8.7 3.9-8.7 8.7V140h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"})),it||(it=C.createElement("path",{className:"st4",d:"M132 101.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"})),ot||(ot=C.createElement("path",{className:"st1",d:"M95.2 314H50M156.3 197H50M444 197H338.4M327 140H108M198 141v16"})),lt||(lt=C.createElement("path",{className:"st0",d:"M76.3 286H63.7c-4.8 0-8.7 3.9-8.7 8.7V314h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"})),ct||(ct=C.createElement("path",{className:"st4",d:"M63 275.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c1.2-.6 2.2-1.7 2.7-3.1.2-.5.3-1.1.3-1.7v-7.4c0-.8-.2-1.6-.5-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.2-4.8 3l-.1.3c-.4.7-.5 1.5-.5 2.3v3.2H63zM400 275.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c1.2-.6 2.2-1.7 2.7-3.1.2-.5.3-1.1.3-1.7v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"})),ut||(ut=C.createElement("path",{className:"st0",d:"M428.3 227h-12.6c-4.8 0-8.7 3.9-8.7 8.7V255h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"})),dt||(dt=C.createElement("path",{className:"st4",d:"M415 216.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.7-.6-2.4l-.1-.3c-.9-1.8-2.7-2.9-4.8-2.9h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3h-.1z"})),mt||(mt=C.createElement("path",{className:"st0",d:"M257.3 112h-12.6c-4.8 0-8.7 3.9-8.7 8.7V140h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"})),pt||(pt=C.createElement("path",{className:"st4",d:"M245 101.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"})),ht||(ht=C.createElement("path",{className:"st3",d:"M367.3 169h-12.6c-4.8 0-8.7 3.9-8.7 8.7V197h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"})),Et||(Et=C.createElement("path",{className:"st4",d:"M355 158.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.5-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.2-4.8 3l-.1.3c-.4.7-.5 1.5-.5 2.4v3.1h-.3z"})),gt||(gt=C.createElement("path",{className:"st0",d:"M83.3 169H70.7c-4.8 0-8.7 3.9-8.7 8.7V197h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"})),yt||(yt=C.createElement("path",{className:"st4",d:"M70 158.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.6-.3 1.2-.8 1.7-1.3.9-1 1.3-2.3 1.3-3.6V155.7c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.2-4.8 3l-.1.3c-.4.7-.6 1.5-.6 2.4v3H70z"})),ft||(ft=C.createElement("path",{className:"st0",d:"M420.3 169h-12.6c-4.8 0-8.7 3.9-8.7 8.7V197h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"})),St||(St=C.createElement("path",{className:"st4",d:"M141 158.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"})),bt||(bt=C.createElement("path",{className:"st1",d:"M103 198v15M391 198v15"})),vt||(vt=C.createElement("path",{className:"st4",d:"M407 158.7v4.3c0 .6.1 1.2.3 1.7.5 1.3 1.4 2.4 2.7 3l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c1-.5 1.8-1.3 2.4-2.3.4-.8.6-1.7.6-2.5V155.6c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-2.9-4.8-2.9h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3h-.1z"})),Nt||(Nt=C.createElement("path",{className:"st0",d:"M327.7 229.1l.3-.6c-.4-.2-.7-.6-.9-1.3-.5-2-.8-2.7-.8-2.7s-.5-1.6.6-2.1c1.2-.5 1.4-.8 1.4-.8s1.3-1.2 1.4-2.6c.1-1.4.3-7.3.4-8.7.1-1.4-1.9-1.3-1.9-1.3s-2.1.8-3.8 1.4c-1.6.6-2-1.1-2-1.1l-1.8-6.8s-.2-1.4-2.8-2.1c-2.6-.6-12.1-2.7-12.1-2.7h-.6l-9.2 18.5s-1.1 2.3 1.1 2.8c2.2.6 3.7 1 3.7 1s1 .3.9 1.3c-.1 1-.3 4.3-.5 7.7-.2 3.4 4.3 4.1 4.3 4.1s2.6.2 4 .2 1.6 1.6 1.6 1.6l1.1 7.9H302c1.5 8.6 8.6 15.1 17.1 15.1 8.6 0 15.7-6.5 17.1-15.1h-7l-1.5-13.7z"})),It||(It=C.createElement("path",{className:"st5",d:"M309.9 209c-.4.4-.4 1.1 0 1.5.4.4 1.1.4 1.6-.1.4-.4.4-1.1 0-1.5-.5-.4-1.2-.3-1.6.1z"})),Tt||(Tt=C.createElement("path",{d:"M307.8 205.6c2.9-.5 5.7-1 8.6-1.6 1.3-.2.7-2.2-.5-1.9-2.9.5-5.7 1-8.6 1.6-1.3.2-.8 2.1.5 1.9z"})),kt||(kt=C.createElement("path",{className:"st0",d:"M378 392.6l-.6-.6-60.5-64.3s-1.5-2.1-.3-4.5 3.6-6.2 3.6-6.2 1.6-2.4 5.2-.8c2.3 1 32.1 13.7 52.7 22.5 0-42.1-.3-95.8-.3-95.8h-41.4c-1.5 8.6-8.6 15.1-17.1 15.1-8.6 0-15.7-6.5-17.1-15.1l-34 .4s22.4 5.8 19.4 50.5c-2.6 38.2-18.7 69.1-23.3 77.2l-1.2 2.1 1.2.4c5.7 1.9 30.1 10.1 41.9 15.5 2.2.5 3.2 10.8-1.3 10.9h71.8c1.8 0 1.6-2.3 1.6-2.3s-.3-1.7-.3-5z"})),Ct||(Ct=C.createElement("path",{className:"st3",d:"M325.3 384.6l-19.2-19c-1.2-1.2-3.2-1.2-4.4 0-1.2 1.2-1.2 3.2 0 4.4l16 15.9c2.4-.9 5-1.4 7.6-1.3z"})),wt||(wt=C.createElement("path",{fill:"none",stroke:"#13110c",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M304.8 373.1l4.6-4.2"})),At||(At=C.createElement("path",{className:"st0",d:"M222.9 381.2c-5.2 18 13.4 18.8 13.4 18.8h68.2c4.5 0 3.6-10.4 1.4-10.9-13.5-6.1-43.1-15.9-43.1-15.9s21.4-34.7 24.5-79.3c3-44.6-19.4-50.5-19.4-50.5s-5.1-1-7.1 5.8c-1.9 6.8-35 121.1-37.9 132z"})),Ot||(Ot=C.createElement("path",{d:"M236.6 370.6c8.7-.8 17.7.8 25.9 3.5 1.2.4 1.8-1.5.5-1.9-8.4-2.7-17.6-4.4-26.4-3.6-1.2.1-1.2 2.1 0 2z"})),Rt||(Rt=C.createElement("path",{className:"st0",d:"M404.9 314H421v-19.3c0-4.8-3.9-8.7-8.7-8.7h-12.6c-1.2 0-2.4.3-3.5.7 2.8 8.7 5.8 18.1 8.7 27.3zM317.5 321.4c1.2-2.1 2.6-4.3 2.6-4.3s.9-1.4 3-1.3c0 0 5.5-20.3 4.3-27.7-.8-4.9-4.3-10.6-9.9-12.8-5.5-2.7-4.5 4.3-4.5 4.3v38.7c0 5.1 3.3 4.5 3.3 4.5l1.2-1.4z"})),_t||(_t=C.createElement("path",{className:"st3",d:"M329.4 228.8l7.8-.9s2.4-1 1.9-2.8c-.5-1.8-.4-35.8-1.2-38.1-.8-2.3-3.5-2.5-3.5-2.5s-31.5-.6-34-1.2c-2.5-.5-2.1 2.3-2.1 2.3s1 6.9 3 10.4c1.2 2.2 4.4 2 4.4 2s9.5 2 12.1 2.7c2.6.6 2.8 2.1 2.8 2.1l1.8 6.8s.3 1.7 2 1.1c1.6-.6 3.8-1.4 3.8-1.4s2-.1 1.9 1.3c-.1 1.4-.3 7.3-.4 8.7 0 1.4-1.4 2.6-1.4 2.6s-.2.2-1.4.8c-1.2.5-.6 2.1-.6 2.1s.3.7.8 2.7c.5 1.7 2.3 1.3 2.3 1.3z"})),Lt||(Lt=C.createElement("path",{className:"st0",d:"M341.2 397.2c0-7-6.6-12.6-14.8-12.6h-1.1c-7.8-.5-15.7 5.6-17.8 7.4.7 3.2.1 8-2.9 8H341.3s-.1-.2-.3-.5c.1-.8.2-1.5.2-2.3zM249.3 204.8c-2.7.1-9-1-12.6-.9-4.4.1-4.8-2.2-4.8-2.2l-1-2.1c-1-2.1-2.7-2.3-2.7-2.3h-2.3c-1.6 0-2.9 7.4-3 9-.1 3.4-4.3 7.9-4.3 7.9l-.7.6c1 2.8 1.9 5.1 2.1 5.5.7 1 2.1 2.9 2.1 2.9s2.8 3 5.2 1.2c2.4-1.8 4.7-3.6 5.4-4.2.7-.5 1.4.1 1.4.1s1 .9 2.6 2.3c1.5 1.4 2.7-.6 2.7-.6l9.9-17.2zM164.2 391.7s-.9-.9-1.7-1.3c-2.8-1.5-52.3-16.9-52.3-16.9s-3.3-2.2-.6-8c2.6-5.8 36.4-80.4 36.4-80.4 17-.1 31.6-10.1 38.2-24.4 1 .2 2 .3 3.1.3 8.2 0 14.8-6.6 14.8-14.8 0-2.8-.8-5.5-2.2-7.7 1.5-2 3.9-5.4 6.6-8.9l9.9.1c-.8 3.1-1.9 7.1-1.9 7.1s-.4 4.5.3 5.4c1.4 2-.6 7.7-.6 7.7h.2c-3-.3-3.4 2-3.4 2l-41.4 116.8c-1.4 4-2.3 12.3-2.3 12.9 0 0 .2 4.8 1.3 7.1l-4.4 3"})),Mt||(Mt=C.createElement("path",{className:"st0",d:"M220.7 251.4c-2.3-.5-2.3-.5-5.9-1.3-3.6-.8-4 1.9-4 1.9l-41.4 116.8c-1.4 4-2.3 12.3-2.3 12.9 0 2.6.5 4.9 1.3 7.1 3.5-2.1 8.2-4.2 13-4h1.1c7.8 0 14.1 5.1 14.8 11.6 4.2-3.4 7-8.6 7.5-14.5l17.5-127c-.1.1.7-3-1.6-3.5zM140.4 284.7c.2 0 .4 0 .6.1-.3 0-.4 0-.6-.1zM142.7 284.9h.7c-.2.1-.5.1-.7 0zM137.4 284.2c.3.1.7.1 1 .2-.4 0-.7-.1-1-.2zM134.5 283.6c.6.2 1.2.3 1.7.4-.5-.1-1.1-.3-1.7-.4zM132.3 282.9c.4.1.8.3 1.2.4-.4-.1-.8-.2-1.2-.4z"})),Pt||(Pt=C.createElement("path",{className:"st5",d:"M240.8 208.2c-.1.5-.6.9-1.1.8-.5-.1-.9-.6-.8-1.2.1-.5.6-.9 1.1-.8.6.2.9.7.8 1.2z"})),xt||(xt=C.createElement("path",{className:"st0",d:"M162.6 390.4c-2.8-1.5-52.3-16.9-52.3-16.9s-3.3-2.2-.6-8c2.6-5.8 36.4-80.4 36.4-80.4h-.4c-14 0-26.5-6.7-34.1-17-10.4 28.9-32.1 89.6-35.1 101.7-.9 3.6-7.6 28.6 15.2 29.9 9.3.5 73.4 0 73.4 0v-5.5c-.1-.1.3-2.3-2.5-3.8z"})),Dt||(Dt=C.createElement("path",{className:"st3",d:"M181.3 384.9h1.1c.5 0 1.1 0 1.6.1l-19.4-19.5c-1.2-1.2-3.2-1.2-4.4 0-1.2 1.2-1.2 3.2 0 4.4l15.6 15.6c1.8-.4 3.6-.7 5.5-.6z"})),Ft||(Ft=C.createElement("path",{className:"st0",d:"M214 250s2-5.7.6-7.7c-.7-1-.3-5.4-.3-5.4s2.3-8.4 2.7-10.1c.3-1.8 2.5-1.5 2.5-1.5s9.5.4 13.4.7c3.9.3 1.4 4.6 1.4 4.6l-12.7 20.9-7.6-1.5zM182.4 384.9h-1.1c-7.1-.4-14.3 4.6-17.1 6.8 1 1.2.8 2.4.8 2.4v5.5l32.1.3c.2-.7.2-1.7.2-2.5 0-6.8-6.7-12.5-14.9-12.5zM162 190.4v-12.7c0-4.8-3.9-8.7-8.7-8.7h-12.6c-4.8 0-8.7 3.9-8.7 8.7V197h24.3c1.5-2.5 3.5-4.7 5.7-6.6z"})),zt||(zt=C.createElement("path",{className:"st7",d:"M282.2 167.9l-4.6 7.1c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.1c-.6-.2-1.2-.6-1.6-1.1zM291.1 156c-.5-.3-1.1-.2-1.4.3l-4.6 7.1c.7.1 1.3.5 1.7 1.1l4.6-7.1c.2-.5.1-1.1-.3-1.4zM293.8 171.3l-6.5-4.5c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.1.8-.4.2-.5.1-1.2-.3-1.5zM282.9 163.8l-7.5-5.2c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l7.4 5.1c.2-.7.7-1.2 1.2-1.6z"})),jt||(jt=C.createElement("path",{className:"st0",d:"M118.1 401.5c0 .9-.1 34.9 0 36.6.1 1.7 1.3 1.8 1.3 1.8h86.5c1.3 0 1.1-2.1 1.1-2.1s.1-33.1 0-35.6-.9-2.3-.9-2.3h-86.7c-.1.1-1.4.1-1.3 1.6zM455 400l-78.1-.1c.2 0 1.1.1 1.1 8.1h77c2.2 0 4-1.8 4-4s-1.8-4-4-4z"})),Ut||(Ut=C.createElement("path",{className:"st3",d:"M255.1 187.5c-1-2.5-6.5-13.4-22.2-12.5-10.2.6-16.9 4.4-21.2 8.7 0 0-15.4 3.8-14.4 3.6 1-.3-2.6.7-2.6.7l-.4-.3c-4.2-2.6-8.8-3.9-14.2-3.9-12.6 0-23.2 8.3-26.7 19.7-2.5-.5-5.1-.7-7.7-.7-23.3 0-42.2 18.4-42.2 41.2s18.9 41.2 42.2 41.2c17.2 0 31.9-10 38.5-24.4 1 .2 2 .3 3.1.3 8.2 0 14.8-6.6 14.8-14.8 0-2.8-.8-5.5-2.2-7.7 4.2-5.9 17.2-22.9 17.2-22.9l1.6-1.3s4.3-4.5 4.3-7.9c0-1.7 1.3-9.1 3-9h2.3s1.7.2 2.7 2.3l1 2.1s.4 2.4 4.8 2.2c3.6-.1 9.9 1 12.6.9 2.3.2 10.1-7 5.7-17.5z"})),Ht||(Ht=C.createElement("path",{className:"st0",d:"M417.6 360.7c-2.5-3.6-5.5-6.3-7.8-7.7-1.9-1.1-12.2-5.8-12.2-5.8s-68.7-29.3-72.3-30.9c-3.6-1.6-5.2.8-5.2.8s-2.4 3.8-3.6 6.2c-1.2 2.4.3 4.5.3 4.5l60.5 64.3c2.7 3 6.1 5.4 9.9 6.9 3.1 1.4 6.6 2.2 10.3 2.2 13.9 0 25.2-11.3 25.2-25.2 0-5.8-1.9-11.1-5.1-15.3z"})),Qt||(Qt=C.createElement("path",{className:"st0",d:"M397.6 347.2s10.3 4.7 12.2 5.8c3.5 2.1 8.8 7.6 11.3 14.3-4.9-16.5-34.3-111.8-38.3-120-2-4.1-5.2-4.3-5.2-4.3l.5 95.9c11.1 4.7 19.5 8.3 19.5 8.3z"})));function Bt(e){switch(e){case A.C6:return Ae;case A.xW:return Gt;case A.dJ:return $e;case A.OX:default:return U}}function Wt(e){let t;switch(e){case A.C6:t="not-authorized";break;case A.xW:t="no-access";break;case A.dJ:t="not-found";break;case A.OX:default:t="internal-error"}return w.Ru.text({id:t,keyset:"page-titles"})}function Jt(e,t){let s;switch(e){case A.xW:case A.OX:s=!0;break;default:s=!1}const n="".concat(s?e:t,":description"),r=w.Ru.text({id:n,keyset:"api-errors"});return n===r?void 0:r}s.p;const Kt=e=>{let{statusCode:t,errorCode:s,withHomeLink:n}=e;return C.createElement(Q,{withHomeLink:n,Image:Bt(t),pageTitle:Wt(t),errorText:w.Ru.text({id:s,keyset:"api-errors"}),errorDescription:Jt(t,s)})};Kt.displayName="APIErrorPage";const Zt=()=>C.createElement(Q,{pageTitle:w.Ru.text({id:"fetch-error",keyset:"page-titles"}),errorText:w.Ru.text({id:"fetch-error",keyset:"errors"}),errorDescription:w.Ru.text({id:"fetch-error-description",keyset:"errors"})});Zt.displayName="NetworkErrorPage";const Yt=()=>C.createElement(Q,{pageTitle:w.Ru.text({id:"internal-error",keyset:"page-titles"}),errorText:w.Ru.text({id:"internal-error",keyset:"errors"}),errorDescription:w.Ru.text({id:"internal-error-description",keyset:"errors"})});Yt.displayName="InternalErrorPage";const qt=()=>C.createElement(Q,{Image:$e,pageTitle:w.Ru.text({id:"page-not-found",keyset:"page-titles"}),errorText:w.Ru.text({id:"page-not-found-error",keyset:"errors"}),errorDescription:w.Ru.text({id:"page-not-found-error-description",keyset:"errors"})});qt.displayName="PageNotFoundErrorPage";const $t=R().with("error-message"),Xt=e=>C.createElement("span",{className:$t()},w.Ru.text({id:e.errorCode,keyset:"api-errors"}));Xt.displayName="APIErrorMessage"},52060:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});const n=(0,s(77475).createAction)("[app] initialize")},62206:(e,t,s)=>{"use strict";s.d(t,{YF:()=>a,YH:()=>r,n3:()=>i});var n=s(45116);function r(e){return{type:n.Q.SAVE_CODE,payload:e}}function a(e){return{type:n.Q.SET_LANGUAGE,payload:e}}function i(e){return{type:n.Q.TOGGLE_READONLY,payload:e}}},45116:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.SAVE_CODE="[code editor] save code",e.SET_LANGUAGE="[code editor] set language",e.TOGGLE_READONLY="[code editor] toggle readonly",e}({})},78189:(e,t,s)=>{"use strict";s.d(t,{BP:()=>m,C6:()=>u,D8:()=>i,J4:()=>a,LK:()=>d,Ql:()=>r,T5:()=>h,Wr:()=>o,dF:()=>p,e1:()=>g,qj:()=>E,rW:()=>l,s4:()=>y,w5:()=>c});var n=s(49051);function r(e){return{type:n.Q.FETCH_STUDENT_COMMENTS_START,payload:e}}function a(e){return{type:n.Q.FETCH_TEACHER_COMMENTS_START,payload:e}}function i(e){return{type:n.Q.FETCH_STUDENT_COMMENTS_SUCCESS,payload:e}}function o(e){return{type:n.Q.FETCH_TEACHER_COMMENTS_SUCCESS,payload:e}}function l(e){return{type:n.Q.FETCH_COMMENTS_FAIL,payload:e}}function c(e){return{type:n.Q.CLEAR_COMMENTS,payload:e}}function u(e){return{type:n.Q.ADD_STUDENT_COMMENT_START,payload:e}}function d(e){return{type:n.Q.ADD_TEACHER_COMMENT_START,payload:e}}function m(e){return{type:n.Q.ADD_COMMENT_SUCCESS,payload:e}}function p(e){return{type:n.Q.ADD_COMMENT_FAIL,payload:e}}function h(e){return{type:n.Q.EDIT_STUDENT_COMMENT_START,payload:e}}function E(e){return{type:n.Q.EDIT_TEACHER_COMMENT_START,payload:e}}function g(e){return{type:n.Q.EDIT_COMMENT_SUCCESS,payload:e}}function y(e){return{type:n.Q.EDIT_COMMENT_FAIL,payload:e}}},49051:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_STUDENT_COMMENTS_START="[comments] fetch student list start",e.FETCH_TEACHER_COMMENTS_START="[comments] fetch teacher list start",e.FETCH_STUDENT_COMMENTS_SUCCESS="[comments] fetch student list success",e.FETCH_TEACHER_COMMENTS_SUCCESS="[comments] fetch teacher list success",e.FETCH_COMMENTS_FAIL="[comments] fetch list fail",e.CLEAR_COMMENTS="[comments] clear list",e.ADD_STUDENT_COMMENT_START="[comments] add student comment start",e.ADD_TEACHER_COMMENT_START="[comments] add teacher comment start",e.ADD_COMMENT_SUCCESS="[comments] add comment success",e.ADD_COMMENT_FAIL="[comments] add comment fail",e.EDIT_STUDENT_COMMENT_START="[comments] edit student comment start",e.EDIT_TEACHER_COMMENT_START="[comments] edit teacher comment start",e.EDIT_COMMENT_SUCCESS="[comments] edit comment success",e.EDIT_COMMENT_FAIL="[comments] edit comment fail",e}({})},37285:(e,t,s)=>{"use strict";s.d(t,{BE:()=>c,Dn:()=>o,NT:()=>a,N_:()=>i,Re:()=>d,Uz:()=>r,fF:()=>u,r9:()=>l});var n=s(77475);const r=(0,n.createAsyncAction)("[course-details] fetch start","[course-details] fetch success","[course-details] fetch failure")(),a=(0,n.createAction)("[course-details] clear"),i=(0,n.createAction)("[course-details] fetch course logo",(e=>t=>e({courseId:t}))),o=(0,n.createAction)("[course-details] set course logo",(e=>t=>e(t))),l=(0,n.createAction)("[course-details] clear logo info",(e=>()=>e())),c=(0,n.createAction)("[course-details] fetch course banners",(e=>(t,s)=>e({courseId:t,groupId:s}))),u=(0,n.createAction)("[course-details] set course banners",(e=>t=>e(t))),d=(0,n.createAction)("[course-details] clear banner list",(e=>()=>e()))},26364:(e,t,s)=>{"use strict";s.d(t,{AJ:()=>u,E6:()=>o,Ec:()=>d,JJ:()=>m,L5:()=>i,QP:()=>c,Vk:()=>p,em:()=>a.e,gb:()=>h,xT:()=>l});var n=s(77475),r=s(30382),a=s(8957);function i(e){return{type:r.Q.FETCH_COURSE_PROGRESS_START,payload:e}}function o(e){return{type:r.Q.FETCH_COURSE_PROGRESS_SUCCESS,payload:e}}function l(e){return{type:r.Q.FETCH_COURSE_PROGRESS_FAIL,payload:e}}function c(){return{type:r.Q.CLEAR_COURSE_PROGRESS}}function u(e){return{type:r.Q.CHANGE_ATTENDANCE_STATUS,payload:e}}function d(e){return{type:r.Q.UPDATE_REFERENCE_ATTENDANCE,payload:e}}function m(e){return{type:r.Q.RESTORE_ATTENDANCE_FROM_REFERENCE,payload:e}}function p(e){return{type:r.Q.CHANGE_SORT,payload:e}}const h=(0,n.createAsyncAction)("[course-progress] set bonus score start","[course-progress] set bonus score success","[course-progress] set bonus score fail")()},8957:(e,t,s)=>{"use strict";s.d(t,{e:()=>n});const n=(0,s(77475).createAsyncAction)("[course-progress] expel student start","[course-progress] expel student success","[course-progress] expel student fail")()},30382:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r,u:()=>n});let n=function(e){return e.NAME="displayName",e.RATING="rating",e}({}),r=function(e){return e.FETCH_COURSE_PROGRESS_START="[course-progress] fetch start",e.FETCH_COURSE_PROGRESS_SUCCESS="[course-progress] fetch success",e.FETCH_COURSE_PROGRESS_FAIL="[course-progress] fetch fail",e.CLEAR_COURSE_PROGRESS="[course-progress] clear",e.CHANGE_ATTENDANCE_STATUS="[course-progress] change attendance",e.UPDATE_REFERENCE_ATTENDANCE="[course-progress] update reference attendance",e.RESTORE_ATTENDANCE_FROM_REFERENCE="[course-progress] restore attendance from reference",e.CHANGE_SORT="[course-progress] change sort",e}({})},3769:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.CLEAR_SELECTED="[course-tasks] clear selected",e.SET_SELECTED_TASK="[course-tasks] set selected task",e.SET_SELECTED_SOLUTION="[course-tasks] set selected solution",e}({})},43717:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>i,Gg:()=>r,RG:()=>a,Vk:()=>o});var n=s(77475);const r=(0,n.createAsyncAction)("[course-variants] fetch start","[course-variants] fetch success","[course-variants] fetch fail")(),a=(0,n.createAction)("[course-variants] clear"),i=(0,n.createStandardAction)("[course-variants] update lesson")(),o=(0,n.createStandardAction)("[course-variants] change sort")()},71542:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>m,xT:()=>c});var n=s(77475),r=s(23655),a=s.n(r),i=s(43717),o=s(44046),l=s(89685);let c=function(e){return e.NAME="displayName",e.RATING="rating",e}({});function u(e,t,s){return a()(Object.values(e),t,s).map((e=>e.id))}const d={fetchError:null,fetchStatus:null,maxRating:0,studentIds:[],studentsMap:{},slots:[],sortBy:c.NAME,sortOrder:l.j.ASCENDING};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case(0,n.getType)(i.Gg.request):return Object.assign({},e,{fetchError:null,fetchStatus:o.L.PENDING});case(0,n.getType)(i.Gg.success):{const{sortBy:s,sortOrder:n}=e,r=Object.assign({},t.payload,{studentIds:u(t.payload.studentsMap,s,n)});return Object.assign({},e,r,{fetchError:null,fetchStatus:o.L.SUCCESS})}case(0,n.getType)(i.Gg.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:o.L.FAIL});case(0,n.getType)(i.RG):return d;case(0,n.getType)(i.Cf):{const s=Object.assign({},e.studentsMap);return t.payload.students.forEach((e=>{s[e.id].lessons=Object.assign({},s[e.id].lessons,e.lessons)})),Object.assign({},e,{studentsMap:s})}case(0,n.getType)(i.Vk):{const{sortBy:s,sortOrder:n}=t.payload;return Object.assign({},e,{sortBy:s,sortOrder:n,studentIds:u(e.studentsMap,s,n)})}default:return e}}},79405:(e,t,s)=>{"use strict";s.d(t,{E4:()=>a,h7:()=>r,yM:()=>i});var n=s(28347);function r(e){return{type:n.Q.MERGE_COURSES,payload:e}}function a(e){return{type:n.Q.SAVE_COURSES,payload:e}}function i(e){return{type:n.Q.FETCH_COURSES,payload:e}}},28347:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.MERGE_COURSES="[courses] merge courses",e.SAVE_COURSES="[courses] save courses",e.FETCH_COURSES="[courses] fetch courses",e}({})},66136:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});const n=(0,s(77475).createAsyncAction)("[files] fetch source code start","[files] fetch source code success","[files] fetch source code failure")()},3032:(e,t,s)=>{"use strict";s.d(t,{Nf:()=>r,_F:()=>i,hg:()=>o,hi:()=>l,j_:()=>a});var n=s(32770);function r(e){return{type:n.Q.FETCH_SOLUTION_FILTERS_START,payload:e}}function a(e){return{type:n.Q.FETCH_TASKS_FILTERS_START,payload:e}}function i(e){return{type:n.Q.FETCH_FILTERS_SUCCESS,payload:e}}function o(e){return{type:n.Q.FETCH_FILTERS_FAIL,payload:e}}function l(){return{type:n.Q.CLEAR_FILTERS}}},32770:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_SOLUTION_FILTERS_START="[filters] solution filters fetch start",e.FETCH_TASKS_FILTERS_START="[filters] tasks filters fetch start",e.FETCH_FILTERS_SUCCESS="[filters] fetch success",e.FETCH_FILTERS_FAIL="[filters] fetch fail",e.CLEAR_FILTERS="[filters] clear",e}({})},94183:(e,t,s)=>{"use strict";s.d(t,{U:()=>pa});var n=s(82960),r=s(21966);const a=!1;var i=s(23507),o=s(78189),l=s(49051),c=s(33315),u=s(19077),d=s(54837),m=s(29159),p=s(61547),h=s(56407);function*E(e){const t=e.payload,s=p.g.apiTeacherSolutionComments.build({solutionId:t});try{const{response:e}=yield(0,i.O4)({response:(0,i.T1)(m.Ay,s),gradeSolution:(0,i.s)(d.Q.SET_GRADE_SUCCESS)});e&&(yield(0,i.yJ)((0,o.Wr)(e)))}catch(e){yield(0,i.yJ)((0,o.rW)(e))}}function*g(e){const{solutionId:t,selectLatestSubmission:s,groupId:n,courseId:r}=e.payload,a=p.g.apiStudentSolutionComments.build({solutionId:t},{groupId:n,courseId:r});try{const e=yield(0,i.T1)(m.Ay,a);return yield(0,i.yJ)((0,o.D8)(e)),s&&e.solutionPreview.latestSubmission&&(yield(0,i.yJ)((0,h.F)(e.solutionPreview.latestSubmission))),e.solutionPreview}catch(e){return yield(0,i.yJ)((0,o.rW)(e)),null}}function*y(e){const{solutionId:t,text:s}=e.payload,n={[l.Q.ADD_STUDENT_COMMENT_START]:p.g.apiAddStudentSolutionComment,[l.Q.ADD_TEACHER_COMMENT_START]:p.g.apiAddTeacherSolutionComment}[e.type].build({solutionId:t});try{const e=yield(0,i.T1)(m.Ay,n,{body:JSON.stringify({data:s}),method:"POST"});yield(0,i.yJ)((0,o.BP)({solutionId:t,addedComment:e}))}catch(e){yield(0,i.yJ)((0,o.dF)(e)),yield(0,i.yJ)((0,c.z)({i18n:{id:"add-comment-error",keyset:"errors"},type:u.V.ERROR}))}}function*f(e){const{commentId:t,solutionId:s,text:n}=e.payload,r={[l.Q.EDIT_STUDENT_COMMENT_START]:p.g.apiEditStudentSolutionComment,[l.Q.EDIT_TEACHER_COMMENT_START]:p.g.apiEditTeacherSolutionComment}[e.type].build({solutionId:s,commentId:t});try{const e=yield(0,i.T1)(m.Ay,r,{body:JSON.stringify({data:n}),method:"PATCH"});yield(0,i.yJ)((0,o.e1)({solutionId:s,commentId:t,editedComment:e}))}catch(e){yield(0,i.yJ)((0,o.s4)(e)),yield(0,i.yJ)((0,c.z)({i18n:{id:"edit-comment-error",keyset:"errors"},type:u.V.ERROR}))}}function*S(){yield(0,i.Q7)([(0,i.p8)(l.Q.FETCH_STUDENT_COMMENTS_START,g),(0,i.p8)(l.Q.FETCH_TEACHER_COMMENTS_START,E),(0,i.p8)(l.Q.ADD_STUDENT_COMMENT_START,y),(0,i.p8)(l.Q.ADD_TEACHER_COMMENT_START,y),(0,i.p8)(l.Q.EDIT_STUDENT_COMMENT_START,f),(0,i.p8)(l.Q.EDIT_TEACHER_COMMENT_START,f)])}var b=s(77475),v=s(37285);function*N(e){const t=p.g.apiCourseInvites.build({groupId:e});let s={};try{s=yield(0,i.T1)(m.Ay,t)}catch(e){console.error(e)}return s}function*I(e){const{courseId:t,groupId:s}=e.payload;try{const e=p.g.apiCourseDetails.build({courseId:t},{groupId:s}),[n,r]=yield(0,i.Q7)([(0,i.T1)(m.Ay,e),(0,i.T1)(N,s)]);n.invite=r,yield(0,i.yJ)(v.Uz.success(n))}catch(e){yield(0,i.yJ)(v.Uz.failure(e))}}function T(e){let{payload:{courseId:t,groupId:s}}=e;return function*(){try{const e=p.g.apiCourseBanners.build({},{courseId:t,groupId:s}),n=yield(0,i.T1)(m.Ay,e);yield(0,i.yJ)((0,v.fF)(n))}catch(e){console.error(e)}}()}function k(e){let{payload:{courseId:t}}=e;return function*(){try{const e=p.g.apiCourseLogo.build({courseId:t},{}),s=yield(0,i.T1)(m.Ay,e);yield(0,i.yJ)((0,v.Dn)(s))}catch(e){console.error(e)}}()}function*C(){yield(0,i.Q7)([(0,i.p8)((0,b.getType)(v.Uz.request),I),(0,i.p8)((0,b.getType)(v.BE),T),(0,i.p8)((0,b.getType)(v.N_),k)])}var w=s(26364),A=s(98354),O=s(30382),R=s(4400),_=s(5882);const L={scheduleGet:new _.s("/api/schedule"),studentScheduleGet:new _.s("/api/student/schedule"),scheduleCreate:new _.s("/api/schedule"),scheduleUpdate:new _.s("/api/schedule"),studyPlanUpdate:new _.s("/api/schedule/plan"),periodScheduleGet:new _.s("/api/schedule/period"),studentPeriodScheduleGet:new _.s("/api/student/schedule/period"),changeAttendance:new _.s("/api/events/:eventId/attendance")};function*M(e){const{eventId:t,studentId:s,status:n}=e.payload;yield(0,i.T1)(A.cb,500);const r=L.changeAttendance.build({eventId:t},{studentId:s}),a=JSON.stringify({status:n});try{yield(0,i.T1)(m.Ay,r,{body:a,method:"PATCH"}),yield(0,i.yJ)((0,w.Ec)({eventId:t,studentId:s})),yield(0,i.yJ)((0,c.z)({i18n:{id:"change-attendance-success-message",keyset:"attendance"},timeout:3e3,type:u.V.SUCCESS}))}catch(e){yield(0,i.yJ)((0,w.JJ)({eventId:t,studentId:s})),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*P(){yield(0,i.Q7)([(0,i.Zy)((function*(){const e={};for(;;){const t=yield(0,i.s)(O.Q.CHANGE_ATTENDANCE_STATUS),{studentId:s,eventId:n}=t.payload;e[s]||(e[s]={}),e[s][n]||(e[s][n]=(0,A.Ix)(),yield(0,i.p8)(e[s][n],M)),yield(0,i.yJ)(e[s][n],t)}}))])}function*x(e){const{courseId:t,studentId:s,oldScore:n,newScore:r}=e.payload;try{const e=p.g.apiSetBonusScore.build({courseId:t},{studentId:s}),{rating:n,bonusScore:a}=yield(0,i.T1)(m.Ay,e,{body:JSON.stringify({bonusScore:r}),method:"PATCH"});yield(0,i.yJ)(w.gb.success({studentId:s,rating:n,bonusScore:a}))}catch(e){yield(0,i.yJ)(w.gb.failure({studentId:s,oldScore:n})),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*D(){yield(0,i.Q7)([(0,i.Zy)((function*(){const e={};for(;;){const t=yield(0,i.s)((0,b.getType)(w.gb.request)),{studentId:s}=t.payload;e[s]||(e[s]=(0,A.Ix)(),yield(0,i.p8)(e[s],x)),yield(0,i.yJ)(e[s],t)}}))])}var F=s(8957);function*z(e){const{courseId:t,groupId:s,studentId:n,status:r}=e.payload,a=p.g.apiExpelStudent.build({courseId:t},{groupId:s});try{yield(0,i.T1)(m.Ay,a,{body:JSON.stringify({studentId:n}),method:"PATCH"}),yield(0,i.yJ)(F.e.success({studentId:n}))}catch(e){yield(0,i.yJ)(F.e.failure({studentId:n,oldStatus:r})),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*j(){yield(0,i.jP)((0,b.getType)(F.e.request),z)}function*U(e){const{courseId:t,groupId:s}=e.payload,n=p.g.apiCourseProgress.build({courseId:t,role:"teacher"},{groupId:s});try{const e=yield(0,i.T1)(m.Ay,n);yield(0,i.yJ)((0,w.E6)(e))}catch(e){yield(0,i.yJ)((0,w.xT)(e))}}function*H(){yield(0,i.Q7)([P(),D(),j(),(0,i.p8)(O.Q.FETCH_COURSE_PROGRESS_START,U)])}var Q=s(43717);function*V(e){const{courseId:t,groupId:s}=e.payload;try{const e=p.g.apiCourseVariants.build({courseId:t},{groupId:s}),n=yield(0,i.T1)(m.Ay,e);yield(0,i.yJ)(Q.Gg.success(n))}catch(e){yield(0,i.yJ)(Q.Gg.failure(e))}}function*G(){yield(0,i.Q7)([(0,i.p8)((0,b.getType)(Q.Gg.request),V)])}var B=s(3032),W=s(32770);function*J(e){const t=e.payload,s=p.g.apiTeacherSolutionFilters.build({},t);try{const e=yield(0,i.T1)(m.Ay,s);yield(0,i.yJ)((0,B._F)(e))}catch(e){yield(0,i.yJ)((0,B.hg)(e))}}function*K(e){const t=e.payload,s=p.g.apiStudentTasksFilters.build({},t);try{const e=yield(0,i.T1)(m.Ay,s);yield(0,i.yJ)((0,B._F)(e))}catch(e){yield(0,i.yJ)((0,B.hg)(e))}}function*Z(){yield(0,i.Q7)([(0,i.p8)(W.Q.FETCH_TASKS_FILTERS_START,K)])}function*Y(){yield(0,i.Q7)([(0,i.p8)(W.Q.FETCH_SOLUTION_FILTERS_START,J)])}var q=s(67430);function*$(e){const{lessonId:t,groupId:s}=e.payload;try{const e=p.g.apiTeacherLessonProgressPreview.build({lessonId:t},{groupId:s}),n=yield(0,i.T1)(m.Ay,e);yield(0,i.yJ)(q.i.success(n))}catch(e){yield(0,i.yJ)(q.i.failure(e))}}function*X(){yield(0,i.Q7)([(0,i.p8)((0,b.getType)(q.i.request),$)])}var ee=s(28527);function*te(e){const{lessonId:t,groupId:s}=e.payload;try{const e=p.g.apiTeacherLessonProgress.build({lessonId:t},{groupId:s}),n=yield(0,i.T1)(m.Ay,e);yield(0,i.yJ)(ee.In.success(n))}catch(e){yield(0,i.yJ)(ee.In.failure(e))}}function*se(e){const{eventId:t,studentId:s,status:n}=e.payload;yield(0,i.T1)(A.cb,500);const r=L.changeAttendance.build({eventId:t},{studentId:s}),a=JSON.stringify({status:n});try{yield(0,i.T1)(m.Ay,r,{body:a,method:"PATCH"}),yield(0,i.yJ)((0,ee.Ec)({studentId:s,eventId:t})),yield(0,i.yJ)((0,c.z)({timeout:3e3,type:u.V.SUCCESS,i18n:{id:"change-attendance-success-message",keyset:"attendance"}}))}catch(e){yield(0,i.yJ)((0,ee.JJ)({studentId:s,eventId:t})),yield(0,i.yJ)((0,c.z)({type:u.V.ERROR,i18n:(0,R.T$)(e)}))}}function*ne(){yield(0,i.Q7)([(0,i.p8)((0,b.getType)(ee.In.request),te),(0,i.Zy)((function*(){const e={};for(;;){const t=yield(0,i.s)((0,b.getType)(ee.AJ));e[t.payload.studentId]||(e[t.payload.studentId]=(0,A.Ix)(),yield(0,i.p8)(e[t.payload.studentId],se)),yield(0,i.yJ)(e[t.payload.studentId],t)}}))])}var re=s(12291),ae=s(37861);function*ie(e){const t={[ae.Q.FETCH_STUDENT_LESSON_DETAILS_START]:p.g.apiStudentLessonDetails,[ae.Q.FETCH_TEACHER_LESSON_DETAILS_START]:p.g.apiTeacherLessonDetails},{courseId:s,groupId:n,lessonId:r}=e.payload,a=t[e.type].build({lessonId:r},{courseId:s,groupId:n});try{const e=yield(0,i.T1)(m.Ay,a);yield(0,i.yJ)((0,re.mt)(e))}catch(e){yield(0,i.yJ)((0,re.cT)(e))}}function*oe(e){const{group:t,lesson:s}=e.payload,n=!s.isHidden,r=p.g.apiChangeLessonVisibility.build({lessonId:s.id},{groupId:t.id});try{yield(0,i.T1)(m.Ay,r,{body:JSON.stringify({isHidden:n}),method:"PATCH"}),yield(0,i.yJ)((0,re.UZ)({isHidden:n})),yield(0,i.yJ)((0,c.z)({i18n:{id:n?"hide-lesson-success":"show-lesson-success",keyset:"lessons",params:{lesson:s.title,group:t.name}},type:u.V.SUCCESS}))}catch(e){yield(0,i.yJ)((0,re.tF)(e)),yield(0,i.yJ)((0,c.z)({i18n:{id:n?"hide-lesson-fail":"show-lesson-fail",keyset:"lessons",params:{lesson:s.title,group:t.name,error:"Error ".concat(e.statusCode||"")}},type:u.V.ERROR}))}}function*le(e){const t=yield(0,i.Zy)(ie,e);yield(0,i.s)(ae.Q.CLEAR_LESSON_DETAILS),yield(0,i.ZT)(t)}function*ce(){yield(0,i.Q7)([(0,i.p8)(ae.Q.FETCH_STUDENT_LESSON_DETAILS_START,le),(0,i.p8)(ae.Q.FETCH_TEACHER_LESSON_DETAILS_START,le),(0,i.p8)(ae.Q.CHANGE_LESSON_VISIBILITY_START,oe)])}var ue=s(58761),de=s(35304),me=s(40736),pe=s(84483);function*he(e){try{const t=p.g.apiStudentLessons.build({},e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)(ue.Lu.success(s))}catch(e){yield(0,i.yJ)(ue.Lu.failure(e))}}function*Ee(e){try{const t=p.g.apiTeacherLessons.build({},e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)(ue.CA.success(s))}catch(e){yield(0,i.yJ)(ue.CA.failure(e))}}function*ge(e){const{groupId:t}=e.payload,s=yield(0,i.Lt)(de.HF),n=function(e){return(me.I.get(pe.Z.LessonFilterPreferences)||{})[e]}(t);void 0!==n&&s!==n&&(yield(0,i.yJ)((0,ue.FG)({groupId:t,filter:n})))}function ye(e){const t=me.I.get(pe.Z.LessonFilterPreferences)||{},{groupId:s,filter:n}=e.payload;me.I.set(pe.Z.LessonFilterPreferences,Object.assign({},t,{[s]:n}))}function*fe(){yield(0,i.Q7)([(0,i.p8)((0,b.getType)(ue.Lu.request),he),(0,i.p8)((0,b.getType)(ue.CA.request),Ee),(0,i.p8)((0,b.getType)(ue.CA.request),ge),(0,i.p8)((0,b.getType)(ue.FG),ye)])}var Se=s(45581),be=s(33868),ve=s(97697),Ne=s(44473);const Ie=["lesson"];function Te(e){let{lesson:t}=e,s=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,Ie);const n=Ne.Ay.fromISO(s.serverTime);return{deadline:Ne.Ay.fromISO(s.deadline),delta:n.diffNow(),lesson:t}}var ke=s(62383),Ce=s.n(ke),we=s(69367),Ae=s(87702),Oe=s(87594),Re=s(73880),_e=s(62206),Le=s(36242),Me=s(44046);const Pe=[".zip",".7z"];function*xe(e){try{const t=p.g.apiStudentTasks.build({},e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,ve.BP)(s))}catch(e){yield(0,i.yJ)((0,ve.SR)(e))}}function*De(e){try{const t=p.g.apiStudentTasksUnsolved.build({},e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,ve.nf)(s))}catch(e){yield(0,i.yJ)((0,ve.yq)(e))}}function*Fe(e){const{taskId:t,groupId:s}=e.payload,n={[we.Q.FETCH_STUDENT_DETAILS_START]:p.g.apiDetailedStudentTask,[we.Q.FETCH_TEACHER_DETAILS_START]:p.g.apiDetailedTeacherTask};try{const r=n[e.type].build({taskId:t},{groupId:s}),a=yield(0,i.T1)(m.Ay,r);if(a.course&&!Ce()(a.course.courseCompilers)){const e=Object.keys(a.course.courseCompilers).filter((e=>!Pe.includes(e)))[0];yield(0,i.yJ)((0,_e.YF)(e))}yield(0,i.yJ)((0,ve.RI)(Object.assign({},a,{problem:a.storeContainer?{markup:a.storeContainer.markers,resources:a.storeContainer.resources}:null})))}catch(e){yield(0,i.yJ)((0,ve.yt)(e))}}function*ze(e){try{const t=p.g.apiStudentLessonTasks.build({},e.payload),s=yield(0,i.T1)(m.Ay,t);return yield(0,i.yJ)((0,ve.XT)(s)),s}catch(e){return yield(0,i.yJ)((0,ve.EB)(e)),null}}function*je(e){try{const t=p.g.apiTeacherLessonTasks.build({},e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,ve.XT)(s))}catch(e){yield(0,i.yJ)((0,ve.EB)(e))}}function*Ue(e){const t=yield(0,i.Zy)(je,e);yield(0,i.s)(we.Q.CLEAR_PROBLEM_RUN),yield(0,i.ZT)(t)}function*He(e){const t=yield(0,i.Zy)(ze,e);yield(0,i.s)(we.Q.CLEAR_PROBLEM_RUN),yield(0,i.ZT)(t)}function*Qe(e){try{const{problemLinkId:t,lessonId:s,courseId:n,groupId:r}=e;let a,o;if(yield(0,i.yJ)((0,ve.yX)(Me.L.PENDING)),0===(yield(0,i.Lt)(Re.uR)).length&&(yield ze({payload:{lessonId:s,courseId:n,groupId:r}})),a=yield(0,i.Lt)(Re.Wi),o=a[t],!o)return;if(!(0,Ae.zh)(o.solution)){const e=p.g.apiStudentProblemSolution.build({},{problemLinkId:t.toString()}),s=yield(0,i.T1)(m.Ay,e,{method:"POST"});(0,Ae.zh)(s)&&(yield(0,i.yJ)((0,ve.h6)(s.id,o.id)))}if(a=yield(0,i.Lt)(Re.Wi),o=a[t],o&&o.solution.id){const{solution:{id:e}}=o;yield Ge(e),yield(0,i.yJ)((0,ve.yX)(Me.L.SUCCESS))}}catch(e){yield(0,i.yJ)((0,c.z)(Oe.ft))}}function*Ve(){yield Ge(yield(0,i.Lt)(Re.u$))}function*Ge(e){if(null==e)return;const t=p.g.apiProblemDetails.build({},{solutionId:e.toString()}),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,ve.m2)(s))}function*Be(e){try{const{solutionId:t,userAnswer:s,lessonId:n,groupId:r,courseId:a,onSuccess:o,problemType:l}=e;if(l===Ae.yo.Problem){const e=p.g.apiStudentProblemSubmission.build({},{solutionId:t.toString()}),o=yield(0,i.T1)(m.Ay,e,{method:"POST",body:JSON.stringify(s)});yield(0,i.yJ)((0,ve.m2)(o)),yield(0,i.T1)(ze,{payload:{lessonId:Number(n),courseId:Number(a),groupId:Number(r)}})}else{const e=p.g.apiSendProblemSolution.build({solutionId:t}),n=new FormData;n.append("file",new Blob([JSON.stringify(s)],{type:"application/json"}),"solution.json");const r=yield(0,i.T1)(m.Ay,e,{method:"POST",body:n,excludeDefaultHeaders:!0}),a=r.solution;yield(0,i.yJ)((0,Le.Z$)(r)),yield(0,i.yJ)((0,ve.Q2)({solution:a}))}yield(0,i.yJ)((0,ve.Ve)()),null==o||o()}catch(e){yield(0,i.yJ)((0,c.z)(Oe.cU))}}function*We(){yield(0,i.Q7)([(0,i.p8)(we.Q.FETCH_STUDENT_TASKS_START,xe),(0,i.p8)(we.Q.FETCH_STUDENT_TASKS_UNSOLVED_START,De),(0,i.p8)(we.Q.FETCH_STUDENT_DETAILS_START,Fe),(0,i.p8)(we.Q.FETCH_TEACHER_DETAILS_START,Fe),(0,i.p8)(we.Q.FETCH_STUDENT_TASK_GROUPS_START,He),(0,i.p8)(we.Q.FETCH_TEACHER_TASK_GROUPS_START,Ue),(0,i.p8)(we.Q.OPEN_PROBLEM,Qe),(0,i.p8)(we.Q.POST_PROBLEM_SUBMISSION,Be),(0,i.p8)(we.Q.UPDATE_PROBLEM_DETAILS,Ve)])}function*Je(e){try{const{courseId:t,lessonId:s,groupId:n}=e.payload,r=p.g.apiStartTest.build({lessonId:s},{courseId:t,groupId:n}),a=Te(yield(0,i.T1)(m.Ay,r,{method:"POST"}));yield(0,i.yJ)(Se.J.success()),yield(0,i.yJ)((0,re.wc)({isTestStarted:!0})),yield(0,i.yJ)((0,be.mI)(a)),yield(0,i.yJ)((0,ve.d3)({courseId:t,groupId:n,lessonId:s}))}catch(e){yield(0,i.yJ)(Se.J.failure(e)),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*Ke(e){try{const{lessonId:t,groupId:s}=e.payload,n=p.g.apiFinishTest.build({lessonId:t},{groupId:s});yield(0,i.T1)(m.Ay,n,{method:"POST"}),yield Ge(yield(0,i.Lt)(Re.u$)),yield(0,i.yJ)(Se.K.success()),yield(0,i.yJ)((0,be.$_)()),yield(0,i.yJ)((0,ve.LQ)())}catch(e){console.error(e),yield(0,i.yJ)(Se.K.failure(e)),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*Ze(){yield(0,i.Q7)([(0,i.p8)((0,b.getType)(Se.J.request),Je),(0,i.p8)((0,b.getType)(Se.K.request),Ke)])}var Ye=s(11550),qe=s(9928);function*$e(e){try{const t=p.g.apiTestTimer.build({},e.payload),s=Te(yield(0,i.T1)(m.Ay,t));yield(0,i.yJ)((0,be.mI)(s))}catch(e){const t=e;if(t.statusCode===qe.dJ)return void(0,be.mI)(null);(0,be.at)(t),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(t),type:u.V.ERROR}))}}function*Xe(){yield(0,i.p8)(Ye.Q.FETCH_TIMER_START,$e)}var et=s(33477),tt=s(76579);function*st(e){try{const t=p.g.apiStartWebinar.build(e.payload),s=yield(0,i.T1)((()=>(0,m.Ay)(t,{method:"POST"})));yield(0,i.yJ)((0,tt.lj)(s)),yield(0,i.yJ)((0,ue.DA)({lessonId:e.payload.lessonId,webinar:s}))}catch(e){const t=e;yield(0,i.yJ)((0,tt.ZS)(t)),yield(0,i.yJ)((0,c.z)({i18n:{id:"start-webinar-error",keyset:"lessons"},type:u.V.ERROR}))}}function*nt(e){try{const t=p.g.apiWebinarStatus.build(e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,tt.lj)(s)),yield(0,i.yJ)((0,ue.DA)({lessonId:e.payload.lessonId,webinar:s}))}catch(e){const t=e;yield(0,i.yJ)((0,tt.ZS)(t)),yield(0,i.yJ)((0,c.z)({i18n:{id:"start-webinar-error",keyset:"lessons"},type:u.V.ERROR}))}}function*rt(){yield(0,i.p8)(et.Q.START_WEBINAR_START,st),yield(0,i.p8)(et.Q.GET_WEBINAR_START,nt)}function*at(){yield(0,i.Q7)([ce(),fe(),Ze(),Xe(),rt()])}var it=s(28957),ot=s(78731);function*lt(e){const t={[ot.Q.FETCH_STUDENT_MATERIALS_START]:p.g.apiStudentMaterialList,[ot.Q.FETCH_TEACHER_MATERIALS_START]:p.g.apiTeacherMaterialList},{lessonId:s,groupId:n}=e.payload,r=t[e.type].build({lessonId:s,groupId:n});try{const e=yield(0,i.T1)(m.Ay,r);yield(0,i.yJ)((0,it.T_)(e))}catch(e){yield(0,i.yJ)((0,it.JG)(e))}}function*ct(e){const t={[ot.Q.FETCH_TEACHER_DETAILS_START]:p.g.apiTeacherDetailedMaterial,[ot.Q.FETCH_STUDENT_DETAILS_START]:p.g.apiStudentDetailedMaterial},{materialId:s,lessonId:n,groupId:r}=e.payload,a=t[e.type].build({materialId:s},{lessonId:n,groupId:r});try{const e=yield(0,i.T1)(m.Ay,a);yield(0,i.yJ)((0,it.qe)(e))}catch(e){yield(0,i.yJ)((0,it.ow)(e))}}function*ut(e){const t=yield(0,i.Zy)(lt,e);yield(0,i.s)(ot.Q.CLEAR_MATERIALS),yield(0,i.ZT)(t)}function*dt(){yield(0,i.Q7)([(0,i.p8)(ot.Q.FETCH_TEACHER_DETAILS_START,ct),(0,i.p8)(ot.Q.FETCH_STUDENT_DETAILS_START,ct),(0,i.p8)(ot.Q.FETCH_STUDENT_MATERIALS_START,ut),(0,i.p8)(ot.Q.FETCH_TEACHER_MATERIALS_START,ut)])}var mt=s(30872),pt=s(36261),ht=s(69154);const Et={apiInfo:new _.s("/api/notifications/info"),apiRead:new _.s("/api/notifications/read"),apiList:new _.s("/api/notifications"),apiChange:new _.s("/api/notifications/:notificationId")};var gt=s(74291);const yt=6e4,ft=20;function*St(){const e=yield(0,i.Lt)(pt.UI),t={isRead:!1,limit:ft,position:e},s=Et.apiList.build({},t);try{const e=yield(0,i.T1)(m.Ay,s);yield(0,i.yJ)((0,mt.YJ)(e))}catch(e){yield(0,i.yJ)((0,mt.PW)(e))}}function*bt(){for(;;)yield(0,i.s)(ht.Q.FETCH_NOTIFICATIONS_START),yield(0,i.O4)({fetchTask:(0,i.T1)(St),hideAll:(0,i.s)(ht.Q.HIDE_ALL_NOTIFICATIONS)})}function*vt(e,t){const s=yield(0,i.Lt)(pt.hE);return!(!e||e===t||null===s)&&!(yield(0,i.Lt)(pt.wO)).includes(e)}function*Nt(e){const t=Et.apiList.build({},{isRead:!1,isReversed:!0,position:e});try{const e=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,mt.YJ)(Object.assign({},e,{isNewBatch:!0})))}catch(e){}}function*It(e){const t=e.payload,s=Et.apiChange.build({notificationId:t}),n=JSON.stringify({isRead:!0});let r;try{r=yield(0,i.Lt)(pt.mb),yield(0,i.yJ)((0,mt.VN)(r-1)),yield(0,i.yJ)((0,mt.Ti)(!1)),yield(0,i.T1)(m.Ay,s,{body:n,method:"PATCH"}),yield(0,i.yJ)((0,mt.fP)(t))}catch(e){yield(0,i.yJ)((0,mt.N2)(t)),(yield(0,i.Lt)(pt.n_))||(r=yield(0,i.Lt)(pt.mb),yield(0,i.yJ)((0,mt.VN)(r+1)))}}function*Tt(){const e=yield(0,i.Lt)(pt.mb),t=Et.apiRead.build();try{yield(0,i.yJ)((0,mt.VN)(0)),yield(0,i.yJ)((0,mt.Ti)(!1)),yield(0,i.T1)(m.Ay,t,{method:"PATCH"}),yield(0,i.yJ)((0,mt.L6)())}catch(t){yield(0,i.yJ)((0,mt.LQ)()),(yield(0,i.Lt)(pt.n_))||(yield(0,i.yJ)((0,mt.VN)(e)))}}function*kt(){const e=Et.apiInfo.build();try{const{count:t,newestId:s}=yield(0,i.T1)(m.Ay,e),n=yield(0,i.Lt)(pt.kU);if(yield(0,i.T1)(vt,s,n))return void(yield(0,i.T1)(Nt,n));t!==(yield(0,i.Lt)(pt.mb))&&(yield(0,i.yJ)((0,mt.VN)(t))),yield(0,i.yJ)((0,mt.Ti)(!0))}catch(e){e instanceof gt.LG&&e.statusCode===qe.C6&&(yield(0,i.yJ)((0,mt.Qn)()))}finally{(yield(0,i.KW)())&&(yield(0,i.T1)(A.cb,3e5),yield(0,i.yJ)((0,mt.qJ)()))}}function*Ct(){for(;;)yield(0,i.T1)(A.cb,yt),yield(0,i.T1)(kt)}function*wt(){for(;;){yield(0,i.s)(ht.Q.START_NOTIFICATION_POLL);const e=yield(0,i.Zy)(Ct);yield(0,i.s)(ht.Q.STOP_NOTIFICATION_POLL),yield(0,i.ZT)(e)}}function*At(){yield(0,i.Q7)([wt(),bt(),(0,i.jP)(ht.Q.HIDE_NOTIFICATION,It),(0,i.p8)(ht.Q.HIDE_ALL_NOTIFICATIONS,Tt)])}var Ot=s(95054);const Rt=5,_t=15e3;function*Lt(e){const t=yield(0,i.Lt)(),s=(0,Ot.T)(t),n=s.length-Rt;if(n>0){const e=s.slice(0,n);for(const t of e)yield(0,i.yJ)((0,c.w)(t.id))}const{id:r,timeout:a}=e.payload,{shouldBeRemoved:o}=yield(0,i.O4)({alreadyRemoved:(0,i.s)((e=>!!function(e){return e.type===u.Q.REMOVE_NOTIFICATION}(e)&&e.payload.id===r)),shouldBeRemoved:(0,i.T1)(A.cb,a||_t)});o&&(yield(0,i.yJ)((0,c.w)(r)))}function*Mt(){yield(0,i.Q7)([(0,i.jP)(u.Q.ADD_NOTIFICATION,Lt)])}var Pt=s(80974),xt=s(83767),Dt=s(62220);const Ft=["plan"],zt=["plan"];function jt(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}function*Ut(){yield(0,i.yJ)((0,c.z)({i18n:{id:"schedule-changed",keyset:"schedule"},timeout:3e3,type:u.V.SUCCESS}))}function*Ht(e){try{const t={[Dt.Q.LOAD_PAGE_DATA]:L.scheduleGet,[Dt.Q.LOAD_PAGE_DATA_STUDENT]:L.studentScheduleGet}[e.type].build({},e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,Pt.lD)(s))}catch(e){yield(0,i.yJ)((0,Pt.YU)(e))}}function*Qt(e){try{const t={[Dt.Q.CHANGE_STUDY_PERIOD]:L.periodScheduleGet,[Dt.Q.CHANGE_STUDY_PERIOD_STUDENT]:L.studentPeriodScheduleGet}[e.type].build({},e.payload),s=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,Pt.KV)(s,{studyPeriodId:e.payload.studyPeriodId}))}catch(e){yield(0,i.yJ)((0,Pt.Si)(e))}}function*Vt(e){try{const t=e.payload,{plan:s}=t,n=jt(t,Ft),r=JSON.stringify(s),a=L.scheduleCreate.build({},n),o=yield(0,i.T1)(m.Ay,a,{body:r,method:"POST"});yield(0,i.yJ)((0,Pt.jz)(o)),yield(0,i.yJ)((0,c.z)({i18n:{id:"schedule-generated",keyset:"schedule"},timeout:3e3,type:u.V.SUCCESS}))}catch(e){yield(0,i.yJ)((0,Pt.qL)(e))}}function*Gt(e){try{const t=e.payload,{plan:s}=t,n=jt(t,zt),r=JSON.stringify(s),a=L.studyPlanUpdate.build({},n),o={"x-revision-id":yield(0,i.Lt)(xt.z0)||""},l=yield(0,i.T1)(m.Ay,a,{body:r,method:"PATCH",headers:o});yield(0,i.yJ)((0,Pt.jz)(l)),yield(0,i.yJ)((0,c.z)({i18n:{id:"study-plan-updated",keyset:"schedule"},timeout:3e3,type:u.V.SUCCESS}))}catch(e){yield(0,i.yJ)((0,Pt.qL)(e))}}function*Bt(e){try{const t=L.scheduleUpdate.build({},e.payload),s=yield(0,i.Lt)(xt.ko),n=JSON.stringify(s),r={"x-revision-id":yield(0,i.Lt)(xt.z0)||""},a=yield(0,i.T1)(m.Ay,t,{body:n,method:"PATCH",headers:r});yield(0,i.yJ)((0,Pt.Jm)()),yield(0,i.yJ)((0,Pt.KV)(a)),yield(0,i.yJ)((0,c.z)({i18n:{id:"schedule-saved",keyset:"schedule"},timeout:3e3,type:u.V.SUCCESS}))}catch(e){yield(0,i.yJ)((0,Pt.iq)(e)),yield(0,i.yJ)((0,c.z)({i18n:{id:"schedule-not-saved",keyset:"schedule"},type:u.V.ERROR}))}}function*Wt(){yield(0,i.Q7)([(0,i.jP)([Dt.Q.ADD_SKIP_REASON,Dt.Q.ASSIGN_EVENT,Dt.Q.EDIT_ACTION,Dt.Q.SKIP_EVENT,Dt.Q.SWAP_EVENTS],Ut),(0,i.p8)(Dt.Q.LOAD_PAGE_DATA,Ht),(0,i.p8)(Dt.Q.LOAD_PAGE_DATA_STUDENT,Ht),(0,i.p8)(Dt.Q.CHANGE_STUDY_PERIOD,Qt),(0,i.p8)(Dt.Q.CHANGE_STUDY_PERIOD_STUDENT,Qt),(0,i.p8)(Dt.Q.GENERATE_SCHEDULE,Vt),(0,i.p8)(Dt.Q.UPDATE_STUDY_PLAN,Gt),(0,i.p8)(Dt.Q.SAVE_SCHEDULE,Bt)])}var Jt=s(87128);function*Kt(e){const{solutionId:t,groupId:s,courseId:n}=e.payload,r=p.g.apiStudentSolutionDetails.build({solutionId:t},{groupId:s,courseId:n});try{const e=yield(0,i.T1)(m.Ay,r),t=e.solution;yield(0,i.yJ)((0,Le.Z$)(e)),yield(0,i.yJ)((0,ve.Q2)({solution:t}))}catch(e){yield(0,i.yJ)((0,Le.An)(e))}}function*Zt(e){const{solutionId:t,groupId:s,courseId:n}=e.payload,r=p.g.apiTeacherSolutionDetails.build({solutionId:t},{groupId:s,courseId:n});try{const e=yield(0,i.T1)(m.Ay,r);yield(0,i.yJ)((0,Le.Z$)(e))}catch(e){yield(0,i.yJ)((0,Le.An)(e))}}function*Yt(){yield(0,i.Q7)([(0,i.p8)(Jt.Q.FETCH_TEACHER_DETAILS_START,Zt),(0,i.p8)(Jt.Q.FETCH_STUDENT_DETAILS_START,Kt)])}var qt=s(91667),$t=s(44498);const Xt=["solutionId","groupId","courseId"];function*es(e){const t=e.payload,{solutionId:s,groupId:n,courseId:r}=t,a=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,Xt),l={status:a.status};null!==a.formulaParamValues&&(l.formulaParamValues=a.formulaParamValues),null!==a.score&&(l.score=a.score);try{const e=p.g.apiGradeSolution.build({solutionId:s},{groupId:n,courseId:r}),t=yield(0,i.T1)(m.Ay,e,{body:JSON.stringify(l),method:"PATCH"}),a=Object.assign({id:s},t);yield(0,i.yJ)((0,Le.Sg)(a)),yield(0,i.yJ)((0,$t.cE)(a)),yield(0,i.yJ)((0,qt.F2)()),yield(0,i.yJ)((0,o.J4)(s))}catch(e){yield(0,i.yJ)((0,qt.Qc)(e)),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*ts(){yield(0,i.p8)(d.Q.SET_GRADE_START,es)}var ss=s(35974),ns=s(81764);function*rs(e){const{groupId:t,taskId:s,limit:n,offset:r=0}=e.payload,a=p.g.apiTeacherTaskSolutions.build({taskId:s},{groupId:t,limit:n,offset:r});try{const e=yield(0,i.T1)(m.Ay,a);yield(0,i.yJ)((0,ss.Dx)(e)),yield(0,i.yJ)((0,ve.ao)(s,e.statusCounter))}catch(e){yield(0,i.yJ)((0,ss.Xp)(e))}}function*as(){yield(0,i.p8)(ns.Q.FETCH_SOLUTIONS_INFO_START,rs)}var is=s(35300),os=s(20966);function*ls(e){const{groupId:t,taskId:s,lessonId:n,courseId:r,limit:a,studentFullName:o}=e.payload,l=p.g.apiTeacherTaskNoSolutions.build({},{groupId:t,taskId:s,lessonId:n,courseId:r,limit:a,studentFullName:o});try{const e=yield(0,i.T1)(m.Ay,l);yield(0,i.yJ)((0,os.$e)(e))}catch(e){yield(0,i.yJ)((0,os.tF)(e))}}function*cs(){yield(0,i.p8)(is.Q.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START,ls)}var us=s(92824);function*ds(e){const t=p.g.apiTeacherSolutionList.build({},e.payload);try{const e=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,$t.rX)(e))}catch(e){yield(0,i.yJ)((0,$t.Jb)(e))}}function*ms(){yield(0,i.p8)(us.Q.FETCH_TEACHER_SOLUTIONS_START,ds)}var ps=s(27656);function*hs(e){const{solutionId:t}=e.payload;try{const e=p.g.apiRejudgeSolution.build({solutionId:t});yield(0,i.T1)(m.Ay,e,{method:"POST"}),yield(0,i.yJ)(ps.s.success()),yield(0,i.yJ)((0,o.J4)(t))}catch(e){yield(0,i.yJ)(ps.s.failure(e)),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*Es(){yield(0,i.p8)((0,b.getType)(ps.s.request),hs)}var gs=s(34946),ys=s(50632);const fs=e=>e.substr((Math.max(0,e.lastIndexOf("."))||1/0)+1);var Ss=s(77506),bs=s(57330),vs=s(5802),Ns=s(74567);function*Is(e){const{solutionId:t,taskId:s,file:n,maxSize:r,shouldShowSuccessMessage:a=!1,shouldDisableReadonly:l=!1,sendWay:u,groupId:d,courseId:E,routeParams:y}=e.payload,f=p.g.apiSendSolution.build({solutionId:t});if(0===n.size)return yield(0,i.yJ)((0,c.z)(Oe.YG)),void(yield(0,i.yJ)((0,ys.$M)()));if(n.size>r)return yield(0,i.yJ)((0,c.z)((0,Oe.LR)(r))),void(yield(0,i.yJ)((0,ys.$M)()));const S=fs(n.name),b="solution.".concat(S);try{const e=new FormData;e.append("file",new Blob([n],{type:(0,Ns.DQ)(b)}),b),yield(0,i.T1)(m.Ay,f,{method:"POST",body:e,excludeDefaultHeaders:!0});const r=!(yield(0,i.Lt)(Ss.a));if(yield(0,i.yJ)((0,ys.TU)({solutionId:t,taskId:s})),yield(0,i.yJ)((0,o.Ql)({solutionId:t,selectLatestSubmission:r,groupId:d,courseId:E})),l&&(yield(0,i.yJ)((0,_e.n3)(!0))),a&&(yield(0,i.yJ)((0,c.z)(Oe.IU))),y){const e={uid:yield(0,i.Lt)(gs.yZ),group_id:y.groupId,lesson_id:y.lessonId,tasks_id:y.taskId,solutions_id:y.solutionId};switch(u){case bs.V.FROM_EDITOR:(0,vs.n_)("CodeEditorSolution",e);break;case bs.V.FROM_FILE:(0,vs.n_)("FileSolution",e)}}let p=yield g({payload:{solutionId:t,groupId:d,courseId:E,selectLatestSubmission:r}});p.latestSubmission||(yield(0,A.cb)(2e3),p=yield g({payload:{solutionId:t,groupId:d,courseId:E,selectLatestSubmission:r}})),p.latestSubmission&&(yield(0,i.yJ)((0,h.F)(p.latestSubmission)))}catch(e){switch(yield(0,i.yJ)((0,ys.$M)(e)),e.code){case"400_file_is_empty":yield(0,i.yJ)((0,c.z)(Oe.YG));break;case"400_task_deadline_expired":yield(0,i.yJ)((0,c.z)(Oe.ac));break;case"400_solution_symbols_max_length_exceeded":yield(0,i.yJ)((0,c.z)(Oe.ES));break;default:yield(0,i.yJ)((0,c.z)(Oe.$7))}}finally{yield Kt({payload:{solutionId:t,groupId:d,courseId:E}})}}function*Ts(){yield(0,i.Q7)([(0,i.p8)(bs.Q.SEND_SOLUTION_START,Is)])}var ks=s(3576),Cs=s(25762);function*ws(e){const{problemLinkId:t,groupId:s}=e,n=p.g.apiTeacherProblemSolutions.build({},{problemLinkId:t.toString(),groupId:s.toString()});try{const e=yield(0,i.T1)(m.Ay,n);yield(0,i.yJ)((0,ks.mn)(e))}catch(e){yield(0,i.yJ)((0,ks.iG)(e))}}function*As(e){const{problemLinkId:t,groupId:s,solutionId:n}=e;if(yield ws((0,ks.Wh)(t,s)),!Number.isNaN(n))try{const e=p.g.apiProblemDetails.build({},{solutionId:n.toString()}),t=yield(0,i.T1)(m.Ay,e);yield(0,i.yJ)((0,ks.m2)(t))}catch(e){yield(0,i.yJ)((0,ks.KT)(e))}}function*Os(){yield(0,i.p8)(Cs.Q.FETCH_PROBLEM_SOLUTIONS_START,ws),yield(0,i.p8)(Cs.Q.FETCH_PROBLEM_DETAILS,As)}function*Rs(){yield(0,i.Q7)([Yt(),ts(),as(),cs(),ms(),Es(),Ts(),Os()])}var _s=s(96338),Ls=s(76200);const Ms=["role"];function*Ps(e){const t=e.payload,{role:s}=t,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,Ms),r=p.g.apiP2PReviewList.build({role:s},n);try{const e=yield(0,i.T1)(m.Ay,r);yield(0,i.yJ)((0,Ls.q8)(e))}catch(e){yield(0,i.yJ)((0,Ls.Ox)(e))}}function*xs(){yield(0,i.p8)(_s.Q.FETCH_P2P_REVIEWS_START,Ps)}var Ds=s(69134),Fs=s(15100);function*zs(e){const t=p.g.apiP2PReviewDetails.build(e.payload);try{const e=yield(0,i.T1)(m.Ay,t);yield(0,i.yJ)((0,Fs.ec)(e))}catch(e){yield(0,i.yJ)((0,Fs.Hl)(e))}}function*js(){yield(0,i.Q7)([(0,i.p8)(Ds.Q.FETCH_P2P_REVIEW_DETAILS_START,zs)])}var Us=s(93601),Hs=s(8599);const Qs=["reviewId","role"];function*Vs(e){const t=e.payload,{reviewId:s,role:n}=t,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,Qs);try{const e=p.g.apiP2PReviewGrade.build({reviewId:s,role:n}),t=yield(0,i.T1)(m.Ay,e,{body:JSON.stringify(r),method:"PATCH"}),a=Object.assign({id:s},t);yield(0,i.yJ)((0,Fs.dw)(a)),yield(0,i.yJ)((0,Ls.d_)(a)),yield(0,i.yJ)((0,Us.yR)())}catch(e){yield(0,i.yJ)((0,Us.jP)(e)),yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*Gs(){yield(0,i.p8)(Hs.Q.SET_GRADE_START,Vs)}function*Bs(){yield(0,i.Q7)([xs(),js(),Gs()])}var Ws=s(28347),Js=s(79405);function*Ks(e){const{status:t,year:s}=e.payload;try{const e=p.g.apiMyCourses.build({},{status:t,year:s}),n=yield(0,i.T1)(m.Ay,e);yield(0,i.yJ)((0,Js.E4)(n))}catch(e){yield(0,i.yJ)((0,c.z)({i18n:(0,R.T$)(e),type:u.V.ERROR}))}}function*Zs(){yield(0,i.Q7)([(0,i.p8)(Ws.Q.FETCH_COURSES,Ks)])}const Ys={metadata:new _.s("/api/files/:fileId"),sourceCode:new _.s("/api/files/:fileId/text-content")};var qs=s(66136);function*$s(e){const{fileId:t}=e.payload,s=Ys.sourceCode.build({fileId:t});try{const e=yield(0,i.T1)(fetch,s);if(!e.ok){let s="500_internal_server_error",n="Internal Server Error";return 0!==e.status&&({code:s,message:n}=yield e.json()),void(yield(0,i.yJ)(qs.R.failure({fileId:t,error:new gt.LG(e.status,s,n,{fileId:t})})))}const n=yield e.text();yield(0,i.yJ)(qs.R.success({fileId:t,sourceCode:n}))}catch(e){yield(0,i.yJ)(qs.R.failure({fileId:t,error:e}))}}function*Xs(){yield(0,i.jP)((0,b.getType)(qs.R.request),$s)}var en=s(66332);new _.s("/api/v1/accounts/admission-info/season/"),new _.s("/api/v1/accounts/interviews/venues/"),new _.s("/api/v1/accounts/admission-info/season/");const tn={venues:new _.s("/api/admission/venues/:cityId/"),season:new _.s("/api/admission/season/")};var sn=s(20009),nn=s(15420),rn=s(11102),an=s(1639);const on=/\s+/g,ln=e=>{const[t,s="",...n]=e.replace(on," ").split(/\s/g);return{firstName:s,middleName:n.join(" "),lastName:t}},cn=/\S/,un=12,dn=(e,t)=>(0,i.Zy)((function*(){for(;;){const s=yield(0,i.s)(e);yield(0,i.T1)(t,s)}}));function*mn(e){const{city:t,venue:s}=e;if(t&&s){yield(0,i.yJ)((0,rn.rs)(!0));const e=yield(0,i.T1)(m.Ay,tn.venues.build({cityId:t.id}));yield(0,i.yJ)((0,rn.rs)(!1)),yield(0,i.yJ)((0,rn.De)(e))}}function pn(e){let{callback:t}=e;return function*(){const e=yield function*(){const e=yield(0,i.Lt)(an.Km),t=yield(0,i.Lt)(an.nC),s=yield(0,i.Lt)(an.Jl),n=yield(0,i.Lt)(an.rd);return{venue:null===e,phone:t?t.length!==un:""!==t,name:!cn.exec(n),publicKey:s?!/^ssh\-rsa/.test(s):""!==s}}();if(!Object.values(e).every((e=>!1===e)))return void(yield(0,i.yJ)((0,rn.i9)(e)));const s=yield(0,i.Lt)(an.Km),n=yield(0,i.Lt)(an.nC),r=yield(0,i.Lt)(an.Jl);try{s&&(yield(0,i.T1)(m.Ay,tn.season.build(),{method:"PATCH",body:JSON.stringify({venueId:s.id})}));const e=ln(yield(0,i.Lt)(an.rd));yield(0,i.T1)(m.Ay,sn.X.profile.build(),{method:"PATCH",body:JSON.stringify({last_name:e.lastName,middle_name:e.middleName,first_name:e.firstName,phone:n,publicKey:r})}),yield(0,i.yJ)((0,rn.xT)()),yield(0,i.yJ)((0,c.z)(Oe.aM)),t&&t()}catch(e){yield(0,i.yJ)((0,c.z)(Oe.OX))}}()}function*hn(){yield(0,i.Q7)([(0,i.jP)(nn.Q.START_EDIT,mn),dn(nn.Q.SAVE_PROFILE,pn)])}const En={candidateInfo:new _.s("/api/new-candidate")};var gn=s(70027),yn=s(68575),fn=s(37996),Sn=s(47933);const bn={name:gn.U.VALID,lastname:gn.U.VALID,middlename:gn.U.VALID,birthDate:gn.U.VALID,sex:gn.U.VALID,schoolName:gn.U.VALID,grade:gn.U.VALID,phoneNumber:gn.U.VALID,telegram:gn.U.VALID,selectedRegion:gn.U.VALID,selectedDistrict:gn.U.VALID,selectedLocation:gn.U.VALID,selectedVenue:gn.U.VALID,parentName:gn.U.VALID,parentLastname:gn.U.VALID,parentMiddlename:gn.U.VALID,parentEmail:gn.U.VALID,parentPhoneNumber:gn.U.VALID,agreementGDPR:gn.U.VALID,agreementOfEducationalProject:gn.U.VALID,agreementUsingService:gn.U.VALID,agreementCompetitionConditions:gn.U.VALID,agreementReceiveMail:gn.U.VALID},vn={name:"",lastname:"",middlename:"",birthDate:void 0,sex:void 0,hasMiddlename:!0,schoolName:"",gradeOptions:[],grade:void 0,phoneNumber:"",telegram:"",hasTelegram:!0,email:"",regions:[],districts:{},locations:{},venues:{},selectedRegion:void 0,selectedDistrict:void 0,selectedLocation:void 0,selectedVenue:void 0,parentName:"",parentLastname:"",parentMiddlename:"",hasParentMiddlename:!0,parentEmail:"",parentPhoneNumber:"",agreementGDPR:!1,agreementOfEducationalProject:!1,agreementUsingService:!1,agreementCompetitionConditions:!1,agreementReceiveMail:!0,fieldsMap:{schoolName:!1,grade:!1,venue:!1,parentData:!1,agreementGDPR:!1,agreementOfEducationalProject:!1,agreementUsingService:!1,agreementReceiveMail:!1,infoUnderForm:!1},validationStatusMap:bn,submittingStatus:null,fetchError:null};function*Nn(e){const t=yield(0,i.T1)(In);if(yield(0,i.yJ)((0,Sn.Cp)(t)),!Boolean(Object.values(t).every((e=>e===gn.U.VALID))))return void(yield(0,i.yJ)((0,Sn.U9)()));const s=yield(0,i.Lt)(fn.tg),n=En.candidateInfo.template,r=JSON.stringify(Object.assign({},e.payload,s));try{yield(0,i.T1)((()=>(0,m.Ay)(n,{method:"POST",body:r}))),yield(0,i.yJ)((0,Sn.G)())}catch(e){yield(0,i.yJ)((0,Sn.U9)()),yield(0,i.yJ)((0,c.z)({i18n:{id:e.code||"submit-failed",keyset:"admission-form"},type:u.V.ERROR}))}}function*In(){const e=bn,t=yield(0,i.Lt)(fn.sr),s=yield(0,i.Lt)(fn.EI),n=yield(0,i.Lt)(fn.an),r=yield(0,i.Lt)(fn.P),a=yield(0,i.Lt)(fn.dY),o=yield(0,i.Lt)(fn.iD),l=yield(0,i.Lt)(fn.rc),c=yield(0,i.Lt)(fn.CP),u=yield(0,i.Lt)(fn.uz),d=yield(0,i.Lt)(fn.uO);if(e.name=(0,yn.kb)(s),e.lastname=(0,yn.kb)(n),e.middlename=a?(0,yn.kb)(r):gn.U.VALID,e.birthDate=(0,yn.Ws)(o),e.phoneNumber=(0,yn.Q7)(c),e.telegram=d?(0,yn.CK)(u):gn.U.VALID,e.sex=void 0===l?gn.U.EMPTY_OPTION:gn.U.VALID,t.schoolName){const t=yield(0,i.Lt)(fn.Wf);e.schoolName=(0,yn.Se)(t)}if(t.grade){const t=yield(0,i.Lt)(fn.gn);e.grade=void 0===t?gn.U.EMPTY_OPTION:gn.U.VALID}if(t.venue){const t=yield(0,i.Lt)(fn.wj),s=yield(0,i.Lt)(fn.Ly),n=yield(0,i.Lt)(fn.EQ),r=yield(0,i.Lt)(fn.Km),a=yield(0,i.Lt)(fn._m),o=yield(0,i.Lt)(fn.ug),l=yield(0,i.Lt)(fn.TT);e.selectedRegion=(0,yn.Ug)(t,a),e.selectedDistrict=(0,yn.Y5)(s,o),e.selectedLocation=(0,yn.Rq)(n,l),e.selectedVenue=(0,yn.rN)(r)}if(t.parentData){const t=yield(0,i.Lt)(fn._L),s=yield(0,i.Lt)(fn.in),n=yield(0,i.Lt)(fn.x3),r=yield(0,i.Lt)(fn.dM),a=yield(0,i.Lt)(fn.YS),o=yield(0,i.Lt)(fn.$G);e.parentName=(0,yn.kb)(t),e.parentLastname=(0,yn.kb)(s),e.parentMiddlename=r?(0,yn.kb)(n):gn.U.VALID,e.parentPhoneNumber=(0,yn.Q7)(a),e.parentEmail=(0,yn.DT)(o)}if(t.agreementGDPR){const t=yield(0,i.Lt)(fn.c6);e.agreementGDPR=t?gn.U.VALID:gn.U.EMPTY_VALUE}if(t.agreementOfEducationalProject){const t=yield(0,i.Lt)(fn.Kz);e.agreementOfEducationalProject=t?gn.U.VALID:gn.U.EMPTY_VALUE}if(t.agreementUsingService){const t=yield(0,i.Lt)(fn.aO);e.agreementUsingService=t?gn.U.VALID:gn.U.EMPTY_VALUE}const m=yield(0,i.Lt)(fn.cX);return e.agreementCompetitionConditions=m?gn.U.VALID:gn.U.EMPTY_VALUE,t.agreementReceiveMail&&(e.agreementReceiveMail=gn.U.VALID),e}function*Tn(){yield(0,i.jP)(gn.Q.START_SUBMIT,Nn)}var kn=s(88998),Cn=s(36612);function*wn(e){const{courseId:t,groupId:s}=e.payload,n=p.g.apiCourseProgress.build({courseId:t,role:"student"},{groupId:s});try{const e=yield(0,i.T1)(m.Ay,n);yield(0,i.yJ)((0,kn.TU)(e))}catch(e){yield(0,i.yJ)((0,kn.QZ)(e))}}function*An(){yield(0,i.Q7)([(0,i.p8)(Cn.Q.FETCH_COURSE_STUDENT_PROGRESS_START,wn)])}function*On(){yield(0,i.Q7)([S(),C(),H(),G(),Xs(),Y(),Z(),at(),X(),ne(),dt(),At(),Mt(),Wt(),We(),Rs(),Bs(),(0,en.s)(),Tn(),hn(),An(),Zs()])}var Rn=s(16854);const _n=(0,A.Ay)({onError:e=>{Rn.W.captureException(e)}});var Ln=s(97520);function Mn(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}const Pn={commentMap:{},downloadStatus:null,downloadStatusError:null,uploadStatus:null},xn={fetchError:null,fetchStatus:null,courseDetails:null,courseBanners:null,courseLogo:null};var Dn=s(23655),Fn=s.n(Dn),zn=s(89490),jn=s(89685),Un=s(42325);const Hn={fetchStatus:null,fetchError:null,maxRating:0,maxBonusScore:0,useBonusScore:!1,tags:{},slots:[],students:{},attendance:{},sortedStudentIds:[],sortBy:O.u.NAME,sortOrder:jn.j.ASCENDING};function Qn(e,t,s){return Fn()(Object.values(e),t,s).map((e=>e.id))}function Vn(e,t){if(!(0,Un.Io)(e))return e;const{studentId:s,eventId:n,status:r}=t,a=Object.assign({},e.students);return a[s].attendance[n]=r,Object.assign({},e,{students:a})}var Gn=s(3769);const Bn={selectedTask:null,selectedSolution:null};var Wn=s(71542);const Jn={courseMap:{},allIds:[],years:{}},Kn={filters:null,fetchError:null,fetchStatus:null},Zn={groupMap:{}},Yn={fetchError:null,fetchStatus:null,progressPreview:null};var qn=s(31833),$n=s(89970);const Xn={fetchError:null,fetchStatus:null,lessonPreview:null,progressTable:null,referenceAttendance:null,tableSortOptions:{field:qn.u.NAME,order:jn.j.ASCENDING}};function er(e,t,s){return Fn()(Object.values(e),t,s).map((e=>e.id))}function tr(e,t){if(!e.progressTable)return e;const s=Object.assign({},e.progressTable);return s.studentsMap[t.studentId].attendance=t.status,Object.assign({},e,{progressTable:s})}const sr={lessonDetails:null,lessonDetailsFetchError:null,lessonDetailsFetchStatus:null,visibilityFetchStatus:null},nr={fetchError:null,fetchStatus:null,list:[],listFilter:s(72420).rY.ShowAll},rr=(0,b.createReducer)(nr).handleAction(ue.FG,((e,t)=>Object.assign({},e,{listFilter:t.payload.filter}))).handleAction([ue.Lu.request,ue.CA.request],(e=>Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING}))).handleAction([ue.Lu.success,ue.CA.success],((e,t)=>Object.assign({},e,{fetchError:null,fetchStatus:Me.L.SUCCESS,list:t.payload}))).handleAction([ue.Lu.failure,ue.CA.failure],((e,t)=>Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL}))).handleAction(ue.rc,(()=>nr)).handleAction(ue.DA,((e,t)=>Object.assign({},e,{list:e.list.map((e=>e.id===t.payload.lessonId?Object.assign({},e,{webinar:t.payload.webinar}):e))}))),ar={startingStatus:null,startingError:null,finishingStatus:null,finishingError:null},ir={timer:null,fetchError:null,fetchStatus:null},or={webinar:null,fetchError:null,fetchStatus:null},lr={details:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.Q.FETCH_STUDENT_LESSON_DETAILS_START:case ae.Q.FETCH_TEACHER_LESSON_DETAILS_START:return function(e){return Object.assign({},e,{lessonDetailsFetchStatus:Me.L.PENDING,lessonDetailsFetchError:null})}(e);case ae.Q.FETCH_LESSON_DETAILS_SUCCESS:return function(e,t){return Object.assign({},e,{lessonDetails:t.payload,lessonDetailsFetchStatus:Me.L.SUCCESS,lessonDetailsFetchError:null})}(e,t);case ae.Q.FETCH_LESSON_DETAILS_FAIL:return function(e,t){return Object.assign({},e,{lessonDetailsFetchStatus:Me.L.FAIL,lessonDetailsFetchError:t.payload})}(e,t);case ae.Q.CLEAR_LESSON_DETAILS:return sr;case ae.Q.CHANGE_LESSON_VISIBILITY_START:return function(e){return Object.assign({},e,{visibilityFetchStatus:Me.L.PENDING})}(e);case ae.Q.CHANGE_LESSON_VISIBILITY_SUCCESS:return function(e,t){const{isHidden:s}=t.payload;return e.lessonDetails?Object.assign({},e,{lessonDetails:Object.assign({},e.lessonDetails,{isHidden:s}),visibilityFetchStatus:Me.L.SUCCESS}):Object.assign({},e)}(e,t);case ae.Q.CHANGE_LESSON_VISIBILITY_FAIL:return function(e){return Object.assign({},e,{visibilityFetchStatus:Me.L.FAIL})}(e);case ae.Q.PATCH_DETAILS:return function(e,t){const s=e.lessonDetails;return s?Object.assign({},e,{lessonDetails:Object.assign({},s,t.payload)}):e}(e,t);default:return e}},list:rr,timer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye.Q.FETCH_TIMER_START:return function(e){return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING})}(e);case Ye.Q.FETCH_TIMER_SUCCESS:return function(e,t){return Object.assign({},e,{timer:t.payload,fetchError:null,fetchStatus:Me.L.SUCCESS})}(e,t);case Ye.Q.FETCH_TIMER_FAIL:return function(e,t){return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL})}(e,t);case Ye.Q.CLEAR_TIMER:return ir;default:return e}},test:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case(0,b.getType)(Se.J.request):return Object.assign({},e,{startingStatus:Me.L.PENDING,startingError:null});case(0,b.getType)(Se.J.success):return Object.assign({},e,{startingStatus:Me.L.SUCCESS,startingError:null});case(0,b.getType)(Se.J.failure):return Object.assign({},e,{startingStatus:Me.L.FAIL,startingError:t.payload});case(0,b.getType)(Se.K.request):return Object.assign({},e,{finishingStatus:Me.L.PENDING,finishingError:null});case(0,b.getType)(Se.K.success):return Object.assign({},e,{finishingStatus:Me.L.SUCCESS,finishingError:null});case(0,b.getType)(Se.K.failure):return Object.assign({},e,{finishingStatus:Me.L.FAIL,finishingError:t.payload});default:return e}},webinar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case et.Q.START_WEBINAR_START:case et.Q.GET_WEBINAR_START:return function(e){return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING})}(e);case et.Q.START_WEBINAR_SUCCESS:case et.Q.GET_WEBINAR_SUCCESS:return function(e,t){return Object.assign({},e,{webinar:t.payload,fetchError:null,fetchStatus:Me.L.SUCCESS})}(e,t);case et.Q.START_WEBINAR_FAIL:case et.Q.GET_WEBINAR_FAIL:return function(e,t){return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL})}(e,t);default:return e}}},cr=(0,n.HY)(lr),ur={materials:[],materialsFetchError:null,materialsFetchStatus:null,detailedMaterialInfo:null,detailsFetchError:null,detailsFetchStatus:null};function dr(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}const mr={notificationMap:{},notificationIds:[],fetchStatus:null,fetchError:null,unreadCount:0,isConsistent:!0};function pr(e,t,s){const n=e.notificationMap[t];return n?Object.assign({},e,{notificationMap:Object.assign({},e.notificationMap,{[t]:Object.assign({},n,s)})}):e}function hr(e,t){const s=Object.assign({},e.notificationMap);return Object.keys(s).forEach((e=>{s[e]=Object.assign({},s[e],t)})),Object.assign({},e,{notificationMap:s})}const Er=[];var gr=s(47920);const yr={courseDetails:null,currentStudyPeriod:null,initialEvents:[],initialUnassignedEvents:[],currentOrPassedSchedulePlan:null,futureSchedulePlan:null,revisionId:null,generateError:null,generateStatus:null,pageLoadError:null,pageLoadStatus:null,scheduleLoadError:null,scheduleLoadStatus:null,saveError:null,saveStatus:null,actions:[],editedEvents:[],unassignedEvents:[]};let fr=-1;const Sr=["id"];function br(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}function vr(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}const Nr={detailsMap:{},fetchError:null,fetchStatus:null};function Ir(e,t){return Object.assign({},e,{fetchError:null,fetchStatus:t?Me.L.PENDING:e.fetchStatus})}const Tr={fetchError:null,fetchStatus:null},kr={info:null,fetchError:null,fetchStatus:null},Cr={studentsWithoutSolutions:null,fetchError:null,fetchStatus:null},wr=["id"],Ar={count:null,list:[],fetchStatus:null,fetchError:null},Or={fetchError:null,fetchStatus:null},Rr={fetchStatus:null},_r={solutionInfo:null,fetchError:null,fetchStatus:null,problemDetails:null,fetchProblemDetailsStatus:null,fetchProblemDetailsError:null};var Lr=s(52060);const Mr=(0,b.createStandardAction)("[solutions] create solution draft")(),Pr=(0,b.createStandardAction)("[solutions] update solution draft")(),xr=(0,b.createStandardAction)("[solutions] delete solution draft")();function Dr(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function Fr(e,t){const{taskId:s}=t.payload;if(!e.entities[s])return e;const n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e.entities,[s].map(Dr));return me.I.set(pe.Z.SolutionDrafts,n),Object.assign({},e,{entities:n})}const zr=(0,b.createReducer)({entities:{}}).handleAction(Lr.j,(function(e){const t=me.I.get(pe.Z.SolutionDrafts)||{};return Object.assign({},e,{entities:t})})).handleAction(Mr,(function(e,t){const{taskId:s}=t.payload,n=Object.assign({},e.entities,{[s]:{taskId:s,content:"",timestamp:Date.now()}});return me.I.set(pe.Z.SolutionDrafts,n),Object.assign({},e,{entities:n})})).handleAction(Pr,(function(e,t){const{taskId:s,content:n}=t.payload,r=Object.assign({},e.entities,{[s]:Object.assign({},e.entities[s],{content:n})});return me.I.set(pe.Z.SolutionDrafts,r),Object.assign({},e,{entities:r})})).handleAction(xr,Fr).handleAction(bs.Q.SEND_SOLUTION_SUCCESS,Fr);var jr=s(74733),Ur=s.n(jr),Hr=s(99777);const Qr={selectedSubmission:null},Vr={details:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt.Q.FETCH_TEACHER_DETAILS_START:return Ir(e);case Jt.Q.FETCH_STUDENT_DETAILS_START:const{shouldChangeFetchStatus:s=!0}=t.payload;return Ir(e,s);case Jt.Q.FETCH_DETAILS_SUCCESS:return function(e,t){const{solution:s}=t.payload,n=Object.assign({},e.detailsMap,{[s.id]:s});return Object.assign({},e,{detailsMap:n,fetchError:null,fetchStatus:Me.L.SUCCESS})}(e,t);case Jt.Q.FETCH_DETAILS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchError:s,fetchStatus:Me.L.FAIL})}(e,t);case Jt.Q.CLEAR_DETAILS:return function(e,t){const s=t.payload,n=br(e.detailsMap,[s].map(vr));return Object.assign({},e,{detailsMap:n,fetchError:null,fetchStatus:null})}(e,t);case Jt.Q.PATCH_DETAILS:case l.Q.FETCH_STUDENT_COMMENTS_SUCCESS:case l.Q.FETCH_TEACHER_COMMENTS_SUCCESS:return function(e,t){const s=t.type===Jt.Q.PATCH_DETAILS?t.payload:t.payload.solutionPreview,{id:n}=s,r=br(s,Sr),a=e.detailsMap[n];if(!a)return e;const i=Object.assign({},a);for(const e of Object.keys(r))i[e]=r[e];return Object.assign({},e,{detailsMap:Object.assign({},e.detailsMap,{[n]:i})})}(e,t);default:return e}},grade:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.Q.SET_GRADE_START:return function(e){return Object.assign({},e,{fetchStatus:Me.L.PENDING,fetchError:null})}(e);case d.Q.SET_GRADE_SUCCESS:return function(e){return Object.assign({},e,{fetchStatus:Me.L.SUCCESS})}(e);case d.Q.SET_GRADE_FAIL:return function(e,t){return Object.assign({},e,{fetchStatus:Me.L.FAIL,fetchError:t.payload})}(e,t);default:return e}},info:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ns.Q.FETCH_SOLUTIONS_INFO_START:return function(e){return Object.assign({},e,{info:null,fetchError:null,fetchStatus:Me.L.PENDING})}(e);case ns.Q.FETCH_SOLUTIONS_INFO_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{info:s,fetchError:null,fetchStatus:Me.L.SUCCESS})}(e,t);case ns.Q.FETCH_SOLUTIONS_INFO_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchError:s,fetchStatus:Me.L.FAIL})}(e,t);case ns.Q.CLEAR_SOLUTIONS_INFO:return kr;default:return e}},studentsWithoutSolutions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case is.Q.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START:return function(e){return Object.assign({},e,{studentsWithoutSolutions:null,fetchError:null,fetchStatus:Me.L.PENDING})}(e);case is.Q.FETCH_STUDENTS_WITHOUT_SOLUTIONS_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{studentsWithoutSolutions:s,fetchError:null,fetchStatus:Me.L.SUCCESS})}(e,t);case is.Q.FETCH_STUDENTS_WITHOUT_SOLUTIONS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchError:s,fetchStatus:Me.L.FAIL})}(e,t);case is.Q.CLEAR_STUDENTS_WITHOUT_SOLUTIONS:return Cr;default:return e}},list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case us.Q.FETCH_TEACHER_SOLUTIONS_START:return function(e){return Object.assign({},e,{fetchStatus:Me.L.PENDING,fetchError:null})}(e);case us.Q.FETCH_SOLUTIONS_SUCCESS:return function(e,t){const{count:s,results:n}=t.payload;return Object.assign({},e,{count:s,list:n,fetchStatus:Me.L.SUCCESS,fetchError:null})}(e,t);case us.Q.FETCH_SOLUTIONS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchStatus:Me.L.FAIL,fetchError:s})}(e,t);case us.Q.CLEAR_SOLUTIONS:return Ar;case us.Q.PATCH_SOLUTION:case l.Q.FETCH_STUDENT_COMMENTS_SUCCESS:case l.Q.FETCH_TEACHER_COMMENTS_SUCCESS:return function(e,t){const s=t.type===us.Q.PATCH_SOLUTION?t.payload:t.payload.solutionPreview,{id:n}=s,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(s,wr),a=[...e.list],i=a.find((e=>e.id===n));if(!i)return e;for(const e of Object.keys(r))i[e]=r[e];return Object.assign({},e,{list:a})}(e,t);default:return e}},rejudge:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case(0,b.getType)(ps.s.request):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING});case(0,b.getType)(ps.s.success):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.SUCCESS});case(0,b.getType)(ps.s.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL});default:return e}},send:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr;switch((arguments.length>1?arguments[1]:void 0).type){case bs.Q.SEND_SOLUTION_START:return function(e){return Object.assign({},e,{fetchStatus:Me.L.PENDING})}(e);case bs.Q.SEND_SOLUTION_SUCCESS:return function(e){return Object.assign({},e,{fetchStatus:Me.L.SUCCESS})}(e);case bs.Q.SEND_SOLUTION_FAIL:return function(e){return Object.assign({},e,{fetchStatus:Me.L.FAIL})}(e);default:return e}},drafts:zr,interface:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Hr.Q.SELECT_SUBMISSION:return function(e,t){return Object.assign({},e,{selectedSubmission:t.payload})}(e,t);case Jt.Q.FETCH_DETAILS_SUCCESS:return function(e,t){var s;const n=null==(s=me.I.get(pe.Z.SavedSolutions))?void 0:s[t.payload.solution.id];return Object.assign({},e,{selectedSubmission:Ur()(null==n?void 0:n.code)?t.payload.solution.latestSubmission:null})}(e,t);case l.Q.FETCH_STUDENT_COMMENTS_SUCCESS:case l.Q.FETCH_TEACHER_COMMENTS_SUCCESS:return function(e,t){const{selectedSubmission:s}=e;if(!s)return e;const n=t.payload.comments.find((e=>e.submission&&e.submission.id===s.id));return n?Object.assign({},e,{selectedSubmission:Object.assign({},s,n.submission)}):e}(e,t);default:return e}},problemDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Cs.Q.FETCH_PROBLEM_SOLUTIONS_START:return Object.assign({},e,{solutionInfo:null,fetchError:null,fetchStatus:Me.L.PENDING});case Cs.Q.FETCH_PROBLEM_DETAILS:return Object.assign({},e,{fetchError:null,fetchProblemDetailsStatus:Me.L.PENDING});case Cs.Q.SET_PROBLEM_SOLUTIONS:{const{solutionInfo:s}=t;return Object.assign({},e,{solutionInfo:s,fetchError:null,fetchStatus:Me.L.SUCCESS})}case Cs.Q.FETCH_PROBLEM_SOLUTIONS_ERROR:{const{error:s}=t;return Object.assign({},e,{fetchError:s,fetchStatus:Me.L.FAIL})}case Cs.Q.SET_PROBLEM_DETAILS:{const{problemDetails:s}=t;return Object.assign({},e,{problemDetails:s,fetchProblemDetailsError:null,fetchProblemDetailsStatus:Me.L.SUCCESS})}case Cs.Q.FETCH_PROBLEM_DETAILS_ERROR:{const{error:s}=t;return Object.assign({},e,{fetchProblemDetailsError:s,fetchProblemDetailsStatus:Me.L.FAIL})}case Cs.Q.CLEAR:return _r;default:return e}}},Gr=(0,n.HY)(Vr),Br=["id"],Wr={count:null,list:[],fetchStatus:null,fetchError:null},Jr=["id"];function Kr(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}function Zr(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}const Yr={detailsMap:{},fetchError:null,fetchStatus:null},qr={fetchError:null,fetchStatus:null},$r={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _s.Q.FETCH_P2P_REVIEWS_START:return function(e){return Object.assign({},e,{fetchStatus:Me.L.PENDING,fetchError:null})}(e);case _s.Q.FETCH_P2P_REVIEWS_SUCCESS:return function(e,t){const{count:s,results:n}=t.payload;return Object.assign({},e,{count:s,list:n,fetchStatus:Me.L.SUCCESS,fetchError:null})}(e,t);case _s.Q.FETCH_P2P_REVIEWS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchStatus:Me.L.FAIL,fetchError:s})}(e,t);case _s.Q.CLEAR_P2P_REVIEWS:return Wr;case _s.Q.PATCH_P2P_REVIEW:return function(e,t){const s=t.payload,{id:n}=s,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(s,Br),a=[...e.list],i=a.find((e=>e.id===n));if(!i)return e;for(const e of Object.keys(r))i[e]=r[e];return Object.assign({},e,{list:a})}(e,t);default:return e}},details:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ds.Q.FETCH_P2P_REVIEW_DETAILS_START:return function(e){return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING})}(e);case Ds.Q.FETCH_P2P_REVIEW_DETAILS_SUCCESS:return function(e,t){const{review:s}=t.payload,n=Object.assign({},e.detailsMap,{[s.id]:s});return Object.assign({},e,{detailsMap:n,fetchError:null,fetchStatus:Me.L.SUCCESS})}(e,t);case Ds.Q.FETCH_P2P_REVIEW_DETAILS_DETAILS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchError:s,fetchStatus:Me.L.FAIL})}(e,t);case Ds.Q.CLEAR_P2P_REVIEW_DETAILS:return function(e,t){const s=t.payload,n=Kr(e.detailsMap,[s].map(Zr));return Object.assign({},e,{detailsMap:n,fetchError:null,fetchStatus:null})}(e,t);case Ds.Q.PATCH_P2P_REVIEW_DETAILS:return function(e,t){const s=t.payload,{id:n}=s,r=Kr(s,Jr),a=e.detailsMap[n];if(!a)return e;const i=Object.assign({},a);for(const e of Object.keys(r))i[e]=r[e];return Object.assign({},e,{detailsMap:Object.assign({},e.detailsMap,{[n]:i})})}(e,t);default:return e}},grade:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Hs.Q.SET_GRADE_START:return function(e){return Object.assign({},e,{fetchStatus:Me.L.PENDING,fetchError:null})}(e);case Hs.Q.SET_GRADE_SUCCESS:return function(e){return Object.assign({},e,{fetchStatus:Me.L.SUCCESS})}(e);case Hs.Q.SET_GRADE_FAIL:return function(e,t){return Object.assign({},e,{fetchStatus:Me.L.FAIL,fetchError:t.payload})}(e,t);default:return e}}},Xr=(0,n.HY)($r);var ea=s(90571);const ta={tableName:null,settings:null};function sa(e,t){let s=-1;return{group:e.find((e=>{const n=e.tasks;return s=n.findIndex((e=>e.id===t)),-1!==s})),taskIndex:s}}const na={studentTasks:[],studentTasksCount:0,studentTasksFetchError:null,studentTasksFetchStatus:null,studentTasksUnsolved:[],studentTasksUnsolvedCount:0,studentTasksUnsolvedFetchError:null,studentTasksUnsolvedFetchStatus:null,taskDetails:null,taskDetailsFetchError:null,taskDetailsFetchStatus:null,lessonElementGroups:[],taskGroupsFetchError:null,taskGroupsFetchStatus:null,problemDetails:null,sendingSubmissionStatus:Me.L.SUCCESS,fetchUserAnswerSuccess:null};function ra(e,t){const{id:s,taskId:n,status:r,score:a,latestSubmission:i,updateTime:o,updateTimeForUser:l}=t.payload.solutionPreview,c=[...e.lessonElementGroups];let{taskDetails:u}=e;const{group:d,taskIndex:m}=sa(c,n);return d&&-1!==m&&d.tasks&&(d.tasks[m].solution={id:s,score:a,updateTime:o,updateTimeForUser:l,status:r}),u&&(u=Object.assign({},u),u.latestSubmission=i),Object.assign({},e,{lessonElementGroups:c,taskDetails:u})}const aa={user:void 0},ia=(0,b.createReducer)({sourceCodeMap:{}}).handleAction(Jt.Q.FETCH_DETAILS_SUCCESS,((e,t)=>{const{file:s}=t.payload;return s&&s.sourceCode?Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s.id]:{sourceCode:s.sourceCode,fetchError:null,fetchStatus:Me.L.SUCCESS}})}):e})).handleAction(qs.R.request,((e,t)=>{const{fileId:s}=t.payload;let n=null;return s in e.sourceCodeMap&&({sourceCode:n}=e.sourceCodeMap[s]),Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s]:{sourceCode:n,fetchError:null,fetchStatus:Me.L.PENDING}})})})).handleAction(qs.R.success,((e,t)=>{const{fileId:s,sourceCode:n}=t.payload;return Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s]:{sourceCode:n,fetchError:null,fetchStatus:Me.L.SUCCESS}})})})).handleAction(qs.R.failure,((e,t)=>{const{fileId:s,error:n}=t.payload;let r=null;return s in e.sourceCodeMap&&({sourceCode:r}=e.sourceCodeMap[s]),Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s]:{sourceCode:r,fetchError:n,fetchStatus:Me.L.FAIL}})})}));var oa=s(67929),la=s(45116);const ca={code:"",language:"",isReadonly:!0},ua={isEditing:!1,phone:"",publicKey:"",city:void 0,venue:void 0,venueList:[],username:"",isSaving:!1,isVenuesLoading:!1,errors:{phone:!1,venue:!1,name:!1,publicKey:!1}},da={fetchStatus:null,fetchError:null,maxRating:0,maxBonusScore:0,useBonusScore:!1,students:[]},ma=(0,n.HY)({notifications:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Er,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Q.ADD_NOTIFICATION:return function(e,t){let{payload:s}=t;return[...e,s]}(e,t);case u.Q.REMOVE_NOTIFICATION:return function(e,t){let{payload:s}=t;const n=e.filter((e=>e.id!==s.id));return e.length===n.length?e:n}(e,t);default:return e}},users:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa},courses:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ws.Q.MERGE_COURSES:return Object.assign({},e,{courseMap:Object.assign({},e.courseMap,t.payload.courses.courseMap),allIds:[...new Set([...e.allIds,...t.payload.courses.allIds])]});case Ws.Q.SAVE_COURSES:return Object.assign({},e,{courseMap:t.payload.courses.courseMap,allIds:t.payload.courses.allIds,years:t.payload.courses.years,status:t.payload.courses.status});default:return e}},courseDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case(0,b.getType)(v.Uz.request):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING});case(0,b.getType)(v.Uz.success):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.SUCCESS,courseDetails:t.payload});case(0,b.getType)(v.Uz.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL});case(0,b.getType)(v.NT):return Object.assign({},xn,{courseBanners:e.courseBanners,courseLogo:e.courseLogo});case(0,b.getType)(v.fF):return Object.assign({},e,{courseBanners:t.payload});case(0,b.getType)(v.Re):return Object.assign({},e,{courseBanners:null});case(0,b.getType)(v.Dn):return Object.assign({},e,{courseLogo:t.payload});case(0,b.getType)(v.r9):return Object.assign({},e,{courseLogo:null});default:return e}},courseProgress:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.Q.FETCH_COURSE_PROGRESS_START:return function(e){return Object.assign({},e,{fetchStatus:Me.L.PENDING,fetchError:null})}(e);case O.Q.FETCH_COURSE_PROGRESS_SUCCESS:return function(e,t){return Object.assign({},e,t.payload,{sortedStudentIds:Qn(t.payload.students,e.sortBy,e.sortOrder),fetchStatus:Me.L.SUCCESS,fetchError:null})}(e,t);case O.Q.FETCH_COURSE_PROGRESS_FAIL:return function(e,t){return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL})}(e,t);case O.Q.CLEAR_COURSE_PROGRESS:return Hn;case O.Q.CHANGE_ATTENDANCE_STATUS:return function(e,t){return Vn(e,t.payload)}(e,t);case O.Q.UPDATE_REFERENCE_ATTENDANCE:return function(e,t){if(!(0,Un.Io)(e))return e;const{eventId:s,studentId:n}=t.payload,r=Object.assign({},e.attendance);return r[n][s]=e.students[n].attendance[s],Object.assign({},e,{referenceAttendance:r})}(e,t);case O.Q.RESTORE_ATTENDANCE_FROM_REFERENCE:return function(e,t){if(!(0,Un.Io)(e))return e;const{eventId:s,studentId:n}=t.payload;return Vn(e,{eventId:s,studentId:n,status:e.attendance[n][s]})}(e,t);case O.Q.CHANGE_SORT:return function(e,t){const{sortBy:s,sortOrder:n}=t.payload;return Object.assign({},e,{sortBy:s,sortOrder:n,sortedStudentIds:Qn(e.students,s,n)})}(e,t);case(0,b.getType)(w.gb.request):return function(e,t){const{studentId:s,newScore:n}=t.payload,r=Object.assign({},e.students);return r[s].bonusScore=n,Object.assign({},e,{students:r})}(e,t);case(0,b.getType)(w.gb.success):return function(e,t){const{studentId:s,rating:n,bonusScore:r}=t.payload,a=Object.assign({},e.students);return a[s].rating=n,a[s].bonusScore=r,Object.assign({},e,{students:a})}(e,t);case(0,b.getType)(w.gb.failure):return function(e,t){const{studentId:s,oldScore:n}=t.payload,r=Object.assign({},e.students);return r[s].bonusScore=n,Object.assign({},e,{students:r})}(e,t);case(0,b.getType)(w.em.request):return function(e,t){const{studentId:s}=t.payload,n=Object.assign({},e.students);return n[s].status=zn.a.ToBeExpelled,Object.assign({},e,{students:n})}(e,t);case(0,b.getType)(w.em.success):return function(e,t){const{studentId:s}=t.payload,n=Object.assign({},e.students);return n[s].status=zn.a.Expelled,Object.assign({},e,{students:n})}(e,t);case(0,b.getType)(w.em.failure):return function(e,t){const{studentId:s,oldStatus:n}=t.payload,r=Object.assign({},e.students);return r[s].status=n,Object.assign({},e,{students:r})}(e,t);default:return e}},courseTasks:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gn.Q.CLEAR_SELECTED:return function(e){return Object.assign({},e,{selectedTask:null,selectedSolution:null})}(e);case Gn.Q.SET_SELECTED_TASK:return function(e,t){return Object.assign({},e,{selectedTask:t.payload})}(e,t);case Gn.Q.SET_SELECTED_SOLUTION:return function(e,t){return Object.assign({},e,{selectedSolution:t.payload})}(e,t);default:return e}},courseVariants:Wn.Ay,groups:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ws.Q.MERGE_COURSES:return Object.assign({},e,{groupMap:Object.assign({},e.groupMap,t.payload.groups.groupMap)});case Ws.Q.SAVE_COURSES:return Object.assign({},e,{groupMap:t.payload.groups.groupMap});default:return e}},lessons:cr,lessonProgress:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case(0,b.getType)(ee.In.request):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING});case(0,b.getType)(ee.In.success):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.SUCCESS,lessonPreview:t.payload.lessonPreview,progressTable:Object.assign({},t.payload.progressTable,{studentIds:er(t.payload.progressTable.studentsMap,e.tableSortOptions.field,e.tableSortOptions.order)}),referenceAttendance:(0,$n.i)(t.payload.progressTable)?Object.values(t.payload.progressTable.studentsMap).reduce(((e,t)=>(e[t.id]=t.attendance,e)),{}):null});case(0,b.getType)(ee.In.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL});case(0,b.getType)(ee.Ru):return e.progressTable?Object.assign({},e,{tableSortOptions:{field:t.payload.field,order:t.payload.order},progressTable:Object.assign({},e.progressTable,{studentIds:er(e.progressTable.studentsMap,t.payload.field,t.payload.order)})}):e;case(0,b.getType)(ee.AJ):return tr(e,t.payload);case(0,b.getType)(ee.Ec):{if(!e.progressTable||!(0,$n.i)(e.progressTable)||!e.referenceAttendance)return e;const{studentId:s}=t.payload,n=Object.assign({},e.referenceAttendance);return n[s]=e.progressTable.studentsMap[s].attendance,Object.assign({},e,{referenceAttendance:n})}case(0,b.getType)(ee.JJ):{if(!e.referenceAttendance)return e;const{studentId:s,eventId:n}=t.payload;return tr(e,{studentId:s,eventId:n,status:e.referenceAttendance[s]})}case(0,b.getType)(ee.Vk):return Xn;default:return e}},lessonProgressPreview:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case(0,b.getType)(q.i.request):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING});case(0,b.getType)(q.i.success):return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.SUCCESS,progressPreview:t.payload});case(0,b.getType)(q.i.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL});case(0,b.getType)(q.z):return Yn;default:return e}},schedule:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt.Q.GENERATE_SCHEDULE:return function(e){return Object.assign({},e,{generateError:null,generateStatus:Me.L.PENDING})}(e);case Dt.Q.SET_GENERATE_ERROR:return function(e,t){return Object.assign({},e,{generateError:t.payload,generateStatus:Me.L.FAIL})}(e,t);case Dt.Q.SET_GENERATED_SCHEDULE:return function(e,t){const{currentOrPassedSchedulePlan:s,futureSchedulePlan:n,revisionId:r,events:a,unassignedEvents:i}=t.payload;return Object.assign({},e,{generateError:null,generateStatus:Me.L.SUCCESS,currentOrPassedSchedulePlan:s,futureSchedulePlan:n,revisionId:r||e.revisionId,unassignedEvents:i,editedEvents:a,initialEvents:a,initialUnassignedEvents:i,actions:[]})}(e,t);case Dt.Q.RESET_SCHEDULE_GENERATOR:return function(e){return Object.assign({},e,{generateError:null,generateStatus:null})}(e);case Dt.Q.SET_SCHEDULE:return function(e,t){const{currentOrPassedSchedulePlan:s,futureSchedulePlan:n,revisionId:r,events:a,unassignedEvents:i}=t.payload,o=Object.assign({},e,{scheduleLoadError:null,scheduleLoadStatus:Me.L.SUCCESS,currentOrPassedSchedulePlan:s,futureSchedulePlan:n,revisionId:r||e.revisionId,unassignedEvents:i,editedEvents:a,initialEvents:a,initialUnassignedEvents:i,actions:[]});return t.meta&&(o.currentStudyPeriod=t.meta.studyPeriodId),o}(e,t);case Dt.Q.SET_SCHEDULE_LOAD_ERROR:return function(e,t){return Object.assign({},e,{scheduleLoadError:t.payload,scheduleLoadStatus:Me.L.FAIL})}(e,t);case Dt.Q.RESET_SCHEDULE:return yr;case Dt.Q.LOAD_PAGE_DATA_STUDENT:case Dt.Q.LOAD_PAGE_DATA:return function(e){return Object.assign({},e,{pageLoadError:null,pageLoadStatus:Me.L.PENDING})}(e);case Dt.Q.LOAD_PAGE_DATA_SUCCESS:return function(e,t){const{currentOrPassedSchedulePlan:s,futureSchedulePlan:n,events:r,unassignedEvents:a,revisionId:i}=t.payload.courseSchedule;return Object.assign({},e,{courseDetails:t.payload.courseDetails,currentStudyPeriod:t.payload.studyPeriodId,pageLoadError:null,pageLoadStatus:Me.L.SUCCESS,scheduleLoadError:null,scheduleLoadStatus:Me.L.SUCCESS,currentOrPassedSchedulePlan:s,futureSchedulePlan:n,revisionId:i||e.revisionId,unassignedEvents:a,editedEvents:r,initialEvents:r,initialUnassignedEvents:a,actions:[]})}(e,t);case Dt.Q.LOAD_PAGE_DATA_FAILURE:return function(e,t){return Object.assign({},e,{pageLoadError:t.payload,pageLoadStatus:Me.L.FAIL})}(e,t);case Dt.Q.CHANGE_STUDY_PERIOD_STUDENT:case Dt.Q.CHANGE_STUDY_PERIOD:return function(e,t){return Object.assign({},e,{scheduleLoadError:null,scheduleLoadStatus:Me.L.PENDING,currentStudyPeriod:t.payload.studyPeriodId})}(e,t);case Dt.Q.ADD_SKIP_REASON:return function(e,t){let{payload:s}=t;return Object.assign({},e,{actions:(n=s.id,n<0?e.actions.map((e=>e.type===gr.K.Skip&&e.payload.skipId===s.id?Object.assign({},e,{payload:Object.assign({},e.payload,{reason:s.reason})}):e)):[...e.actions,{type:gr.K.Edit,payload:{id:s.id,title:s.reason}}]),editedEvents:e.editedEvents.map((e=>e.id===s.id?Object.assign({},e,{title:s.reason}):e))});var n}(e,t);case Dt.Q.ASSIGN_EVENT:return function(e,t){let{payload:s}=t;const n=e.unassignedEvents.findIndex((e=>e.id===s.electiveId)),r=e.editedEvents.findIndex((e=>e.id===s.reserveId));return Object.assign({},e,{actions:[...e.actions,{type:gr.K.Assign,payload:{electiveId:s.electiveId,reserveId:s.reserveId}}],editedEvents:e.editedEvents.map(((t,s)=>s===r?Object.assign({},e.unassignedEvents[n],{date:e.editedEvents[r].date}):t)),unassignedEvents:[...e.unassignedEvents.slice(0,n),...e.unassignedEvents.slice(n+1)]})}(e,t);case Dt.Q.SKIP_EVENT:return function(e,t){let{payload:s}=t;const n=fr--,r=e.editedEvents.findIndex((e=>e.id===s.id));let a=-1;for(let t=r;t<e.editedEvents.length;t++)if(e.editedEvents[t].type===gr.B.Reserve){a=t;break}let i=-1;if(-1!==a)i=a;else for(i=e.editedEvents.length-1;e.editedEvents[i].type===gr.B.Skip;)i--;let o=e.editedEvents.slice(r,i);const l=o.filter((e=>e.type===gr.B.Skip)),c=o.filter((e=>e.type!==gr.B.Skip)).map(((t,s,n)=>n[s+1]?Object.assign({},t,{date:n[s+1].date}):Object.assign({},t,{date:e.editedEvents[i].date})));return o=[...l,...c].sort(((e,t)=>Ne.Ay.fromISO(e.date).diff(Ne.Ay.fromISO(t.date)).milliseconds)),Object.assign({},e,{actions:[...e.actions,{type:gr.K.Skip,payload:{id:s.id,reason:"",skipId:n}}],editedEvents:[...e.editedEvents.slice(0,r),{id:n,type:gr.B.Skip,title:"",date:e.editedEvents[r].date},...o,...e.editedEvents.slice(i+1)]})}(e,t);case Dt.Q.SWAP_EVENTS:return function(e,t){let{payload:s}=t;const n=e.editedEvents.findIndex((e=>e.id===s.fromId)),r=e.editedEvents.findIndex((e=>e.id===s.toId));return Object.assign({},e,{actions:[...e.actions,{type:gr.K.Swap,payload:{fromId:s.fromId,toId:s.toId}}],editedEvents:e.editedEvents.map(((t,s)=>s===n?Object.assign({},e.editedEvents[r],{date:e.editedEvents[n].date}):s===r?Object.assign({},e.editedEvents[n],{date:e.editedEvents[r].date}):t))})}(e,t);case Dt.Q.SAVE_SCHEDULE:return function(e){return Object.assign({},e,{saveError:null,saveStatus:Me.L.PENDING})}(e);case Dt.Q.SET_SAVE_ERROR:return function(e,t){return Object.assign({},e,{saveError:t.payload,saveStatus:Me.L.FAIL})}(e,t);case Dt.Q.SET_SAVE_SUCCESS:return function(e){return Object.assign({},e,{saveError:null,saveStatus:Me.L.SUCCESS})}(e);case Dt.Q.CANCEL_CHANGES:return function(e){return Object.assign({},e,{actions:[],editedEvents:e.initialEvents,unassignedEvents:e.initialUnassignedEvents,saveError:null,saveStatus:null})}(e);default:return e}},materials:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot.Q.FETCH_STUDENT_MATERIALS_START:case ot.Q.FETCH_TEACHER_MATERIALS_START:return function(e){return Object.assign({},e,{materialsFetchError:null,materialsFetchStatus:Me.L.PENDING})}(e);case ot.Q.FETCH_MATERIALS_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{materials:s,materialsFetchError:null,materialsFetchStatus:Me.L.SUCCESS})}(e,t);case ot.Q.FETCH_MATERIALS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{materialsFetchError:s,materialsFetchStatus:Me.L.FAIL})}(e,t);case ot.Q.CLEAR_MATERIALS:return function(e){return Object.assign({},e,{materials:[],materialsFetchError:null,materialsFetchStatus:null})}(e);case ot.Q.FETCH_TEACHER_DETAILS_START:case ot.Q.FETCH_STUDENT_DETAILS_START:return function(e){return Object.assign({},e,{detailsFetchError:null,detailsFetchStatus:Me.L.PENDING})}(e);case ot.Q.FETCH_DETAILS_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{detailedMaterialInfo:s,detailsFetchError:null,detailsFetchStatus:Me.L.SUCCESS})}(e,t);case ot.Q.FETCH_DETAILS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{detailsFetchError:s,detailsFetchStatus:Me.L.FAIL})}(e,t);case ot.Q.CLEAR_DETAILS:return ur;default:return e}},solutions:Gr,p2p:Xr,lessonElements:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we.Q.FETCH_STUDENT_TASKS_START:return function(e){return Object.assign({},e,{studentTasksFetchError:null,studentTasksFetchStatus:Me.L.PENDING})}(e);case we.Q.FETCH_STUDENT_TASKS_SUCCESS:return function(e,t){return Object.assign({},e,{studentTasks:t.payload.results,studentTasksCount:t.payload.count,studentTasksFetchError:null,studentTasksFetchStatus:Me.L.SUCCESS})}(e,t);case we.Q.FETCH_STUDENT_TASKS_FAIL:return function(e,t){return Object.assign({},e,{studentTasksFetchError:t.payload,studentTasksFetchStatus:Me.L.FAIL})}(e,t);case we.Q.CLEAR_STUDENT_TASKS:return function(e){return Object.assign({},e,{studentTasks:[],studentTasksCount:0,studentTasksFetchError:null,studentTasksFetchStatus:null})}(e);case we.Q.FETCH_STUDENT_TASKS_UNSOLVED_START:return function(e){return Object.assign({},e,{studentTasksUnsolvedFetchError:null,studentTasksUnsolvedFetchStatus:Me.L.PENDING})}(e);case we.Q.FETCH_STUDENT_TASKS_UNSOLVED_SUCCESS:return function(e,t){return Object.assign({},e,{studentTasksUnsolved:t.payload.results,studentTasksUnsolvedCount:t.payload.count,studentTasksUnsolvedFetchError:null,studentTasksUnsolvedFetchStatus:Me.L.SUCCESS})}(e,t);case we.Q.FETCH_STUDENT_TASKS_UNSOLVED_FAIL:return function(e,t){return Object.assign({},e,{studentTasksUnsolvedFetchError:t.payload,studentTasksUnsolvedFetchStatus:Me.L.FAIL})}(e,t);case we.Q.CLEAR_STUDENT_TASKS_UNSOLVED:return function(e){return Object.assign({},e,{studentTasksUnsolved:[],studentTasksUnsolvedCount:0,studentTasksUnsolvedFetchError:null,studentTasksUnsolvedFetchStatus:null})}(e);case we.Q.FETCH_TEACHER_DETAILS_START:case we.Q.FETCH_STUDENT_DETAILS_START:return function(e){return Object.assign({},e,{taskDetailsFetchError:null,taskDetailsFetchStatus:Me.L.PENDING})}(e);case we.Q.FETCH_DETAILS_SUCCESS:return function(e,t){return Object.assign({},e,{taskDetails:t.payload,taskDetailsFetchError:null,taskDetailsFetchStatus:Me.L.SUCCESS})}(e,t);case we.Q.FETCH_DETAILS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{taskDetailsFetchError:s,taskDetailsFetchStatus:Me.L.FAIL})}(e,t);case we.Q.CLEAR_DETAILS:return function(e){return Object.assign({},e,{taskDetails:null,taskDetailsFetchError:null,taskDetailsFetchStatus:null})}(e);case we.Q.SET_TEST_FINISHED_FLAG:return function(e){const t=e.taskDetails;if(!t)return e;const s=Object.assign({},t,{lesson:Object.assign({},t.lesson,{isTestFinished:!0})});return Object.assign({},e,{taskDetails:s})}(e);case we.Q.FETCH_STUDENT_TASK_GROUPS_START:case we.Q.FETCH_TEACHER_TASK_GROUPS_START:return function(e){return Object.assign({},e,{taskGroupsFetchError:null,taskGroupsFetchStatus:Me.L.PENDING})}(e);case we.Q.FETCH_TASK_GROUPS_SUCCESS:return function(e,t){return Object.assign({},e,{lessonElementGroups:t.payload,taskGroupsFetchError:null,taskGroupsFetchStatus:Me.L.SUCCESS})}(e,t);case we.Q.FETCH_TASK_GROUPS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{taskGroupsFetchError:s,taskGroupsFetchStatus:Me.L.FAIL})}(e,t);case we.Q.CLEAR_PROBLEM_RUN:return function(e){return Object.assign({},e,{lessonElementGroups:[],taskGroupsFetchError:null,taskGroupsFetchStatus:null,problemDetails:null})}(e);case we.Q.UPDATE_TEACHER_TASK_STATISTICS:return function(e,t){const{taskId:s,statusCounter:n}=t.payload,r=[...e.lessonElementGroups],{group:a,taskIndex:i}=sa(r,s);if(a&&-1!==i&&a.tasks){const e=a.tasks[i],{total:t}=e.statistics;e.statistics=Object.assign({total:t},n)}return Object.assign({},e,{lessonElementGroups:r})}(e,t);case l.Q.FETCH_STUDENT_COMMENTS_SUCCESS:return ra(e,t);case we.Q.UPDATE_TASK_GROUPS_SOLUTION:return function(e,t){const s=t.payload.solution,n=Object.assign({},s,{updateTimeForUser:"",taskId:s.task.id});return ra(e,{type:l.Q.FETCH_STUDENT_COMMENTS_SUCCESS,payload:{solutionPreview:n,comments:[]}})}(e,t);case we.Q.SET_SOLUTION_ID:{const{problemLinkId:s,solutionId:n}=t,r=e.lessonElementGroups.map((e=>(e.problems&&e.problems.forEach((e=>{s===e.id&&"solution"in e&&(e.solution.id=n)})),e)),{});return Object.assign({},e,{lessonElementGroups:r})}case we.Q.SET_PROBLEM_DETAILS:{const{details:s}=t;return Object.assign({},e,{problemDetails:s})}case we.Q.FETCH_USER_ANSWER_SUCCESS:{const{payload:s}=t;return Object.assign({},e,{fetchUserAnswerSuccess:s})}case we.Q.POST_PROBLEM_SUBMISSION:return Object.assign({},e,{sendingSubmissionStatus:Me.L.PENDING});case we.Q.POST_PROBLEM_SUBMISSION_SUCCESS:return Object.assign({},e,{sendingSubmissionStatus:Me.L.SUCCESS});default:return e}},filters:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.Q.FETCH_SOLUTION_FILTERS_START:return function(e){return Object.assign({},e,{fetchError:null,fetchStatus:Me.L.PENDING})}(e);case W.Q.FETCH_FILTERS_SUCCESS:return function(e,t){let{payload:s}=t;return Object.assign({},e,{filters:s,fetchError:null,fetchStatus:Me.L.SUCCESS})}(e,t);case W.Q.FETCH_FILTERS_FAIL:return function(e,t){let{payload:s}=t;return Object.assign({},e,{fetchError:s,fetchStatus:Me.L.FAIL})}(e,t);case W.Q.CLEAR_FILTERS:return Kn;default:return e}},files:ia,comments:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt.Q.FETCH_DETAILS_SUCCESS:return function(e,t){const{solution:s,comments:n}=t.payload;return Object.assign({},e,{commentMap:Object.assign({},e.commentMap,{[s.id]:n})})}(e,t);case l.Q.FETCH_STUDENT_COMMENTS_START:case l.Q.FETCH_TEACHER_COMMENTS_START:return function(e){return Object.assign({},e,{downloadStatus:Me.L.PENDING,downloadStatusError:null})}(e);case l.Q.FETCH_STUDENT_COMMENTS_SUCCESS:case l.Q.FETCH_TEACHER_COMMENTS_SUCCESS:return function(e,t){const{solutionPreview:s,comments:n}=t.payload;return Object.assign({},e,{downloadStatus:Me.L.SUCCESS,commentMap:Object.assign({},e.commentMap,{[s.id]:n})})}(e,t);case l.Q.FETCH_COMMENTS_FAIL:return function(e,t){return Object.assign({},e,{downloadStatus:Me.L.FAIL,downloadStatusError:t.payload})}(e,t);case l.Q.CLEAR_COMMENTS:return function(e,t){const s=t.payload,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e.commentMap,[s].map(Mn));return Object.assign({},e,{commentMap:n,downloadStatus:null,uploadStatus:null})}(e,t);case l.Q.ADD_STUDENT_COMMENT_START:case l.Q.ADD_TEACHER_COMMENT_START:return function(e){return Object.assign({},e,{uploadStatus:Me.L.PENDING})}(e);case l.Q.ADD_COMMENT_SUCCESS:return function(e,t){const{solutionId:s,addedComment:n}=t.payload,r=e.commentMap[s];return r?Object.assign({},e,{commentMap:Object.assign({},e.commentMap,{[s]:[...r,n]}),uploadStatus:Me.L.SUCCESS}):e}(e,t);case l.Q.ADD_COMMENT_FAIL:return function(e){return Object.assign({},e,{uploadStatus:Me.L.FAIL})}(e);case l.Q.EDIT_STUDENT_COMMENT_START:case l.Q.EDIT_TEACHER_COMMENT_START:return function(e){return Object.assign({},e,{uploadStatus:Me.L.PENDING})}(e);case l.Q.EDIT_COMMENT_SUCCESS:return function(e,t){const{solutionId:s,editedComment:n}=t.payload,r=e.commentMap[s];if(!r)return e;const a=(0,Ln.K)(r,(e=>e.id===n.id));if(-1===a)return e;const i=[...r];return i[a]=n,Object.assign({},e,{commentMap:Object.assign({},e.commentMap,{[s]:i}),uploadStatus:Me.L.SUCCESS})}(e,t);case l.Q.EDIT_COMMENT_FAIL:return function(e){return Object.assign({},e,{uploadStatus:Me.L.FAIL})}(e);default:return e}},submissions:oa._,tableSettings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ea.Q.INITIALIZE_TABLE:return function(e,t){let{payload:s}=t;const n=s,r=me.I.get(n);return Object.assign({},e,{tableName:n,settings:r})}(e,t);case ea.Q.SET_PAGE_SIZE:return function(e,t){let{payload:s}=t;const{tableName:n,settings:r}=e;if(!n||!r)throw new gt.D3("You should initialize table before using setPageSize()",{tableName:n,settings:r});const a=Object.assign({},r,{pageSize:s});return me.I.set(n,a),Object.assign({},e,{settings:a})}(e,t);case ea.Q.TOGGLE_COLUMN_VISIBILITY:return function(e,t){let{payload:s}=t;const{tableName:n,settings:r}=e;if(!n||!r)throw new gt.D3("You should initialize table before using toggleColumnVisibility()",{tableName:n,settings:r});const{columnsSettings:a}=r,i=a[s],o=Object.assign({},r,{columnsSettings:Object.assign({},a,{[s]:Object.assign({},i,{hidden:!i.hidden})})});return me.I.set(n,o),Object.assign({},e,{settings:o})}(e,t);case ea.Q.CLEAR_SETTINGS:return ta;default:return e}},notificationCenter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.Q.FETCH_NOTIFICATIONS_START:return Object.assign({},e,{fetchStatus:Me.L.PENDING});case ht.Q.FETCH_NOTIFICATIONS_SUCCESS:return function(e,t){const{notificationIds:s,notificationMap:n,unreadCount:r,isNewBatch:a=!1}=t.payload;return Object.assign({},e,{notificationMap:Object.assign({},e.notificationMap,n),notificationIds:a?[...s,...e.notificationIds]:[...e.notificationIds,...s],fetchError:null,unreadCount:r,fetchStatus:Me.L.SUCCESS,isConsistent:!0})}(e,t);case ht.Q.FETCH_NOTIFICATIONS_FAIL:return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL});case ht.Q.SET_UNREAD_COUNT:return Object.assign({},e,{unreadCount:t.payload});case ht.Q.HIDE_NOTIFICATION:return pr(e,t.payload,{isRead:!0});case ht.Q.UNHIDE_NOTIFICATION:return pr(e,t.payload,{isRead:!1});case ht.Q.DELETE_NOTIFICATION:return function(e,t){const s=t.payload,n=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e.notificationMap,[s].map(dr)),r=e.notificationIds.filter((e=>e!==s));return Object.assign({},e,{notificationMap:n,notificationIds:r})}(e,t);case ht.Q.HIDE_ALL_NOTIFICATIONS:return hr(e,{isRead:!0});case ht.Q.UNHIDE_ALL_NOTIFICATIONS:return hr(e,{isRead:!1});case ht.Q.DELETE_ALL_NOTIFICATIONS:return mr;case ht.Q.SET_CONSISTENCY_FLAG:return e.isConsistent===t.payload?e:Object.assign({},e,{isConsistent:t.payload});default:return e}},codeEditor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case la.Q.SAVE_CODE:return Object.assign({},e,{code:t.payload});case la.Q.SET_LANGUAGE:return Object.assign({},e,{language:t.payload});case la.Q.TOGGLE_READONLY:return Object.assign({},e,{isReadonly:t.payload});default:return e}},profileEditor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nn.Q.START_EDIT:return Object.assign({},e,{isEditing:!0,phone:t.phone,publicKey:t.publicKey,city:t.city||e.city,venue:t.venue||e.venue,username:t.username,isSaving:!1});case nn.Q.END_EDITING:return Object.assign({},e,{isEditing:!1,isSaving:!1});case nn.Q.SET_PHONE:return Object.assign({},e,{phone:t.phone});case nn.Q.SET_VENUES:return Object.assign({},e,{venueList:t.venues});case nn.Q.CHANGE_VENUE:return Object.assign({},e,{venue:t.venue});case nn.Q.CHANGE_USERNAME:return Object.assign({},e,{username:t.username});case nn.Q.TOGGLE_VENUES_LOADING:return Object.assign({},e,{isVenuesLoading:t.isLoading});case nn.Q.SET_VALIDATION_ERRORS:return Object.assign({},e,{isSaving:!1,errors:Object.assign({},e.errors,t.statusMap)});case nn.Q.SAVE_PROFILE:return Object.assign({},e,{isSaving:!0});case nn.Q.SET_PUBLIC_KEY:return Object.assign({},e,{publicKey:t.publicKey});default:return e}},newCandidate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gn.Q.CHANGE_NAME:return Object.assign({},e,{name:t.name,validationStatusMap:Object.assign({},e.validationStatusMap,{name:gn.U.VALID})});case gn.Q.CHANGE_LASTNAME:return Object.assign({},e,{lastname:t.lastname,validationStatusMap:Object.assign({},e.validationStatusMap,{lastname:gn.U.VALID})});case gn.Q.CHANGE_MIDDLENAME:return Object.assign({},e,{middlename:t.middlename,validationStatusMap:Object.assign({},e.validationStatusMap,{middlename:gn.U.VALID})});case gn.Q.CHANGE_HAS_MIDDLENAME:return Object.assign({},e,{hasMiddlename:!e.hasMiddlename,validationStatusMap:Object.assign({},e.validationStatusMap,{middlename:gn.U.VALID})});case gn.Q.CHANGE_BIRTH_DATE:return Object.assign({},e,{birthDate:t.birthDate,validationStatusMap:Object.assign({},e.validationStatusMap,{birthDate:gn.U.VALID})});case gn.Q.CHANGE_SEX:return Object.assign({},e,{sex:t.sex,validationStatusMap:Object.assign({},e.validationStatusMap,{sex:gn.U.VALID})});case gn.Q.CHANGE_SCHOOL_NAME:return Object.assign({},e,{schoolName:t.schoolName,validationStatusMap:Object.assign({},e.validationStatusMap,{schoolName:gn.U.VALID})});case gn.Q.CHANGE_GRADE:return Object.assign({},e,{grade:t.grade,validationStatusMap:Object.assign({},e.validationStatusMap,{grade:gn.U.VALID})});case gn.Q.CHANGE_PHONE_NUMBER:return Object.assign({},e,{phoneNumber:t.phoneNumber,validationStatusMap:Object.assign({},e.validationStatusMap,{phoneNumber:gn.U.VALID})});case gn.Q.CHANGE_TELEGRAM:return Object.assign({},e,{telegram:t.telegram,validationStatusMap:Object.assign({},e.validationStatusMap,{telegram:gn.U.VALID})});case gn.Q.CHANGE_HAS_TELEGRAM:return Object.assign({},e,{hasTelegram:!e.hasTelegram,validationStatusMap:Object.assign({},e.validationStatusMap,{telegram:gn.U.VALID})});case gn.Q.CHANGE_REGION:return Object.assign({},e,{selectedRegion:t.selectedRegion,selectedDistrict:void 0,selectedLocation:void 0,selectedVenue:void 0,validationStatusMap:Object.assign({},e.validationStatusMap,{selectedRegion:gn.U.VALID})});case gn.Q.CHANGE_DISTRICT:return Object.assign({},e,{selectedDistrict:t.selectedDistrict,selectedLocation:void 0,selectedVenue:void 0,validationStatusMap:Object.assign({},e.validationStatusMap,{selectedDistrict:gn.U.VALID})});case gn.Q.CHANGE_LOCATION:return Object.assign({},e,{selectedLocation:t.selectedLocation,selectedVenue:void 0,validationStatusMap:Object.assign({},e.validationStatusMap,{selectedLocation:gn.U.VALID})});case gn.Q.CHANGE_VENUE:return Object.assign({},e,{selectedVenue:t.selectedVenue,validationStatusMap:Object.assign({},e.validationStatusMap,{selectedVenue:gn.U.VALID})});case gn.Q.CHANGE_PARENT_NAME:return Object.assign({},e,{parentName:t.parentName,validationStatusMap:Object.assign({},e.validationStatusMap,{parentName:gn.U.VALID})});case gn.Q.CHANGE_PARENT_LASTNAME:return Object.assign({},e,{parentLastname:t.parentLastname,validationStatusMap:Object.assign({},e.validationStatusMap,{parentLastname:gn.U.VALID})});case gn.Q.CHANGE_PARENT_MIDDLENAME:return Object.assign({},e,{parentMiddlename:t.parentMiddlename,validationStatusMap:Object.assign({},e.validationStatusMap,{parentMiddlename:gn.U.VALID})});case gn.Q.CHANGE_HAS_PARENT_MIDDLENAME:return Object.assign({},e,{hasParentMiddlename:!e.hasParentMiddlename,validationStatusMap:Object.assign({},e.validationStatusMap,{parentMiddlename:gn.U.VALID})});case gn.Q.CHANGE_PARENT_EMAIL:return Object.assign({},e,{parentEmail:t.parentEmail,validationStatusMap:Object.assign({},e.validationStatusMap,{parentEmail:gn.U.VALID})});case gn.Q.CHANGE_PARENT_PHONE_NUMBER:return Object.assign({},e,{parentPhoneNumber:t.parentPhoneNumber,validationStatusMap:Object.assign({},e.validationStatusMap,{parentPhoneNumber:gn.U.VALID})});case gn.Q.CHANGE_AGREEMENT_GDPR:return Object.assign({},e,{agreementGDPR:!e.agreementGDPR,validationStatusMap:Object.assign({},e.validationStatusMap,{agreementGDPR:gn.U.VALID})});case gn.Q.CHANGE_AGREEMENT_OF_EDUCATIONAL_PROJECT:return Object.assign({},e,{agreementOfEducationalProject:!e.agreementOfEducationalProject,validationStatusMap:Object.assign({},e.validationStatusMap,{agreementOfEducationalProject:gn.U.VALID})});case gn.Q.CHANGE_AGREEMENT_USING_SERVICE:return Object.assign({},e,{agreementUsingService:!e.agreementUsingService,validationStatusMap:Object.assign({},e.validationStatusMap,{agreementUsingService:gn.U.VALID})});case gn.Q.CHANGE_AGREEMENT_COMPETITION_CONDITIONS:return Object.assign({},e,{agreementCompetitionConditions:!e.agreementCompetitionConditions,validationStatusMap:Object.assign({},e.validationStatusMap,{agreementCompetitionConditions:gn.U.VALID})});case gn.Q.CHANGE_AGREEMENT_RECEIVE_MAIL:return Object.assign({},e,{agreementReceiveMail:!e.agreementReceiveMail,validationStatusMap:Object.assign({},e.validationStatusMap,{agreementReceiveMail:gn.U.VALID})});case gn.Q.CHANGE_VALIDATION_STATUS_MAP:return Object.assign({},e,{validationStatusMap:t.validationStatusMap});case gn.Q.START_SUBMIT:return Object.assign({},e,{submittingStatus:Me.L.PENDING});case gn.Q.SUCCESS_SUBMIT:return Object.assign({},e,{submittingStatus:Me.L.SUCCESS});case gn.Q.FAILED_SUBMIT:return Object.assign({},e,{submittingStatus:Me.L.FAIL});default:return e}},studentCourseProgress:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Cn.Q.FETCH_COURSE_STUDENT_PROGRESS_START:return function(e){return Object.assign({},e,{fetchStatus:Me.L.PENDING,fetchError:null})}(e);case Cn.Q.FETCH_COURSE_STUDENT_PROGRESS_SUCCESS:return function(e,t){return Object.assign({},e,t.payload,{fetchStatus:Me.L.SUCCESS,fetchError:null})}(e,t);case Cn.Q.FETCH_COURSE_STUDENT_PROGRESS_FAIL:return function(e,t){return Object.assign({},e,{fetchError:t.payload,fetchStatus:Me.L.FAIL})}(e,t);case Cn.Q.CLEAR_COURSE_STUDENT_PROGRESS:return da;default:return e}}});function pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(a?r.tY:n.Zz)((0,n.Tw)(_n)),s=(0,n.y$)(ma,e,t);return _n.run(On),s}},97697:(e,t,s)=>{"use strict";s.d(t,{$G:()=>E,BN:()=>p,BP:()=>a,EB:()=>b,Ek:()=>v,Kw:()=>T,LQ:()=>h,M8:()=>l,Q2:()=>N,RI:()=>d,SR:()=>i,Ve:()=>A,XT:()=>S,aY:()=>r,ao:()=>I,d3:()=>y,h6:()=>k,ib:()=>w,m2:()=>O,mD:()=>f,me:()=>g,nf:()=>c,tH:()=>R,yX:()=>C,yq:()=>u,yt:()=>m,zd:()=>o});var n=s(69367);function r(e){return{type:n.Q.FETCH_STUDENT_TASKS_START,payload:e}}function a(e){return{type:n.Q.FETCH_STUDENT_TASKS_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_STUDENT_TASKS_FAIL,payload:e}}function o(){return{type:n.Q.CLEAR_STUDENT_TASKS}}function l(e){return{type:n.Q.FETCH_STUDENT_TASKS_UNSOLVED_START,payload:e}}function c(e){return{type:n.Q.FETCH_STUDENT_TASKS_UNSOLVED_SUCCESS,payload:e}}function u(e){return{type:n.Q.FETCH_STUDENT_TASKS_UNSOLVED_FAIL,payload:e}}function d(e){return{type:n.Q.FETCH_DETAILS_SUCCESS,payload:e}}function m(e){return{type:n.Q.FETCH_DETAILS_FAIL,payload:e}}function p(){return{type:n.Q.CLEAR_DETAILS}}function h(){return{type:n.Q.SET_TEST_FINISHED_FLAG}}function E(e){return{type:n.Q.FETCH_STUDENT_DETAILS_START,payload:e}}function g(e){return{type:n.Q.FETCH_TEACHER_DETAILS_START,payload:e}}function y(e){return{type:n.Q.FETCH_STUDENT_TASK_GROUPS_START,payload:e}}function f(e){return{type:n.Q.FETCH_TEACHER_TASK_GROUPS_START,payload:e}}function S(e){return{type:n.Q.FETCH_TASK_GROUPS_SUCCESS,payload:e}}function b(e){return{type:n.Q.FETCH_TASK_GROUPS_FAIL,payload:e}}function v(){return{type:n.Q.CLEAR_PROBLEM_RUN}}function N(e){return{type:n.Q.UPDATE_TASK_GROUPS_SOLUTION,payload:e}}function I(e,t){return{type:n.Q.UPDATE_TEACHER_TASK_STATISTICS,payload:{taskId:e,statusCounter:t}}}function T(e){let{problemLinkId:t,courseId:s,lessonId:r,groupId:a}=e;return{type:n.Q.OPEN_PROBLEM,problemLinkId:t,courseId:s,lessonId:r,groupId:a}}function k(e,t){return{type:n.Q.SET_SOLUTION_ID,solutionId:e,problemLinkId:t}}function C(e){return{type:n.Q.FETCH_USER_ANSWER_SUCCESS,payload:e}}function w(e,t,s,r,a,i,o){return{type:n.Q.POST_PROBLEM_SUBMISSION,solutionId:e,userAnswer:t,courseId:s,lessonId:r,groupId:a,onSuccess:i,problemType:o}}function A(){return{type:n.Q.POST_PROBLEM_SUBMISSION_SUCCESS}}function O(e){return{type:n.Q.SET_PROBLEM_DETAILS,details:e}}function R(){return{type:n.Q.UPDATE_PROBLEM_DETAILS}}},73880:(e,t,s)=>{"use strict";s.d(t,{mO:()=>B,Kx:()=>z,GY:()=>re,u$:()=>se,PG:()=>F,HI:()=>ae,VX:()=>ie,X:()=>Z,XG:()=>K,uR:()=>P,Af:()=>X,xP:()=>W,FH:()=>ee,QO:()=>V,eM:()=>te,gO:()=>$,kA:()=>H,Wi:()=>U,lM:()=>q,El:()=>y,X6:()=>f,Kr:()=>b,YQ:()=>S,wM:()=>v,KK:()=>I,CK:()=>N,kT:()=>k,gV:()=>w,MX:()=>T,sA:()=>L,uf:()=>M,wL:()=>x,Ku:()=>D,wy:()=>R,L$:()=>A,mT:()=>_,Kz:()=>O,cS:()=>C,uw:()=>Y});var n=s(1081),r=s(41811),a=s(62383),i=s.n(a),o=s(74115),l=s(72420),c=s(64237),u=s(8142),d=s.n(u);function m(e){return"object"==typeof e&&null!==e}function p(e,t){return e[0]===t[0]&&e[1]===t[1]}const h={inline:function(e,t){if(!m(t)||!m(e))return t===e;const s=Object.keys(e),n=Object.keys(t);return d()(s,n)&&s.every((s=>{const n=!1===e[s]?null:e[s],r=!1===t[s]?null:t[s];return d()(n,r)}))},choice:function(e,t){return d()(e&&e.slice().sort(),t&&t.slice().sort())},chooseimage:function(e,t){return Boolean(e&&t&&d()(new Set(e),new Set(t)))},macaroni:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===t.length&&e.every((e=>t.find(p.bind(null,e))))}};var E=s(44046),g=s(87979);function y(e){return e.lessonElements.studentTasks}function f(e){return e.lessonElements.studentTasksCount}function S(e){return e.lessonElements.studentTasksFetchStatus}function b(e){return e.lessonElements.studentTasksFetchError}function v(e){return e.lessonElements.studentTasksUnsolved}function N(e){return e.lessonElements.studentTasksUnsolvedFetchStatus}function I(e){return e.lessonElements.studentTasksUnsolvedFetchError}function T(e){return e.lessonElements.taskDetails}function k(e){const t=T(e);return t&&t.course&&t.course.courseCompilers}function C(e){const t=T(e);return t&&t.lesson.type===l.nv.Test&&t.lesson.isTestFinished}function w(e){const t=T(e);return t?t.description:null}function A(e){var t,s;return null!=(t=null==(s=T(e))?void 0:s.problem)?t:null}function O(e){var t,s;return null!=(t=null==(s=T(e))?void 0:s.taskType)?t:null}function R(e){var t,s;return null!=(t=null==(s=T(e))?void 0:s.scoreMax)?t:null}function _(e){var t,s;return null!=(t=null==(s=T(e))?void 0:s.tag)?t:null}function L(e){return e.lessonElements.taskDetailsFetchError}function M(e){return e.lessonElements.taskDetailsFetchStatus}function P(e){return e.lessonElements.lessonElementGroups}function x(e){return e.lessonElements.taskGroupsFetchError}function D(e){return e.lessonElements.taskGroupsFetchStatus}const F=(0,n.Mz)(P,(e=>e.reduce(((e,t)=>e.concat(t.tasks||[])),[]))),z=(0,n.Mz)(F,(e=>(0,r.A)((t=>{const s=e.findIndex((e=>e.id===t));return-1===s?null:{previousTask:s>0?e[s-1]:null,currentTask:e[s],nextTask:s<e.length?e[s+1]:null}})))),j=(e,t)=>t.problemLinkId,U=(0,n.Mz)(P,(e=>e.reduce(((e,t)=>(t.problems&&t.problems.forEach((t=>{e[t.id]=t})),e)),{}))),H=(0,n.Mz)([U,j],((e,t)=>e[t])),Q=(0,n.Mz)([P,j],((e,t)=>e.find((e=>!!e.problems&&e.problems.some((e=>e.id===t))),{}))),V=(0,n.Mz)([Q,j],((e,t)=>{if(!e||!e.problems)return null;const s=e.problems.findIndex((e=>e.id===t));return{currentProblemNumber:void 0===s?0:s+1,problemsTotal:e.problems.length}})),G=e=>"solution"in e&&!e.solution.isClosed,B=(0,n.Mz)([Q,j],((e,t)=>{if(!e||!e.problems)return{previousProblem:null,currentProblem:null,nextProblem:null};const s=e.problems.findIndex((e=>e.id===t));return{previousProblem:s>0?e.problems[s-1]:null,currentProblem:e.problems[s],nextProblem:s<e.problems.length?e.problems[s+1]:null}})),W=(0,n.Mz)([Q,j],((e,t)=>{if(!e||!e.problems)return;const s=e.problems.findIndex((e=>e.id===t)),n=e.problems.find(((e,t)=>t>s&&G(e)));if(n)return n;return e.problems.find(G)||(s===e.problems.length-1?e.problems[0]:e.problems[s+1])})),J=e=>e.lessonElements.problemDetails,K=(0,n.Mz)(J,(e=>null==e?void 0:e.submissions[e.submissions.length-1])),Z=e=>(0,n.Mz)([t=>e?(0,g.GZ)(t,e):null,K],((e,t)=>{var s,n;const r=null==e||null==(s=e.latestSubmission)?void 0:s.file.sourceCode;return(null==e?void 0:e.task.taskType)===o.wP.Problem&&r?JSON.parse(r):null!=(n=null==t?void 0:t.submission)?n:{}}));function Y(e){return e.lessonElements.fetchUserAnswerSuccess}const q=(0,n.Mz)(J,(e=>e?e.solution:null)),$=(0,n.Mz)(J,(e=>e?e.lesson:null)),X=((0,n.Mz)(J,(e=>e?e.solution.status.type:c.gt.Draft)),e=>(0,n.Mz)(K,(t=>{var s;return null==t||null==(s=t.hints[e])?void 0:s[0]}))),ee=e=>(0,n.Mz)([J,t=>e?(0,g.GZ)(t,e):null],((e,t)=>null!=t&&t.submissionsCount?t.submissionsCount:e?Math.max(e.solution.attempts,e.submissions.length):0)),te=(0,n.Mz)(J,(e=>{if(e)return e.problem})),se=(0,n.Mz)(J,(e=>{if(e)return e.solution.id})),ne=(0,n.Mz)([J,T],((e,t)=>{var s,n;return e||t?null==(s=null!=e?e:t)||null==(n=s.problem)?void 0:n.markup.layout.reduce(((e,t)=>{if("marker"===t.kind){const{id:s,type:n}=t.content;e[s]=h[n]}return e}),{}):{}})),re=(0,n.Mz)(ne,(e=>function(t,s){return i()(t)||Object.keys(t).length===Object.keys(s).length&&Object.entries(t).every((t=>{let[n,r]=t;return e[n](r,s[n])}))})),ae=(0,n.Mz)(J,(e=>{if(!e)return!1;const t=e.solution.isClosed,s="test"===e.lesson.type,n=!1!==e.lesson.evaluated;return s&&t&&!n})),ie=e=>e.lessonElements.sendingSubmissionStatus!==E.L.SUCCESS},69367:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_STUDENT_TASKS_START="[lesson-elements] fetch student tasks start",e.FETCH_STUDENT_TASKS_SUCCESS="[lesson-elements] fetch student tasks success",e.FETCH_STUDENT_TASKS_FAIL="[lesson-elements] fetch student tasks fail",e.CLEAR_STUDENT_TASKS="[lesson-elements] clear student tasks",e.FETCH_STUDENT_TASKS_UNSOLVED_START="[lesson-elements] fetch student tasks unsolved start",e.FETCH_STUDENT_TASKS_UNSOLVED_SUCCESS="[lesson-elements] fetch student tasks unsolved success",e.FETCH_STUDENT_TASKS_UNSOLVED_FAIL="[lesson-elements] fetch student tasks unsolved fail",e.CLEAR_STUDENT_TASKS_UNSOLVED="[lesson-elements] clear student tasks unsolved",e.FETCH_STUDENT_DETAILS_START="[lesson-elements] fetch student details start",e.FETCH_TEACHER_DETAILS_START="[lesson-elements] fetch teacher details start",e.FETCH_DETAILS_SUCCESS="[lesson-elements] fetch details success",e.FETCH_DETAILS_FAIL="[lesson-elements] fetch details fail",e.CLEAR_DETAILS="[lesson-elements] clear details",e.SET_TEST_FINISHED_FLAG="[lesson-elements] set test finished flag",e.FETCH_STUDENT_TASK_GROUPS_START="[lesson-elements] fetch student task groups start",e.FETCH_TEACHER_TASK_GROUPS_START="[lesson-elements] fetch teacher task groups start",e.FETCH_TASK_GROUPS_SUCCESS="[lesson-elements] fetch task groups success",e.FETCH_TASK_GROUPS_FAIL="[lesson-elements] fetch task groups fail",e.CLEAR_PROBLEM_RUN="[lesson-elements] clear task groups and problemDetails",e.UPDATE_TEACHER_TASK_STATISTICS="[lesson-elements] update teacher task statistics",e.UPDATE_STUDENTS_TASK_SOLUTION="[lesson-elements] update student task solution",e.OPEN_PROBLEM="[lesson-elements] open problem details",e.SET_SOLUTION_ID="[lesson-elements] set solution id in problem",e.POST_PROBLEM_SUBMISSION="[lesson-elements] send problem submission",e.POST_PROBLEM_SUBMISSION_SUCCESS="[lesson-elements] end of send submission request",e.SET_PROBLEM_DETAILS="[lesson-elements] set problem details",e.UPDATE_GROUPS_DATA="[lesson-element] update problemLink data in groups",e.UPDATE_PROBLEM_DETAILS="[lesson-elements] update problem details",e.UPDATE_TASK_GROUPS_SOLUTION="[lesson-elements] update task groups solution",e.FETCH_USER_ANSWER_SUCCESS="[lesson-elements] fetch user answer success",e}({})},67430:(e,t,s)=>{"use strict";s.d(t,{i:()=>r,z:()=>a});var n=s(77475);const r=(0,n.createAsyncAction)("[lesson-progress-preview] fetch start","[lesson-progress-preview] fetch success","[lesson-progress-preview] fetch fail")(),a=(0,n.createAction)("[lesson-progress-preview] clear")},28527:(e,t,s)=>{"use strict";s.d(t,{AJ:()=>o,Ec:()=>l,In:()=>r,JJ:()=>c,Ru:()=>i,Vk:()=>a});var n=s(77475);const r=(0,n.createAsyncAction)("[lesson-progress] fetch start","[lesson-progress] fetch success","[lesson-progress] fetch fail")(),a=(0,n.createAction)("[lesson-progress] clear"),i=(0,n.createAction)("[lesson-progress] change sort options",(e=>t=>e(t))),o=(0,n.createAction)("[lesson-progress] change attendance status",(e=>t=>e(t))),l=(0,n.createAction)("[lesson-progress] update reference attendance",(e=>t=>e(t))),c=(0,n.createAction)("[lesson-progress] restore reference attendance",(e=>t=>e(t)))},31833:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});let n=function(e){return e.NAME="displayName",e.RATING="rating",e}({})},12291:(e,t,s)=>{"use strict";s.d(t,{T5:()=>u,UZ:()=>d,Yt:()=>r,cT:()=>l,lj:()=>i,mt:()=>o,tF:()=>m,wT:()=>c,wc:()=>a});var n=s(37861);function r(e){return{type:n.Q.FETCH_STUDENT_LESSON_DETAILS_START,payload:e}}function a(e){return{type:n.Q.PATCH_DETAILS,payload:e}}function i(e){return{type:n.Q.FETCH_TEACHER_LESSON_DETAILS_START,payload:e}}function o(e){return{type:n.Q.FETCH_LESSON_DETAILS_SUCCESS,payload:e}}function l(e){return{type:n.Q.FETCH_LESSON_DETAILS_FAIL,payload:e}}function c(){return{type:n.Q.CLEAR_LESSON_DETAILS}}function u(e){return{type:n.Q.CHANGE_LESSON_VISIBILITY_START,payload:e}}function d(e){return{type:n.Q.CHANGE_LESSON_VISIBILITY_SUCCESS,payload:e}}function m(e){return{type:n.Q.CHANGE_LESSON_VISIBILITY_FAIL,payload:e}}},37861:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_STUDENT_LESSON_DETAILS_START="[lessons] fetch student lesson details start",e.FETCH_TEACHER_LESSON_DETAILS_START="[lessons] fetch teacher lesson details start",e.FETCH_LESSON_DETAILS_SUCCESS="[lessons] fetch lesson details success",e.FETCH_LESSON_DETAILS_FAIL="[lessons] fetch lesson details fail",e.CLEAR_LESSON_DETAILS="[lessons] clear lesson details",e.CHANGE_LESSON_VISIBILITY_START="[lessons] change lesson visibility start",e.CHANGE_LESSON_VISIBILITY_SUCCESS="[lessons] change lesson visibility success",e.CHANGE_LESSON_VISIBILITY_FAIL="[lessons] change lesson visibility fail",e.PATCH_DETAILS="[lessons] patch details",e}({})},58761:(e,t,s)=>{"use strict";s.d(t,{CA:()=>a,DA:()=>l,FG:()=>o,Lu:()=>r,rc:()=>i});var n=s(77475);const r=(0,n.createAsyncAction)("[lessons] fetch student lessons start","[lessons] fetch student lessons success","[lessons] fetch student lessons fail")(),a=(0,n.createAsyncAction)("[lessons] fetch teacher lessons start","[lessons] fetch teacher lessons success","[lessons] fetch teacher lessons fail")(),i=(0,n.createStandardAction)("[lessons] clear")(),o=(0,n.createStandardAction)("[lessons] set list filter")(),l=(0,n.createStandardAction)("[lessons] set webinar in list")()},35304:(e,t,s)=>{"use strict";s.d(t,{Bn:()=>c,FW:()=>l,HF:()=>i,L_:()=>a,XX:()=>o});var n=s(1081),r=s(72420);const a=e=>e.lessons.list.list,i=e=>e.lessons.list.listFilter,o=(0,n.Mz)([e=>e.lessons.list.list,i],((e,t)=>{switch(t){default:case r.rY.ShowAll:return e;case r.rY.ShowPublished:return e.filter((e=>!e.isHidden));case r.rY.ShowUnpublished:return e.filter((e=>e.isHidden))}})),l=e=>e.lessons.list.fetchError,c=e=>e.lessons.list.fetchStatus},45581:(e,t,s)=>{"use strict";s.d(t,{J:()=>r,K:()=>a});var n=s(77475);const r=(0,n.createAsyncAction)("[lessons] start test","[lessons] start test success","[lessons] start test fail")(),a=(0,n.createAsyncAction)("[lessons] finish test","[lessons] finish test success","[lessons] finish test fail")()},33868:(e,t,s)=>{"use strict";s.d(t,{$_:()=>o,at:()=>i,kL:()=>r,mI:()=>a});var n=s(11550);function r(e){return{type:n.Q.FETCH_TIMER_START,payload:e}}function a(e){return{type:n.Q.FETCH_TIMER_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_TIMER_FAIL,payload:e}}function o(){return{type:n.Q.CLEAR_TIMER}}},11550:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_TIMER_START="[lessons] fetch timer start",e.FETCH_TIMER_SUCCESS="[lessons] fetch timer success",e.FETCH_TIMER_FAIL="[lessons] fetch timer fail",e.CLEAR_TIMER="[lessons] clear timer",e}({})},76579:(e,t,s)=>{"use strict";s.d(t,{Ju:()=>o,ZS:()=>i,lj:()=>a,nK:()=>r});var n=s(33477);function r(e,t){return{type:n.Q.START_WEBINAR_START,payload:{lessonId:e,groupId:t}}}function a(e){return{type:n.Q.START_WEBINAR_SUCCESS,payload:e}}function i(e){return{type:n.Q.START_WEBINAR_FAIL,payload:e}}function o(e,t){return{type:n.Q.GET_WEBINAR_START,payload:{lessonId:e,groupId:t}}}},33477:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.START_WEBINAR_START="[lessons] start webinar start",e.START_WEBINAR_SUCCESS="[lessons] start webinar success",e.START_WEBINAR_FAIL="[lessons] start webinar fail",e.GET_WEBINAR_START="[lessons] get webinar status start",e.GET_WEBINAR_SUCCESS="[lessons] get webinar status success",e.GET_WEBINAR_FAIL="[lessons] get webinar status fail",e}({})},28957:(e,t,s)=>{"use strict";s.d(t,{$m:()=>u,C0:()=>c,HQ:()=>a,JG:()=>o,Jh:()=>p,T_:()=>i,YZ:()=>l,ow:()=>m,oz:()=>r,qe:()=>d});var n=s(78731);function r(e){return{type:n.Q.FETCH_STUDENT_MATERIALS_START,payload:e}}function a(e){return{type:n.Q.FETCH_TEACHER_MATERIALS_START,payload:e}}function i(e){return{type:n.Q.FETCH_MATERIALS_SUCCESS,payload:e}}function o(e){return{type:n.Q.FETCH_MATERIALS_FAIL,payload:e}}function l(){return{type:n.Q.CLEAR_MATERIALS}}function c(e){return{type:n.Q.FETCH_TEACHER_DETAILS_START,payload:e}}function u(e){return{type:n.Q.FETCH_STUDENT_DETAILS_START,payload:e}}function d(e){return{type:n.Q.FETCH_DETAILS_SUCCESS,payload:e}}function m(e){return{type:n.Q.FETCH_DETAILS_FAIL,payload:e}}function p(){return{type:n.Q.CLEAR_DETAILS}}},78731:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_STUDENT_MATERIALS_START="[materials] fetch student materials start",e.FETCH_TEACHER_MATERIALS_START="[materials] fetch teacher materials start",e.FETCH_MATERIALS_SUCCESS="[materials] fetch materials success",e.FETCH_MATERIALS_FAIL="[materials] fetch materials fail",e.CLEAR_MATERIALS="[materials] clear materials",e.FETCH_TEACHER_DETAILS_START="[materials] fetch teacher details start",e.FETCH_STUDENT_DETAILS_START="[materials] fetch student details start",e.FETCH_DETAILS_SUCCESS="[materials] fetch details success",e.FETCH_DETAILS_FAIL="[materials] fetch details fail",e.CLEAR_DETAILS="[materials] clear details",e}({})},47933:(e,t,s)=>{"use strict";s.d(t,{A$:()=>h,BN:()=>I,Cp:()=>M,G:()=>L,Hy:()=>A,MP:()=>f,O9:()=>l,QU:()=>k,Qu:()=>S,Rp:()=>g,U9:()=>_,Ub:()=>d,Uc:()=>y,Uk:()=>C,Yz:()=>O,Z6:()=>o,_j:()=>T,a9:()=>a,dw:()=>N,e3:()=>u,i7:()=>p,jm:()=>v,m9:()=>r,mM:()=>w,nd:()=>E,sy:()=>m,tA:()=>R,vm:()=>c,yf:()=>b,zi:()=>i});var n=s(70027);function r(e){return{type:n.Q.CHANGE_NAME,name:e}}function a(e){return{type:n.Q.CHANGE_LASTNAME,lastname:e}}function i(e){return{type:n.Q.CHANGE_MIDDLENAME,middlename:e}}function o(){return{type:n.Q.CHANGE_HAS_MIDDLENAME}}function l(e){return{type:n.Q.CHANGE_BIRTH_DATE,birthDate:e}}function c(e){return{type:n.Q.CHANGE_SEX,sex:e}}function u(e){return{type:n.Q.CHANGE_SCHOOL_NAME,schoolName:e}}function d(e){return{type:n.Q.CHANGE_GRADE,grade:e}}function m(e){return{type:n.Q.CHANGE_PHONE_NUMBER,phoneNumber:e}}function p(e){return{type:n.Q.CHANGE_TELEGRAM,telegram:e}}function h(){return{type:n.Q.CHANGE_HAS_TELEGRAM}}function E(e){return{type:n.Q.CHANGE_REGION,selectedRegion:e}}function g(e){return{type:n.Q.CHANGE_DISTRICT,selectedDistrict:e}}function y(e){return{type:n.Q.CHANGE_LOCATION,selectedLocation:e}}function f(e){return{type:n.Q.CHANGE_VENUE,selectedVenue:e}}function S(e){return{type:n.Q.CHANGE_PARENT_NAME,parentName:e}}function b(e){return{type:n.Q.CHANGE_PARENT_LASTNAME,parentLastname:e}}function v(e){return{type:n.Q.CHANGE_PARENT_MIDDLENAME,parentMiddlename:e}}function N(){return{type:n.Q.CHANGE_HAS_PARENT_MIDDLENAME}}function I(e){return{type:n.Q.CHANGE_PARENT_EMAIL,parentEmail:e}}function T(e){return{type:n.Q.CHANGE_PARENT_PHONE_NUMBER,parentPhoneNumber:e}}function k(){return{type:n.Q.CHANGE_AGREEMENT_GDPR}}function C(){return{type:n.Q.CHANGE_AGREEMENT_OF_EDUCATIONAL_PROJECT}}function w(){return{type:n.Q.CHANGE_AGREEMENT_USING_SERVICE}}function A(){return{type:n.Q.CHANGE_AGREEMENT_RECEIVE_MAIL}}function O(){return{type:n.Q.CHANGE_AGREEMENT_COMPETITION_CONDITIONS}}function R(e){return{type:n.Q.START_SUBMIT,payload:e}}function _(){return{type:n.Q.FAILED_SUBMIT}}function L(){return{type:n.Q.SUCCESS_SUBMIT}}function M(e){return{type:n.Q.CHANGE_VALIDATION_STATUS_MAP,validationStatusMap:e}}},37996:(e,t,s)=>{"use strict";s.d(t,{$G:()=>w,CP:()=>h,EI:()=>a,EQ:()=>b,Ev:()=>P,FW:()=>r,JS:()=>j,Km:()=>v,Kz:()=>R,Ly:()=>S,P:()=>o,Pd:()=>D,TT:()=>z,Wf:()=>d,YS:()=>A,Z9:()=>M,_L:()=>I,_m:()=>N,aO:()=>_,an:()=>i,c6:()=>O,cX:()=>L,dM:()=>C,dY:()=>l,gn:()=>m,hS:()=>y,iD:()=>c,in:()=>T,oP:()=>p,rc:()=>u,sr:()=>x,tg:()=>U,uO:()=>g,ug:()=>F,uz:()=>E,wj:()=>f,x3:()=>k});var n=s(68575);function r(e){return e.newCandidate.fetchError}function a(e){return e.newCandidate.name}function i(e){return e.newCandidate.lastname}function o(e){return e.newCandidate.middlename}function l(e){return e.newCandidate.hasMiddlename}function c(e){return e.newCandidate.birthDate}function u(e){return e.newCandidate.sex}function d(e){return e.newCandidate.schoolName}function m(e){return e.newCandidate.grade}function p(e){return e.newCandidate.gradeOptions}function h(e){return e.newCandidate.phoneNumber}function E(e){return e.newCandidate.telegram}function g(e){return e.newCandidate.hasTelegram}function y(e){return e.newCandidate.email}function f(e){return e.newCandidate.selectedRegion}function S(e){return e.newCandidate.selectedDistrict}function b(e){return e.newCandidate.selectedLocation}function v(e){return e.newCandidate.selectedVenue}function N(e){return e.newCandidate.regions}function I(e){return e.newCandidate.parentName}function T(e){return e.newCandidate.parentLastname}function k(e){return e.newCandidate.parentMiddlename}function C(e){return e.newCandidate.hasParentMiddlename}function w(e){return e.newCandidate.parentEmail}function A(e){return e.newCandidate.parentPhoneNumber}function O(e){return e.newCandidate.agreementGDPR}function R(e){return e.newCandidate.agreementOfEducationalProject}function _(e){return e.newCandidate.agreementUsingService}function L(e){return e.newCandidate.agreementCompetitionConditions}function M(e){return e.newCandidate.agreementReceiveMail}function P(e){return e.newCandidate.validationStatusMap}function x(e){return e.newCandidate.fieldsMap}function D(e){return e.newCandidate.submittingStatus}function F(e){const{selectedRegion:t,districts:s}=e.newCandidate;return void 0!==t&&s[t]}function z(e){const{selectedRegion:t,selectedDistrict:s,locations:n}=e.newCandidate;return void 0!==t&&n[t]||void 0!==s&&n[s]}function j(e){const{selectedDistrict:t,selectedLocation:s,venues:n}=e.newCandidate;return void 0!==s&&n[s]||void 0!==t&&n[t]}function U(e){const{name:t,lastname:s,middlename:r,hasMiddlename:a,birthDate:i,sex:o,schoolName:l,grade:c,phoneNumber:u,telegram:d,hasTelegram:m,email:p,selectedVenue:h,parentName:E,parentLastname:g,parentMiddlename:y,hasParentMiddlename:f,parentEmail:S,parentPhoneNumber:b,fieldsMap:v,agreementReceiveMail:N,agreementGDPR:I,agreementCompetitionConditions:T}=e.newCandidate,k=!!v.parentData||void 0;return{name:(0,n.ky)(t),lastname:(0,n.ky)(s),middlename:a?(0,n.ky)(r):"",birthDate:i,sex:o,phoneNumber:(0,n.ky)(u),telegram:m?(0,n.ky)(d):"",email:p,schoolName:v.schoolName?(0,n.ky)(l):void 0,grade:v.grade?c:void 0,selectedVenue:v.venue?h:void 0,parentName:v.parentData?(0,n.ky)(E):void 0,parentLastname:v.parentData?(0,n.ky)(g):void 0,parentMiddlename:k&&f?(0,n.ky)(y):"",parentEmail:v.parentData?(0,n.ky)(S):void 0,parentPhoneNumber:v.parentData?(0,n.ky)(b):void 0,agreementReceiveMail:v.agreementReceiveMail?N:void 0,agreement:I,agreementCompetitionConditions:T}}},70027:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r,U:()=>n});let n=function(e){return e.VALID="validation-success",e.EMPTY_VALUE="validation-error-required-field",e.EMPTY_OPTION="validation-error-no-option-is-selected",e.INCORRECT_CHARACTERS="validation-error-incorrect-characters",e.CHARACTERS_EXCEEDED_50="validation-error-number-of-characters-exceeded-50",e.CHARACTERS_EXCEEDED_250="validation-error-number-of-characters-exceeded-250",e.INCORRECT_MAIL="validation-error-incorrect-mail",e.INCORRECT_DATE="validation-error-incorrect-date",e.IMPOSSIBLE_BIRTH_DATE="validation-error-impossible-birth-date",e.IMPOSSIBLE_TELEGRAM_USERNAME="validation-error-impossible-telegram-username",e}({}),r=function(e){return e.CHANGE_NAME="[new candidate] change name",e.CHANGE_LASTNAME="[new candidate] change lastname",e.CHANGE_MIDDLENAME="[new candidate] change middlename",e.CHANGE_HAS_MIDDLENAME="[new candidate] change hasMiddlename",e.CHANGE_BIRTH_DATE="[new candidate] change birthDate",e.CHANGE_SEX="[new candidate] change sex",e.CHANGE_SCHOOL_NAME="[new candidate] change schoolName",e.CHANGE_GRADE="[new candidate] change grade",e.CHANGE_PHONE_NUMBER="[new candidate] change phoneNumber",e.CHANGE_TELEGRAM="[new candidate] change telegram",e.CHANGE_HAS_TELEGRAM="[new candidate] change hasTelegram",e.CHANGE_REGION="[new candidate] change selectedRegion",e.CHANGE_DISTRICT="[new candidate] change selectedDistrict",e.CHANGE_LOCATION="[new candidate] change selectedLocation",e.CHANGE_VENUE="[new candidate] change selectedVenue",e.CHANGE_PARENT_NAME="[new candidate] change parentName",e.CHANGE_PARENT_LASTNAME="[new candidate] change parentLastname",e.CHANGE_PARENT_MIDDLENAME="[new candidate] change parentMiddlename",e.CHANGE_HAS_PARENT_MIDDLENAME="[new candidate] change hasParentMiddlename",e.CHANGE_PARENT_PHONE_NUMBER="[new candidate] change parentPhoneNumber",e.CHANGE_PARENT_EMAIL="[new candidate] change parentEmail",e.CHANGE_AGREEMENT_GDPR="[new candidate] change agreementGDPR",e.CHANGE_AGREEMENT_OF_EDUCATIONAL_PROJECT="[new candidate] change agreementOfEducationalProject",e.CHANGE_AGREEMENT_USING_SERVICE="[new candidate] change agreementUsingService",e.CHANGE_AGREEMENT_COMPETITION_CONDITIONS="[new candidate] change agreementCompetitionConditions",e.CHANGE_AGREEMENT_RECEIVE_MAIL="[new candidate] change agreementReceiveMail",e.CHANGE_VALIDATION_STATUS_MAP="[new candidate] change validation status map",e.START_SUBMIT="[new candidate] start submit",e.FAILED_SUBMIT="[new candidate] failed submit",e.SUCCESS_SUBMIT="[new candidate] success submit",e.CHANGE_SUBMITTING_STATUS="[new candidate] change submitting status",e}({})},68575:(e,t,s)=>{"use strict";s.d(t,{CK:()=>h,DT:()=>l,Q7:()=>o,Rq:()=>m,Se:()=>c,Ug:()=>u,Ws:()=>i,Y5:()=>d,kb:()=>a,ky:()=>E,rN:()=>p});var n=s(34038),r=s(70027);function a(e){const t=E(e);return""===t?r.U.EMPTY_VALUE:t.length>50?r.U.CHARACTERS_EXCEEDED_50:/^[ \x2D\u0401\u0410-\u044F\u0451]+$/.test(t)?r.U.VALID:r.U.INCORRECT_CHARACTERS}function i(e){const t=Number(new Date(e||""));return void 0===e?r.U.INCORRECT_DATE:Date.now()<t||Number(new Date("1900-01-01"))>t?r.U.IMPOSSIBLE_BIRTH_DATE:r.U.VALID}function o(e){return/^\+7 \d{3} \d{3} \d{2} \d{2}$/.test(e)?r.U.VALID:r.U.EMPTY_VALUE}function l(e){const t=e.trim();return""===t?r.U.EMPTY_VALUE:n.X.test(t)?r.U.VALID:r.U.INCORRECT_MAIL}function c(e){const t=E(e);return""===t?r.U.EMPTY_VALUE:t.length>250?r.U.CHARACTERS_EXCEEDED_250:r.U.VALID}function u(e,t){return void 0!==t.find((t=>t.id===e))?r.U.VALID:r.U.EMPTY_VALUE}function d(e,t){return t&&void 0===e?r.U.EMPTY_VALUE:r.U.VALID}function m(e,t){return t&&void 0===e?r.U.EMPTY_VALUE:r.U.VALID}function p(e){return void 0===e?r.U.EMPTY_VALUE:r.U.VALID}function h(e){const t=E(e);return""===t?r.U.EMPTY_VALUE:/^[0-9A-Z_a-z]{5,32}$/.test(t)?r.U.VALID:r.U.IMPOSSIBLE_TELEGRAM_USERNAME}function E(e){return e.trim().replace(/\s+/g," ")}},30872:(e,t,s)=>{"use strict";s.d(t,{L6:()=>E,LQ:()=>h,N2:()=>d,PW:()=>c,Qn:()=>a,Ti:()=>g,VN:()=>i,YJ:()=>l,_b:()=>u,aG:()=>p,bb:()=>o,fP:()=>m,qJ:()=>r});var n=s(69154);function r(){return{type:n.Q.START_NOTIFICATION_POLL}}function a(){return{type:n.Q.STOP_NOTIFICATION_POLL}}function i(e){return{type:n.Q.SET_UNREAD_COUNT,payload:e}}function o(){return{type:n.Q.FETCH_NOTIFICATIONS_START}}function l(e){return{type:n.Q.FETCH_NOTIFICATIONS_SUCCESS,payload:e}}function c(e){return{type:n.Q.FETCH_NOTIFICATIONS_FAIL,payload:e}}function u(e){return{type:n.Q.HIDE_NOTIFICATION,payload:e}}function d(e){return{type:n.Q.UNHIDE_NOTIFICATION,payload:e}}function m(e){return{type:n.Q.DELETE_NOTIFICATION,payload:e}}function p(){return{type:n.Q.HIDE_ALL_NOTIFICATIONS}}function h(){return{type:n.Q.UNHIDE_ALL_NOTIFICATIONS}}function E(){return{type:n.Q.DELETE_ALL_NOTIFICATIONS}}function g(e){return{type:n.Q.SET_CONSISTENCY_FLAG,payload:e}}},36261:(e,t,s)=>{"use strict";s.d(t,{AX:()=>a,NP:()=>d,UI:()=>o,hE:()=>u,kU:()=>i,mb:()=>c,n_:()=>m,wO:()=>l});var n=s(97520);function r(e,t){const{notificationMap:s}=e.notificationCenter,n=s[t];return Boolean(n&&!n.isRead)}function a(e){const{notificationIds:t,notificationMap:s}=e.notificationCenter;return t.map((e=>s[e])).filter((e=>e&&!e.isRead))}function i(e){return e.notificationCenter.notificationIds.find((t=>r(e,t)))}function o(e){return(0,n.U)(e.notificationCenter.notificationIds,(t=>r(e,t)))}function l(e){return e.notificationCenter.notificationIds}function c(e){return e.notificationCenter.unreadCount}function u(e){return e.notificationCenter.fetchStatus}function d(e){return e.notificationCenter.fetchError}function m(e){return e.notificationCenter.isConsistent}},69154:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.START_NOTIFICATION_POLL="[notification-center] start notification poll",e.STOP_NOTIFICATION_POLL="[notification-center] stop notification poll",e.SET_UNREAD_COUNT="[notification-center] set unread count",e.FETCH_NOTIFICATIONS_START="[notification-center] fetch notifications start",e.FETCH_NOTIFICATIONS_SUCCESS="[notification-center] fetch notifications success",e.FETCH_NOTIFICATIONS_FAIL="[notification-center] fetch notifications fail",e.HIDE_NOTIFICATION="[notification-center] hide notification",e.UNHIDE_NOTIFICATION="[notification-center] unhide notification",e.DELETE_NOTIFICATION="[notification-center] delete notification",e.HIDE_ALL_NOTIFICATIONS="[notification-center] hide all notifications",e.UNHIDE_ALL_NOTIFICATIONS="[notification-center] unhide all notifications",e.DELETE_ALL_NOTIFICATIONS="[notification-center] delete all notifications",e.SET_CONSISTENCY_FLAG="[notification-center] set consistency flag",e}({})},33315:(e,t,s)=>{"use strict";s.d(t,{w:()=>o,z:()=>i});var n=s(19077);let r=0;const a=()=>r++;function i(e){return{type:n.Q.ADD_NOTIFICATION,payload:Object.assign({},e,{id:a()})}}function o(e){return{type:n.Q.REMOVE_NOTIFICATION,payload:{id:e}}}},95054:(e,t,s)=>{"use strict";function n(e){return e.notifications}s.d(t,{T:()=>n})},19077:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r,V:()=>n});let n=function(e){return e.ERROR="error",e.INFO="info",e.SUCCESS="success",e}({}),r=function(e){return e.ADD_NOTIFICATION="[notifications] add",e.REMOVE_NOTIFICATION="[notifications] remove",e}({})},15100:(e,t,s)=>{"use strict";s.d(t,{Hl:()=>i,d1:()=>r,dw:()=>l,ec:()=>a,ky:()=>o});var n=s(69134);function r(e){return{type:n.Q.FETCH_P2P_REVIEW_DETAILS_START,payload:e}}function a(e){return{type:n.Q.FETCH_P2P_REVIEW_DETAILS_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_P2P_REVIEW_DETAILS_DETAILS_FAIL,payload:e}}function o(e){return{type:n.Q.CLEAR_P2P_REVIEW_DETAILS,payload:e}}function l(e){return{type:n.Q.PATCH_P2P_REVIEW_DETAILS,payload:e}}},69134:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_P2P_REVIEW_DETAILS_START="[p2p] fetch p2p review details start",e.FETCH_P2P_REVIEW_DETAILS_SUCCESS="[p2p] fetch p2p review details success",e.FETCH_P2P_REVIEW_DETAILS_DETAILS_FAIL="[p2p] fetch p2p review details fail",e.CLEAR_P2P_REVIEW_DETAILS="[p2p] clear p2p review details",e.PATCH_P2P_REVIEW_DETAILS="[p2p] patch p2p review details",e}({})},93601:(e,t,s)=>{"use strict";s.d(t,{ci:()=>r,jP:()=>i,yR:()=>a});var n=s(8599);function r(e){return{type:n.Q.SET_GRADE_START,payload:e}}function a(){return{type:n.Q.SET_GRADE_SUCCESS}}function i(e){return{type:n.Q.SET_GRADE_FAIL,payload:e}}},8599:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.SET_GRADE_START="[p2p] set p2p review mark start",e.SET_GRADE_SUCCESS="[p2p] set p2p review mark success",e.SET_GRADE_FAIL="[p2p] set p2p review mark fail",e}({})},76200:(e,t,s)=>{"use strict";s.d(t,{Ox:()=>i,Ru:()=>o,d_:()=>l,q8:()=>a,yG:()=>r});var n=s(96338);function r(e){return{type:n.Q.FETCH_P2P_REVIEWS_START,payload:e}}function a(e){return{type:n.Q.FETCH_P2P_REVIEWS_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_P2P_REVIEWS_FAIL,payload:e}}function o(){return{type:n.Q.CLEAR_P2P_REVIEWS}}function l(e){return{type:n.Q.PATCH_P2P_REVIEW,payload:e}}},96338:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_P2P_REVIEWS_START="[p2p] fetch list start",e.FETCH_P2P_REVIEWS_SUCCESS="[p2p] fetch list success",e.FETCH_P2P_REVIEWS_FAIL="[p2p] fetch list fail",e.CLEAR_P2P_REVIEWS="[p2p] clear list",e.PATCH_P2P_REVIEW="[p2p] patch review in list",e}({})},11102:(e,t,s)=>{"use strict";s.d(t,{De:()=>o,Lt:()=>a,MP:()=>l,R8:()=>c,Ro:()=>p,i9:()=>d,nP:()=>i,rs:()=>u,xT:()=>m,z:()=>r});var n=s(15420);function r(e,t,s,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{type:n.Q.START_EDIT,phone:e,city:t,venue:s,username:r,publicKey:a}}function a(e){return{type:n.Q.SAVE_PROFILE,callback:e}}function i(e){return{type:n.Q.SET_PHONE,phone:e}}function o(e){return{type:n.Q.SET_VENUES,venues:e}}function l(e){return{type:n.Q.CHANGE_VENUE,venue:e}}function c(e){return{type:n.Q.CHANGE_USERNAME,username:e}}function u(e){return{type:n.Q.TOGGLE_VENUES_LOADING,isLoading:e}}function d(e){return{type:n.Q.SET_VALIDATION_ERRORS,statusMap:e}}function m(){return{type:n.Q.END_EDITING}}function p(e){return{type:n.Q.SET_PUBLIC_KEY,publicKey:e}}},1639:(e,t,s)=>{"use strict";function n(e){return e.profileEditor.isEditing}function r(e){return e.profileEditor.phone}function a(e){return e.profileEditor.username}function i(e){return e.profileEditor.venue}function o(e){return e.profileEditor.venueList}function l(e){return e.profileEditor.isVenuesLoading||e.profileEditor.isSaving}function c(e){return e.profileEditor.errors}function u(e){return e.profileEditor.isSaving}function d(e){return e.profileEditor.publicKey}s.d(t,{Be:()=>u,Jl:()=>d,Km:()=>i,MU:()=>o,aK:()=>n,fC:()=>l,nC:()=>r,rd:()=>a,v:()=>c})},15420:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.START_EDIT="[profile editor] start edit",e.END_EDITING="[profile editor] edn editing profile",e.SAVE_PROFILE="[profile editor] save profile",e.SET_PHONE="[profile editor] set phone",e.SET_VENUES="[profile editor] set venues list",e.CHANGE_VENUE="[profile editor] change venue",e.CHANGE_USERNAME="[profile editor] change user fullname",e.TOGGLE_VENUES_LOADING="[profile editor] toggle venues loading",e.SET_VALIDATION_ERRORS="[profile editor] set validation errors",e.SET_PUBLIC_KEY="[profile editor] set public key",e}({})},80974:(e,t,s)=>{"use strict";s.d(t,{Bd:()=>p,Bj:()=>v,D9:()=>u,G$:()=>a,IN:()=>N,Jm:()=>k,KV:()=>E,Mg:()=>b,SB:()=>c,Si:()=>g,Uv:()=>S,YU:()=>m,ZJ:()=>y,_p:()=>l,iV:()=>h,iq:()=>T,jz:()=>i,lD:()=>d,n7:()=>I,qL:()=>o,x1:()=>r,zE:()=>f});var n=s(62220);function r(e){return{type:n.Q.GENERATE_SCHEDULE,payload:e}}function a(e){return{type:n.Q.UPDATE_STUDY_PLAN,payload:e}}function i(e){return{type:n.Q.SET_GENERATED_SCHEDULE,payload:e}}function o(e){return{type:n.Q.SET_GENERATE_ERROR,payload:e}}function l(){return{type:n.Q.RESET_SCHEDULE_GENERATOR}}function c(e){return{type:n.Q.LOAD_PAGE_DATA,payload:e}}function u(e){return{type:n.Q.LOAD_PAGE_DATA_STUDENT,payload:e}}function d(e){return{type:n.Q.LOAD_PAGE_DATA_SUCCESS,payload:e}}function m(e){return{type:n.Q.LOAD_PAGE_DATA_FAILURE,payload:e}}function p(e){return{type:n.Q.CHANGE_STUDY_PERIOD,payload:e}}function h(e){return{type:n.Q.CHANGE_STUDY_PERIOD_STUDENT,payload:e}}function E(e,t){return{type:n.Q.SET_SCHEDULE,payload:e,meta:t}}function g(e){return{type:n.Q.SET_SCHEDULE_LOAD_ERROR,payload:e}}function y(){return{type:n.Q.RESET_SCHEDULE}}function f(e,t){return{type:n.Q.ADD_SKIP_REASON,payload:{id:e,reason:t}}}function S(e,t){return{type:n.Q.ASSIGN_EVENT,payload:{electiveId:e,reserveId:t}}}function b(e){return{type:n.Q.SKIP_EVENT,payload:{id:e}}}function v(e,t){return{type:n.Q.SWAP_EVENTS,payload:{fromId:e,toId:t}}}function N(){return{type:n.Q.CANCEL_CHANGES}}function I(e){return{type:n.Q.SAVE_SCHEDULE,payload:e}}function T(e){return{type:n.Q.SET_SAVE_ERROR,payload:e}}function k(){return{type:n.Q.SET_SAVE_SUCCESS}}},83767:(e,t,s)=>{"use strict";function n(e){return e.schedule.actions}function r(e){return e.schedule.revisionId}function a(e){return e.schedule.editedEvents.reduce(((t,s,n)=>{const r=e.schedule.initialEvents[n],a=s.id!==r.id,i=s.title!==r.title;return a||i?[...t,s.id]:t}),[])}function i(e){const{currentStudyPeriod:t,courseDetails:s}=e.schedule;return s&&t&&s.studyPeriods.find((e=>e.id===t))||null}function o(e){return e.schedule.courseDetails}function l(e){return e.schedule.editedEvents}function c(e){return e.schedule.currentOrPassedSchedulePlan}function u(e){return e.schedule.futureSchedulePlan}function d(e){return e.schedule.pageLoadStatus}function m(e){return e.schedule.pageLoadError}function p(e){return e.schedule.scheduleLoadStatus}function h(e){return e.schedule.scheduleLoadError}function E(e){return e.schedule.saveStatus}function g(e){return e.schedule.generateStatus}function y(e){return e.schedule.generateError}function f(e){return e.schedule.unassignedEvents}function S(e){const{currentOrPassedSchedulePlan:t,futureSchedulePlan:s}=e.schedule;return!(null!==t&&0!==Object.keys(t).length||null!==s&&0!==Object.keys(s).length)}function b(e){return e.schedule.initialEvents.length>0}function v(e){return a(e).length>0}s.d(t,{AD:()=>p,Bl:()=>S,DM:()=>g,DQ:()=>a,Ih:()=>i,LT:()=>f,LV:()=>E,LX:()=>v,Mi:()=>d,Qo:()=>u,TK:()=>c,kQ:()=>l,ko:()=>n,kw:()=>b,pK:()=>y,qW:()=>o,sD:()=>h,yp:()=>m,z0:()=>r})},62220:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.GENERATE_SCHEDULE="[schedule] generate start",e.UPDATE_STUDY_PLAN="[schedule] update study plan start",e.SET_GENERATE_ERROR="[schedule] set generate error",e.SET_GENERATED_SCHEDULE="[schedule] set generated schedule",e.RESET_SCHEDULE_GENERATOR="[schedule] reset schedule generator",e.LOAD_PAGE_DATA="[schedule] load page start",e.LOAD_PAGE_DATA_STUDENT="[schedule] load page start student",e.LOAD_PAGE_DATA_SUCCESS="[schedule] load page success",e.LOAD_PAGE_DATA_FAILURE="[schedule] load page failure",e.CHANGE_STUDY_PERIOD="[schedule] change study period",e.CHANGE_STUDY_PERIOD_STUDENT="[schedule] change study period student",e.SET_SCHEDULE="[schedule] set schedule",e.SET_SCHEDULE_LOAD_ERROR="[schedule] set schedule load error",e.RESET_SCHEDULE="[schedule] reset schedule",e.ADD_SKIP_REASON="[schedule] add event skip reason",e.ASSIGN_EVENT="[schedule] assign event",e.EDIT_ACTION="[schedule] edit event",e.SKIP_EVENT="[schedule] skip event",e.SWAP_EVENTS="[schedule] swap events",e.SAVE_SCHEDULE="[schedule] save start",e.SET_SAVE_ERROR="[schedule] set save error",e.SET_SAVE_SUCCESS="[schedule] set save success",e.CANCEL_CHANGES="[schedule] cancel changes",e}({})},36242:(e,t,s)=>{"use strict";s.d(t,{An:()=>o,HZ:()=>l,IS:()=>r,Sg:()=>c,Z$:()=>i,vv:()=>a});var n=s(87128);function r(e){return{type:n.Q.FETCH_TEACHER_DETAILS_START,payload:e}}function a(e){return{type:n.Q.FETCH_STUDENT_DETAILS_START,payload:e}}function i(e){return{type:n.Q.FETCH_DETAILS_SUCCESS,payload:e}}function o(e){return{type:n.Q.FETCH_DETAILS_FAIL,payload:e}}function l(e){return{type:n.Q.CLEAR_DETAILS,payload:e}}function c(e){return{type:n.Q.PATCH_DETAILS,payload:e}}},87979:(e,t,s)=>{"use strict";function n(e,t){return e.solutions.details.detailsMap[t]}function r(e){return e.solutions.details.detailsMap}function a(e){return e.solutions.details.fetchStatus}function i(e){return e.solutions.details.fetchError}s.d(t,{AJ:()=>a,GZ:()=>n,fP:()=>r,uO:()=>i})},87128:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_STUDENT_DETAILS_START="[solutions] fetch student details start",e.FETCH_TEACHER_DETAILS_START="[solutions] fetch teacher details start",e.FETCH_DETAILS_SUCCESS="[solutions] fetch details success",e.FETCH_DETAILS_FAIL="[solutions] fetch details fail",e.CLEAR_DETAILS="[solutions] clear details",e.PATCH_DETAILS="[solutions] patch details",e}({})},91667:(e,t,s)=>{"use strict";s.d(t,{F2:()=>a,Qc:()=>i,nY:()=>r});var n=s(54837);function r(e){return{type:n.Q.SET_GRADE_START,payload:e}}function a(){return{type:n.Q.SET_GRADE_SUCCESS}}function i(e){return{type:n.Q.SET_GRADE_FAIL,payload:e}}},54837:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.SET_GRADE_START="[solutions] set mark start",e.SET_GRADE_SUCCESS="[solutions] set mark success",e.SET_GRADE_FAIL="[solutions] set mark fail",e}({})},35974:(e,t,s)=>{"use strict";s.d(t,{Dx:()=>a,G$:()=>o,JU:()=>r,Xp:()=>i});var n=s(81764);function r(e){return{type:n.Q.FETCH_SOLUTIONS_INFO_START,payload:e}}function a(e){return{type:n.Q.FETCH_SOLUTIONS_INFO_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_SOLUTIONS_INFO_FAIL,payload:e}}function o(){return{type:n.Q.CLEAR_SOLUTIONS_INFO}}},81764:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_SOLUTIONS_INFO_START="[solutions] fetch info start",e.FETCH_SOLUTIONS_INFO_SUCCESS="[solutions] fetch info success",e.FETCH_SOLUTIONS_INFO_FAIL="[solutions] fetch info fail",e.CLEAR_SOLUTIONS_INFO="[solutions] clear info",e}({})},56407:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});var n=s(99777);function r(e){return{type:n.Q.SELECT_SUBMISSION,payload:e}}},77506:(e,t,s)=>{"use strict";function n(e){return e.solutions.interface.selectedSubmission}s.d(t,{a:()=>n})},99777:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.SELECT_SUBMISSION="[solutions] select submission",e}({})},44498:(e,t,s)=>{"use strict";s.d(t,{Jb:()=>i,cE:()=>l,rX:()=>a,wU:()=>o,x6:()=>r});var n=s(92824);function r(e){return{type:n.Q.FETCH_TEACHER_SOLUTIONS_START,payload:e}}function a(e){return{type:n.Q.FETCH_SOLUTIONS_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_SOLUTIONS_FAIL,payload:e}}function o(){return{type:n.Q.CLEAR_SOLUTIONS}}function l(e){return{type:n.Q.PATCH_SOLUTION,payload:e}}},92824:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_TEACHER_SOLUTIONS_START="[solutions] fetch list start",e.FETCH_SOLUTIONS_SUCCESS="[solutions] fetch list success",e.FETCH_SOLUTIONS_FAIL="[solutions] fetch list fail",e.CLEAR_SOLUTIONS="[solutions] clear list",e.PATCH_SOLUTION="[solutions] patch solution in list",e}({})},3576:(e,t,s)=>{"use strict";s.d(t,{KT:()=>i,Wh:()=>r,iG:()=>a,m2:()=>u,mn:()=>o,sn:()=>c,z7:()=>l});var n=s(25762);function r(e,t){return{type:n.Q.FETCH_PROBLEM_SOLUTIONS_START,problemLinkId:e,groupId:t}}function a(e){return{type:n.Q.FETCH_PROBLEM_SOLUTIONS_ERROR,error:e}}function i(e){return{type:n.Q.FETCH_PROBLEM_DETAILS_ERROR,error:e}}function o(e){return{type:n.Q.SET_PROBLEM_SOLUTIONS,solutionInfo:e}}function l(){return{type:n.Q.CLEAR}}function c(e,t,s){return{type:n.Q.FETCH_PROBLEM_DETAILS,problemLinkId:e,groupId:t,solutionId:s}}function u(e){return{type:n.Q.SET_PROBLEM_DETAILS,problemDetails:e}}},25762:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_PROBLEM_SOLUTIONS_START="[solutions] start fetching problem details",e.FETCH_PROBLEM_SOLUTIONS_ERROR="[solutions] set fetching problem details error",e.SET_PROBLEM_SOLUTIONS="[solutions] set teacher problem solutions",e.CLEAR="[solutions] clear problem details",e.FETCH_PROBLEM_DETAILS="[solution] fetch teacher problem details",e.SET_PROBLEM_DETAILS="[solution] set teacher problem details",e.FETCH_PROBLEM_DETAILS_ERROR="[solution] set teacher problem details error",e}({})},27656:(e,t,s)=>{"use strict";s.d(t,{s:()=>n});const n=(0,s(77475).createAsyncAction)("[solutions] rejudge solution start","[solutions] rejudge solution success","[solutions] rejudge solution fail")()},50632:(e,t,s)=>{"use strict";s.d(t,{$M:()=>i,IH:()=>r,TU:()=>a});var n=s(57330);function r(e){return{type:n.Q.SEND_SOLUTION_START,payload:e}}function a(e){return{type:n.Q.SEND_SOLUTION_SUCCESS,payload:e}}function i(e){return{type:n.Q.SEND_SOLUTION_FAIL,payload:e}}},57330:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n,V:()=>r});let n=function(e){return e.SEND_SOLUTION_START="[solutions] send solution start",e.SEND_SOLUTION_SUCCESS="[solutions] send solution success",e.SEND_SOLUTION_FAIL="[solutions] send solution fail",e}({}),r=function(e){return e.FROM_EDITOR="editor",e.FROM_FILE="file",e}({})},20966:(e,t,s)=>{"use strict";s.d(t,{$e:()=>a,Uy:()=>o,tF:()=>i,z_:()=>r});var n=s(35300);function r(e){return{type:n.Q.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START,payload:e}}function a(e){return{type:n.Q.FETCH_STUDENTS_WITHOUT_SOLUTIONS_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_STUDENTS_WITHOUT_SOLUTIONS_FAIL,payload:e}}function o(){return{type:n.Q.CLEAR_STUDENTS_WITHOUT_SOLUTIONS}}},35300:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START="[solutions] fetch student without solutions start",e.FETCH_STUDENTS_WITHOUT_SOLUTIONS_SUCCESS="[solutions] fetch student without solutions success",e.FETCH_STUDENTS_WITHOUT_SOLUTIONS_FAIL="[solutions] fetch student without solutions fail",e.CLEAR_STUDENTS_WITHOUT_SOLUTIONS="[solutions] clear student without solutions",e}({})},88998:(e,t,s)=>{"use strict";s.d(t,{QZ:()=>i,T9:()=>o,TU:()=>a,_H:()=>r});var n=s(36612);function r(e){return{type:n.Q.FETCH_COURSE_STUDENT_PROGRESS_START,payload:e}}function a(e){return{type:n.Q.FETCH_COURSE_STUDENT_PROGRESS_SUCCESS,payload:e}}function i(e){return{type:n.Q.FETCH_COURSE_STUDENT_PROGRESS_FAIL,payload:e}}function o(){return{type:n.Q.CLEAR_COURSE_STUDENT_PROGRESS}}},36612:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.FETCH_COURSE_STUDENT_PROGRESS_START="[course-student-progress] fetch start",e.FETCH_COURSE_STUDENT_PROGRESS_SUCCESS="[course-student-progress] fetch success",e.FETCH_COURSE_STUDENT_PROGRESS_FAIL="[course-student-progress] fetch fail",e.CLEAR_COURSE_STUDENT_PROGRESS="[course-student-progress] clear",e}({})},57278:(e,t,s)=>{"use strict";s.d(t,{gS:()=>a,hH:()=>i,kW:()=>o,lp:()=>r});var n=s(77475);const r=(0,n.createAsyncAction)("[submissions] fetch submission start","[submissions] fetch submission success","[submissions] fetch submission failure")(),a=(0,n.createAsyncAction)("[submissions] fetch contest logs start","[submissions] fetch contest logs success","[submissions] fetch contest logs failure")(),i=(0,n.createAsyncAction)("[submissions] fetch submissions plagiarism start","[submissions] fetch submissions plagiarism success","[submissions] fetch submissions plagiarism failure")(),o=(0,n.createAsyncAction)("[submissions] update submissions plagiarism start","[submissions] update submissions plagiarism success","[submissions] update submissions plagiarism failure")()},67929:(e,t,s)=>{"use strict";s.d(t,{_:()=>i});var n=s(77475),r=s(44046),a=s(57278);const i=(0,n.createReducer)({submissionsMap:{},contestLogsMap:{},plagiarismsMap:{}}).handleAction(a.lp.request,((e,t)=>{const{submissionId:s}=t.payload;let n=null,a=null;return s in e.submissionsMap&&({submission:n,fileContent:a}=e.submissionsMap[s]),Object.assign({},e,{submissionsMap:Object.assign({},e.submissionsMap,{[s]:{submission:n,fileContent:a,fetchError:null,fetchStatus:r.L.PENDING}})})})).handleAction(a.lp.success,((e,t)=>{const{submissionId:s,submission:n,fileContent:a}=t.payload;return Object.assign({},e,{submissionsMap:Object.assign({},e.submissionsMap,{[s]:{submission:n,fileContent:a,fetchError:null,fetchStatus:r.L.SUCCESS}})})})).handleAction(a.lp.failure,((e,t)=>{const{submissionId:s,error:n}=t.payload;let a=null,i=null;return s in e.submissionsMap&&({submission:a,fileContent:i}=e.submissionsMap[s]),Object.assign({},e,{submissionsMap:Object.assign({},e.submissionsMap,{[s]:{submission:a,fileContent:i,fetchError:n,fetchStatus:r.L.FAIL}})})})).handleAction(a.gS.request,((e,t)=>{const{submissionId:s}=t.payload;let n=null;return s in e.contestLogsMap&&({contestLogs:n}=e.contestLogsMap[s]),Object.assign({},e,{contestLogsMap:Object.assign({},e.contestLogsMap,{[s]:{contestLogs:n,fetchError:null,fetchStatus:r.L.PENDING}})})})).handleAction(a.gS.success,((e,t)=>{const{submissionId:s,contestLogs:n}=t.payload;return Object.assign({},e,{contestLogsMap:Object.assign({},e.contestLogsMap,{[s]:{contestLogs:n,fetchError:null,fetchStatus:r.L.SUCCESS}})})})).handleAction(a.gS.failure,((e,t)=>{const{submissionId:s,error:n}=t.payload;let a=null;return s in e.contestLogsMap&&({contestLogs:a}=e.contestLogsMap[s]),Object.assign({},e,{contestLogsMap:Object.assign({},e.contestLogsMap,{[s]:{contestLogs:a,fetchError:n,fetchStatus:r.L.FAIL}})})})).handleAction(a.hH.request,((e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:n}=t.payload,a=o(s,n);let i=null;return a in e.plagiarismsMap&&({plagiarism:i}=e.plagiarismsMap[a]),Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[a]:Object.assign({},e.plagiarismsMap[a],{plagiarism:i,fetchError:null,fetchStatus:r.L.PENDING})})})})).handleAction(a.hH.success,((e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:n,plagiarism:a}=t.payload,i=o(s,n);return Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{plagiarism:a,fetchError:null,fetchStatus:r.L.SUCCESS})})})})).handleAction(a.hH.failure,((e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:n,error:a}=t.payload,i=o(s,n);let l=null;return i in e.plagiarismsMap&&({plagiarism:l}=e.plagiarismsMap[i]),Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{plagiarism:l,fetchError:a,fetchStatus:r.L.FAIL})})})})).handleAction(a.kW.request,((e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:n}=t.payload,a=o(s,n);return Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[a]:Object.assign({},e.plagiarismsMap[a],{updateError:null,updateStatus:r.L.PENDING})})})})).handleAction(a.kW.success,((e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:n,body:a}=t.payload,i=o(s,n);let{plagiarism:l}=e.plagiarismsMap[i];return l&&(l=Object.assign({},l,a)),Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{plagiarism:l,updateError:null,updateStatus:r.L.SUCCESS})})})})).handleAction(a.kW.failure,((e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:n,error:a}=t.payload,i=o(s,n);return Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{updateError:a,updateStatus:r.L.FAIL})})})}));function o(e,t){return"".concat(e,",").concat(t)}},66332:(e,t,s)=>{"use strict";s.d(t,{s:()=>g});var n=s(77475),r=s(23507),a=s(29159),i=s(4400),o=s(19077),l=s(33315),c=s(5882);const u={submission:new c.s("/api/submissions/:submissionId"),contestLogs:new c.s("/api/submissions/:submissionId/contest-logs"),plagiarism:new c.s("/api/submissions/:suspiciousSubmissionId/plagiarisms/:sourceSubmissionId")};var d=s(57278);function*m(e){const{submissionId:t}=e.payload,s=u.submission.build({submissionId:t.toString()});try{const{submission:e,fileContent:n}=yield(0,r.T1)(a.Em,s);yield(0,r.yJ)(d.lp.success({submissionId:t,submission:e,fileContent:n}))}catch(e){yield(0,r.yJ)(d.lp.failure({submissionId:t,error:e}))}}function*p(e){const{submissionId:t}=e.payload,s=u.contestLogs.build({submissionId:t.toString()});try{const e=yield(0,r.T1)(a.Em,s);yield(0,r.yJ)(d.gS.success({submissionId:t,contestLogs:e}))}catch(e){yield(0,r.yJ)(d.gS.failure({submissionId:t,error:e}))}}function*h(e){const{suspiciousSubmissionId:t,sourceSubmissionId:s}=e.payload,n=u.plagiarism.build({suspiciousSubmissionId:t.toString(),sourceSubmissionId:s.toString()});try{const e=yield(0,r.T1)(a.Em,n);yield(0,r.yJ)(d.hH.success({suspiciousSubmissionId:t,sourceSubmissionId:s,plagiarism:e}))}catch(e){yield(0,r.yJ)(d.hH.failure({suspiciousSubmissionId:t,sourceSubmissionId:s,error:e}))}}function*E(e){const{suspiciousSubmissionId:t,sourceSubmissionId:s,body:n}=e.payload,c=u.plagiarism.build({suspiciousSubmissionId:t.toString(),sourceSubmissionId:s.toString()});try{yield(0,r.T1)(a.Em,c,{method:"PATCH",body:JSON.stringify(n)}),yield(0,r.yJ)(d.kW.success({suspiciousSubmissionId:t,sourceSubmissionId:s,body:n}))}catch(e){yield(0,r.yJ)(d.kW.failure({suspiciousSubmissionId:t,sourceSubmissionId:s,error:e})),yield(0,r.yJ)((0,l.z)({i18n:(0,i.T$)(e),type:o.V.ERROR}))}}function*g(){yield(0,r.Q7)([(0,r.jP)((0,n.getType)(d.lp.request),m),(0,r.jP)((0,n.getType)(d.gS.request),p),(0,r.jP)((0,n.getType)(d.hH.request),h),(0,r.jP)((0,n.getType)(d.kW.request),E)])}},90571:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});let n=function(e){return e.INITIALIZE_TABLE="[table-settings] initialize table",e.SET_PAGE_SIZE="[table-settings] set page size",e.TOGGLE_COLUMN_VISIBILITY="[table-settings] toggle column visibility",e.CLEAR_SETTINGS="[table-settings] clear settings",e}({})},44046:(e,t,s)=>{"use strict";s.d(t,{L:()=>n});let n=function(e){return e.PENDING="pending",e.SUCCESS="success",e.FAIL="fail",e}({})},34946:(e,t,s)=>{"use strict";function n(e){return e.users.user}function r(e){return e.users.user?e.users.user.id:null}function a(e){return e.users.user?e.users.user.uid:null}function i(e){return!!e.users.user&&e.users.user.isSuperuser}s.d(t,{F6:()=>r,Y8:()=>i,wz:()=>n,yZ:()=>a})},96802:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});let n=function(e){return e.YANDEX="yandex",e.YANGO="yango",e}({})},91644:(e,t,s)=>{"use strict";s.d(t,{A:()=>n,Z:()=>r});let n=function(e){return e.PYTHON=".py",e.PASCAL=".pas",e.PASCAL_ABC=".abc",e.PHP=".php",e.C=".c",e.CPP=".cpp",e.CS=".cs",e.JAVA=".java",e.JAVASCRIPT=".js",e.GO=".go",e.SQL=".sql",e.SQLITE=".sqlite",e.BASIC=".bas",e.ZIP=".zip",e.ZIP7=".7z",e}({});const r={[n.CPP]:"text/x-c++src",[n.C]:"text/x-csrc",[n.CS]:"text/x-csharp",[n.JAVA]:"text/x-java",[n.JAVASCRIPT]:"application/javascript",[n.GO]:"text/x-go",[n.SQL]:"application/x-sql",[n.SQLITE]:"application/vnd.sqlite3",[n.PASCAL]:"text/x-pascal",[n.PASCAL_ABC]:"text/x-pascal",[n.PHP]:"text/x-php",[n.BASIC]:"text/x-vb",[n.PYTHON]:"text/x-python",default:"text/plain"}},16854:(e,t,s)=>{"use strict";s.d(t,{W:()=>n});class n{static init(e){window.Ya.Rum.updateErrors({page:"search",yandexuid:e}),window.onunhandledrejection=e=>{window.Ya.Rum.logError({},new Error(e.reason))},window.onerror=(e,t,s,n,r)=>{window.Ya.Rum.logError({},r)}}static captureException(e){window.Ya.Rum.logError({},e)}static captureComponentException(e,t){window.Ya.Rum.logError({additional:t},e)}}},29159:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>d,Em:()=>u});var n=s(43561),r=s(12215),a=s.n(r),i=s(9928),o=s(74291);const l=["method","headers","excludeDefaultHeaders"],c={"Content-Type":"application/json"};async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{method:s="GET",headers:r={},excludeDefaultHeaders:u=!1}=t,d=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(t,l),m={};["GET","HEAD","OPTIONS"].includes(s)||(m["X-CSRF-Token"]=a().get("csrftoken")||"");const p=u?{}:c,h=new Request(e,Object.assign({headers:Object.assign({},p,m,r,{Accept:"application/json","X-Request-Id":(0,n.nanoid)()}),method:s,credentials:"same-origin"},d)),E=await fetch(h);return E.ok||await async function(e,t){const{status:s}=t;let n,r;try{n=await t.json()}finally{r=n&&n.code||s}throw new o.LG(s,r,"Request failed")}(0,E),async function(e){if(e.status!==i._2)try{return await e.clone().json()}catch(t){return e.clone().text()}}(E)}const d=u},83573:(e,t,s)=>{"use strict";s.d(t,{r:()=>r});var n=s(34038);const r=e=>{if(!e)return e;const t=e.trim();return n.X.test(t)?"mailto:".concat(t):e}},4400:(e,t,s)=>{"use strict";s.d(t,{T$:()=>i,Ru:()=>u,vM:()=>d,Ig:()=>m});var n=s(96540),r=s(91378);function a(e,t){return!e||t||"string"!=typeof e?e:(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e.toString()}})}function i(e){return e&&e.code?{id:e.code,keyset:"api-errors"}:{id:"fetch-error",keyset:"errors"}}let o="undefined"==typeof window?{}:window.TRANSLATIONS,l="ru";function c(e){return function(t){var s;const{id:r,keyset:i="common",params:c,escape:u,useLanguage:d}=t,m=o[null!=d?d:l],p=null==m||null==(s=m[i])?void 0:s[r];let h=void 0!==p?p:r;if(!c)return a(h,u);if(Array.isArray(h)&&(h=c.count||0===c.count?function(e,t){if(0===e)return t[3]||t[2];const s=e%10,n=e%100;return 1===s&&11!==n?t[0]:s>=2&&s<=4&&(n<10||n>=20)?t[1]:t[2]}(c.count,h):h.toString()),e.plainText)return Object.keys(c).reduce(((e,t)=>e.replace("{".concat(t,"}"),c[t].toString())),h);const E=Object.keys(c).reduce(((e,t)=>e.replace("{".concat(t,"}"),"__{".concat(t,"}__"))),h).split("__").filter(Boolean).map((e=>{return a((s=e).startsWith("{")&&s.endsWith("}")?c[(t=e,t.substr(1,t.length-2))]:e,u);var t,s}));return(0,n.createElement)(n.Fragment,null,...E)}}const u={element:e=>c({plainText:!1})(e),text:e=>c({plainText:!0})(Object.assign({},e,{escape:!0})),markdown:e=>n.createElement(r.n,null,u.text(e))},d=e=>{e&&(o=e)},m={set:e=>{l=e},get:()=>l,getAvailable:()=>{var e,t;return null!=(e=null==(t=window)?void 0:t.LANGUAGES)?e:[]}}},40736:(e,t,s)=>{"use strict";s.d(t,{I:()=>m});var n=s(16854),r=s(84483),a=s(69124);const i={[r.Z.SolutionsTable]:{pageSize:20,columnsSettings:{[a.V.Student]:{hidden:!1,alwaysVisible:!0},[a.V.Solution]:{hidden:!1,alwaysVisible:!0},[a.V.Task]:{hidden:!1,alwaysVisible:!1},[a.V.Tag]:{hidden:!1,alwaysVisible:!1},[a.V.Lesson]:{hidden:!1,alwaysVisible:!1},[a.V.Variant]:{hidden:!0,alwaysVisible:!1},[a.V.Status]:{hidden:!1,alwaysVisible:!0},[a.V.SubmissionsCount]:{hidden:!1,alwaysVisible:!0},[a.V.UpdatedAt]:{hidden:!1,alwaysVisible:!0}}},[r.Z.TasksTable]:{pageSize:20,columnsSettings:{[a.V.Task]:{hidden:!1,alwaysVisible:!0},[a.V.Tag]:{hidden:!1,alwaysVisible:!1},[a.V.Lesson]:{hidden:!1,alwaysVisible:!0},[a.V.Status]:{hidden:!1,alwaysVisible:!0},[a.V.Deadline]:{hidden:!1,alwaysVisible:!0},[a.V.UpdatedAt]:{hidden:!1,alwaysVisible:!0}}},[r.Z.LessonFilterPreferences]:{},[r.Z.SolutionDrafts]:{}},o={1:{forward:e=>{e.set(r.Z.LessonFilterPreferences,i[r.Z.LessonFilterPreferences])},backward:e=>{e.remove(r.Z.LessonFilterPreferences)}},2:{forward:e=>{e.set(r.Z.SolutionDrafts,i[r.Z.SolutionDrafts])},backward:e=>{e.remove(r.Z.SolutionDrafts)}},3:{forward:e=>{e.set(r.Z.SolutionsTable,i[r.Z.SolutionsTable])},backward:()=>{}},4:{forward:e=>{e.set(r.Z.TasksTable,i[r.Z.TasksTable])},backward:e=>{e.remove(r.Z.TasksTable)}}};class l extends Error{constructor(e,t){super(),this.code=void 0,this.webStorage=void 0,this.code=e,this.webStorage=t,Object.setPrototypeOf(this,new.target.prototype)}}function c(e,t){return Array.from({length:t-e},((t,s)=>s+e))}class u{constructor(){this.data={}}get length(){return Object.keys(this.data).length}setItem(e,t){this.data[e]=t}getItem(e){return e in this.data?this.data[e]:null}removeItem(e){delete this.data[e]}clear(){this.data={}}key(e){const t=Object.keys(this.data);return e in t?t[e]:null}}let d=function(e){return e[e.Local=0]="Local",e[e.Session=1]="Session",e[e.Fallback=2]="Fallback",e}({});const m=new class{get isInitialized(){return null!==this.get(this.versionKey)}constructor(e){let{version:t,versionKey:s,type:n,defaultState:r}=e;if(this.version=void 0,this.type=void 0,this.defaultState=void 0,this.storage=void 0,this.versionKey=void 0,this.version=t,this.defaultState=r,this.versionKey=s,n===d.Fallback||!function(e){const t="test";try{const s=e===d.Local?localStorage:sessionStorage;return s.setItem(t,t),s.removeItem(t),!0}catch(e){return!1}}(n))return this.type=d.Fallback,void(this.storage=new u);this.type=n,this.storage=n===d.Local?localStorage:sessionStorage}set(e,t){this.storage.setItem(e,JSON.stringify(t))}get(e){const t=this.storage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(t){const s=this.defaultState[e];return this.set(e,s),s}}remove(e){this.storage.removeItem(e)}clear(){this.storage.clear()}applyState(e,t){this.clear();for(const e of Object.keys(t))this.set(e,t[e]);this.set(this.versionKey,e)}applyDefault(){this.applyState(this.version,this.defaultState)}migrate(e){const t=this.get(this.versionKey);if(null===t)throw new l("storage-uninitialized",this);t!==this.version&&(t<this.version?this.migrateForward(e,t):this.migrateBackward(e,t),this.set(this.versionKey,this.version))}migrateForward(e,t){const s=c(t+1,this.version+1);if(s.some((t=>!e[t])))throw new l("some-migrations-missing",this);s.forEach((t=>{e[t].forward(this)}))}migrateBackward(e,t){const s=c(this.version+1,t+1).reverse();if(s.some((t=>!e[t])))throw new l("some-migrations-missing",this);s.forEach((t=>{e[t].backward(this)}))}}({version:4,versionKey:"db:version",type:d.Local,defaultState:i});if(m.isInitialized)try{m.migrate(o)}catch(e){m.applyDefault(),n.W.captureException(e)}else m.applyDefault()},84483:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});let n=function(e){return e.SolutionsTable="solutions:solutions-table",e.TasksTable="tasks:tasks-table",e.LessonFilterPreferences="lessons:filter",e.SolutionDrafts="solutions:drafts",e.WizardViewedHints="wizard:hints",e.SavedSolutions="solutions:saved-solution",e.ModuleStates="modules:state",e}({})},85867:(e,t,s)=>{"use strict";s.d(t,{B:()=>r});var n=s(5802);const r=e=>{const t=new MutationObserver((()=>{window.chatWidget&&(window.chatWidget.addListener("chatShow",(()=>{e&&e.users&&e.users.user&&e.users.user.uid&&(0,n.n_)("QScreenChat",{uid:e.users.user.uid})})),t.disconnect())}));t.observe(document.body,{childList:!0,subtree:!1})}},74567:(e,t,s)=>{"use strict";s.d(t,{DQ:()=>o,gW:()=>a,od:()=>r,rT:()=>i});var n=s(91644);function r(e){return Object.keys(n.Z).find((t=>n.Z[t]===e))||n.A.PYTHON}function a(e){return n.Z[e]||n.Z.default}function i(e){return e.replace(/^[^\.]*/,"")||n.A.PYTHON}function o(e){return a(i(e))}},93695:(e,t,s)=>{"use strict";s.d(t,{BB:()=>i,ZZ:()=>u,_x:()=>o,at:()=>c,oi:()=>l,uy:()=>d});var n=s(5882),r=s(54938),a=s(31330);const i="/courses/:courseId/groups/:groupId",o={root:new n.s("/_internal_"),calendar:new n.s("/_internal_/calendar")},l={root:new n.s("/"),courses:new n.s("/courses"),courseDetails:new n.s(i),lessonDetails:new n.s("".concat(i,"/lessons/:lessonId")),lessonMaterial:new n.s("".concat(i,"/lessons/:lessonId/materials/:materialId"))},c={courseTasks:new n.s("".concat(i,"/tasks")),courseProgress:new n.s("".concat(i,"/progress")),courseReviews:new n.s("".concat(i,"/reviews")),lessonTasks:new n.s("".concat(i,"/lessons/:lessonId/tasks")),taskDetails:new n.s("".concat(i,"/lessons/:lessonId/tasks/:taskId")),solutionReview:new n.s("".concat(i,"/lessons/:lessonId/tasks/:taskId/reviews/:reviewId?")),lessonProblem:new n.s("".concat(i,"/lessons/:lessonId/problems/:problemLinkId"))},u={courseSolutions:new n.s("".concat(i,"/solutions")),courseReviews:new n.s("".concat(i,"/reviews")),courseProgress:new n.s("".concat(i,"/progress")),courseAttendance:new n.s("".concat(i,"/progress/attendance")),courseVariants:new n.s("".concat(i,"/progress/variants")),lessonProgress:new n.s("".concat(i,"/lessons/:lessonId/progress")),task:new n.s("".concat(i,"/lessons/:lessonId/tasks/:taskId")),taskSolutions:new n.s("".concat(i,"/lessons/:lessonId/tasks/:taskId/solutions/:solutionId?")),solutionReview:new n.s("".concat(i,"/lessons/:lessonId/tasks/:taskId/reviews/:reviewId")),problemSolution:new n.s("".concat(i,"/lessons/:lessonId/problem/:problemLinkId/solution/:solutionId?"))},d=Object.assign({},(0,a.j)("hrds-reports")&&{hrdsTeacherReports:new n.s("/reports"),hrdsTeacherReport:new n.s("/report/:reportId")});(0,r.k)(u,c,l,o,d)},34038:(e,t,s)=>{"use strict";s.d(t,{R:()=>n,X:()=>r});const n=/^(?=.+)(?:[1-9]\d*|0)?(?:\.\d+)?$/,r=/^(?:[\0-\x08\x0E-\x1F!-\?A-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+@(?:[\0-\x08\x0E-\x1F!-\?A-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+\.(?:[\0-\x08\x0E-\x1F!-\?A-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/},61547:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var n=s(5882);const r={apiMyCourses:new n.s("/api/courses/unified"),apiCourseDetails:new n.s("/api/courses/:courseId([0-9]+)"),apiCourseInvites:new n.s("/api/invites/group/:groupId([0-9]+)"),apiCourseProgress:new n.s("/api/:role/courses/:courseId([0-9]+)/progress"),apiSetBonusScore:new n.s("/api/courses/:courseId([0-9]+)/progress"),apiCourseVariants:new n.s("/api/courses/:courseId([0-9]+)/variants"),apiExpelStudent:new n.s("/api/courses/:courseId([0-9]+)/expel"),apiCourseBanners:new n.s("/api/courses/banners"),apiCourseLogo:new n.s("/api/courses/:courseId([0-9]+)/logo"),apiCourseCreateChat:new n.s("/api/courses/chat/create"),apiCourseCreateGroup:new n.s("/api/courses/:courseId/groups"),apiCourseSearch:new n.s("/api/proxy/courses/:courseId/group/:groupId/search/"),apiStudentLessons:new n.s("/api/student/lessons"),apiTeacherLessons:new n.s("/api/teacher/lessons"),apiStudentLessonDetails:new n.s("/api/student/lessons/:lessonId([0-9]+)"),apiTeacherLessonDetails:new n.s("/api/teacher/lessons/:lessonId([0-9]+)"),apiTeacherLessonProgress:new n.s("/api/teacher/lessons/:lessonId([0-9]+)/progress"),apiTeacherLessonProgressPreview:new n.s("/api/teacher/lessons/:lessonId([0-9]+)/progress/preview"),apiChangeLessonVisibility:new n.s("/api/teacher/lessons/:lessonId([0-9]+)/visibility"),apiAssignVariant:new n.s("/api/teacher/lessons/:lessonId([0-9]+)/variants/:variantId([0-9]+)/assign"),apiShuffleVariants:new n.s("/api/teacher/lessons/:lessonId([0-9]+)/variants/shuffle"),apiTestTimer:new n.s("/api/student/lessons/timer"),apiStartTest:new n.s("/api/student/lessons/:lessonId([0-9]+)/start"),apiFinishTest:new n.s("/api/student/lessons/:lessonId([0-9]+)/finish"),apiStartWebinar:new n.s("/api/teacher/webinars/lesson/:lessonId([0-9]+)/group/:groupId([0-9]+)/start"),apiWebinarStatus:new n.s("/api/teacher/webinars/lesson/:lessonId([0-9]+)/group/:groupId([0-9]+)/status"),apiStudentProblemSolution:new n.s("/api/student/problem/solution"),apiProblemDetails:new n.s("/api/problem/details"),apiStudentProblemSubmission:new n.s("/api/student/problem/submission"),apiTeacherProblemSolutions:new n.s("/api/teacher/problem/solutions"),apiAssignProblemVariant:new n.s("/api/teacher/assign-variant"),apiStudentMaterialList:new n.s("/api/student/lessons/:lessonId([0-9]+)/groups/:groupId([0-9]+)/materials"),apiTeacherMaterialList:new n.s("/api/teacher/lessons/:lessonId([0-9]+)/groups/:groupId([0-9]+)/materials"),downloadMaterial:new n.s("/download/materials/:materialId([0-9]+)"),apiStudentDetailedMaterial:new n.s("/api/student/materials/:materialId([0-9]+)"),apiTeacherDetailedMaterial:new n.s("/api/teacher/materials/:materialId([0-9]+)"),apiStudentLessonTasks:new n.s("/api/student/lessonTasks"),apiTeacherLessonTasks:new n.s("/api/teacher/lessonTasks"),apiStudentP2pTasks:new n.s("/api/proxy/student/student/my/task_solution_review"),apiStudentTasks:new n.s("/api/student/tasks"),apiStudentTasksFilters:new n.s("/api/student/tasks/filters"),apiStudentTasksUnsolved:new n.s("/api/student/tasks/unsolved"),apiStudentTasksSkip:new n.s("/api/proxy/student/tasks/:taskId([0-9]+)/skip/"),apiDetailedStudentTask:new n.s("/api/student/tasks/:taskId([0-9]+)"),apiDetailedTeacherTask:new n.s("/api/teacher/tasks/:taskId([0-9]+)"),apiSolutionPreview:new n.s("api/solutions/:solutionId([0-9]+)/preview/"),apiTeacherTaskSolutions:new n.s("/api/teacher/tasks/:taskId([0-9]+)/solutions"),apiTeacherTaskNoSolutions:new n.s("/api/teacher/solutions/no_solution"),apiStudentSubmission:new n.s("/api/student/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)/submission"),apiTeacherSubmission:new n.s("/api/teacher/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)/submission"),apiTeacherSolutionList:new n.s("/api/teacher/solutions"),apiTeacherSolutionFilters:new n.s("/api/teacher/solutions/filters"),apiStudentSolutionDetails:new n.s("/api/student/solutions/:solutionId([0-9]+)"),apiTeacherSolutionDetails:new n.s("/api/teacher/solutions/:solutionId([0-9]+)"),apiSendSolution:new n.s("/api/student/solutions/:solutionId([0-9]+)/comments/files"),apiSendProblemSolution:new n.s("/api/student/solutions/:solutionId([0-9]+)/attempt"),apiGradeSolution:new n.s("/api/teacher/solutions/:solutionId([0-9]+)"),apiRejudgeSolution:new n.s("/api/teacher/solutions/:solutionId([0-9]+)"),apiP2PReviewDetails:new n.s("/api/:role/solution/reviews/:reviewId([0-9]+)"),apiP2PReviewList:new n.s("/api/proxy/:role/solutions/reviews"),apiP2PReviewGrade:new n.s("/api/proxy/:role/solutions/reviews/:reviewId([0-9]+)/"),apiStudentSolutionComments:new n.s("/api/student/solutions/:solutionId([0-9]+)/comments-v2"),apiTeacherSolutionComments:new n.s("/api/teacher/solutions/:solutionId([0-9]+)/comments"),apiAddStudentSolutionComment:new n.s("/api/student/solutions/:solutionId([0-9]+)/comments"),apiAddTeacherSolutionComment:new n.s("/api/teacher/solutions/:solutionId([0-9]+)/comments"),apiEditStudentSolutionComment:new n.s("/api/student/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)"),apiEditTeacherSolutionComment:new n.s("/api/teacher/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)"),apiParentInvites:new n.s("/api/invites/parent/:userId([0-9]+)")}},42325:(e,t,s)=>{"use strict";function n(e){return Boolean(e.event)}function r(e){return!e.event&&Boolean(e.lesson)}function a(e){return e.length>0&&n(e[0])}function i(e){return a(e.slots)}s.d(t,{Hr:()=>r,Io:()=>i,nW:()=>a,y$:()=>n})},89970:(e,t,s)=>{"use strict";function n(e){return Boolean(e.eventId)}s.d(t,{i:()=>n})},72420:(e,t,s)=>{"use strict";s.d(t,{nv:()=>r,rY:()=>n});let n=function(e){return e[e.ShowAll=0]="ShowAll",e[e.ShowPublished=1]="ShowPublished",e[e.ShowUnpublished=2]="ShowUnpublished",e}({}),r=function(e){return e.Normal="normal",e.Test="test",e}({})},87702:(e,t,s)=>{"use strict";s.d(t,{U3:()=>a,yo:()=>n,zh:()=>r});let n=function(e){return e.Problem="problem",e.Task="task",e}({});const r=e=>Boolean(e.id);let a=function(e){return e.correctAnswer="correct-answer",e}({})},64237:(e,t,s)=>{"use strict";s.d(t,{Yx:()=>i,bU:()=>o,fb:()=>a,gt:()=>n,s6:()=>r});let n=function(e){return e.Review="review",e.AutoReview="auto-review",e.SamplesPassed="samples-passed",e.Rework="rework",e.Accepted="accepted",e.AcceptedAfterDeadline="accepted-after-deadline",e.New="new",e.Draft="draft",e.Wrong="wrong",e.PartialAccepted="partial-accepted",e.NotSolved="not-solved",e.Uploaded="uploaded",e.AssignedToP2p="assigned-to-p2p",e.OnClarifying="on-clarifying",e}({});const r={[n.AutoReview]:1,[n.Review]:2,[n.SamplesPassed]:42,[n.Rework]:3,[n.Accepted]:4,[n.AcceptedAfterDeadline]:5,[n.Draft]:6,[n.New]:7,[n.Wrong]:8,[n.PartialAccepted]:9,[n.NotSolved]:10,[n.Uploaded]:39,[n.AssignedToP2p]:40,[n.OnClarifying]:41},a={[n.Review]:"status-waiting-for-review",[n.AutoReview]:"status-waiting-for-review",[n.SamplesPassed]:"status-samples-passed",[n.Rework]:"status-rework",[n.Accepted]:"status-accepted",[n.AcceptedAfterDeadline]:"status-accepted-after-deadline",[n.New]:"status-new",[n.Draft]:"status-draft",[n.Uploaded]:"status-uploaded",[n.AssignedToP2p]:"status-assigned-to-p2p",[n.OnClarifying]:"status-on-clarifying"},i={[n.Review]:"status-on-manual-review",[n.AutoReview]:"status-on-auto-review",[n.SamplesPassed]:"status-samples-passed",[n.Rework]:"status-rework",[n.Accepted]:"status-accepted",[n.AcceptedAfterDeadline]:"status-accepted-after-deadline",[n.New]:"status-new",[n.Draft]:"status-draft",[n.Uploaded]:"status-uploaded",[n.AssignedToP2p]:"status-assigned-to-p2p",[n.OnClarifying]:"status-on-clarifying"},o=[n.AutoReview,n.Uploaded,n.AssignedToP2p,n.OnClarifying,n.Review,n.Rework,n.Wrong,n.Accepted,n.AcceptedAfterDeadline,n.SamplesPassed]},89685:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});let n=function(e){return e.ASCENDING="asc",e.DESCENDING="desc",e}({})},89490:(e,t,s)=>{"use strict";s.d(t,{a:()=>n});let n=function(e){return e.Enrolled="enrolled",e.Expelled="expelled",e.Graduated="graduated",e.ToBeExpelled="to-be-expelled",e}({})},69124:(e,t,s)=>{"use strict";s.d(t,{E:()=>n,V:()=>r});let n=function(e){return e.Solutions="solutions:solutions-table",e.Tasks="tasks:tasks-table",e}({}),r=function(e){return e.Student="student",e.Solution="solution",e.Task="task",e.Tag="tag",e.Lesson="lesson",e.Variant="variant",e.Status="status",e.SubmissionsCount="submissionsCount",e.Deadline="deadline",e.UpdatedAt="updatedAt",e.ReviewedAt="reviewTime",e.ReviewStatus="review_status",e.Teacher="teacher",e}({})},74115:(e,t,s)=>{"use strict";s.d(t,{cl:()=>n,ql:()=>a,wP:()=>r});let n=function(e){return e.Classwork="classwork",e.Homework="homework",e.Additional="additional",e.Additional2="additional-2",e.Additional3="additional-3",e.Additional4="additional-4",e.ControlWork="control-work",e.IndividualWork="individual-work",e.BasicTask="basic",e.TestTask="test",e.ReadOnline="read-online",e.SolveOnline="solve-online",e.Another="another",e}({}),r=function(e){return e.Other="other",e.Material="material",e.Problem="schoolbook_markers",e}({}),a=function(e){return e.New="new",e.Max="max",e}({})},44473:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,R2:()=>n.R2,Ud:()=>l,V3:()=>o,dw:()=>n.dw,km:()=>c});var n=s(96285);const r=["defaultLocale"],a={en:{defaultLocale:"en-GB",hourCycle:"h12"}};let i={};function o(e){var t;const s=null!=(t=a[e])?t:{defaultLocale:e},{defaultLocale:o}=s,l=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(s,r);i=l,n.wB.defaultLocale=o}function l(e){const t=new Date,s=e%7-t.getDay();return t.setDate(t.getDate()+s),n.c9.fromJSDate(t).toLocaleString({weekday:"short"}).toUpperCase()}const c=e=>{const t={TimeSimple:Object.assign({},n.c9.TIME_SIMPLE),TimeSimpleWithWeekday:Object.assign({},n.c9.TIME_SIMPLE,{weekday:"short",timeZoneName:void 0}),DateTimeMedWithoutYear:Object.assign({},n.c9.DATETIME_FULL,{month:"short",year:void 0,timeZoneName:void 0}),DateTimeFullWithoutYear:Object.assign({},n.c9.DATETIME_FULL,{year:void 0,timeZoneName:void 0}),DateMedWithoutYear:Object.assign({},n.c9.DATE_MED,{year:void 0}),DateFullWithoutYear:Object.assign({},n.c9.DATE_FULL,{year:void 0})};return Object.assign({},t[e],i)},u=n.c9},31330:(e,t,s)=>{"use strict";var n,r,a,i;s.d(t,{j:()=>m});let o=function(e){return e.default="default",e.experiment="experiment",e}({});const l=("undefined"!=typeof window?window.FEATURES_SET:null==(n=process)||null==(r=n.env)?void 0:r.FEATURES_SET)||o.default,c=("undefined"!=typeof window?window.HRDS_REPORTS:null==(a=process)||null==(i=a.env)?void 0:i.HRDS_REPORTS)||"false",u={[o.default]:l===o.default||l===o.experiment,[o.experiment]:l===o.experiment},d={"slow-down-comments-polling":u.experiment,"hrds-reports":"true"===c,"show-p2p-grade-detalization-to-student-only-after-deadline":u.default};function m(e){return d[e]}},54938:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});const n=function(){const e=new Set;for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return s.forEach((t=>{for(const[s,n]of Object.entries(t)){const t=n.template.split("/").filter(Boolean)[0];t&&e.add(t)}})),[...e]}},5802:(e,t,s)=>{"use strict";s.d(t,{av:()=>r,n_:()=>a});var n=s(35764);function r(e,t){(0,n.Ay)("hit",e,t)}function a(e,t){(0,n.Ay)("reachGoal",e,t)}},5820:(e,t,s)=>{"use strict";s.d(t,{n:()=>n});const n=e=>e.includes("yango.com")},20009:(e,t,s)=>{"use strict";s.d(t,{X:()=>r});var n=s(5882);const r={profile:new n.s("/api/profile"),profileCourses:new n.s("/api/profile/courses"),foreignProfile:new n.s("/api/profile/:userId"),foreignProfileCourses:new n.s("/api/profile/:userId/courses")}},47920:(e,t,s)=>{"use strict";s.d(t,{B:()=>n,K:()=>r});let n=function(e){return e.Elective="elective",e.Lesson="lesson",e.Reserve="reserve",e.Test="test",e.Skip="skip",e}({}),r=function(e){return e.Assign="assign",e.Edit="edit",e.Skip="skip",e.Swap="swap",e}({})},97520:(e,t,s)=>{"use strict";function n(e,t){for(let s=e.length-1;s>=0;--s)if(t(e[s]))return s;return-1}function r(e,t){for(let s=e.length-1;s>=0;--s)if(t(e[s]))return e[s]}s.d(t,{K:()=>n,U:()=>r})},91992:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a,j:()=>r.classnames});var n=s(82907),r=s(38228);const a=(0,n.withNaming)({e:"__",m:"_"})},74291:(e,t,s)=>{"use strict";s.d(t,{LG:()=>l,Cf:()=>n,D3:()=>a,Di:()=>r,dH:()=>i,gs:()=>o});class n extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e),this.name="BaseError",this.extra=void 0,this.causes=void 0,this.extra=t,this.causes=s,Object.setPrototypeOf(this,new.target.prototype)}}class r extends n{constructor(){super(...arguments),this.name="InvalidArgumentError"}}class a extends n{constructor(){super(...arguments),this.name="InitializationError"}}class i extends n{constructor(){super(...arguments),this.name="NoRequiredDataError"}}class o extends n{constructor(){super(...arguments),this.name="UnsupportedDataTypeError"}}class l extends n{constructor(e,t,s){super(s,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},arguments.length>4&&void 0!==arguments[4]?arguments[4]:null),this.name="APIError",this.code=void 0,this.statusCode=void 0,this.code=t,this.statusCode=e}}},9928:(e,t,s)=>{"use strict";s.d(t,{BM:()=>c,C6:()=>a,OX:()=>l,_2:()=>r,dJ:()=>o,xW:()=>i,z3:()=>n});const n=e=>e>=500&&e<=599,r=204,a=401,i=403,o=404,l=500,c=503},5882:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var n=s(86663),r=s(42306),a=s(4398),i=s.n(a);class o{constructor(e){this.template=void 0,this.pathGenerator=void 0,this.template=e,this.pathGenerator=(0,r.compile)((e=>e.replaceAll("([0-9]+)","").replace(/(\/?):([^\/\?]+)\?/g,"{$1:$2}"))(e))}build(e,t){const s=this.pathGenerator(i()(null!=e?e:{},((e,t,s)=>{"number"==typeof t&&(t=String(t)),e[s]=t}),{}));if(!t||0===Object.keys(t).length)return s;const r=(0,n.stringify)(t);return r?"".concat(s,"?").concat(r):s}}}},e=>{var t=t=>e(e.s=t);e.O(0,[715,17],(()=>(t(7452),t(73184)))),e.O()}]);
